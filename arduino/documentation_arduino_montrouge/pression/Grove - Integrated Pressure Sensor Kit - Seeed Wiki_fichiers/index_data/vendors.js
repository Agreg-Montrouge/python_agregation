(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){var u,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(e,t){return u.call(t),l(e,t)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,u):[u]}return{exports:e,options:c}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return a}));var r={isNotouch:"is-notouch",isTouch:"is-touch",isOpened:"is-opened",isActive:"is-active",isSelected:"is-selected",isError:"is-error"},i=(window,function(e){return"function"==typeof e}),o={tl:"top-left",tr:"top-right",bl:"bottom-left",br:"bottom-right"},a={set:function(e){var t=e.id,n=e.component;window.__afsComponents||(window.__afsComponents={}),window.__afsComponents[t]=n},get:function(e){return window.__afsComponents&&window.__afsComponents[e]},delete:function(e){!window.__afsComponents||window.__afsComponents&&!window.__afsComponents[e]||delete window.__afsComponents[e]}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var r=n(1);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(e){return e?"is-".concat(e,"-theme"):"is-dark-theme"},a=function(e,t){return"".concat(e,"__").concat(t)},s=function(e,t){var n;return i(n={},"".concat(e,"_radius-tl"),-1!==t.indexOf(r.d.tl)),i(n,"".concat(e,"_radius-tr"),-1!==t.indexOf(r.d.tr)),i(n,"".concat(e,"_radius-bl"),-1!==t.indexOf(r.d.bl)),i(n,"".concat(e,"_radius-br"),-1!==t.indexOf(r.d.br)),n}},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.componentType,e._g(e._b({tag:"component",staticClass:"afs-typography",class:[e.typeClass,e.textEllipsisClass]},"component",e.$attrs,!1),e.$listeners),[e._t("default",null,{getBEMClass:e.getBEMClass})],2)};r._withStripped=!0;var i=n(2),o=["large title","medium title","title","paragraph","single line","hint","tooltip","group","sticker","text"],a={name:"AfsText",props:{type:{type:String,default:"paragraph",validator:function(e){return o.includes(e)}},inline:{type:Boolean,default:!1},ellipsis:{type:Boolean,default:!1},tag:{type:String,default:""}},computed:{checkType:function(){return{isLargeTitle:"large title"===this.type,isMediumTitle:"medium title"===this.type,isTitle:"title"===this.type,isParagraph:"paragraph"===this.type,isSingleLine:"single line"===this.type,isHint:"hint"===this.type,isTooltip:"tooltip"===this.type,isGroup:"group"===this.type,isSticker:"sticker"===this.type,isText:"text"===this.type}},textEllipsisClass:function(){return{"afs-typography_ellipsis":this.checkType.isSingleLine||this.ellipsis}},typeClass:function(){var e=this.checkType,t="afs-typography_";return e.isLargeTitle?t+"large-title":e.isMediumTitle?t+"medium-title":e.isTitle?t+"title":e.isSingleLine?t+"single-line":e.isHint||e.isTooltip?t+"hint-tooltip":e.isGroup?t+"group":e.isSticker?t+"sticker":e.isText?t+"text":t+"paragraph"},componentType:function(){return this.tag?this.tag:this.inline?"span":"div"}},methods:{getBEMClass:function(e){return Object(i.a)("afs-typography",e)}}},s=(n(50),n(0)),u=Object(s.a)(a,r,[],!1,null,null,null);u.options.__file="WebUI/VueJsComponentLibrary/src/components/Text/App.vue";var c=u.exports;t.a=c},function(e,t,n){"use strict";t.a=function(e){return e.$data&&e.$data.afsConfig?e.$data.afsConfig:window.__APP__&&window.__APP__.afsConfig?window.__APP__.afsConfig:{}}},function(e,t,n){"use strict";var r=n(27);t.a=r.a},function(e,t,n){"use strict";n.d(t,"q",(function(){return u})),n.d(t,"n",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return h})),n.d(t,"f",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"z",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"v",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"D",(function(){return w})),n.d(t,"r",(function(){return _})),n.d(t,"u",(function(){return O})),n.d(t,"j",(function(){return C})),n.d(t,"B",(function(){return S})),n.d(t,"l",(function(){return x})),n.d(t,"C",(function(){return P})),n.d(t,"y",(function(){return A})),n.d(t,"s",(function(){return M})),n.d(t,"t",(function(){return j})),n.d(t,"w",(function(){return D})),n.d(t,"b",(function(){return I})),n.d(t,"k",(function(){return R})),n.d(t,"m",(function(){return L})),n.d(t,"i",(function(){return B})),n.d(t,"a",(function(){return N})),n.d(t,"o",(function(){return U})),n.d(t,"x",(function(){return F})),n.d(t,"p",(function(){return $})),n.d(t,"A",(function(){return V}));var r,i,o=n(9),a=window.__CORE__,s=Object(o.c)("data-subject-guid",""),u=!1,c=!1,l=Object(o.c)("data-project-src",""),f="true"===Object(o.c)("data-is-local-debug","").toLowerCase(),d=Object(o.c)("data-service-base-url",""),h=Object(o.c)("data-release-guid",""),p=Object(o.c)("data-page-url",""),m=Object(o.c)("data-analytics-subject",""),v=Object(o.c)("data-session-id","").trim(),y=Object(o.c)("data-comment-session-id",""),g=s||(null===(r=a.response)||void 0===r||null===(i=r.designId)||void 0===i?void 0:i.toUpperCase())||"",b=Object(o.c)("data-comment-cloud-url",""),w=Object(o.c)("data-user-name",""),_=Object(o.c)("data-is-user-admin",!1),O=Object(o.c)("data-local-user-id",""),C=Object(o.c)("data-global-user-id",""),S=Object(o.c)("data-user-avatar",""),x=Object(o.c)("data-ids-cloud-url",""),k=Object(o.c)("data-ids-service-url",""),E=Object(o.c)("data-push-service-url",""),T=Object(o.c)("data-push-cloud-url",""),P=Object(o.c)("data-user-avatar-template",""),A=Object(o.c)("data-saveto-url","").trim(),M="True"===Object(o.c)("data-is-wip-sharing-mode","True"),j=u?x:f?k:"/ids/?cls=soap",D=u?T:f?E:"".concat(d,"/websocket/WebService.asmx"),I=Object(o.c)("data-allow-comments-without-thread-group",!1),R=Object(o.c)("data-hide-fabrication-comments",!1),L=(Object(o.c)("data-is-external-user",!1),Object(o.c)("data-is-anonymous",!1)),B=Object(o.c)("data-enabled-sharing",!1),N=Object(o.c)("data-active-thread",""),U=(Object(o.c)("data-is-ccv",""),Object(o.c)("data-can-download",!0),"gerber"===Object(o.c)("data-active-view","")),F=Object(o.c)("data-register-url",""),$=Object(o.c)("data-comment-panel-hide",""),V=Object(o.c)("data-suggestions-context-guid","")},function(e,t,n){"use strict";n.r(t),n.d(t,"ColorHelper",(function(){return r.a})),n.d(t,"ColorScheme",(function(){return r.b})),n.d(t,"Point",(function(){return r.c})),n.d(t,"RenderMode",(function(){return r.d})),n.d(t,"Size",(function(){return r.e})),n.d(t,"Core",(function(){return i.a})),n.d(t,"PerformanceMonitor",(function(){return _})),n.d(t,"CanvasControl",(function(){return O})),n.d(t,"MouseButton",(function(){return C.a})),n.d(t,"MouseButtons",(function(){return C.b})),n.d(t,"AntiAliasingMethod",(function(){return x.b})),n.d(t,"AnimationType",(function(){return x.a})),n.d(t,"ObjectId",(function(){return x.e})),n.d(t,"Shape",(function(){return x.f})),n.d(t,"getObjectId",(function(){return x.g})),n.d(t,"getObjectIdName",(function(){return x.h})),n.d(t,"GraphiteResolver",(function(){return x.c})),n.d(t,"LibraryLoader",(function(){return x.d})),n.d(t,"Layer",(function(){return T.a})),n.d(t,"LayerGeometry",(function(){return T.c})),n.d(t,"LayerMap",(function(){return T.d})),n.d(t,"LayerConst",(function(){return T.b})),n.d(t,"HatchStyle",(function(){return E.a})),n.d(t,"Material",(function(){return E.b})),n.d(t,"MaterialManager",(function(){return E.c})),n.d(t,"MaterialMap",(function(){return E.d})),n.d(t,"LoadType",(function(){return b})),n.d(t,"PcbLoader",(function(){return I})),n.d(t,"Arc",(function(){return q.a})),n.d(t,"Label",(function(){return q.b})),n.d(t,"Line",(function(){return q.c})),n.d(t,"Uni",(function(){return q.g})),n.d(t,"Polygon",(function(){return q.d})),n.d(t,"PolygonInstance",(function(){return q.f})),n.d(t,"PolygonContour",(function(){return q.e})),n.d(t,"CameraGroupController",(function(){return k.a})),n.d(t,"Mesh",(function(){return k.c})),n.d(t,"MeshVertex",(function(){return k.e})),n.d(t,"MeshPart",(function(){return k.d})),n.d(t,"NodeContainer",(function(){return k.f})),n.d(t,"NodeItem",(function(){return k.g})),n.d(t,"RenderOptionFilter",(function(){return k.i})),n.d(t,"RenderOption",(function(){return k.h})),n.d(t,"Scene2D",(function(){return k.j})),n.d(t,"FixedView",(function(){return k.b})),n.d(t,"Scene3D",(function(){return k.k})),n.d(t,"ZoomToFitEventArgs",(function(){return k.n})),n.d(t,"SceneBase",(function(){return k.l})),n.d(t,"SceneOptions",(function(){return k.m})),n.d(t,"using",(function(){return S.b})),n.d(t,"TypedEvent",(function(){return S.a})),n.d(t,"PolygonFontData",(function(){return P.a})),n.d(t,"SymbolInfo",(function(){return P.f})),n.d(t,"PolygonFontLoader",(function(){return P.b})),n.d(t,"PolygonStringBuilder",(function(){return P.c})),n.d(t,"StringAlignment",(function(){return P.d})),n.d(t,"StringOptions",(function(){return P.e})),n.d(t,"TextBaseline",(function(){return P.g}));var r=n(51),i=n(80),o=n(230),a=n(37),s=n(100);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b,w=function(){function e(t){m(this,e),g(this,"canvas",void 0),g(this,"make",!1),this.canvas=this.initCanvas(t)}return y(e,[{key:"initCanvas",value:function(e){var t=this,n=e.canvas;return n.addEventListener("do-screenshot",(function(){t.make=!0,e.invalidate()})),n}},{key:"do",value:function(){if(this.make){this.make=!1;try{try{var e=this.canvas.toDataURL();this.canvas.dispatchEvent(new CustomEvent("did-screenshot",{detail:{data:e,error:null}}))}catch(e){this.canvas.dispatchEvent(new CustomEvent("did-screenshot",{detail:{data:null,error:e}}))}}catch(e){console.log("Dispatch [user_screenshot] event error. "+e.message)}}}}]),e}(),_=function(e){c(n,e);var t=f(n);function n(){var e;m(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return g(h(e=t.call.apply(t,[this].concat(i))),"fpsRequestId",-1),e}return y(n,[{key:"startFpsMeter",value:function(e){this.stopFpsMeter();var t=performance.now();this.requestAnimationFrame(t,t,0,0,e)}},{key:"stopFpsMeter",value:function(){window.cancelAnimationFrame(this.fpsRequestId),this.fpsRequestId=-1}},{key:"requestAnimationFrame",value:function(e,t,n,r,i){this.fpsRequestId=window.requestAnimationFrame(this.calculateFps.bind(this,e,t,n,r,i))}},{key:"calculateFps",value:function(e,t,n,r,i){var o=this,a=performance.now(),u=a-e;if(n+=u?Math.round(1e3/u):60,r++,a-t>i&&(t=a,r>0)){var c=Math.round(n/r);n=0,r=0,Object(s.a)((function(){return o.emit("aggregateFps",c)}))}this.requestAnimationFrame(a,t,n,r,i)}}]),n}(a.a),O=function(e){c(n,e);var t=f(n);function n(e,r,i){var a;return m(this,n),g(h(a=t.call(this)),"canvas",void 0),g(h(a),"resized",new o.a),g(h(a),"containerId",void 0),g(h(a),"peformanceMonitor",void 0),g(h(a),"documentFileSize",void 0),g(h(a),"invalidated",!1),g(h(a),"module",void 0),g(h(a),"requestId",-1),g(h(a),"renderBind",a.render.bind(h(a))),g(h(a),"backgroundColor",void 0),g(h(a),"screenshot",void 0),g(h(a),"logger",void 0),a.logger=window.__CORE__.createLogger("CanvasControl"),a.backgroundColor=i,"string"==typeof e||e instanceof HTMLDivElement?(a.canvas=document.createElement("canvas"),a.initControl(e)):a.canvas=e,a.canvas.style.position="absolute",a.initEvents(),a.module=r,a.module.canvas=a.canvas,a.screenshot=new w(h(a)),a.peformanceMonitor=new _,a}return y(n,[{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}},{key:"setBackground",value:function(e){this.canvas.style.background=r.a.rgbaToHex(e)}},{key:"initControl",value:function(e){var t=e instanceof HTMLDivElement?e:document.getElementById(e);if(null==t)throw new Error("Parent with id ".concat(e," did not found at DOM."));var n=this.canvas;n.id=e+"_graphic_document_viewer_canvas",n.tabIndex=0,n.oncontextmenu=function(){return!1},n.style.opacity="1",t.appendChild(this.canvas)}},{key:"initEvents",value:function(){var e=this,t=this.canvas,n=t.parentElement;window.addEventListener("resize",(function(){0!==n.clientWidth&&0!==n.clientHeight?(t.width=n.clientWidth,t.height=n.clientHeight,e.resized.emit(e)):e.logger.LogDebug("Canvas control resize")}))}},{key:"invalidate",value:function(){this.emit("invalidate"),this.invalidated=!0,this.scheduleNextRender()}},{key:"render",value:function(){if(this.invalidated){var e=performance.now();this.onPaint(this.canvas),this.peformanceMonitor.emit("renderTime",performance.now()-e,this.documentFileSize),this.screenshot.do(),this.scheduleNextRender(),this.invalidated=this.needRender,this.needRender||window.cancelAnimationFrame(this.requestId)}else this.scheduleNextRender()}},{key:"scheduleNextRender",value:function(){window.cancelAnimationFrame(this.requestId),this.requestId=window.requestAnimationFrame(this.renderBind)}},{key:"onPaint",value:function(e){}},{key:"needRender",get:function(){return!1}}]),n}(a.a),C=n(42),S=n(92),x=n(99),k=n(46),E=n(102),T=n(52),P=n(135),A=n(139),M=n(32);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e[e.Json=0]="Json",e[e.Binary=1]="Binary",e[e.BinaryZip=2]="BinaryZip",e[e.SceneBinZipStream=3]="SceneBinZipStream",e[e.SceneBinZipFile=4]="SceneBinZipFile"}(b||(b={}));var I=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),D(this,"scene2d",void 0),D(this,"scene3d",void 0),D(this,"measurementScene3d",void 0),D(this,"isBuilt",!1),D(this,"renderOptions",void 0),D(this,"beforeLoad",new S.a),D(this,"afterLoad",new S.a),D(this,"module",void 0),D(this,"commonCore",void 0),D(this,"wasmScene",void 0),D(this,"importedPcbNode",void 0),D(this,"logger",A.a.createLogger("PcbLoader")),this.module=t.module,this.commonCore=t.commonCore,A.a.bus.registerEvent("PcbLoader:onLoad")}var t,n,i;return t=e,(n=[{key:"load",value:function(e,t){this.loadData(e,t),A.a.bus.emit("PcbLoader:onLoad",e,t)}},{key:"loadData",value:function(e,t){this.isBuilt&&(this.isBuilt=!1,this.scene2d.dispose(),this.wasmScene.delete()),this.importPcb(e,t)}},{key:"loadFont",value:function(e){e(!0)}},{key:"onBeforeLoad",value:function(){this.beforeLoad.emit(this)}},{key:"onAfterLoad",value:function(e){var t=this;this.loadFont((function(n,r){!n&&r&&(e.scene2d.polygonStringBuilder=new P.c(r,t.scene2d),e.measurementScene3d.polygonStringBuilder=new P.c(r,t.measurementScene3d))})),this.afterLoad.emit(e)}},{key:"importPcb",value:function(e,t){try{if(t===b.SceneBinZipFile||t===b.SceneBinZipStream)return void this.importPcbScene(e,t);this.onBeforeLoad(),this.wasmScene=this.module.CreateScene(this.commonCore,new E.d,new T.d);var n,r=this.wasmScene.GetRootNode();switch(t){case b.Json:n=this.module.ImportPcb(this.wasmScene,r,e);break;case b.Binary:n=this.module.ImportPcbBinMem(this.wasmScene,r,e);break;case b.BinaryZip:n=this.module.ImportPcbBinZipMem(this.wasmScene,r,e)}this.importedPcbNode=n.Node;var i=this.createLayers(n.LayerMap),o={scene2d:this.createScene2d(i.slice(),n.MaterialMap2D.Materials),scene3d:this.createScene3d(i.slice(),n.MaterialMap3D.Materials),measurementScene3d:this.createMeasurementScene3d(),renderOptions:this.renderOptions,grayscaleMaterialMap:this.createGrayscaleMaterialMap(n.MaterialMap2D)};this.onAfterLoad(o),this.isBuilt=!0}catch(t){throw new M.b("Error: Import PCB to scenes.\nDetail: "+t,null==e?void 0:e.byteLength,!0)}}},{key:"importPcbScene",value:function(e,t){if(t===b.SceneBinZipFile||t===b.SceneBinZipStream)try{this.onBeforeLoad();var n=t===b.SceneBinZipStream?this.module.ImportSceneBinZipStream(this.commonCore,e):this.module.ImportSceneBinZipFile(this.commonCore,e);this.wasmScene=n.scene,this.importedPcbNode=this.wasmScene.GetRootNode().GetChild(0);var r=this.createLayers(this.importedPcbNode.GetLayerMap()),i=n.materials[0].Materials,o=n.materials[1]?n.materials[1].Materials:[],a={Name:"2DMaterials",Materials:i,CustomData:""},s={scene2d:this.createScene2d(r.slice(),i),scene3d:this.createScene3d(r.slice(),o),measurementScene3d:this.createMeasurementScene3d(),renderOptions:this.renderOptions,grayscaleMaterialMap:this.createGrayscaleMaterialMap(a)};this.onAfterLoad(s),this.isBuilt=!0}catch(t){throw new M.b("Error: Import PCB to scenes.\nDetail: "+t,null==e?void 0:e.byteLength,!0)}else this.logger.LogWarn("Incorrect loadType: ".concat(t," for importPcbScene."))}},{key:"createScene2d",value:function(e,t){return this.scene2d=new k.j(this.wasmScene,e.slice(),void 0,void 0),this.scene2d.antialiasing=x.b.Temporal,this.scene2d.updateRootNode(this.importedPcbNode),this.scene2d.setMaterials(t),this.renderOptions=this.createRenderOptions2d(e),this.scene2d.renderOptions=this.renderOptions.slice(),this.scene2d.setRectangle(0,0,this.module.canvas.width,this.module.canvas.height),this.scene2d.setOptions({min_text_size:18}),this.emitEventScene("GraphiteEngine:createdScene2D",this.scene2d),this.scene2d}},{key:"createScene3d",value:function(e,t){return this.scene3d=new k.k(this.wasmScene,e),this.scene3d.antialiasing=x.b.Temporal,this.scene3d.updateRootNode(this.importedPcbNode),null!=t&&t.length&&this.scene3d.setMaterials(t),this.scene3d.renderOptions=this.createRenderOptions3d(e),this.scene3d.setRectangle(0,0,this.module.canvas.width,this.module.canvas.height),this.emitEventScene("GraphiteEngine:createdScene3D",this.scene3d),this.scene3d}},{key:"createMeasurementScene3d",value:function(){var e=[],t=new T.a("layer 0",0,[0,.5]);return t.show3d=!0,e.push(t),this.measurementScene3d=new k.k(void 0,e,void 0),this.measurementScene3d.antialiasing=x.b.Supesampling,this.measurementScene3d}},{key:"emitEventScene",value:function(e,t){A.a.bus.emit(e,t)}},{key:"createLayers",value:function(e){for(var t=e.GetLayersCount(),n=t+1,r=0;r<n;r++){var i=t+r,o=e.GetLayer(r);if(o){var a=r==n-1||o.show3d,s=new T.a(T.b.SelectionLayerName,i,o.z_range,o.is_cutout,o.is_barrel,o.is_keepout,o.is_inverted,a);e.AddLayer(s)}else{var u=new T.a(T.b.SelectionLayerName,i,[.5,1]);u.show3d=!0,e.AddLayer(u)}}for(var c=[],l=e.GetLayersCount()-1;l>=0;l--){var f=e.GetLayer(l),d=new T.a(f.name,l,f.z_range,f.is_cutout,f.is_barrel,f.is_keepout,f.is_inverted,f.show3d);c[l]=d}return c}},{key:"createRenderOptions2d",value:function(e){return this.createRenderOptionsDefault(e)}},{key:"createRenderOptions3d",value:function(e){return this.createRenderOptionsDefault(e)}},{key:"createRenderOptionsDefault",value:function(e){var t=[];if(Array.isArray(e))e.forEach((function(e){return t.push(new k.h(e.index,e.name))}));else for(var n=e.GetLayersCount()-1;n>=0;n--){var r=e.GetLayer(n);r.show3d&&t.push(new k.h(n,r.name))}return t}},{key:"createGrayscaleMaterialMap",value:function(e){var t=e.Materials.map((function(e){var t=r.a.toGrayscale(e.Diffuse);return new E.b(t,e.Hatching,e.Bordered,!1,!0)}));return{Name:e.Name,Materials:t,CustomData:""}}}])&&j(t.prototype,n),i&&j(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),R=n(76);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=F(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function F(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=H(e)););return e}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H(e);if(t){var i=H(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(a,e);var t,n,r,o=V(a);function a(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"white";return B(this,a),W(G(n=o.call(this,e,t.module,r)),"pcbLoader",void 0),W(G(n),"_renderMode",R.a.Render2D),W(G(n),"lastId",0),W(G(n),"currentDocumentId",void 0),W(G(n),"renderer",null),n.pcbLoader=new I(t),n.onRendererChange=n.onRendererChange.bind(G(n)),n.onRendererFocus=n.onRendererFocus.bind(G(n)),n}return t=a,(n=[{key:"loadData",value:function(e,t,n,r){var o=this;return e.id||(this.lastId++,e.id="graphite_document_".concat(this.lastId)),e.id===this.currentDocumentId?Promise.resolve():new Promise((function(a,s){o.renderer&&(o.renderer.disable(),o.renderer.off("change",o.onRendererChange),o.renderer.off("focus",o.onRendererFocus)),o.renderer=null;var u=function(t){try{r||(r=[200,200,200]),(r=r.map((function(e){return e/255})))[3]=1,o.renderer=n,o.renderer.on("change",o.onRendererChange),o.renderer.on("focus",o.onRendererFocus),t.scene2d&&(t.scene2d.background=r),t.scene3d&&(t.scene3d.background=r),o.renderer.enable(t,o.canvas),o.canvas.focus(),o.invalidate(),i.a.bus.emit("GerberComparisonEngine:afterImportPCB",e),a()}catch(e){s(e)}};o.pcbLoader.afterLoad.on(u);try{o.pcbLoader.load(e.renderData,t)}finally{o.pcbLoader.afterLoad.off(u)}}))}},{key:"renderMode",get:function(){return this._renderMode},set:function(e){this._renderMode=e}},{key:"width",get:function(){var e,t;return null!==(e=null===(t=this.canvas)||void 0===t?void 0:t.width)&&void 0!==e?e:0}},{key:"height",get:function(){var e,t;return null!==(e=null===(t=this.canvas)||void 0===t?void 0:t.height)&&void 0!==e?e:0}},{key:"emit",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=U(H(a.prototype),"emit",this)).call.apply(t,[this,e].concat(r))}},{key:"onResize",value:function(){var e,t,n;0!==document.body.clientWidth&&0!==document.body.clientHeight&&(this.canvas.hidden=!0,this.canvas.width=(null===(e=document.getElementById(this.containerId))||void 0===e?void 0:e.clientWidth)||document.body.clientWidth,this.canvas.height=(null===(t=document.getElementById(this.containerId))||void 0===t?void 0:t.clientHeight)||document.body.clientHeight,this.canvas.hidden=!1,null===(n=this.renderer)||void 0===n||n.updateClientRectangle(this.width,this.height),this.invalidate(),this.emit("resized"))}},{key:"onPaint",value:function(){var e;null===(e=this.renderer)||void 0===e||e.render()}},{key:"initEvents",value:function(){var e=this;window.addEventListener("resize",(function(){return e.onResize()}))}},{key:"onRendererChange",value:function(){this.invalidate()}},{key:"onRendererFocus",value:function(){this.canvas.focus()}},{key:"initControl",value:function(e){var t,n;if(e instanceof HTMLDivElement?(n=e,t="aov365_graphite"):(n=document.getElementById(e),t=e),null==n)throw new Error("Parent with id ".concat(t," did not found at DOM."));var r=document.createElement("div");this.containerId=t+"_document_viewer",r.id=this.containerId,r.style.width="100%",r.style.height="100%",r.style.position="relative",r.style.backgroundColor=this.backgroundColor;var i=document.createElement("div");i.id=t+"_graphic_document_viewer",i.style.width="100%",i.style.height="100%",r.style.backgroundColor=this.backgroundColor;var o=this.canvas;o.id=t+"_graphic_document_viewer_canvas",o.tabIndex=0,o.style.backgroundColor=this.backgroundColor,o.oncontextmenu=function(){return!1},o.style.opacity="1",r.appendChild(this.canvas),n.appendChild(r)}}])&&N(t.prototype,n),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(O),q=n(101),X=n(15);function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),K(this,"state",void 0),K(this,"onLoaded",void 0),K(this,"urls",["./js/thenBy.js","./js/gl-matrix.js"]),e.instance)return e.instance;this.state="IDLE",e.instance=this}var t,n,r;return t=e,(n=[{key:"load",value:function(){var e=this;switch(this.state){case"IDLE":return new Promise((function(t,n){e.state="LOADING",e.loadLibs().then((function(){e.state="LOADED",e.onLoaded?e.onLoaded(null):t()})).catch((function(t){e.state="ERROR",e.onLoaded?e.onLoaded(t):n(t)}))}));case"ERROR":return this.state="IDLE",this.load();case"LOADED":return Promise.resolve();case"LOADING":return new Promise((function(t,n){e.onLoaded=function(r){e.state=r?"ERROR":"LOADED",r?n(r):t()}}))}}},{key:"loadLibByUrl",value:function(e){return new Promise((function(t,n){var r=document.createElement("script");r.src=e,r.async=!0,r.onload=function(){console.info("Loaded library: ".concat(e)),t(e)},r.onerror=function(t){console.error("Error loading library: ".concat(e,". Details: ").concat(t)),n(t)},document.getElementsByTagName("body")[0].appendChild(r)}))}},{key:"loadLibs",value:function(){return Promise.all(this.urls.map(this.loadLibByUrl))}}])&&Z(t.prototype,n),r&&Z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();K(J,"instance",void 0);var Q=n(157);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){te(o,r,i,a,s,"next",e)}function s(e){te(o,r,i,a,s,"throw",e)}a(void 0)}))}}function re(){return(re="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=ie(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function ie(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ve(e)););return e}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t,n){return t&&ae(e.prototype,t),n&&ae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}function ce(e){var t=pe();return function(){var n,r=ve(e);if(t){var i=ve(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return le(this,n)}}function le(e,t){if(t&&("object"===ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fe(e)}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e){var t="function"==typeof Map?new Map:void 0;return(de=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return he(e,arguments,ve(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),me(r,e)})(e)}function he(e,t,n){return(he=pe()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&me(i,n.prototype),i}).apply(null,arguments)}function pe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge=function(e){ue(n,e);var t=ce(n);function n(e){var r;return oe(this,n),ye(fe(r=t.call(this,e)),"type",void 0),r.type="CRASHED",r}return se(n,[{key:"toString",value:function(){return this.message}}]),n}(de(Error)),be={where:function(e){return["SETUP_COMPLETED"===e.type]},to:"SETUP_COMPLETED"},we={where:function(e){return["CRASHED"===e.type]},to:"CRASHED"},_e={IDLE:[{where:function(e){return["SETUP"===e.type]},to:"SETUP"},we],SETUP:[be,we],SETUP_COMPLETED:[{where:function(e){return["INIT"===e.type]},to:"INIT"},we],INIT:[{where:function(e){return["INIT_COMPLETED"===e.type]},to:"INIT_COMPLETED"},we],INIT_COMPLETED:[we],CRASHED:[be]},Oe=function(e){ue(s,e);var t,n,r,i,o,a=ce(s);function s(){var e;return oe(this,s),ye(fe(e=a.call(this,"IDLE",_e)),"errorState",null),ye(fe(e),"viewControl",void 0),ye(fe(e),"name","Graphite.Engine"),ye(fe(e),"comment",""),ye(fe(e),"dependencies",[]),ye(fe(e),"events",["GraphiteEngine:beforeGraphiteLoad","GraphiteEngine:afterGraphiteLoad","GraphiteEngine:beforeGraphiteInit","GraphiteEngine:afterGraphiteInit","GraphiteEngine:createdScene2D","GraphiteEngine:createdScene3D","GraphiteEngine:addedMaterial2d","GraphiteEngine:addedMaterial3d","GraphiteEngine:removedMaterial2d","GraphiteEngine:removedMaterial3d"]),e.gotoSetup=e.gotoSetup.bind(fe(e)),e.on("SETUP",e.gotoSetup),e.gotoInit=e.gotoInit.bind(fe(e)),e.on("INIT",e.gotoInit),e}return se(s,[{key:"metaInfo",get:function(){return this}},{key:"dispatch",value:function(e){return re(ve(s.prototype),"dispatch",this).call(this,e)}},{key:"setup",value:(o=ne(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gotoCompleteStep({type:"SETUP",core:t},"SETUP_COMPLETED");case 2:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"init",value:(i=ne(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gotoCompleteStep({type:"INIT"},"INIT_COMPLETED");case 2:return e.abrupt("return",this.viewControl);case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"resolveGraphite",value:function(){return new Promise((function(e,t){(new Q.a).on("COMPLETED",(function(t){e(t.payload.graphiteResolver)})).on("CRASHED",(function(e){return t(e)})).init()}))}},{key:"nextTick",value:function(){return new Promise((function(e){return setTimeout((function(){return e()}),0)}))}},{key:"doSetup",value:function(e){return Promise.resolve()}},{key:"doInit",value:(r=ne(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new J).load();case 2:return e.next=4,this.resolveGraphite();case 4:t=e.sent,(n=window.document.createElement("div")).style.display="none",window.document.body.appendChild(n),this.viewControl=new Y(n,t,"transparent");case 9:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"gotoSetup",value:(n=ne(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.nextTick();case 2:return e.prev=2,e.next=5,this.doSetup(t.core);case 5:this.dispatch({type:"SETUP_COMPLETED"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this.dispatch(new ge(e.t0.message));case 11:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e){return n.apply(this,arguments)})},{key:"gotoInit",value:(t=ne(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.nextTick();case 2:return e.prev=2,e.next=5,this.doInit();case 5:this.dispatch({type:"INIT_COMPLETED"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this.dispatch(new ge(e.t0.message));case 11:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return t.apply(this,arguments)})},{key:"gotoCompleteStep",value:function(e,t){var n=this;return new Promise((function(r,i){n.dispatch(e)||n.state===e.type?(n.on(t,(function(){r()})),n.on("CRASHED",(function(e){n.errorState=e,i(n.errorState)}))):"CRASHED"===n.state?i(n.errorState):r()}))}}]),s}(X.a),Ce={type:"Engine",name:"GraphiteEngineModule",description:"Presents Graphite engine module",create:function(){return new Oe}};window.__CORE__.addModule(Ce)},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==n(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,n){"use strict";n.r(t),t.default=function(){return["","","-","-","-","-","","",""].reduce((function(e,t){return e+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+t}))}}])},function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"g",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"i",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"j",(function(){return f})),n.d(t,"a",(function(){return d})),n.d(t,"l",(function(){return h})),n.d(t,"k",(function(){return p}));var r=function(e){return"string"==typeof e&&e.length},i=function(e){return"function"==typeof e},o=function(e){return"number"==typeof e},a={isRequired:function(e){return'"'.concat(e,'" is required')}},s={0:"mm",1:"mil"},u=function(e,t){var n={value:null};return window.__CORE__.tryGetAttributeValue(e,n)?n.value:t},c=function(e,t){return window.__CORE__.setAttributeValue(e,t)},l={1:"Arc",2:"Pad",3:"Via",4:"Track",6:"Fill",10:"Polygon",11:"Region"},f={sm:240,md:320},d={voltage:1,currentDensity:2},h={voltage:"V",currentDensity:"A/m^2"},p={voltage:"V",currentDensity:"A/mm^2"}},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade","enter-class":"afs-context-menu_enter","leave-to-class":"afs-context-menu_leave-to","enter-active-class":"afs-context-menu_enter-active","leave-active-class":"afs-context-menu_leave-active"}},[e.isOpened&&e.isExist?n("div",{directives:[{name:"inject",rawName:"v-inject"}],staticClass:"afs-context-menu",class:e.classes,style:e.style,attrs:{"data-id":e.id}},[n("div",{staticClass:"afs-context-menu__inner"},[e._t("default",null,{getBEMClass:e.getBEMClass})],2)]):e._e()])};r._withStripped=!0;var i=n(2),o=n(4),a=n(1),s=n(14);n(40);function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l={y:["top","bottom","end","start","center"],x:["left","right","end","start","center"]},f={control:"control",auto:"auto"},d="top-left top-right bottom-right bottom-left",h={name:"AfsContextMenu",directives:{inject:s.a},props:{type:{type:String,default:"",required:!0,validator:function(e){return["dropdown","hint","tooltip"].some((function(t){return t===e}))}},modifiers:{type:Object,default:function(){return{y:"bottom",x:"right"}},validator:function(e){if(Object.is(e))return!1;var t=e.x,n=e.y,r=l.y.some((function(e){return e===n})),i=l.x.some((function(e){return e===t}));return r&&i}},id:{type:[String,Number],default:"context-menu"},offsetY:{type:[Number,String],default:0,validator:function(e){return isFinite(+e)}},offsetX:{type:[Number,String],default:0,validator:function(e){return isFinite(+e)}},viewboxOffsetY:{type:[Number,String],default:20,validator:function(e){return isFinite(+e)}},viewboxOffsetX:{type:[Number,String],default:20,validator:function(e){return isFinite(+e)}},borderRadius:{type:String,default:d,validator:function(e){var t=d.split(" ");return e.split(" ").every((function(e){return t.includes(e)}))}},width:{type:[Number,String],default:"auto",validator:function(e){return isFinite(+e)||!!f[e]}},maxWidth:{type:[Number,String],default:null,validator:function(e){return isFinite(+e)}},minWidth:{type:[Number,String],default:0,validator:function(e){return isFinite(+e)}},height:{type:[Number,String],default:"auto",validator:function(e){return isFinite(+e)||!!f[e]}},maxHeight:{type:[Number,String],default:null,validator:function(e){return isFinite(+e)}},minHeight:{type:[Number,String],default:0,validator:function(e){return isFinite(+e)}},hasArrow:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isExist:{type:Boolean,default:!0}},data:function(){return{control:null,top:0,left:0,sizes:{width:null,maxWidth:null,minWidth:null,height:null,maxHeight:null,minHeight:null},isOpened:!1,showToBottom:null,showToRight:null}},computed:{classes:function(){var e=this.showToBottom,t=this.showToRight,n={left:"afs-context-menu_left",right:"afs-context-menu_right",start:"afs-context-menu_x-start",end:"afs-context-menu_x-end",center:"afs-context-menu_x-center"},r={top:"afs-context-menu_top",bottom:"afs-context-menu_bottom",start:"afs-context-menu_y-start",end:"afs-context-menu_y-end",center:"afs-context-menu_y-center"},i=null,o=null;return this.direction.y.top||this.direction.y.bottom?i=e?r.bottom:r.top:this.direction.y.start||this.direction.y.end?i=e?r.start:r.end:this.direction.y.center&&(i=r.center),this.direction.x.right||this.direction.x.left?o=t?n.right:n.left:this.direction.x.start||this.direction.x.end?o=e?n.start:n.end:this.direction.x.center&&(o=n.center),[this.themeClass,i,o,{"afs-context-menu_arrow":this.hasArrow,"afs-context-menu_error":this.isError},"afs-context-menu_".concat(this.type)].concat(u(this.borderRadius.split(" ").map((function(e){return"afs-context-menu_border-".concat(e,"-radius")}))))},themeClass:function(){var e=Object(o.a)(this.$root);return Object(i.c)(e.theme)},style:function(){return{top:"".concat(this.top,"px"),left:"".concat(this.left,"px"),width:this.sizes.width&&"".concat(this.sizes.width,"px"),height:this.sizes.height&&"".concat(this.sizes.height,"px")}},direction:function(){return{y:{top:"top"===this.modifiers.y,bottom:"bottom"===this.modifiers.y,start:"start"===this.modifiers.y,end:"end"===this.modifiers.y,center:"center"===this.modifiers.y},x:{left:"left"===this.modifiers.x,right:"right"===this.modifiers.x,start:"start"===this.modifiers.x,end:"end"===this.modifiers.x,center:"center"===this.modifiers.x}}},isDropdown:function(){return"dropdown"===this.type},isHint:function(){return"hint"===this.type},isTooltip:function(){return"tooltip"===this.type},toBottom:function(){return this.direction.y.bottom||this.direction.y.start},toRight:function(){return this.direction.x.right||this.direction.x.start}},watch:{isOpened:{immediate:!0,handler:function(e){e?(!this.isHint&&document.addEventListener("click",this.handleDocumentClick,!0),window.addEventListener("resize",this.handleWindowResize)):(!this.isHint&&document.removeEventListener("click",this.handleDocumentClick,!0),window.removeEventListener("resize",this.handleWindowResize))}},toBottom:function(){this.showToBottom=this.toBottom},toRight:function(){this.showToRight=this.toRight}},mounted:function(){a.b.set({id:this.id,component:this})},beforeDestroy:function(){a.b.delete(this.id)},methods:{getBEMClass:function(e){return Object(i.a)("afs-context-menu",e)},showByElement:function(e){this._open(),this.setPositionByElement(e)},recalc:function(){this.isOpened&&(this._reset(),this.setPositionByElement(this.control))},setPositionByElement:function(e){var t=this,n=e.getBoundingClientRect();this.top=-99999,this.left=-99999,this.$nextTick((function(){if(t.$el.getBoundingClientRect){var r=t.getViewbox(),i=t.$el.getBoundingClientRect(),o={width:Math.max(t.minWidth,f.control===t.width?n.width:f.auto===t.width?i.width:t.width),height:Math.max(t.minHeight,f.control===t.height?n.height:f.auto===t.height?i.height:t.height)},a=t.getContainerPositionAndMaxSize({direction:t.modifiers.y,viewbox:r.y,offset:+t.offsetY,control:{size:n.height,position:n.top},container:{size:null!==t.maxHeight&&+t.maxHeight<o.height?+t.maxHeight:o.height}}),s=t.getContainerPositionAndMaxSize({direction:t.modifiers.x,viewbox:r.x,offset:+t.offsetX,control:{size:n.width,position:n.left},container:{size:null!==t.maxWidth&&+t.maxWidth<o.width?+t.maxWidth:o.width}}),u=t.maxWidth&&+t.maxWidth<s.maxSize?+t.maxWidth:s.maxSize,c=t.maxHeight&&+t.maxHeight<a.maxSize?+t.maxHeight:a.maxSize;t.top=a.position,t.left=s.position,t.sizes.width=Math.min(o.width,u),t.sizes.height=Math.min(o.height,c)}else t.setPositionByElement(e)}))},getContainerPositionAndMaxSize:function(e){var t=e.direction,n=e.viewbox,r=e.offset,i=e.control,o=e.container,a="center"===t,s="start"===t,u="end"===t,c="top"===t||"left"===t,l=a?i.position+i.size/2-o.size/2:s?i.position+r:u?i.position+i.size-o.size-r:c?i.position-o.size-r:i.position+i.size+r;return{position:u||c?Math.max(l,n.min):l,maxSize:a?n.size:u||c?o.size-(n.min-l):n.max-l}},getViewbox:function(){var e=+this.viewboxOffsetY,t=+this.viewboxOffsetX;return{y:{min:e,max:window.innerHeight-e,size:window.innerHeight-2*e},x:{min:t,max:window.innerWidth-t,size:window.innerWidth-2*t}}},handleWindowResize:function(){this._close()},handleDocumentClick:function(e){var t=this;e.path.some((function(e){return e===t.$el}))||e.path.some((function(e){return e.dataset&&e.dataset.afsDropdownControl===t.id}))||this._close()},_reset:function(){this.sizes.width=null,this.sizes.height=null},_open:function(){this.isOpened||(this.isOpened=!0,this.$emit("open"))},_close:function(){this.isOpened&&(this.isOpened=!1,this._reset(),this.$emit("close"))},toggle:function(e){this.isOpened?this.close():this.open(e)},open:function(e){!this.isOpened&&e&&this.isExist&&(this.control=e,this.showByElement(e))},close:function(){this.isOpened&&this.isExist&&this._close()}}},p=n(0),m=Object(p.a)(h,r,[],!1,null,null,null);m.options.__file="WebUI/VueJsComponentLibrary/src/components/ContextMenu/components/ContextMenuStatic.vue";m.exports;var v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.tag,{tag:"component",staticClass:"afs-context-menu__section"},[e.items.length?e._l(e.items,(function(t){return n(e.itemTag,{key:t.id,tag:"component",staticClass:"afs-context-menu__item"},[e._t("item",null,{data:t})],2)})):e._e(),e._v(" "),e._t("default")],2)};v._withStripped=!0;var y={ul:"li",div:"div"},g={name:"AfsContextMenuSection",props:{tag:{type:String,default:"ul",validator:function(e){return!!y[e]}},items:{type:Array,default:function(){return[]}}},computed:{itemTag:function(){return y[this.tag]}}},b=Object(p.a)(g,v,[],!1,null,null,null);b.options.__file="WebUI/VueJsComponentLibrary/src/components/ContextMenu/components/Section.vue";b.exports;var w=function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"afs-context-menu__item-in afs-context-menu__item-clickable",class:{"afs-context-menu__item-in_icon":this.hasIcon},attrs:{type:this.type}},[t("Icon",{staticClass:"afs-context-menu__item-icon",attrs:{name:this.icon}}),this._v(" "),t("AfsText",{attrs:{type:"single line",inline:""}},[this._t("default")],2)],1)};w._withStripped=!0;var _=n(5),O=n(3),C={name:"AfsContextMenuButton",components:{Icon:_.a,AfsText:O.a},props:{type:{type:String,default:"button"},icon:{type:String,default:""}},computed:{hasIcon:function(){return!!this.icon.length}}},S=Object(p.a)(C,w,[],!1,null,null,null);S.options.__file="WebUI/VueJsComponentLibrary/src/components/ContextMenu/components/Button.vue";S.exports;var x=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"afs-context-menu__head"},[t("AfsText",{attrs:{type:"medium title"}},[this._t("default")],2),this._v(" "),t("button",{staticClass:"afs-context-menu__btn-close",on:{click:this.onClose}},[t("Icon",{staticClass:"afs-context-menu__icon-close",attrs:{name:"close-8"}})],1)],1)};x._withStripped=!0;var k={name:"Head",components:{Icon:_.a,AfsText:O.a},methods:{onClose:function(){var e=document.querySelector("body");e&&e.click(),this.$emit("close")}}},E=Object(p.a)(k,x,[],!1,null,null,null);E.options.__file="WebUI/VueJsComponentLibrary/src/components/ContextMenu/components/Head.vue";E.exports;var T=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"afs-context-menu__footer",style:{"justify-content":this.justify}},[this._t("default")],2)};T._withStripped=!0;var P={name:"Head",props:{justify:{type:String,default:""}}},A=Object(p.a)(P,T,[],!1,null,null,null);A.options.__file="WebUI/VueJsComponentLibrary/src/components/ContextMenu/components/Footer.vue";A.exports;var M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade","enter-class":"afs-context-menu_enter","leave-to-class":"afs-context-menu_leave-to","enter-active-class":"afs-context-menu_enter-active","leave-active-class":"afs-context-menu_leave-active"}},[e.isOpened&&e.isExist?n("div",{directives:[{name:"inject",rawName:"v-inject:[parentContainerId]",arg:e.parentContainerId}],staticClass:"afs-context-menu",class:e.classes,style:e.style,attrs:{"data-locator":e.dataLocator,"data-id":e.id}},[e.isInfotooltip?n("div",{staticClass:"afs-context-menu__connector"}):e._e(),e._v(" "),n("div",{staticClass:"afs-context-menu__inner"},[e._t("default",[e.text?n("span",[e._v(e._s(e.text))]):e._e()],{getBEMClass:e.getBEMClass})],2)]):e._e()])};function j(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}M._withStripped=!0;var I={y:["top","bottom","end","start","center"],x:["left","right","end","start","center"]},R={name:"AfsContextMenu",directives:{inject:s.a},props:{type:{type:String,default:"",required:!0,validator:function(e){return["dropdown","hint","tooltip","infotooltip"].some((function(t){return t===e}))}},modifiers:{type:Object,default:function(){return{y:"bottom",x:"center"}},validator:function(e){if(Object.is(e))return!1;var t=e.x,n=e.y,r=I.y.some((function(e){return e===n})),i=I.x.some((function(e){return e===t}));return r&&i}},id:{type:[String,Number],default:"context-menu"},borderRadius:{type:String,default:"top-left top-right bottom-right bottom-left",validator:function(e){var t="top-left top-right bottom-right bottom-left".split(" ");return e.split(" ").every((function(e){return t.includes(e)}))}},dataLocator:{type:String,default:"context-menu"},isSticky:{type:Boolean,default:!1},showAtCursor:{type:Boolean,default:!1},offset:{type:Number,default:4},viewboxOffset:{type:Number,default:20},arrow:{type:Boolean,default:!1},wide:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1},initWidth:{type:[Number,String],default:0},error:{type:Boolean,default:!1},isExist:{type:Boolean,default:!0},maxHeightLimit:{type:Number,default:Number.MAX_SAFE_INTEGER},maxWidthLimit:{type:Number,default:Number.MAX_SAFE_INTEGER},parentContainerId:{type:String,default:""}},data:function(){return{parent:null,top:0,left:0,width:null,maxWidth:null,minWidth:null,maxHeight:null,isOpened:!1,showToBottom:null,showToRight:null,text:""}},computed:{classes:function(){var e=this.showToBottom,t=this.showToRight,n={left:"afs-context-menu_left",right:"afs-context-menu_right",start:"afs-context-menu_x-start",end:"afs-context-menu_x-end",center:"afs-context-menu_x-center"},r={top:"afs-context-menu_top",bottom:"afs-context-menu_bottom",start:"afs-context-menu_y-start",end:"afs-context-menu_y-end",center:"afs-context-menu_y-center"},i=null,o=null;return this.direction.y.top||this.direction.y.bottom?i=e?r.bottom:r.top:this.direction.y.start||this.direction.y.end?i=e?r.start:r.end:this.direction.y.center&&(i=r.center),this.direction.x.right||this.direction.x.left?o=t?n.right:n.left:this.direction.x.start||this.direction.x.end?o=e?n.start:n.end:this.direction.x.center&&(o=n.center),[this.themeClass,i,o,{"afs-context-menu_arrow":this.arrow,"afs-context-menu_error":this.error},"afs-context-menu_".concat(this.type)].concat(j(this.borderRadius.split(" ").map((function(e){return"afs-context-menu_border-".concat(e,"-radius")}))))},themeClass:function(){var e=Object(o.a)(this.$root);return Object(i.c)(e.theme)},style:function(){return{top:"".concat(this.top,"px"),left:"".concat(this.left,"px"),width:this.fullWidth&&this.width&&"".concat(this.width,"px")||!!this.initWidth&&"".concat(this.initWidth,"px"),"min-width":this.wide&&this.minWidth&&"".concat(this.minWidth,"px"),"max-width":this.maxWidth&&"".concat(this.maxWidth,"px"),"max-height":this.maxHeight&&"".concat(this.maxHeight,"px")}},direction:function(){return{y:{top:"top"===this.modifiers.y,bottom:"bottom"===this.modifiers.y,start:"start"===this.modifiers.y,end:"end"===this.modifiers.y,center:"center"===this.modifiers.y},x:{left:"left"===this.modifiers.x,right:"right"===this.modifiers.x,start:"start"===this.modifiers.x,end:"end"===this.modifiers.x,center:"center"===this.modifiers.x}}},isDropdown:function(){return"dropdown"===this.type},isHint:function(){return"hint"===this.type},isTooltip:function(){return"tooltip"===this.type},isInfotooltip:function(){return"infotooltip"===this.type},toBottom:function(){return this.direction.y.bottom||this.direction.y.start},toRight:function(){return this.direction.x.right||this.direction.x.start},api:function(){var e=this;return{open:this.open,close:this.close,setText:this.setText,toggle:this.toggle,showImmediately:function(){return e.isSticky&&e.isOpened},on:function(t,n){return e.$on(t,n)},off:function(t,n){return e.$off(t,n)}}}},watch:{isOpened:{immediate:!0,handler:function(e){e?(!this.isHint&&document.addEventListener("click",this.handleDocumentClick,!0),window.addEventListener("resize",this.handleWindowResize)):(!this.isHint&&document.removeEventListener("click",this.handleDocumentClick,!0),window.removeEventListener("resize",this.handleWindowResize))}},toBottom:function(){this.showToBottom=this.toBottom},toRight:function(){this.showToRight=this.toRight}},mounted:function(){a.b.set({id:this.id,component:this.api})},beforeDestroy:function(){a.b.delete(this.id)},methods:{setText:function(e){this.text=e},getBEMClass:function(e){return Object(i.a)("afs-context-menu",e)},showByCoordinates:function(e){var t=e.x,n=e.y;this._open(),this.setPositionByCoordinates({x:t,y:n})},showByElement:function(e,t){this._open(),this.setPositionByElement(e,t)},setPositionByElement:function(e,t){var n=this,r=this.direction,i=e.getBoundingClientRect();this.top=-99999,this.left=-99999,this.$nextTick((function(){if(n.$el.getBoundingClientRect){var o=n.getViewbox(),a=n.$el.getBoundingClientRect(),s=n.getContainerPositionAndMaxSize({direction:{primary:r.y.bottom,secondary:r.y.top,start:r.y.start,end:r.y.end,center:r.y.center},controlSize:t&&t.controlSize?t.controlSize:i.height,controlPosition:t&&t.y?t.y:i.top,containerSize:Math.min(a.height,n.maxHeightLimit),viewbox:o.y}),u=n.getContainerPositionAndMaxSize({direction:{primary:r.x.right,secondary:r.x.left,start:r.x.start,end:r.x.end,center:r.x.center},controlSize:t&&t.controlSize?t.controlSize:i.width,controlPosition:t&&t.x?t.x:i.left,containerSize:Math.min(a.width,n.maxWidthLimit),viewbox:o.x});n.top=s.position,n.left=u.position,n.maxHeight=n.isHint?null:Math.min(s.maxSize||Number.MAX_SAFE_INTEGER,n.maxHeightLimit),n.maxWidth=Math.min(u.maxSize||Number.MAX_SAFE_INTEGER,n.maxWidthLimit),n.showToBottom=(r.y.bottom||r.y.start)&&s.primary!==s.secondary||(r.y.top||r.y.end)&&(s.primary===s.secondary||s.primary===o.y.min),n.showToRight=(r.x.left||r.x.end)&&(u.primary===u.secondary||u.primary===o.x.min)||(r.x.right||r.x.start)&&u.primary!==u.secondary}else n.setPositionByElement(e,t)}))},getContainerPositionAndMaxSize:function(e){var t=e.direction,n=e.controlSize,r=e.controlPosition,i=e.containerSize,o=e.viewbox,a=this.offset,s=t.primary||t.start,u=t.secondary||t.end,c=0,l=0,f=null,d={size:o.size<i};return s?(t.primary?(c=r+n+a,l=r-i-a):t.start&&(c=r,l=r+n-i),d.primaryMin=c<o.min,d.primaryMax=c+i>o.max,d.secondaryMin=l<o.min,d.secondaryMax=l+i>o.max,d.size?(c=o.min,f=o.size):d.primaryMin&&!d.size?c=o.min:d.primaryMax&&(d.secondaryMin||d.secondaryMax)&&!d.size?c=o.max-i:!d.primaryMax||d.secondaryMin||d.secondaryMax||d.size||(c=l)):u?(t.secondary?(c=r-a-i,l=r+n+a):t.end&&(c=r+n-i,l=r),d.primaryMin=c<o.min,d.primaryMax=c+i>o.max,d.secondaryMin=l<o.min,d.secondaryMax=l+i>o.max,d.size?(c=o.min,f=o.size):d.primaryMax&&!d.size?c=o.max-i:d.primaryMin&&(d.secondaryMin||d.secondaryMax)&&!d.size?c=o.min:!d.primaryMin||d.secondaryMin||d.secondaryMax||d.size||(c=l)):t.center&&(c=r+n/2-i/2,d.min=o.min>c,d.max=o.max<c+i,!d.min||d.max||d.size?d.min||!d.max||d.size?d.size&&(c=o.min,f=o.size):c=o.max-i:c=o.min),{position:c,maxSize:f,primary:c,secondary:l}},setPositionByCoordinates:function(e){var t=this,n=e.x,r=e.y,i=this.direction;this.top=0,this.left=0;var o=r,a=n;this.$nextTick((function(){if(t.$el.getBoundingClientRect){var e=t.getViewbox(),n=t.$el.getBoundingClientRect(),r=t.getContainerPositionAndMaxSize({direction:{primary:i.y.bottom,secondary:i.y.top,start:i.y.start,end:i.y.end,center:i.y.center},controlSize:0,controlPosition:o,containerSize:n.height,viewbox:e.y}),s=t.getContainerPositionAndMaxSize({direction:{primary:i.x.right,secondary:i.x.left,start:i.x.start,end:i.x.end,center:i.x.center},controlSize:0,controlPosition:a,containerSize:n.width,viewbox:e.x});t.top=r.position,t.left=s.position,t.maxHeight=r.maxSize,t.maxWidth=s.maxSize}else t.setPositionByCoordinates({x:a,y:o})}))},handleWindowResize:function(){this._close()},handleDocumentClick:function(e){var t=this;e.path.some((function(e){return e===t.$el}))||e.path.some((function(e){return e.dataset&&e.dataset.afsDropdownControl===t.id}))||this._close(e)},getViewbox:function(){var e=this.viewboxOffset;return{y:{min:e,max:window.innerHeight-e,size:window.innerHeight-2*e},x:{min:e,max:window.innerWidth-e,size:window.innerWidth-2*e}}},_open:function(){this.isOpened||(this.isOpened=!0,this.$emit("open"))},_close:function(e){this.isOpened&&(this.isOpened=!1,this.parent=null,this.maxWidth=null,this.maxHeight=null,this.$emit("close",e))},isOpenedOnSameParent:function(e){return this.isOpened&&this.parent===e},toggle:function(e){this.isOpenedOnSameParent(e)?this.close():this.open(e)},open:function(e,t){if("$el"in e&&(e=e.$el),e&&this.isExist){this.parent!==e&&(this.parent=e);var n=e.getBoundingClientRect().width;this.width=n,this.minWidth=n,this.showByElement(e,this.showAtCursor||this.isSticky?{x:t.clientX,y:t.clientY,controlSize:1}:null)}},close:function(){this.isOpened&&this.isExist&&this._close()}}},L=(n(63),Object(p.a)(R,M,[],!1,null,null,null));L.options.__file="WebUI/VueJsComponentLibrary/src/components/ContextMenu/App.vue";var B=L.exports;t.a=B},function(e,t,n){var r=n(53),i=n(77),o=n(128),a=n(109),s=n(145),u=function(e,t,n){var c,l,f,d,h=e&u.F,p=e&u.G,m=e&u.S,v=e&u.P,y=e&u.B,g=p?r:m?r[t]||(r[t]={}):(r[t]||{}).prototype,b=p?i:i[t]||(i[t]={}),w=b.prototype||(b.prototype={});for(c in p&&(n=t),n)f=((l=!h&&g&&void 0!==g[c])?g:n)[c],d=y&&l?s(f,r):v&&"function"==typeof f?s(Function.call,f):f,g&&a(g,c,f,e&u.U),b[c]!=f&&o(b,c,d),v&&w[c]!=f&&(w[c]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){"use strict";var r={};window.addEventListener("message",(function(e){var t;null!=e&&null!==(t=e.data)&&void 0!==t&&t.message&&r[e.data.message]&&r[e.data.message].forEach((function(t){return t(e.data)}))})),t.a={emit:function(e,t){return window.parent!==window&&window.parent.postMessage({message:e,data:t,id:window.__iframeId},"*"),this},on:function(e,t){return r[e]?r[e].push(t):r[e]=[t],this},once:function(e,t){var n=this,i=function r(i){n.off(e,r),t(i)};return r[e]?r[e].push(i):r[e]=[i],this},off:function(e,t){return r[e]&&(r[e]=r[e].filter((function(e){return e!==t}))),r[e]&&!r[e].length&&delete r[e],this}}},function(e,t,n){"use strict";var r,i;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e[e.Unknown=0]="Unknown",e[e.Copper=1]="Copper",e[e.Plated=2]="Plated",e[e.NonPlated=3]="NonPlated",e[e.Profile=4]="Profile",e[e.Soldermask=5]="Soldermask",e[e.Legend=6]="Legend",e[e.Paste=7]="Paste",e[e.Glue=8]="Glue",e[e.Carbonmask=9]="Carbonmask",e[e.Goldmask=10]="Goldmask",e[e.Heatsinkmask=11]="Heatsinkmask",e[e.Peelablemask=12]="Peelablemask",e[e.Silvermask=13]="Silvermask",e[e.Tinmask=14]="Tinmask",e[e.Depthrout=15]="Depthrout",e[e.Vcut=16]="Vcut",e[e.Viafill=17]="Viafill",e[e.ArrayDrawing=18]="ArrayDrawing",e[e.AssemblyDrawing=19]="AssemblyDrawing",e[e.Drillmap=20]="Drillmap",e[e.FabricationDrawing=21]="FabricationDrawing",e[e.Vcutmap=22]="Vcutmap",e[e.OtherDrawing=23]="OtherDrawing",e[e.Pads=24]="Pads",e[e.Other=25]="Other",e[e.Drawing=26]="Drawing",e[e.KeepOut=27]="KeepOut",e[e.NcDrill=28]="NcDrill"}(r||(r={})),function(e){e[e.Top=0]="Top",e[e.Inr=1]="Inr",e[e.Bot=2]="Bot",e[e.Pth=3]="Pth",e[e.Blind=4]="Blind",e[e.Buried=5]="Buried",e[e.Npth=6]="Npth",e[e.P=7]="P",e[e.Np=8]="Np"}(i||(i={}))},function(e,t,n){"use strict";var r=n(35);t.a={inserted:function(e,t,n){var i=t.arg,o=void 0===i?void 0:i,a=t.value,s=void 0===a?void 0:a,u=n.context,c=void 0===u?void 0:u;(o||s?document.getElementById(o||s):document.body).appendChild(e),c.$on("hook:beforeDestroy",(function(){Object(r.a)(this.$parent.$el)&&this.$parent.$el.appendChild(this.$el)}))}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return f}));var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(c,e);var t,n,r,s=a(c);function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l(u(n=s.call(this)),"state",void 0),l(u(n),"prevstate_",void 0),l(u(n),"scheme",void 0),l(u(n),"dataTransfer",void 0),n.state=e,n.prevstate_=e,n.scheme=t,n.dataTransfer={},n.on(c.TRANSITION_EVENT,(function(e){return n.emit(n.state,e)})),n.on(c.ERROR_EVENT,(function(e){return n.emit(n.state,e)})),n}return t=c,(n=[{key:"isFsm",get:function(){return!0}},{key:"isActive",get:function(){return this.state in this.scheme}},{key:"getState",value:function(){return this.state}},{key:"prevstate",get:function(){return this.prevstate_}},{key:"setDataTransfer",value:function(e){this.dataTransfer=Object.assign(this.dataTransfer,e)}},{key:"clearDataTransfer",value:function(){this.dataTransfer={}}},{key:"dispatch",value:function(e){var t=this;if(this.isActive){var n=this.scheme[this.state].find((function(n){return n.where(Object.assign(e,t.dataTransfer)).every((function(e){return e}))}));return!!n&&(this.prevstate_=this.state,this.state=n.to,n.error?this.emit(c.ERROR_EVENT,e):this.emit(c.TRANSITION_EVENT,e),!0)}return!1}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n(37).a);l(f,"TRANSITION_EVENT","#Transition"),l(f,"ERROR_EVENT","#Error")},function(e,t,n){"use strict";n.d(t,"c",(function(){return Y})),n.d(t,"i",(function(){return q})),n.d(t,"n",(function(){return X})),n.d(t,"l",(function(){return Z})),n.d(t,"f",(function(){return K})),n.d(t,"g",(function(){return J})),n.d(t,"h",(function(){return Q})),n.d(t,"o",(function(){return ee})),n.d(t,"p",(function(){return te})),n.d(t,"r",(function(){return ne})),n.d(t,"e",(function(){return re})),n.d(t,"k",(function(){return ie})),n.d(t,"u",(function(){return oe})),n.d(t,"d",(function(){return ae})),n.d(t,"a",(function(){return se})),n.d(t,"m",(function(){return ue})),n.d(t,"t",(function(){return ce})),n.d(t,"q",(function(){return le})),n.d(t,"s",(function(){return fe})),n.d(t,"j",(function(){return de}));var r=n(136),i=n(126);function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={threads:function(e){return Object(i.a)(e.threads)},threadById:function(e,t){return function(e){return t.threads.find((function(t){return t.id===e}))}},users:function(e){return Object(i.b)(e.users)},usersDictionary:function(e,t){return Object(r.makeDictionary)(t.users)},groupsDictionary:function(e){return Object(r.makeDictionary)(e.groups)},teamUsers:function(e){return Array.isArray(e.teamUsers)?Object(i.d)(e.teamUsers):[]},activeThreadId:function(e){return e.activeThreadId},activeThread:function(e,t){return t.activeThreadId&&t.threads.find((function(e){return e.id===t.activeThreadId}))},createNewThread:function(e){return e.createNewThread},activeGraphicsComment:function(e){return e.activeGraphicsComment},currentDocId:function(e){return e.currentDocId},documents:function(e){return e.documents},otherDocuments:function(e){return e.otherDocuments},tooltip:function(e){return e.tooltip},filters:function(e){return e.filters},projectDetails:function(e){return e.projectDetails},commentControls:function(e){return e.activeCommentControl?e.commentControls.map((function(t){return u(u({},t),{},{isSelected:e.activeCommentControl.id===t.id})})):e.commentControls.map((function(e){return u(u({},e),{},{isSelected:!1})}))},activeFilters:function(e){var t=e.filters;return[].concat(o(t.radios.reduce((function(e,t){return t.isSelected&&e.push(u(u({},t),{},{user:t.users&&t.users.length?t.users.find((function(e){return e.isSelected})):null})),e}),[])),o(t.checkboxes.filter((function(e){return e.isSelected}))))},accessListUsersMap:function(e){var t=new Map;return e.accessListUsers.forEach((function(e){t.set(String(e.username||e.email||e.id).toLowerCase(),e)})),t}},f={setThreads:function(e,t){e.threads=t},setActiveThreadId:function(e,t){e.activeThreadId=t},setUsers:function(e,t){e.users=t},setGroups:function(e,t){e.groups=t},setTeamUsers:function(e,t){e.teamUsers=t},setActiveCommentControl:function(e,t){e.activeCommentControl=t},setCreateNewThread:function(e,t){e.createNewThread=t},setActiveGraphicsComment:function(e,t){e.activeGraphicsComment=t},setCurrentDocId:function(e,t){e.currentDocId=t},setDocuments:function(e,t){e.documents=t},setOtherDocuments:function(e,t){e.otherDocuments=t},setTooltip:function(e,t){e.tooltip=t},setFilters:function(e,t){e.filters=t},setLoading:function(e,t){e.isLoading=t},setSortedThreads:function(e,t){e.sortedThreads=t},setActiveCommentPosition:function(e,t){e.activeCommentPosition=t},setUserSettings:function(e,t){e.userSettings=t},setIsDrawing:function(e,t){e.isDrawing=t},setUpdatePostedThread:function(e,t){t?e.updatePostedThread.push(t):e.updatePostedThread=[]},setActiveViewTabs:function(e,t){e.activeViewTabs=t},setUpdateViewTabs:function(e,t){e.updateViewTabs=t},setAccessListUsers:function(e,t){e.accessListUsers=t},setProjectDetails:function(e,t){e.projectDetails=t},setReleases:function(e,t){e.releases=t},closeAllModal:function(e){e.forOpenModal.length&&(e.forOpenModal.forEach((function(e){return e.close()})),e.forOpenModal=[])},setOpenModal:function(e,t){e.forOpenModal.push(t)},removeOpenModal:function(e,t){e.forOpenModal.length&&(e.forOpenModal=e.forOpenModal.filter((function(e){return e!==t}))||[])},setSelectedUserSettings:function(e){if(Object.keys(e.userSettings).length){var t=function(t){e.filters[t].forEach((function(n){var r=e.userSettings[n.name];if(r&&("checkboxes"===t&&(n.isSelected=!!parseInt(r.Value)),"radios"===t)){var i,o=JSON.parse(r.Value);if(n.isSelected=!(!o||o.id!==n.id),o.userId&&null!==(i=n.users)&&void 0!==i&&i.length)n.users.reduce((function(e,t){return t.isSelected=o.userId===t.id,t.isSelected||e}),!1)||(n.user[0].isSelected=!0)}}))};for(var n in e.filters)t(n)}window.__CORE__.bus.emit("CommentPanel:filterChange")}},d=n(8),h=n.n(d),p=n(305),m=n(137),v=n.n(m),y=n(60),g=n.n(y),b=n(29),w=n(6),_=n(138),O=n(9),C=function(e){switch("string"==typeof e&&(e=e.trim().toLowerCase()),e){case!0:case"true":case 1:case"1":case"on":case"yes":return!0;default:return!1}}(Object(O.c)("data-is-ccv","")),S=n(144),x=function(e){var t=(new DOMParser).parseFromString(e,"text/xml").querySelector("GetChannelUrlResult");return t?t.innerHTML:null},k=function(e){for(var t=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("item"),n=[],r=0;r<t.length;r++){var i=t.item(r),o=E(i);o&&n.push(o)}return n},E=function(e){if(!e.hasChildNodes()||e.childNodes.length<3)return null;for(var t=e.childNodes,n={},r={UserId:"UserId",FullName:"FullName",UserName:"UserName",FirstName:"FirstName",LastName:"LastName",Email:"Email"},i=0;i<t.length;i++){var o=t.item(i);if(r[o.nodeName])n[o.nodeName]=o.textContent;else if("Parameters"===o.nodeName&&o.childNodes[0]){var a=T(o.childNodes[0].childNodes);n.ProfilePicture=a.ProfilePicture,n.GlobalUserId=a.GlobalUserId}}return!n.FullName&&n.FirstName&&n.LastName&&(n.FullName="".concat(n.FirstName," ").concat(n.LastName)),n.UserId?n:null},T=function(e){if(!e||!e.length)return null;for(var t={},n=0;n<e.length;n++){var r=e.item(n).childNodes;if(2===r.length){var i=r.item(0),o=r.item(1);"Name"===i.nodeName&&"Value"===o.nodeName&&("ProfilePicture"===i.textContent?t.ProfilePicture=o.textContent:"GlobalUserGUID"===i.textContent&&(t.GlobalUserId=o.textContent))}}return t};function P(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new Set;return e.ModifiedBy&&n.add(e.ModifiedBy),e.AssignedTo&&n.add(e.AssignedTo),e.CreatedBy&&n.add(e.CreatedBy),e.Comments.forEach((function(e){n.add(e.ModifiedBy),e.Mentions&&e.Mentions.forEach((function(e){return n.add(e.MentionGuid)}))})),t.forEach((function(e){n.has(e.UserId)&&n.delete(e.UserId),n.has(e.GlobalUserId)&&n.delete(e.GlobalUserId)})),P(n)},j=n(12);function D(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){D(o,r,i,a,s,"next",e)}function s(e){D(o,r,i,a,s,"throw",e)}a(void 0)}))}}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=window.__CORE__,$=window.__APP__.analytics,V={},z=null,G=function(e){return!Array.isArray(e)||!e.length},H={setActiveThreadId:function(e,t){(0,e.commit)("setActiveThreadId",t)},setActiveThreadTaskStatus:function(e,t){var n=e.commit,r=e.getters,i=e.state,o=i.threads.findIndex((function(e){return e.Guid===r.activeThreadId})),a=N(i.threads);o>=0&&(a[o]=L(L({},i.threads[o]),{},{Properties:L(L({},i.threads[o].Properties),{},{LwTaskStatus:t})})),n("setThreads",a)},setActiveThreadAssignee:function(e,t){var n=e.commit,r=e.getters;n("setThreads",e.state.threads.map((function(e){return e.Guid===r.activeThreadId?L(L({},e),{},{AssignedTo:t}):e})))},setActiveCommentControl:function(e,t){var n=e.commit,r=e.state;if(r.activeGraphicsComment){var i=r.activeGraphicsComment.guid;n("setActiveGraphicsComment",null),F.bus.emit("CommentsDrawingEngine:remove",i)}else F.bus.emit("CommentsDrawingEngine:remove",null);var o=r.activeCommentControl;!t||o&&t.id===o.id?(n("setActiveCommentControl",null),n("setCreateNewThread",!1)):(this.dispatch("setActiveThreadId",null),F.bus.emit("CommentsDrawingEngine:activate",{id:null,zoomToFit:!1}),n("setActiveCommentControl",t),F.bus.emit("CommentsDrawingEngine:create",t.id,r.threads.length+1))},setCreateNewThread:function(e,t){(0,e.commit)("setCreateNewThread",t),t||this.dispatch("setActiveCommentControl",null)},setDocuments:function(e){var t=e.commit,n=F.response.metadata;if(n){var r,i=[],o=n.schDocuments&&Object(S.a)(n.schDocuments)||[];i=i.concat(o);var a=n.pcbDocument&&Object(S.a)([n.pcbDocument])||[];i=i.concat(a);var s=F.response.storage;if(s){var u=s.files.find((function(e){return"Lsm"===e.fileType}));if(u){var c={id:u.fileType,name:"Stackup",order:0};i.push(c)}}null!==(r=n.pcbDwfDocuments)&&void 0!==r&&r.length&&(i=i.concat(F.response.metadata.pcbDwfDocuments.filter((function(e){return e.pages})).flatMap((function(e){return e.pages.map((function(t,n){var r=e.id||e.fileName,i=t.objectId||n.toString();return{id:"".concat(i,"-").concat(r),name:e.fileName,order:e.order}}))})))),t("setDocuments",i)}},updateDocuments:function(e,t){var n=e.commit,r=e.state;t&&n("setDocuments",N(new Set([].concat(N(r.documents),N(Object(S.a)(t))))))},setOtherDocuments:function(e,t){var n=e.commit;t&&n("setOtherDocuments",Object(S.a)(t))},setTooltip:function(e,t){var n=e.commit,r=e.state,i=null;if(t){var o=r.threads.find((function(e){return e.Guid===t.id}));if(o){var a,s,u,c=null===(a=o.Comments)||void 0===a?void 0:a[0],l=o.AssignedTo&&r.users.find((function(e){return e.UserId===o.AssignedTo}));i=L(L({},t),{},{author:null==c||null===(s=c.Author)||void 0===s?void 0:s.FullName,text:null==c?void 0:c.Text,number:o.ThreadNumber,assignedTo:null==l?void 0:l.FullName,task:null===(u=o.Properties)||void 0===u?void 0:u.LwTaskHrid})}}n("setTooltip",i)},requestAllGroups:function(e){return I(regeneratorRuntime.mark((function t(){var n,r,i,o,a,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.commit,w.n&&!w.s){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Object(b.i)();case 5:null!=(o=t.sent)&&null!==(n=o.data)&&void 0!==n&&null!==(r=n.Items)&&void 0!==r&&r.length&&(a=o.data.Items.map((function(e){return{id:e.GroupId,name:e.GroupName,mentionType:v.a.group}})),s=a.find((function(e){return"Administrators"===e.name})),u=a.filter((function(e){return"Administrators"!==e.name})),s&&u.push(s),i("setGroups",u));case 7:case"end":return t.stop()}}),t)})))()},requestGetAllReleases:function(e){return I(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.commit,"Project"===w.c){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,Object(b.k)();case 6:r=t.sent,G(r.data)||n("setReleases",r.data),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))()},requestAllThreads:function(e){var t=this;return I(regeneratorRuntime.mark((function n(){var r,i,o,a,s,u,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,i=e.state,n.prev=1,t.dispatch("requestAllGroups"),n.next=5,t.dispatch("requestGetAllReleases");case 5:return o=w.c.includes("Release"),n.next=8,Object(b.v)();case 8:if(a=n.sent,s=[],u=new Set,!G(a.data)){n.next=13;break}return n.abrupt("return");case 13:if((o?a.data.filter((function(e){var t;return(null==e||null===(t=e.Properties)||void 0===t?void 0:t.ReleaseGuid)===w.h})):a.data).forEach((function(e){s.push(e),e.AssignedTo&&u.add(e.AssignedTo),e.CreatedBy&&u.add(e.CreatedBy),e.ModifiedBy&&u.add(e.ModifiedBy),G(e.Comments)||e.Comments.forEach((function(e){u.add(e.ModifiedBy),e.Mentions&&e.Mentions.forEach((function(e){return u.add(e.MentionGuid)}))}))})),n.prev=15,u.size){n.next=18;break}return n.abrupt("return");case 18:return n.next=20,t.dispatch("requestUsers",N(u));case 20:c=N(i.users),s.forEach((function(e){Array.isArray(e.Comments)&&e.Comments.length&&e.Comments.forEach((function(e){var t=c.find((function(t){return t.UserId===e.ModifiedBy}));t&&(e.Author=t),e.Text=Object(p.encodeHtml)(e.Text)}))}));case 22:return n.prev=22,r("setThreads",s),s.forEach((function(e){F.bus.emit("CommentsDrawingEngine:add",e)})),t.dispatch("updateFilters",{users:i.users}),n.finish(22);case 27:n.next=32;break;case 29:n.prev=29,n.t0=n.catch(1),console.log(n.t0);case 32:case"end":return n.stop()}}),n,null,[[1,29],[15,,22,27]])})))()},requestAnonymousAllThreads:function(e){var t=this;return I(regeneratorRuntime.mark((function n(){var r,i,o,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,i=e.state,n.prev=1,n.next=4,Object(b.p)();case 4:if(o=n.sent,a=o.data,!G(a.Threads)){n.next=8;break}return n.abrupt("return");case 8:if(a.Threads.forEach((function(e){F.bus.emit("CommentsDrawingEngine:add",e),Array.isArray(e.Comments)&&e.Comments.length&&e.Comments.forEach((function(e){var t=a.Users.find((function(t){return t.UserId===e.ModifiedBy}));t&&(e.Author=t),e.Text=Object(p.encodeHtml)(e.Text)}))})),r("setThreads",a.Threads),t.dispatch("updateFilters",{users:a.Users}),r("setUserSettings",{UnresolvedOnly:{Name:"UnresolvedOnly",Value:1}}),r("setSelectedUserSettings"),!G(a.Users)){n.next=15;break}return n.abrupt("return");case 15:r("setUsers",[].concat(N(i.users),N(a.Users))),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(1),console.log(n.t0);case 21:case"end":return n.stop()}}),n,null,[[1,18]])})))()},requestAddThread:function(e,t){var n=this;return I(regeneratorRuntime.mark((function r(){var i,o,a,s,u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=e.state,r.prev=1,r.prev=2,o=i.activeGraphicsComment,a=L(L({},t),{},{type:o.type,data:o.serializedData,drawing:o.serializedDrawingData,documentName:o.documentName,documentType:o.documentType,objectType:o.objectType}),$.dispatchMetricEventStart("Performance.Place.Comment.Post"),r.next=8,Object(b.t)(a);case 8:s=r.sent,$.dispatchMetricEventEnd("Performance.Place.Comment.Post"),(u=V["requestNewThread-".concat(s.data.Guid)])&&u.cancel("The new thread was got"),n.dispatch("displayNewThread",{thread:s.data}),j.a.emit("CommentPanel:triggerUpdateAllThreads");case 14:return r.prev=14,n.dispatch("setCreateNewThread",!1),r.finish(14);case 17:r.next=22;break;case 19:r.prev=19,r.t0=r.catch(1),console.log(r.t0);case 22:case"end":return r.stop()}}),r,null,[[1,19],[2,,14,17]])})))()},displayNewThread:function(e,t){var n=this;return I(regeneratorRuntime.mark((function r(){var i,o,a,s,u,c,l,f,d,h,p;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.commit,o=e.state,a=t.thread,s=t.isWS,u="displayNewThread-".concat(a.Guid),!V[u]&&!o.threads.find((function(e){return e.Guid===a.Guid}))){r.next=5;break}return r.abrupt("return");case 5:if(V[u]=!0,r.prev=6,l=w.c.includes("Release"),f=(null==a||null===(c=a.Properties)||void 0===c?void 0:c.ReleaseGuid)===w.h,!(d=M(a,o.users)).length){r.next=13;break}return r.next=13,n.dispatch("requestUsers",d);case 13:(h=o.users.find((function(e){return e.UserId===a.ModifiedBy})))?(p=o.users.find((function(e){return e.UserId===a.ModifiedBy})))&&(a.Comments[0].Author=p):a.Comments[0].Author=h,l&&!f||(F.bus.emit("CommentsDrawingEngine:add",a),o.threads.find((function(e){return e.Guid===a.Guid}))||i("setThreads",[].concat(N(o.threads),[a])),!s&&i("setActiveThreadId",a.Guid),!s&&setTimeout((function(){F.bus.emit("CommentsDrawingEngine:activate",{id:a.Guid,zoomToFit:!1})}),100)),n.dispatch("updateFilters",{users:o.users}),r.next=22;break;case 19:r.prev=19,r.t0=r.catch(6),console.log(r.t0);case 22:return r.prev=22,delete V[u],r.finish(22);case 25:case"end":return r.stop()}}),r,null,[[6,19,22,25]])})))()},requestNewThread:function(e){var t=arguments,n=this;return I(regeneratorRuntime.mark((function r(){var i,o,a,s,u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.commit,i=e.state,o=t.length>1&&void 0!==t[1]?t[1]:{},a="requestNewThread-".concat(o.threadId),!V[a]&&!i.threads.find((function(e){return e.Guid===o.threadId}))){r.next=5;break}return r.abrupt("return");case 5:return s=Object(b.q)(o.threadId),V[a]=s,r.prev=7,r.next=10,s.call();case 10:u=r.sent,n.dispatch("displayNewThread",{thread:u.data,isWS:o.isWS}),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(7),!g.a.isCancel(r.t0)&&console.log(r.t0);case 17:return r.prev=17,delete V[a],r.finish(17);case 20:case"end":return r.stop()}}),r,null,[[7,14,17,20]])})))()},requestThreadRemove:function(e){var t=arguments,n=this;return I(regeneratorRuntime.mark((function r(){var i,o,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=e.commit,e.state,o=t.length>1&&void 0!==t[1]?t[1]:{},a=o.threadId,r.prev=3,r.next=6,Object(b.u)(o);case 6:if(204!==r.sent.status){r.next=13;break}i("setActiveThreadId",null),n.dispatch("setRemoveThread",{threadId:a}),j.a.emit("CommentPanel:triggerUpdateAllThreads"),r.next=14;break;case 13:throw new Error("Cannot remove the thread.");case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(3),console.log(r.t0);case 19:case"end":return r.stop()}}),r,null,[[3,16]])})))()},setRemoveThread:function(e){var t=e.commit,n=e.state,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.threadId,o=n.threads.filter((function(e){return e.Guid!==i}));o.length!==n.threads.length&&(F.bus.emit("CommentsDrawingEngine:remove",i),t("setThreads",o),this.dispatch("updateFilters",{users:n.users}))},requestResolveThread:function(e){var t=arguments,n=this;return I(regeneratorRuntime.mark((function r(){var i,o,a,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.commit,i=e.state,o=t.length>1&&void 0!==t[1]?t[1]:{},a=o.threadId,r.prev=3,r.next=6,Object(b.y)(o);case 6:if(200!==r.sent.status){r.next=15;break}return s=i.threads.find((function(e){return e.Guid===a})),F.bus.emit("CommentsDrawingEngine:resolve",s),r.next=12,n.dispatch("requestChangedThread",{threadId:a});case 12:j.a.emit("CommentPanel:triggerUpdateAllThreads"),r.next=16;break;case 15:throw new Error("Cannot resolve the thread.");case 16:r.next=21;break;case 18:r.prev=18,r.t0=r.catch(3),console.log(r.t0);case 21:case"end":return r.stop()}}),r,null,[[3,18]])})))()},requestChangedThread:function(e){var t=arguments,n=this;return I(regeneratorRuntime.mark((function r(){var i,o,a,s,u,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.commit,e.state,o=t.length>1&&void 0!==t[1]?t[1]:{},i("setLoading",!0),a="requestChangedThread-".concat(o.threadId),!V[a]){r.next=6;break}return r.abrupt("return");case 6:return s=Object(b.q)(o.threadId),V[a]=s,r.prev=8,r.next=11,s.call();case 11:return u=r.sent,c=u.data,r.next=15,n.dispatch("updateChangedThread",c);case 15:r.next=20;break;case 17:r.prev=17,r.t0=r.catch(8),!g.a.isCancel(r.t0)&&console.log(r.t0);case 20:return r.prev=20,i("setLoading",!1),delete V[a],r.finish(20);case 24:case"end":return r.stop()}}),r,null,[[8,17,20,24]])})))()},updateChangedThread:function(e,t){var n=this;return I(regeneratorRuntime.mark((function r(){var i,o,a,s,u,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.commit,o=e.state,a="updateChangedThread-".concat(t.Guid),!V[a]){r.next=4;break}return r.abrupt("return");case 4:if(V[a]=!0,r.prev=5,!(s=M(t,o.users)).length){r.next=10;break}return r.next=10,n.dispatch("requestUsers",s);case 10:t=L(L({},t),{},{Comments:t.Comments.map((function(e){var t=o.users.find((function(t){return t.UserId===e.ModifiedBy}));return t?L(L({},e),{},{Author:t}):e}))}),u=N(o.threads),-1!==(c=u.findIndex((function(e){return e.Guid===t.Guid})))?u.splice(c,1,t):u.push(t),i("setThreads",u),n.dispatch("updateFilters",{users:o.users}),r.next=21;break;case 18:r.prev=18,r.t0=r.catch(5),console.log(r.t0);case 21:return r.prev=21,delete V[a],r.finish(21);case 24:case"end":return r.stop()}}),r,null,[[5,18,21,24]])})))()},requestAddComment:function(e){var t=arguments,n=this;return I(regeneratorRuntime.mark((function r(){var i,o,a,s,u,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.commit,i=e.state,o=t.length>1&&void 0!==t[1]?t[1]:{},r.prev=2,r.next=5,Object(b.m)(o);case 5:if(a=r.sent,s=a.data,u=i.threads.find((function(e){return e.Guid===o.threadId}))){r.next=11;break}return n.dispatch("requestChangedThread",o),r.abrupt("return");case 11:if((c=V["requestChangedThread-".concat(o.threadId)])&&c.cancel("The thread was updated"),j.a.emit("CommentPanel:triggerUpdateAllThreads"),!u.Comments.find((function(e){return e.Guid===s.Guid}))){r.next=16;break}return r.abrupt("return");case 16:u.Comments.push(s),n.dispatch("updateChangedThread",u),r.next=23;break;case 20:r.prev=20,r.t0=r.catch(2),console.log(r.t0);case 23:case"end":return r.stop()}}),r,null,[[2,20]])})))()},requestModifyThread:function(e){var t=arguments;return I(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.state,r=t.length>1&&void 0!==t[1]?t[1]:{},n.prev=2,r.value=[].concat(N(r.updateThread),[{op:"replace",path:"/AssignedTo",value:r.value.AssignedTo}]),n.next=6,Object(b.n)(r);case 6:if(i=n.sent,j.a.emit("CommentPanel:triggerUpdateAllThreads"),200===i.status){n.next=10;break}throw new Error("Cannot modify thread.");case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[2,12]])})))()},requestModifyComment:function(e){var t=arguments,n=this;return I(regeneratorRuntime.mark((function r(){var i,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.commit,e.state,i=t.length>1&&void 0!==t[1]?t[1]:{},o=i.threadId,r.prev=3,r.next=6,Object(b.o)(i);case 6:if(204!==r.sent.status){r.next=13;break}return r.next=10,n.dispatch("requestChangedThread",{threadId:o});case 10:j.a.emit("CommentPanel:triggerUpdateAllThreads"),r.next=14;break;case 13:throw new Error("Cannot modify comment.");case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(3),console.log(r.t0);case 19:case"end":return r.stop()}}),r,null,[[3,16]])})))()},requestRemoveComment:function(e,t){var n=this;return I(regeneratorRuntime.mark((function r(){var i,o,a,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=e.state,r.prev=1,r.next=4,Object(b.s)(t);case 4:if(204!==r.sent.status){r.next=19;break}if((o=i.threads.find((function(e){return e.Guid===t.threadId})))&&o.Comments&&!(o.Comments.length<2)){r.next=9;break}return r.abrupt("return");case 9:if(-1!==(a=o.Comments.findIndex((function(e){return e.Guid===t.commentId})))){r.next=12;break}return r.abrupt("return");case 12:(s=V["requestChangedThread-".concat(t.threadId)])&&s.cancel("The thread was updated"),o.Comments.splice(a,1),n.dispatch("updateChangedThread",o),j.a.emit("CommentPanel:triggerUpdateAllThreads"),r.next=20;break;case 19:throw new Error("Cannot remove the comment.");case 20:r.next=25;break;case 22:r.prev=22,r.t0=r.catch(1),console.log(r.t0);case 25:case"end":return r.stop()}}),r,null,[[1,22]])})))()},requestUsers:function(e,t){return I(regeneratorRuntime.mark((function n(){var r,i,o,a,s,u,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,i=e.state,n.prev=1,n.next=4,Object(b.w)(t);case 4:return o=n.sent,a=k(o.data),s=null,u=[],n.next=10,f=I(regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.map((function(e){return e.GlobalUserId})),e.next=3,Object(b.r)([].concat(N(i),N(t)));case 3:s=e.sent,u=(null===(n=s)||void 0===n?void 0:n.data)&&k(null===(r=s)||void 0===r?void 0:r.data);case 5:case"end":return e.stop()}}),e)}))),d=null,h=void 0,"function"==typeof(h=C?f:d)?h():h;case 10:if(a=a.map((function(e){if(!e.GlobalUserId)return e;var t=u.find((function(t){var n=t.UserId;return e.GlobalUserId===n}));return t&&t.ProfilePicture?L(L({},e),{},{ProfilePicture:t.ProfilePicture}):e})),c=[],u.forEach((function(e){a.some((function(t){return t.GlobalUserId===e.UserId}))||c.push(e)})),a=[].concat(N(a),c),l=i.users,a.filter((function(e){var t=e.UserId;return!l.some((function(e){return e.UserId===t}))})),a.forEach((function(e){return e.MentionType=v.a.user})),!G(a)){n.next=19;break}return n.abrupt("return");case 19:return r("setUsers",[].concat(N(i.users),N(a))),n.abrupt("return",Promise.resolve());case 23:n.prev=23,n.t0=n.catch(1),console.log(n.t0);case 26:case"end":return n.stop()}var f,d,h}),n,null,[[1,23]])})))()},initWebSocket:function(e){var t=this;return I(regeneratorRuntime.mark((function n(){var r,i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.commit,e.state,n.prev=1,n.next=4,Object(b.x)();case 4:200===(r=n.sent).status&&(i=x(r.data),o=w.z?"?sessionId=".concat(w.z,"&clientId=WebUI-").concat(h()()):"",(z=new WebSocket(i+o)).binaryType="arraybuffer",z.onopen=function(){z.send(JSON.stringify({ChannelName:w.v,Data:"",Operation:"Subscribe"}))},z.onmessage=function(e){var n,r,i=JSON.parse(e.data),o=null==i||null===(n=i.Data)||void 0===n?void 0:n.ThreadGUID;if(w.v===(null==i||null===(r=i.Data)||void 0===r?void 0:r.ProjectGUID)&&o)switch(i.Action){case"CommentThreadAdded":t.dispatch("requestNewThread",{threadId:o,isWS:!0});break;case"CommentThreadChanged":t.dispatch("requestChangedThread",{threadId:o});break;case"CommentAdded":t.dispatch("requestNewThread",{threadId:o,isWS:!0});break;case"CommentChanged":t.dispatch("requestChangedThread",{threadId:o});break;case"CommentThreadDeleted":t.dispatch("setRemoveThread",{threadId:o})}},z.onerror=function(e){console.log("Error websocket",e)}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},updateFilters:function(e,t){var n=e.commit,r=e.state;if(r.threads.length||!t.user){if(t.name){var i=r.filters.radios.map((function(e){return L(L({},e),{},{isSelected:t.name===e.text})}));n("setFilters",L(L({},r.filters),{},{radios:i}))}if(void 0!==t.isSelected){var o=r.filters.checkboxes.map((function(e){return L(L({},e),{},{isSelected:t.item.id===e.id?t.isSelected:e.isSelected})}));n("setFilters",L(L({},r.filters),{},{checkboxes:o}))}if(t.user){var a=r.filters.radios.map((function(e){if(!e.users)return e;var n=e.users.map((function(e){return L(L({},e),{},{isSelected:e.id===t.user.id})}));return L(L({},e),{},{users:n})}));n("setFilters",L(L({},r.filters),{},{radios:a}))}if(t.users&&Array.isArray(t.users)){var s=t.users.filter((function(e){return!(e.UserId===w.u||e.UserId===w.j)&&r.threads.some((function(t){return t.Comments.some((function(t){return t.CreatedBy===e.UserId}))}))})),u=r.filters.radios.map((function(e){if(!e.users)return e;var t=e.users.find((function(e){return e.isSelected})),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=e.reduce((function(e,n){return e[n[t]]=n,e}),{});return Object.values(n)}(s.reduce((function(e,n){return e.push(L(L({},n),{},{img:n.ProfilePicture?Object(_.a)(n.ProfilePicture):"",id:n.UserId,name:n.FullName,isSelected:t?t.id===n.UserId:0===e.length})),e}),[]));return n.length&&!n.some((function(e){return e.isSelected}))&&(n[0].isSelected=!0),L(L({},e),{},{users:n})}));n("setFilters",L(L({},r.filters),{},{radios:u}))}}else r.filters.radios.forEach((function(e){e.users&&(e.users=[])}))},requestGetUserSettings:function(e){return I(regeneratorRuntime.mark((function t(){var n,r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,t.next=4,Object(b.g)();case 4:if(r=t.sent,i=r.data,Array.isArray(i)){t.next=8;break}return t.abrupt("return");case 8:o={},i.length&&i.some((function(e){return"UnresolvedOnly"===e.Name}))||(o.UnresolvedOnly={Name:"UnresolvedOnly",Value:1},Object(b.h)([o.UnresolvedOnly])),i.length&&i.forEach((function(e){return o[e.Name]=e})),n("setUserSettings",o),n("setSelectedUserSettings"),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),n("setSelectedUserSettings"),console.error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[1,15]])})))()},requestGetAccessListUser:function(e){return I(regeneratorRuntime.mark((function t(){var n,r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.commit,t.prev=1,!(r={Upload:b.f,MfgPackage:function(){return Object(b.e)(w.v)}})[w.c]){t.next=9;break}return t.next=6,r[w.c]();case 6:t.t0=t.sent,t.next=10;break;case 9:t.t0=null;case 10:null!=(i=t.t0)&&i.data&&(o=i.data.map((function(e){return{id:e.TrusteeGuid||e.EntityGuid,avatarUrl:e.TrusteeUserPic?Object(_.a)(e.TrusteeUserPic):"",entityGuid:e.EntityGuid,trusteeGuid:e.TrusteeGuid,mentionType:v.a.user,username:e.TrusteeUserName,name:"".concat(e.TrusteeFirstName," ").concat(e.TrusteeLastName),email:e.TrusteeUserName}})),n("setAccessListUsers",o)),t.next=17;break;case 14:t.prev=14,t.t1=t.catch(1),console.error(t.t1);case 17:case"end":return t.stop()}}),t,null,[[1,14]])})))()},requestProjectDetails:function(e){return I(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,t.next=4,Object(b.d)(w.v);case 4:null!=(r=t.sent)&&r.data&&n("setProjectDetails",r.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},W=new(0,window.__APP__.library.Vuex.Store)({state:{threads:[],sortedThreads:[],users:[],groups:[],mentionsDictionary:{nameToEmail:{},emailToName:{},userName:{}},teamUsers:[],currentDocId:null,documents:[],otherDocuments:[],updatePostedThread:[],userSettings:{},activeThreadId:null,activeViewTabs:null,updateViewTabs:[],activeCommentPosition:null,isLoading:!1,isDrawing:!1,forOpenModal:[],releases:[],accessListUsers:[],projectDetails:{},commentControls:[{id:"pin",icon:"comment-pin",isSelected:!1},{id:"area",icon:"comment-area",isSelected:!1},{id:"draw",icon:"comment-draw",isSelected:!1}],activeCommentControl:null,createNewThread:!1,activeGraphicsComment:null,tooltip:null,docIdGerber:"DEFAULT_GERBER",filters:{radios:[{id:"all",text:"All",name:"UserFrom",isSelected:!0},{id:"my",text:"My",description:"(you are involved in)",name:"UserFrom",isSelected:!1},{id:"from",text:"From",isSelected:!1,name:"UserFrom",users:[]}],checkboxes:[{id:"unresolved",text:"Unresolved only",name:"UnresolvedOnly",isSelected:!1},{id:"current",text:"Current document only",name:"CurrentDocumentOnly",isSelected:!1}]}},mutations:f,getters:l,actions:H}),Y=function(){return W.state.threads.length},q=function(e){return W.dispatch("setActiveCommentControl",e)},X=function(e){return W.dispatch("setCreateNewThread",e)},Z=function(e){return W.dispatch("setActiveThreadId",e)},K=function(){return W.dispatch("requestAllThreads")},J=function(){return W.dispatch("requestAnonymousAllThreads")},Q=function(){return W.dispatch("requestGetUserSettings")},ee=function(e){return W.commit("setCurrentDocId",e)},te=function(){return W.dispatch("setDocuments")},ne=function(e){return W.dispatch("setOtherDocuments",e)},re=function(){return W.dispatch("initWebSocket")},ie=function(e){return W.commit("setActiveGraphicsComment",e)},oe=function(e){return W.dispatch("setTooltip",e)},ae=function(){return W.dispatch("setTooltip",null)},se=function(){return W.commit("closeAllModal")},ue=function(e){return W.commit("setActiveViewTabs",e)},ce=function(e){return W.commit("setUpdateViewTabs",e)},le=function(e){return W.commit("setIsDrawing",e)},fe=function(e){return W.commit("setUpdatePostedThread",e)},de=function(e){return W.commit("setActiveCommentPosition",e)};t.b=W},function(e,t,n){"use strict";t.a=function(){return["","","-","-","-","-","","",""].reduce((function(e,t){return e+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+t}))}},function(e,t,n){"use strict";var r=n(113),i=Object.prototype.toString;function o(e){return Array.isArray(e)}function a(e){return void 0===e}function s(e){return"[object ArrayBuffer]"===i.call(e)}function u(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===i.call(e)}function f(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:s,isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&s(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:u,isPlainObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return u(e)&&l(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:f,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)f(arguments[r],n);return t},extend:function(e,t,n){return f(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"hasOwnProperty",(function(){return i})),n.d(t,"isObject",(function(){return o})),n.d(t,"isEmptyObject",(function(){return a})),n.d(t,"isEmptyArray",(function(){return s})),n.d(t,"hasRequiredProperties",(function(){return u})),n.d(t,"percentage",(function(){return c}));var i=function(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)},o=function(e){return"object"===r(e)&&null!==e&&!Array.isArray(e)},a=function(e){return!("object"===r(e)&&null!==e&&!Array.isArray(e)&&Object.keys(e).length)},s=function(e){return Array.isArray(e)&&!e.length},u=function(e,t){return t.every((function(t){return i(e,t)}))},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="(\\d+(\\.\\d+)?|\\.\\d+) ?%";return e.exact?new RegExp("^"+t+"$","i"):new RegExp(t,"ig")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=window.__CORE__},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==n(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?(e.exports=r=function(e){return n(e)},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},e.exports.default=e.exports,e.exports.__esModule=!0),r(t)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=(window,function(e){return"function"==typeof e}),a=function(e){return window.__afsComponents&&window.__afsComponents[e]};t.default={inserted:function(e,t){var n=t.arg,r=t.value,s="object"===i()(r)&&null!==r&&!Array.isArray(r),u="ontouchstart"in window,c=!(s&&o(r.shouldBeInserted))||r.shouldBeInserted(e);if(!u&&c){var l=s?r.id:n,f=null;e.dataset.afsHintControl=l;var d=function(t){var n=a(l);if(n){var i=s&&o(r.onOpen);i&&n.on&&n.on("open",r.onOpen),n.open(e,t),i&&n.off&&n.off("open",r.onOpen)}};e.addEventListener("mousemove",(function(e){f&&clearTimeout(f);var t=a(l);!s||r.noDelay||t&&(!t||t.showImmediately())?d(e):f=setTimeout((function(){return d(e)}),r.delay||1e3)}),!1),e.addEventListener("mouseleave",(function(t){f&&clearTimeout(f);var n=a(l);if(n){var i=s&&o(r.onClose);i&&n.on&&n.on("close",r.onClose),n.close(e),i&&n.off&&n.off("close",r.onClose)}}),!1)}}}}])},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.tag,e._g(e._b({tag:"component",staticClass:"afs-btn-icon",class:e.classes,attrs:{type:e.buttonType,"data-locator":e.dataLocator}},"component",e.$attrs,!1),e.$listeners),[n("Icon",{staticClass:"afs-btn-icon__figure",attrs:{name:e.social||e.icon}})],1)};r._withStripped=!0;var i=n(5),o=n(1),a=n(2),s=n(4),u={name:"AfsButtonIcon",components:{Icon:i.a},inheritAttrs:!1,props:{dataLocator:{type:String,default:"button-icon"},tag:{type:String,default:"button",validator:function(e){return["button","a"].includes(e)}},type:{type:String,default:"button",validator:function(e){return["button","submit"].includes(e)}},radius:{type:String,default:"".concat(o.d.tl," ").concat(o.d.tr," ").concat(o.d.bl," ").concat(o.d.br)},icon:{type:String,default:""},isSelected:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},semitransparent:{type:Boolean,default:!1},gallery:{type:Boolean,default:!1},primary:{type:Boolean,default:!1},size:{type:String,default:"md",validator:function(e){return["xl","lg","md","sm","xs"].includes(e)}},social:{type:String,default:"",validator:function(e){return!e.length||["facebook","google-plus","linkedin"].includes(e)}}},computed:{classes:function(){return[this.themeClass,this.radiusClass,{"afs-btn-icon_transparent":this.transparent,"afs-btn-icon_semitransparent":this.semitransparent,"afs-btn-icon_rounded":this.rounded,"afs-btn-icon_social":!!this.social.length,"afs-btn-icon_gallery":this.gallery,"afs-btn-icon_primary":this.primary,"is-selected":this.isSelected},"afs-btn-icon_".concat(this.size),this.social.length?"afs-btn-icon_".concat(this.social):null]},themeClass:function(){var e=Object(s.a)(this.$root);return Object(a.c)(e.theme)},radiusClass:function(){return Object(a.b)("afs-btn-icon",this.radius)},buttonType:function(){return["button","input"].includes(this.tag)?this.type:null}},methods:{getBEMClass:function(e){return Object(a.a)("afs-btn-icon",e)}}},c=(n(83),n(0)),l=Object(c.a)(u,r,[],!1,null,null,null);l.options.__file="WebUI/VueJsComponentLibrary/src/components/ButtonIcon/App.vue";var f=l.exports;t.a=f},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var i,o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"BackgroundLayer",get:function(){return"Background"}},{key:"MultiLayer",get:function(){return"Multi-Layer"}},{key:"TopOverlayLayer",get:function(){return"Top Overlay"}},{key:"BottomOverlayLayer",get:function(){return"Bottom Overlay"}},{key:"TopLayer",get:function(){return"Top Layer"}},{key:"BottomLayer",get:function(){return"Bottom Layer"}},{key:"MidLayer",get:function(){return"Mid-Layer"}},{key:"TopPasteLayer",get:function(){return"Top Paste"}},{key:"BottomPasteLayer",get:function(){return"Bottom Paste"}},{key:"TopSolderLayer",get:function(){return"Top Solder"}},{key:"BottomSolderLayer",get:function(){return"Bottom Solder"}},{key:"InternalPlaneLayer",get:function(){return"Internal Plane"}},{key:"PadHolesLayer",get:function(){return"Pad Holes"}},{key:"ViaHolesLayer",get:function(){return"Via Holes"}},{key:"DrillGuideLayer",get:function(){return"Drill Guide"}},{key:"KeepOutLayer",get:function(){return"Keep-Out Layer"}},{key:"MechanicalLayer",get:function(){return"Mechanical"}},{key:"DrillDrawingLayer",get:function(){return"Drill Drawing"}},{key:"SelectionsLayer",get:function(){return"Selections"}},{key:"ConnectionsLayer",get:function(){return"Connections"}},{key:"DielectricLayer",get:function(){return"Dielectric"}}],(n=null)&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();!function(e){e[e.None=0]="None",e[e.Signal=1]="Signal",e[e.Plane=2]="Plane",e[e.Mechanical=4]="Mechanical",e[e.System=8]="System",e[e.Dielectric=16]="Dielectric",e[e.Other=32]="Other",e[e.LayerPair=64]="LayerPair",e[e.Top=128]="Top",e[e.Bottom=256]="Bottom",e[e.Solder=512]="Solder",e[e.Overlay=1024]="Overlay",e[e.Paste=2048]="Paste"}(i||(i={}))},function(e,t,n){"use strict";var r=n(1);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a={inserted:function(e,t){var n=t.arg,o=t.value,a="object"===i(o)&&null!==o&&!Array.isArray(o),s="ontouchstart"in window,u=!(a&&Object(r.c)(o.shouldBeInserted))||o.shouldBeInserted(e);if(!s&&u){var c=a?o.id:n,l=null;e.dataset.afsHintControl=c;var f=function(t){var n=r.b.get(c);if(n){var i=a&&Object(r.c)(o.onOpen);i&&n.on&&n.on("open",o.onOpen),n.open(e,t),i&&n.off&&n.off("open",o.onOpen)}};e.addEventListener("mousemove",(function(e){l&&clearTimeout(l);var t=r.b.get(c);!a||o.noDelay||t&&(!t||t.showImmediately())?f(e):l=setTimeout((function(){return f(e)}),o.delay||1e3)}),!1),e.addEventListener("mouseleave",(function(t){l&&clearTimeout(l);var n=r.b.get(c);if(n){var i=a&&Object(r.c)(o.onClose);i&&n.on&&n.on("close",o.onClose),n.close(e),i&&n.off&&n.off("close",o.onClose)}}),!1)}}}},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.tag,e._g(e._b({tag:"component",staticClass:"afs-link",class:e.classes,attrs:{"data-locator":e.dataLocator}},"component",e.$attrs,!1),e.$listeners),[e._t("default",null,{getBEMClass:e.getBEMClass})],2)};r._withStripped=!0;var i=n(2),o=n(4),a={name:"AfsLink",props:{dataLocator:{type:String,default:"link"},tag:{type:String,default:"a"},isValid:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},computed:{classes:function(){return[this.themeClass,{"is-disabled":this.disabled}]},themeClass:function(){var e=Object(o.a)(this.$root);return Object(i.c)(e.theme)}},methods:{getBEMClass:function(e){return Object(i.a)("afs-link",e)}}},s=(n(72),n(0)),u=Object(s.a)(a,r,[],!1,null,null,null);u.options.__file="WebUI/VueJsComponentLibrary/src/components/Link/App.vue";var c=u.exports;t.a=c},function(e,t,n){"use strict";var r=n(9),i=JSON.parse(Object(r.c)("data-license-features","[]"));t.a={names:{schematicCompare:"Altium_AFS_CompareSCH",resharing:"KillSwitch_RequestReshare",killSwitchBomView:"KillSwitch_BOM_View",killSwitchBomComment:"KillSwitch_BOM_Comment",killSwitchPdfView:"KillSwitch_PDF_View",killSwitchDraftsmanView:"KillSwitch_Draftsman_View",killSwitchDraftsmanComment:"KillSwitch_Draftsman_Comment",lightWeightTasks:"Altium_AFS_Tasks_Basic",killSwitch_Simulation_Download_Edb:"KillSwitch_Simulation_Download_EDB",compareBom:"Altium_AFS_CompareBOM",killSwitchCompareBomView:"KillSwitch_CompareBOM_View"},getLicenseDetails:function(e){var t,n=i.find((function(t){return(t.includes(".")?t.split(".")[0]:t)===e}));return{isEnabled:!!n,label:null==n||null===(t=n.split("."))||void 0===t?void 0:t[1]}}}},function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return t("svg",this._g({class:this.classList},this.$listeners),[t("use",{attrs:{"xlink:href":this.href}})])};r._withStripped=!0;var i=n(4),o={name:"AfsIcon",props:{name:{type:String,default:""},filled:{type:Boolean,default:!1}},computed:{classList:function(){return"icon icon-".concat(this.name)},href:function(){var e=Object(i.a)(this.$root),t=e.assets?"/"===e.assets.slice(-1)?e.assets.slice(0,-1):e.assets:"/assets";return this.filled?"".concat(t,"/images/afs-svg-sprite-filled.svg#").concat(this.name):"".concat(t,"/images/afs-svg-sprite.svg#").concat(this.name)}}},a=(n(48),n(0)),s=Object(a.a)(o,r,[],!1,null,null,null);s.options.__file="WebUI/VueJsComponentLibrary/src/components/Icon/App.vue";t.a=s.exports},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return l(e,arguments,h(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,e)})(e)}function l(e,t,n){return(l=f()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&d(i,n.prototype),i}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return v}));var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(o,e);var t,n,r=(t=o,n=f(),function(){var e,r=h(t);if(n){var i=h(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return s(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return i(this,o),p(u(t=r.call(this,e)),"type",void 0),p(u(t),"innerError",void 0),t.type="Error",t.innerError=n,t}return a(o,[{key:"toString",value:function(){return this.message}}]),o}(c(Error)),v=a((function e(t,n){i(this,e),p(this,"type",void 0),p(this,"payload",void 0),this.type=t,this.payload=n||{}}))},function(e,t,n){"use strict";n.d(t,"k",(function(){return T})),n.d(t,"l",(function(){return P})),n.d(t,"j",(function(){return A})),n.d(t,"i",(function(){return M})),n.d(t,"v",(function(){return j})),n.d(t,"p",(function(){return D})),n.d(t,"q",(function(){return I})),n.d(t,"t",(function(){return R})),n.d(t,"y",(function(){return L})),n.d(t,"a",(function(){return B})),n.d(t,"n",(function(){return N})),n.d(t,"s",(function(){return U})),n.d(t,"u",(function(){return F})),n.d(t,"o",(function(){return $})),n.d(t,"m",(function(){return V})),n.d(t,"w",(function(){return z})),n.d(t,"r",(function(){return G})),n.d(t,"x",(function(){return H})),n.d(t,"g",(function(){return W})),n.d(t,"h",(function(){return Y})),n.d(t,"f",(function(){return q})),n.d(t,"e",(function(){return X})),n.d(t,"d",(function(){return Z})),n.d(t,"c",(function(){return K})),n.d(t,"b",(function(){return Q}));var r,i,o=n(284),a=n(93),s=n(60),u=n.n(s),c=n(6),l=n(130);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=Object(o.a)(a.a,{afsConfig:(null===(r=window)||void 0===r||null===(i=r.__APP__)||void 0===i?void 0:i.afsConfig)||{}}),m=u.a.CancelToken,v=window.__CORE__,y=function(e,t,n){return'<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Header><SessionID xmlns="http://tempuri.org/">'.concat(n,'</SessionID></SOAP-ENV:Header><SOAP-ENV:Body><QueryUsersDetails xmlns="http://tempuri.org/"><Filter><UserName/><FullName/><EMail/><Organisation/><AccountId/><Exact>false</Exact><UserIds>').concat(e,"</UserIds><GetExtraData>false</GetExtraData></Filter><BatchSize>").concat(t,"</BatchSize><RecordLocator/></QueryUsersDetails></SOAP-ENV:Body></SOAP-ENV:Envelope>")},g=function(e){return e.reduce((function(e,t){return e.concat("","<item>".concat(t,"</item>"))}),"")},b={json:"application/json",stream:"application/octet-stream",form:"application/x-www-form-urlencoded"},w=function(e){var t=e.baseURL,n=e.type,r=e.credentials,i={"Content-Type":b[n||"form"],Accept:"*/*",Authorization:"AFSSessionID ".concat(c.z),PageType:c.c};c.e||(i.projectid=c.v);var o=u.a.create({baseURL:t,withCredentials:r||!1,headers:i});return k(o),o},_=function(){return w({baseURL:c.e||"/comments/",type:"json"})},O=w({baseURL:"".concat(c.f,"/team/api/")}),C=w({baseURL:"".concat(c.f,"/ManufacturingPortal/api/")}),S=w({baseURL:"".concat(c.f,"/"),credentials:!0}),x=(w({baseURL:"/designs/api/",type:"json"}),function(){var e=u.a.create();return k(e),e});function k(e){Object(l.a)(e),e.interceptors.response.use((function(e){return e}),(function(e){var t,n,r,i;if(u.a.isCancel(e))return e.isCancel=!0,Promise.reject(e);var o="string"==typeof(null==e||null===(t=e.response)||void 0===t?void 0:t.data)?e.response.data:null==e||null===(n=e.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message;switch(null==e||null===(i=e.response)||void 0===i?void 0:i.status){case 401:v.bus.emit("unAuthorized");break;case 400:case 500:"string"==typeof o&&"function"==typeof o.includes&&o.includes("Access denied! User login required for this service")&&v.bus.emit("unAuthorized")}return Promise.reject(e)}))}var E=w({baseURL:"/designs/api/",type:"json"}),T=function(){return C.get(c.s?"/SharedManufacturing/GetReleasesByProjectId?projectId=".concat(c.v):"/manufacturing/GetReleasesByProjectId/".concat(c.v))},P=function(e){var t=e.query,n=e.projectGuid,r=e.subjectGuid,i=e.getWorkspaceUsersSuggestions,o=void 0===i||i,a=e.getWorkspaceGroupsSuggestions,s=void 0===a||a,u=m.source(),c={query:t,getWorkspaceUsersSuggestions:o,getWorkspaceGroupsSuggestions:s};return n&&(c.projectGuid=n),r&&(c.subjectGuid=r),{call:function(){return S.get("team/api/suggestions",{params:c,cancelToken:u.token})},cancel:function(){return u.cancel("irrelevant request: suggestions?query=".concat(t))}}},A=function(e){var t=m.source();return{call:function(){return O.get("users/GetTokenizedUsers?q=".concat(e,"&isDefault=true&includeCloud=true"),{cancelToken:t.token})},cancel:function(){return t.cancel("irrelevant request: GetTokenizedUsers?q=".concat(e))}}},M=function(){return O.get("/roles?groupName=&pageSize=500&offset=0")},j=function(){return p(_().get("/v1.0/".concat(c.v,"/threads")))},D=function(){return p(S.get("files/api/comments/".concat(c.v,"/threads")))},I=function(e){var t=m.source();return{call:function(){return _().get("/v1.0/".concat(c.v,"/threads/").concat(e),{cancelToken:t.token})},cancel:function(n){t.cancel("".concat(n,": /v1.0/").concat(c.v,"/threads/").concat(e))}}},R=function(e){return p(_().post("/v1.0/".concat(c.v,"/threads"),JSON.stringify({Data:e.data,Properties:{Activity:null,AutogeneratedComments:"",TaskId:"00000000-0000-0000-0000-000000000000",Type:e.type,DocumentName:e.documentName,DocumentType:e.documentType,ObjectType:e.objectType,ReleaseGuid:c.h,PageId:0},Text:e.Text,Drawing:e.drawing,Mentions:e.Mentions,AssignedTo:e.AssignedTo,Screenshot:e.screen})))},L=function(e){return p(_().patch("/v1.0/".concat(c.v,"/threads/").concat(e.threadId),JSON.stringify([{op:"replace",path:"/Status",value:e.resolve?"0":"1"}])))},B=function(e){return p(_().patch("/v1.0/".concat(c.v,"/threads/").concat(e.threadId),JSON.stringify([{op:"replace",path:"/AssignedTo",value:e.userGuid}])))},N=function(e){return p(_().patch("/v1.0/".concat(c.v,"/threads/").concat(e.threadId),JSON.stringify(e.value)))},U=function(e){return p(_().delete("/v1.0/".concat(c.v,"/threads/").concat(e.threadId,"/comments/").concat(e.commentId)))},F=function(e){return p(_().delete("/v1.0/".concat(c.v,"/threads/").concat(e.threadId)))},$=function(e){return p(_().put("/v1.0/".concat(c.v,"/threads/").concat(e.threadId,"/comments/").concat(e.commentId),JSON.stringify(d({},e.value))))},V=function(e){return p(_().post("/v1.0/".concat(c.v,"/threads/").concat(e.threadId,"/comments"),JSON.stringify(d({},e.value))))},z=function(e){return p(x().post(c.t,y(g(e),50,c.z),{headers:{"Content-Type":"text/xml",SOAPAction:"QueryUsersDetails"}},(function(e){console.log(e)})))},G=function(e){return p(x().post(c.l,y(g(e),50,c.d),{headers:{"Content-Type":"text/xml",SOAPAction:"QueryUsersDetails"}},(function(e){console.log(e)})))},H=function(){return u.a.post(c.w,'<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope">\n<SOAP-ENV:Body><GetChannelUrl xmlns="http://tempuri.org/"><SessionId>'.concat(c.z,"</SessionId><ChannelName>AltiumDesigner-DxpServerManager</ChannelName></GetChannelUrl></SOAP-ENV:Body></SOAP-ENV:Envelope>"),{headers:{"Content-Type":"text/xml",Action:"http://tempuri.org/GetChannelURL"}},(function(e){console.log(e)}))},W=function(){return p(_().get("/v1.0/".concat(c.v,"/userSettings")))},Y=function(e){p(_().post("/v1.0/".concat(c.v,"/userSettings"),JSON.stringify(e)))},q=function(){return p(S.get("files/api/SubjectAcl/GetAccessList/".concat(c.g)))},X=function(e){return p(S.get("sharedwithme/api/SubjectAcl/GetAccessList/".concat(e)))},Z=function(e){return p(S.get("/sharedwithme/api/subject/subject/".concat(e)))},K=function(e){return E.post("shares/checkuserspermissions",e,{_withVerification:!0})},J=w({baseURL:"".concat(c.f,"/lwtasks/api/v1.0"),type:"json"}),Q=function(e,t,n){return p(J.patch("/project/".concat(e,"/task/").concat(t),JSON.stringify([{op:"replace",path:"/status",value:n}])))}},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.tag,e._g(e._b({tag:"component",staticClass:"afs-btn",class:e.classes,attrs:{type:e.buttonType,disabled:e.isDisabled,"data-locator":e.dataLocator}},"component",e.$attrs,!1),e.$listeners),[e.hasIcon?n("Icon",{staticClass:"afs-btn__icon",attrs:{name:e.icon,filled:e.filled}}):e._e(),e._v(" "),e._t("customIcon",null,{getBEMClass:e.getBEMClass}),e._v(" "),n("span",{staticClass:"afs-btn__text"},[e._t("default",null,{getBEMClass:e.getBEMClass})],2),e._v(" "),n("Loader",{staticClass:"afs-btn__loader"})],2)};r._withStripped=!0;var i=n(1),o=n(2),a=n(4),s=n(43),u=n(5);var c={name:"AfsButton",components:{Loader:s.a,Icon:u.a},props:{tag:{type:String,default:"button",validator:function(e){return["button","a","span","label"].includes(e)}},radius:{type:String,default:"".concat(i.d.tl," ").concat(i.d.tr," ").concat(i.d.bl," ").concat(i.d.br)},wide:{type:Boolean,default:!1},icon:{type:String,default:""},primary:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},secondary:{type:Boolean,default:!1},filled:{type:Boolean,default:!1},type:{type:String,default:"button",validator:function(e){return["button","submit"].includes(e)}},justify:{type:String,default:"center",validator:function(e){return["left","center","right","space-between"].includes(e)}},hasArrow:{type:Boolean,default:!1},isValid:{type:Boolean,default:!0},isSelected:{type:Boolean,default:!1},isBusy:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},size:{type:String,default:"md",validator:function(e){return["xl","lg","md","sm","xs"].includes(e)}},dataLocator:{type:String,default:"button"}},computed:{classes:function(){return[this.themeClass,Object(o.b)("afs-btn",this.radius),"afs-btn_justify-".concat(this.justify),"afs-btn_".concat(this.size),(e={"afs-btn_arrow":this.hasArrow,"afs-btn_wide":this.wide,"afs-btn_primary":this.primary,"afs-btn_secondary":this.secondary,"afs-btn_default":!this.primary&&!this.secondary,"afs-btn_selected":this.isSelected,"is-busy":this.isBusy,"afs-btn_transparent":this.transparent},t=i.a.isError,n=!this.isValid,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)];var e,t,n},themeClass:function(){var e=Object(a.a)(this.$root);return Object(o.c)(e.theme)},isDisabled:function(){return this.disabled||this.isBusy},hasIcon:function(){return!(!this.icon||!this.icon.length)},buttonType:function(){return["button","input"].includes(this.tag)?this.type:null}},methods:{getBEMClass:function(e){return Object(o.a)("afs-btn",e)}}},l=(n(151),n(0)),f=Object(l.a)(c,r,[],!1,null,null,null);f.options.__file="WebUI/VueJsComponentLibrary/src/components/Button/App.vue";var d=f.exports;t.a=d},function(e,t,n){},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function u(e){var t=h();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){var t="function"==typeof Map?new Map:void 0;return(f=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return d(e,arguments,m(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,e)})(e)}function d(e,t,n){return(d=h()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&p(i,n.prototype),i}).apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y;n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return _})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return C})),n.d(t,"b",(function(){return S})),function(e){e.ArgumentNull="ARGUMENT_NULL",e.FileDataDocumentLoad="FILE_DATA_DOCUMENT_LOAD",e.ScriptLoad="SCRIPT_LOAD",e.StoreExpired="STORAGE_EXPIRED",e.WebGLNotSupported="WEBGL_NOT_SUPPORTED",e.WebGLNotSupportedExtension="WEBGL_NOT_SUPPORTED_EXTENSION",e.ImportPCBError="IMPORT_PCB_ERROR"}(y||(y={}));var g='%{"title": "New visualization is available"}% %{"name": "Refresh Page", "eventName": "reloadPage", "link":"#"}%',b='WebGL is not supported by your browser. You can follow %{"name": "Troubleshooting Guide", "link": "https://www.altium.com/documentation/altium-designer/altium-365-viewers-troubleshooting-guide"}% to make it work',w=function(e){s(n,e);var t=u(n);function n(e,r){var o,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3?arguments[3]:void 0;i(this,n),(o=t.call(this,e)).code=r,o.isManaged=a,v(l(o),"innerError",void 0);var u=n.define(s);return u&&(s=u),o}return a(n,null,[{key:"define",value:function(e){if(void 0!==e){if(e instanceof Error)return e;if("string"==typeof e||e instanceof String)return new Error(e);if(e&&e.stack&&e.message)return e}}}]),n}(f(Error)),_=function(e){s(n,e);var t=u(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;return i(this,n),t.call(this,e,y.StoreExpired,!0)}return a(n)}(w),O=function(e){s(n,e);var t=u(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return i(this,n),t.call(this,e,y.WebGLNotSupported,!0)}return a(n)}(w),C=function(e){s(n,e);var t=u(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,o=arguments.length>1?arguments[1]:void 0;return i(this,n),v(l(e=t.call(this,r,y.WebGLNotSupportedExtension,!0)),"extensionsList",void 0),e.extensionsList=o,e}return a(n)}(w),S=function(e){s(n,e);var t=u(n);function n(e,r,o){var a;return i(this,n),v(l(a=t.call(this,e,y.ImportPCBError,!1)),"sendDetails",void 0),v(l(a),"dataSize",void 0),a.sendDetails=o,a.dataSize=r,a}return a(n)}(w)},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o}));var r,i,o,a=window.__CORE__,s=new Map([["PCBView","PcbEngine"],["GerberView","GerberEngine"],["GerberCompareView","GerberComparisonEngine"],["GerberCompareSourceView","GerberComparisonEngine"],["GerberCompareTargetView","GerberComparisonEngine"]]);!function(e){e[e.None=0]="None",e[e.Cross=1]="Cross",e[e.Circle=2]="Circle",e[e.Box=3]="Box",e[e.Triangle=4]="Triangle",e[e.Wait=5]="Wait",e[e.Default=6]="Default"}(r||(r={})),function(e){e[e.Free=0]="Free",e[e.PointToPoint=1]="PointToPoint",e[e.ObjectToObject=2]="ObjectToObject"}(i||(i={})),function(e){e[e.mm=0]="mm",e[e.mil=1]="mil"}(o||(o={}))},function(e,t,n){"use strict";t.a=function(e){return e instanceof Element}},function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return c}));var r=function(e){var t=e.toString().split(".");return t[0].replace(/\B(?=(\d{3})+(?!\d))/g,",")+(2===t.length?"."+t[1]:"")},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.toString().split(".").length>1;return r(t&&n?e.toFixed(t):e)},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"==typeof e){var r=t?(parseFloat(e)/.0254).toFixed(t):parseFloat(e)/.0254;return n?i(r):r}},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("number"==typeof e)return t?(.0254*parseFloat(e)).toFixed(t):.0254*parseFloat(e)},s=function(e,t){return c(e/1e6,t)},u=function(e,t){return c(1e3*e,t)},c=function(e,t){return 0!==e?"".concat(e.toFixed(3)," ").concat(t):"".concat(e," ").concat(t)}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return o}));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"listeners",void 0),i(this,"on",this.addListener),i(this,"off",this.removeListener),this.listeners={}}var t,n,o;return t=e,(n=[{key:"addListener",value:function(e,t){return e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t],this}},{key:"removeListener",value:function(e,t){if(e in this.listeners){var n=this.listeners[e].indexOf(t);n>-1&&this.listeners[e].splice(n,1)}return this}},{key:"removeAllListeners",value:function(e){delete this.listeners[e]}},{key:"once",value:function(e,t){var n=this;return this.addListener(e,(function r(){t.apply(void 0,arguments),n.removeListener(e,r)})),this}},{key:"prependListener",value:function(e,t){return e in this.listeners?this.listeners[e].unshift(t):this.listeners[e]=[t],this}},{key:"prependOnceListener",value:function(e,t){var n=this;return this.prependListener(e,(function r(){t.apply(void 0,arguments),n.removeListener(e,r)})),this}},{key:"eventNames",value:function(){return Object.getOwnPropertyNames(this.listeners)}},{key:"listenerCount",value:function(e){return e in this.listeners?this.listeners[e].length:0}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e in this.listeners&&(this.listeners[e].slice().forEach((function(e){return e.apply(void 0,n)})),!0)}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";n(89)},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==n(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,n){"use strict";n.r(t),window;var r=function(e){return e instanceof Element},i=function(e){var t=[];return function e(t,n){if(!r(t))return n;var i=function e(t){if(!r(t)){var n=document.querySelector("html");return n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight?window:null}var i=window.getComputedStyle(t).getPropertyValue("overflow"),o=i&&i.split(" ").some((function(e){return"auto"===e||"scroll"===e}));return(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)&&o?t:e(t.parentNode)}(t);return i?(n.push(i),e(i.parentNode,n)):n}(e.parentNode,t),t},o=function(e){var t=i(e).map((function(e){return function(e){var t={x:0,y:0},n=function(e){return e.currentTarget===window?window.scrollTo(t.x,t.y):(e.currentTarget.scrollTop=t.y,e.currentTarget.scrollLeft=t.x),e.preventDefault(),!1};return{enable:function(){return e.removeEventListener("scroll",n)},disable:function(){t.y=e.scrollTop,t.x=e.scrollLeft,e.addEventListener("scroll",n)}}}(e)}));return t.length?{disable:function(){t.forEach((function(e){return e.disable()}))},enable:function(){t.forEach((function(e){return e.enable()}))}}:null};t.default={inserted:function(e,t,n){var r=t.arg,i=t.modifiers,a=n.context;e.dataset.afsDropdownControl=r;var s=i.open,u=i.close,c=null;e.addEventListener("click",(function(){if(c=function(e){return window.__afsComponents&&window.__afsComponents[e]}(r)){var t=o(e),n=function e(){c.close(),window.removeEventListener("scroll",e)};s?c.open(e):u?c.close():c.toggle(e),t?window.addEventListener("scroll",n):window.removeEventListener("scroll",n)}}),!0),a.$on("hook:beforeDestroy",(function(){c&&c.close()}))}}}])},function(e,t){"path"in Event.prototype||Object.defineProperty(Event.prototype,"path",{get:function(){for(var e=[],t=this.target;t;)e.push(t),t=t.parentElement;return-1===e.indexOf(window)&&-1===e.indexOf(document)&&e.push(document),-1===e.indexOf(window)&&e.push(window),e}})},function(e,t,n){},function(e,t,n){"use strict";var r,i;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e[e.Left=0]="Left",e[e.Wheel=1]="Wheel",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward"}(r||(r={})),function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.MiddleOrWheel=4]="MiddleOrWheel",e[e.Back=8]="Back",e[e.Forward=16]="Forward"}(i||(i={}))},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"afs-loader",class:e.classes,attrs:{"data-locator":e.dataLocator}},[n("span",{staticClass:"afs-loader__content"},[n("span",{staticClass:"afs-loader__icon"},e._l(12,(function(e){return n("span",{key:e,staticClass:"afs-loader__icon-line"})})),0),e._v(" "),e.hasText?n("span",{staticClass:"afs-loader__text"},[e._t("default",null,{getBEMClass:e.getBEMClass})],2):e._e()])])};r._withStripped=!0;var i=n(2),o=n(4);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={icon:"icon",overlay:"overlay",viewportOverlay:"viewport-overlay",smallViewportOverlay:"small-viewport-overlay"},u={small:"",middle:"middle",large:"large"},c={row:"",column:"column"},l={name:"AfsLoader",props:{dataLocator:{type:String,default:"loader"},hasText:{type:Boolean,default:!1},type:{type:String,default:s.icon,validator:function(e){return Object.values(s).includes(e)}},size:{type:String,default:u.small,validator:function(e){return!e.length||Object.keys(u).includes(e)}},direction:{type:String,default:c.row,validator:function(e){return!e.length||Object.keys(c).includes(e)}},checkFonts:{type:Boolean,default:!1}},data:function(){return{checkFontsClass:!1}},computed:{classes:function(){return[this.themeClass,a({},"afs-loader_".concat(this.type),!!this.type),{"afs-loader_icon-text":this.type===s.icon&&this.hasText},a({},"afs-loader_".concat(this.size),!!this.size),a({},"afs-loader_".concat(this.direction),!!this.direction),{"afs-loader_check-fonts":this.checkFontsClass}]},themeClass:function(){var e=Object(o.a)(this.$root);return Object(i.c)(e.theme)}},created:function(){var e=this,t=this.$watch("checkFonts",(function(n){n&&(t&&t(),e.checkFontsClass=!0,document.fonts.ready.then((function(){e.checkFontsClass=!document.fonts.check("1em Inter")})))}),{immediate:!0})},methods:{getBEMClass:function(e){return Object(i.a)("afs-loader",e)}}},f=(n(111),n(0)),d=Object(f.a)(l,r,[],!1,null,null,null);d.options.__file="WebUI/VueJsComponentLibrary/src/components/Loader/App.vue";var h=d.exports;t.a=h},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o}));var r,i,o,a=n(7),s=window.__CORE__,u=new Map([["PCBView","PcbEngine"],["GerberView","GerberEngine"]]),c=new Set([a.ObjectId.Arc,a.ObjectId.Pad,a.ObjectId.Via,a.ObjectId.Track,a.ObjectId.Poly,a.ObjectId.Region,a.ObjectId.Fill]);!function(e){e[e.None=0]="None",e[e.Cross=1]="Cross",e[e.Circle=2]="Circle",e[e.Box=3]="Box",e[e.Triangle=4]="Triangle",e[e.Wait=5]="Wait",e[e.Default=6]="Default"}(r||(r={})),function(e){e[e.Free=0]="Free",e[e.PointToPoint=1]="PointToPoint",e[e.ObjectToObject=2]="ObjectToObject"}(i||(i={})),function(e){e[e.mm=0]="mm",e[e.mil=1]="mil"}(o||(o={}))},,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s.a})),n.d(t,"e",(function(){return s.c})),n.d(t,"d",(function(){return s.b})),n.d(t,"f",(function(){return u.a})),n.d(t,"g",(function(){return c.a})),n.d(t,"i",(function(){return l.b})),n.d(t,"h",(function(){return l.a})),n.d(t,"j",(function(){return O})),n.d(t,"b",(function(){return C.a})),n.d(t,"k",(function(){return C.b})),n.d(t,"n",(function(){return h.b})),n.d(t,"l",(function(){return h.a})),n.d(t,"m",(function(){return S.a}));var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,e),o(this,"controllers",void 0),this.controllers=null==t?[]:t}var t,n,a;return t=e,(n=[{key:"registerController",value:function(e){return this.controllers.push(e),this}},{key:"unregisterAll",value:function(){return this.controllers.length=0,this}},{key:"KeyDown",value:function(e){this.controllers.forEach((function(t){return t.KeyDown(e)}))}},{key:"KeyUp",value:function(e){this.controllers.forEach((function(t){return t.KeyUp(e)}))}},{key:"MouseDown",value:function(e,t,n){this.controllers.forEach((function(r){return r.MouseDown(e,t,n)}))}},{key:"MouseUp",value:function(e,t,n){this.controllers.forEach((function(r){return r.MouseUp(e,t,n)}))}},{key:"MouseMove",value:function(e,t){this.controllers.forEach((function(n){return n.MouseMove(e,t)}))}},{key:"MouseWheel",value:function(e){this.controllers.forEach((function(t){return t.MouseWheel(e)}))}},{key:"TouchStart",value:function(e){this.controllers.forEach((function(t){return t.TouchStart(e)}))}},{key:"TouchMove",value:function(e){this.controllers.forEach((function(t){return t.TouchMove(e)}))}},{key:"TouchEnd",value:function(e){this.controllers.forEach((function(t){return t.TouchEnd(e)}))}},{key:"SetOrbitingType",value:function(e){throw new Error("Method not implemented.")}},{key:"StartAnimationFocus",value:function(e){this.controllers.forEach((function(t){return t.StartAnimationFocus(e)}))}},{key:"StartAnimationOrigin",value:function(e){this.controllers.forEach((function(t){return t.StartAnimationOrigin(e)}))}},{key:"StartAnimationFit",value:function(e,t,n,r){this.controllers.forEach((function(i){return i.StartAnimationFit(e,t,n,r)}))}},{key:"UpdateAnimation",value:function(){this.controllers.forEach((function(e){return e.UpdateAnimation()}))}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),s=n(221),u=n(244),c=n(245),l=n(307),f=n(51),d=n(52),h=n(131);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=y(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(o,e);var t,n,r,i=b(o);function o(e,t,n,r,a,s,u){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(c=i.call(this,e,t,n,r,a,s,u)).viewport||(c.viewport_=c.module.canvas?c.scene.AddViewport2D([0,0,c.canvasWidth,c.canvasHeight]):c.scene.AddViewport2D([0,0,300,300])),c.viewport.SetZoom(c.viewportZoom),c.renderPath=c.scene.CreateRenderPath2D(),c.renderPath.SetGridAutoZoom(!1),c.renderPath.EnableGrid(!1),c.logger.LogInfo("".concat(s?"Overlay":"Main"," 2D [").concat(c.id,"] scene successfully initialized.")),c}return t=o,(n=[{key:"parentScene",get:function(){return v(_(o.prototype),"parentScene",this)}},{key:"render",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this.clear(),this.renderScene()}},{key:"renderScene",value:function(){this.beforeRender.emit(this),this.cameraController.UpdateAnimation(),this.renderPath.BeginRender()&&(this.renderPath.SelectViewport(this.viewport),this.renderPath.Render(this.rootNode,this.renderOptions),this.renderPath.EndRender(),this.rendered.emit(this))}},{key:"setOptions",value:function(e){this.renderPath.SetOptions(e)}},{key:"enableGrid",value:function(e){this.renderPath.EnableGrid(e)}},{key:"setGridAutoZoom",value:function(e){this.renderPath.SetGridAutoZoom(e)}},{key:"setGridSize",value:function(e){this.renderPath.SetGridSize(e)}},{key:"setGridSteps",value:function(e,t){this.renderPath.SetGridSteps(e,t)}},{key:"setGridColors",value:function(e,t,n){this.renderPath.SetGridColors(e,t,n)}},{key:"getNodeItemsAtPoint",value:function(e,t){if(0==t.length)return new Array;var n=[];if("number"==typeof t[0])n=t;else for(var r=t,i=0;i<r.length;i++){var o=this.layerMap.GetLayer(r[i].layer);!o||o.is_cutout||o.is_keepout||n.push(r[i].layer)}return this.rootNode.GetNodeItemsAtPoint(e,n)}},{key:"getCenter",value:function(){return this.viewport.GetCenter()}},{key:"setCenter",value:function(e,t){this.viewportCenter_="number"==typeof e?this.viewport.ViewportToWorld([e,t]):e,this.viewport.SetCenter(this.viewportCenter),this.centerChanged.emit(new f.c(this.viewportCenter[0],this.viewportCenter[1]))}},{key:"setCenterOffset",value:function(e,t){var n=this.viewport.GetRectangle(),r=[n[2],n[3]],i=r[0]/2+e,o=r[1]/2+t;this.viewportCenter_=this.viewport.ViewportToWorld([i,o]),this.viewport.SetCenter(this.viewportCenter),this.centerChanged.emit(new f.c(this.viewportCenter[0],this.viewportCenter[1]))}},{key:"flipped",get:function(){return this.viewport.GetFlipped()},set:function(e){this.viewport.GetFlipped()!=e&&(this.viewport.SetFlipped(e),this.viewport.SetDirty(!0))}},{key:"setZoom",value:function(e){e=this.defZoom/e,this.viewportZoom_=e,this.viewport.SetZoom(e)}},{key:"getZoom",value:function(){return this.viewport.GetZoom()}},{key:"pixelsToUnits",value:function(e){return 2*e*this.viewport.GetZoom()/this.viewport.GetRectangle()[3]}},{key:"snapToPixels",value:function(e){for(var t=this.viewport.WorldToViewport(e),n=0;n<t.length;n++)t[n]=Math.round(t[n])+.25;return this.viewport.ViewportToWorld(t)}},{key:"worldToViewport",value:function(e){return this.viewport.WorldToViewport(e)}},{key:"viewportToWorld",value:function(e){return this.viewport.ViewportToWorld(e)}},{key:"setFitFixedView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;if(n||(n=.8),null==e||null==t){var r=this.renderOptions.map((function(e){return e.layer})),i=this.rootNode.GetBoxForLayers(r);null==e&&(e=[i[0],i[1],i[2]]),null==t&&(t=[i[3],i[4],i[5]])}this.viewport.FitFixedView(e,t,n)}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=n,o=window.vec2,a=this.renderOptions.filter((function(e){return e.layerName!==d.b.HighlightLayerName})).map((function(e){return e.layer})),s=a.length>0?a:this.layers.map((function(e){return e.index})),u=this.rootNode.GetBoxForLayers(s);null==e&&(e=[u[0],u[1],u[2]]),null==t&&(t=[u[3],u[4],u[5]]),e[1]===t[1]&&(t[1]+=this.pixelsToUnits(1)),this.minScaleLimit(u,e,t,r);var c=o.subtract([0,0],t,e);o.scale(c,c,.5),o.add(this.viewportCenter,e,c),this.viewportZoom_=c[1];var l=this.viewport.GetRectangle(),f=l[2]/l[3],p=c[0]/c[1];n=n>1||n<.1?1:2-n;var m=p>f?n*p/f:n;this.viewportZoom_*=m,this.fitFixedView_={boxMin:e,boxMax:t,fixedScale:i},this.viewport.FitFixedView(e,t,i),this.viewport.SetZoom(this.viewportZoom),this.zoomToFitChanged.emit(new h.b(e,t))}},{key:"setSelection",value:function(e){}},{key:"minScaleLimit",value:function(e,t,n,r){if(r){var i=window.vec2,o=[0,0];i.subtract(o,[e[3],e[4]],[e[0],e[1]]),i.scale(o,o,r);var a=i.subtract([0,0],n,t),s=i.divide([0,0],a,o);if(s[0]<1&&s[1]<1){var u=2*Math.min(s[0],s[1]),c=a[0]/u,l=a[1]/u;t[0]=t[0]-c,n[0]=n[0]+c,t[1]=t[1]-l,n[1]=n[1]+l}}}}])&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(h.a),C=n(280),S=n(203)},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warn=3]="Warn",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.None=6]="None"}(r||(r={}))},function(e,t,n){"use strict";n(31)},function(e,t,n){},function(e,t,n){"use strict";n(33)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u.a})),n.d(t,"d",(function(){return c.a})),n.d(t,"e",(function(){return l.a}));var r=n(173);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=o((function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"fillColor",void 0),a(this,"strokeColor",void 0),this.fillColor=t,this.strokeColor=n})),u=n(220),c=n(76),l=n(158)},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return f.a}));var o=function(){function e(t,n,r,o,a,s,u,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"name",void 0),i(this,"index",void 0),i(this,"is_keepout",void 0),i(this,"z_range",void 0),i(this,"is_barrel",void 0),i(this,"is_cutout",void 0),i(this,"is_inverted",void 0),i(this,"show3d",void 0),this.name=t,this.index=n,this.z_range=r||[0,0],this.is_cutout=o||!1,this.is_barrel=a||!1,this.is_keepout=s||!1,this.is_inverted=u||!1,this.show3d=c||!1}var t,n,o;return t=e,o=[{key:"createLayerArray",value:function(t){for(var n=[],r=0;r<t;r++)n.push(new e("level"+r,r));return n}}],(n=null)&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t,n,r,i,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerId=t,this.unisArray=n,this.arcsArray=r,this.polygonsArray=i,this.labelsArray=o,this.linesArray=a,s(this,"GetLayerIndex",(function(){return this.layerId})),s(this,"GetUnis",(function(){return this.unisArray||[]})),s(this,"GetArcs",(function(){return this.arcsArray||[]})),s(this,"GetPolygons",(function(){return this.polygonsArray||[]})),s(this,"GetLabels",(function(){return this.labelsArray||[]})),s(this,"GetLines",(function(){return this.linesArray||[]}))}var t,n,r;return t=e,(n=[{key:"GetUnisCount",value:function(){return this.unisArray?this.unisArray.length:0}},{key:"GetUni",value:function(e){return this.unisArray?this.unisArray[e]:null}},{key:"GetArcsCount",value:function(){return this.arcsArray?this.arcsArray.length:0}},{key:"GetArc",value:function(e){return this.arcsArray?this.arcsArray[e]:null}},{key:"GetPolysCount",value:function(){return this.polygonsArray?this.polygonsArray.length:0}},{key:"GetPoly",value:function(e){return this.polygonsArray?this.polygonsArray[e]:null}},{key:"GetLabelsCount",value:function(){return this.labelsArray?this.labelsArray.length:0}},{key:"GetLabel",value:function(e){return this.labelsArray?this.labelsArray[e]:null}},{key:"GetLinesCount",value:function(){return this.linesArray?this.linesArray.length:0}},{key:"GetLine",value:function(e){return this.linesArray?this.linesArray[e]:null}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=void 0,(r="layers")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.layers=t||[]}var t,n,r;return t=e,(n=[{key:"GetLayersCount",value:function(){return this.layers.length}},{key:"GetLayer",value:function(e){return this.GetLayersCount()>0?this.layers[e]:null}},{key:"SetLayer",value:function(e,t){this.layers[e]=t}},{key:"AddLayer",value:function(e){throw new Error("Method not implemented.")}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),f=n(242)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(56);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function o(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,s(e,t,"get"))}function a(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,s(e,t,"set"),n),n}function s(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}n.d(t,"a",(function(){return d}));var u=new WeakMap,c=new WeakMap,l=new WeakMap,f=new WeakMap,d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,u,{writable:!0,value:new Set}),i(this,c,{writable:!0,value:null}),i(this,l,{writable:!0,value:null}),i(this,f,{writable:!0,value:null})}var n,s,d;return n=t,(s=[{key:"push",value:function(e){return a(this,c,null),o(this,u).add(e),this}},{key:"anyValue",value:function(){return o(this,u).values().next().value}},{key:"firstValue",value:function(){return o(this,f)?Array.from(o(this,u)).sort(o(this,f))[0]:this.anyValue()}},{key:"setSort",value:function(e){return a(this,c,null),a(this,f,e),this}},{key:"toString",value:function(){return null===o(this,c)&&a(this,c,this.toArray().join(", ")),o(this,c)}},{key:"toArray",value:function(){return null===o(this,l)&&(null!==o(this,f)?a(this,l,Array.from(o(this,u)).sort(o(this,f))):a(this,l,Array.from(o(this,u)))),o(this,l)}},{key:"has",value:function(e){return o(this,u).has(e)}},{key:e,get:function(){return o(this,u).values()}}])&&r(n.prototype,s),d&&r(n,d),Object.defineProperty(n,"prototype",{writable:!1}),t}(Symbol.iterator)},function(e,t,n){},function(e,t,n){"use strict";window.__viewerOpenedComponents=[],t.a={add:function(e){window.__viewerOpenedComponents.push(e)},remove:function(e){window.__viewerOpenedComponents=window.__viewerOpenedComponents.filter((function(t){return t!==e}))},isLast:function(e){return window.__viewerOpenedComponents[window.__viewerOpenedComponents.length-1]===e},getAll:function(){return window.__viewerOpenedComponents}}},function(e,t,n){e.exports=n(178)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r="[No Variations]",i={FBOM:"TABLE_FBOM",LEFT:"TABLE_COMPARE_LEFT",RIGHT:"TABLE_COMPARE_RIGHT",DIFF:"TABLE_COMPARE_DIFF"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(57);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function h(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,m(e,t,"get"))}function p(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,m(e,t,"set"),n),n}function m(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var v=new WeakMap,y=new WeakMap,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(c,e);var t,n,r,i=u(c);function c(){var e;o(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(l(e=i.call.apply(i,[this].concat(n))),v,{writable:!0,value:void 0}),d(l(e),y,{writable:!0,value:void 0}),e}return t=c,(n=[{key:"setUrl",value:function(e){return p(this,v,e),this}},{key:"url",get:function(){return h(this,v)}},{key:"setStatusName",value:function(e){return p(this,y,e),this}},{key:"statusName",get:function(){return h(this,y)}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.a)},function(e,t,n){"use strict";n(41)},function(e,t,n){var r=n(310)("wks"),i=n(210),o=n(53).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"afs-subheader",class:[e.themeClass,e.radiusClass,e.centerClass],attrs:{"data-locator":e.dataLocator}},[e.hasIcon?n("ButtonIcon",{staticClass:"afs-subheader__icon",attrs:{icon:e.icon,transparent:!0,"data-locator":e.dataLocator+"-button"},on:{click:function(t){return e.$emit("icon-click")}}}):e._e(),e._v(" "),n("AfsText",{class:e.titleClass,attrs:{type:"title"}},[e._t("default",null,{getBEMClass:e.getBEMClass})],2)],1)};r._withStripped=!0;var i=n(22),o=n(3),a=n(2),s=n(4),u={name:"AfsSubheader",components:{ButtonIcon:i.a,AfsText:o.a},props:{dataLocator:{type:String,default:"subheader"},center:{type:Boolean,default:!0},radius:{type:String,default:""},icon:{type:String,default:""},mode:{type:String,default:"multi-line",validator:function(e){return["multi-line","single-line"].includes(e)}}},computed:{themeClass:function(){var e=Object(s.a)(this.$root);return Object(a.c)(e.theme)},titleClass:function(){return["afs-subheader__title","afs-subheader__title_".concat(this.mode)]},radiusClass:function(){return Object(a.b)("afs-subheader",this.radius)},centerClass:function(){return{"afs-subheader_center":this.center}},hasIcon:function(){return this.icon}},methods:{getBEMClass:function(e){return Object(a.a)("afs-subheader",e)}}},c=(n(134),n(0)),l=Object(c.a)(u,r,[],!1,null,null,null);l.options.__file="WebUI/VueJsComponentLibrary/src/components/Subheader/App.vue";var f=l.exports;t.a=f},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.tag,{tag:"component",staticClass:"afs-search",attrs:{"data-locator":e.dataLocator},on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[n("ButtonIcon",{staticClass:"afs-search__icon",attrs:{icon:e.icon,size:"lg",transparent:!0,"data-locator":e.dataLocator+"-btn"},on:{click:e.handleSubmit}}),e._v(" "),n("Input",e._g({ref:"control",attrs:{"model-value":e.modelValue,placeholder:e.placeholder,"control-class":"afs-search__control",radius:e.radius,"data-locator":e.dataLocator+"-control"},on:{"model-changed":e.handleModelChanged,focus:function(t){return e.toggleFocus(!0)},blur:function(t){return e.toggleFocus(!1)}}},e.$listeners)),e._v(" "),n("ButtonIcon",{directives:[{name:"show",rawName:"v-show",value:e.toggleClearBtn,expression:"toggleClearBtn"}],staticClass:"afs-search__remove-icon",attrs:{icon:"close-16",size:"lg",transparent:!0,"data-locator":e.dataLocator+"-clear"},on:{click:e.handleClearSearch}})],1)};r._withStripped=!0;var i=n(22),o=n(98),a=n(2),s=n(1);function u(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}var c={name:"AfsSearch",components:{ButtonIcon:i.a,Input:o.a},model:{prop:"modelValue",event:"model-changed"},props:{dataLocator:{type:String,default:"search"},tag:{type:String,default:"form"},icon:{type:String,default:"search-16"},modelValue:{type:String,default:""},placeholder:{type:String,default:"Search"},radius:{type:String,default:"".concat(s.d.tl," ").concat(s.d.tr," ").concat(s.d.bl," ").concat(s.d.br)},hasRemoveBtn:{type:Boolean,default:!0},alwaysShowRemoveBtn:{type:Boolean,default:!1}},data:function(){return{isFocusInput:!1}},computed:{toggleClearBtn:function(){return!!this.alwaysShowRemoveBtn||!!this.hasRemoveBtn&&(!!this.modelValue||this.isFocusInput)}},methods:{getBEMClass:function(e){return Object(a.a)("afs-search",e)},handleSubmit:function(){this.$emit("submit",this.modelValue)},handleModelChanged:function(e){this.$emit("model-changed",e)},handleClearSearch:function(){this.handleModelChanged(""),this.$emit("submit",""),this.$emit("clear","")},toggleFocus:function(e){this.isFocusInput=e},focus:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$nextTick();case 2:(n=t.$refs.control.$refs.input)&&n.focus();case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){u(o,r,i,a,s,"next",e)}function s(e){u(o,r,i,a,s,"throw",e)}a(void 0)}))})()}}},l=(n(163),n(0)),f=Object(l.a)(c,r,[],!1,null,null,null);f.options.__file="WebUI/VueJsComponentLibrary/src/components/Search/App.vue";var d=f.exports;t.a=d},function(e,t,n){var r=n(147),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return P}));var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.tag,e._g(e._b({tag:"component",staticClass:"afs-grid-container",class:e.classes,attrs:{"data-locator":e.dataLocator}},"component",e.$attrs,!1),e.$listeners),[e._t("default")],2)};function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}r._withStripped=!0;var a=function(e,t){return e.join(" ".concat(t,"_")).replace(/^\s+|\s+$/g,"")},s=function(e,t){var n,r=e&&(n=e,Array.isArray(n))&&e.length,o=e&&function(e){return"string"==typeof e}(e)&&e.length;return r?a([""].concat(i(e)),t):o?a([""].concat(i(e.split(" "))),t):""},u={name:"AfsGridContainer",inheritAttrs:!1,props:{dataLocator:{type:String,default:"grid-container"},tag:{type:String,default:"div"},type:{type:String,default:"",validator:function(e){return!e.length||["sidebar"].includes(e)}},size:{type:String,default:"",validator:function(e){return!e.length||["auto","fullscreen","remain"].includes(e)}},direction:{type:String,default:"row",validator:function(e){return["row","row-reverse","column","column-reverse"].includes(e)}},modifiers:{type:String,default:""},centerContent:{type:Boolean,default:!1},searchData:{type:String,default:""}},computed:{classes:function(){return[this.computedModifiers,this.size.length?"afs-grid-container_".concat(this.size):null,this.type.length?"afs-grid-container_".concat(this.type):null,{"afs-grid-container_center-content":this.centerContent},"afs-grid-container_direction-".concat(this.direction)]},computedModifiers:function(){return s(this.modifiers,"afs-grid-container")}}},c=(n(38),n(0)),l=Object(c.a)(u,r,[],!1,null,null,null);l.options.__file="WebUI/VueJsComponentLibrary/src/components/Grid/GridContainer.vue";var f=l.exports,d=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"afs-grid-row",class:this.classes,attrs:{"data-locator":this.dataLocator}},[this._t("default")],2)};d._withStripped=!0;var h={name:"AfsGridRow",props:{dataLocator:{type:String,default:"grid-row"},paddingSize:{type:String,default:"lg",validator:function(e){return["xl","lg","md","sm","xs"].some((function(t){return e===t}))}},flexWrap:{type:String,default:"wrap",validator:function(e){return["nowrap","wrap","wrap-reverse"].includes(e)}}},computed:{classes:function(){return[this.paddingSizeClass,"afs-grid-row_".concat(this.flexWrap)]},paddingSizeClass:function(){return"afs-grid-row_".concat(this.paddingSize)}}},p=Object(c.a)(h,d,[],!1,null,null,null);p.options.__file="WebUI/VueJsComponentLibrary/src/components/Grid/GridRow.vue";p.exports;var m=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"afs-grid-column",class:[this.modifiers,this.paddingSizeClass],attrs:{"data-locator":this.dataLocator}},[this._t("default")],2)};m._withStripped=!0;var v=function(e){return"number"==typeof e&&!isNaN(+e)},y={name:"AfsGridColumn",props:{dataLocator:{type:String,default:"grid-column"},xl:{type:[Number,String],default:null,validation:v},lg:{type:[Number,String],default:null,validation:v},md:{type:[Number,String],default:null,validation:v},sm:{type:[Number,String],default:null,validation:v},xs:{type:[Number,String],default:null,validation:v},size:{type:[Number,String],default:12,validation:v},paddingSize:{type:String,default:"lg",validator:function(e){return["xl","lg","md","sm","xs"].some((function(t){return e===t}))}},flex:{type:Boolean,default:!1}},computed:{modifiers:function(){return[this.xl&&"afs-grid-column_xl-".concat(this.xl),this.lg&&"afs-grid-column_lg-".concat(this.lg),this.md&&"afs-grid-column_md-".concat(this.md),this.sm&&"afs-grid-column_sm-".concat(this.sm),(this.xs||this.size)&&"afs-grid-column_xs-".concat(this.xs||this.size),{"afs-grid-column_flex":this.flex}]},paddingSizeClass:function(){return"afs-grid-column_".concat(this.paddingSize)}}},g=Object(c.a)(y,m,[],!1,null,null,null);g.options.__file="WebUI/VueJsComponentLibrary/src/components/Grid/GridColumn.vue";var b=g.exports,w=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"afs-grid-sidebar",attrs:{"data-locator":this.dataLocator}},[this._t("default")],2)};w._withStripped=!0;var _={name:"AfsGridSidebar",props:{dataLocator:{type:String,default:"grid-sidebar"}}},O=Object(c.a)(_,w,[],!1,null,null,null);O.options.__file="WebUI/VueJsComponentLibrary/src/components/Grid/GridSidebar.vue";O.exports;var C=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"afs-grid-workplace",attrs:{"data-locator":this.dataLocator}},[this._t("default")],2)};C._withStripped=!0;var S={name:"AfsGridWorkplace",props:{dataLocator:{type:String,default:"grid-workplace"}}},x=Object(c.a)(S,C,[],!1,null,null,null);x.options.__file="WebUI/VueJsComponentLibrary/src/components/Grid/GridWorkplace.vue";x.exports;var k=function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.tag,e._g(e._b({tag:"component",staticClass:"afs-grid-section",class:e.classes,attrs:{"data-locator":e.dataLocator}},"component",e.$attrs,!1),e.$listeners),[e._t("default")],2)};k._withStripped=!0;var E={name:"AfsGridSection",inheritAttrs:!1,props:{dataLocator:{type:String,default:"grid-section"},tag:{type:String,default:"div"},paddingSize:{type:String,default:"lg",validator:function(e){return["xl","lg","md","sm","xs"].includes(e)}}},computed:{classes:function(){return"afs-grid-section_".concat(this.paddingSize)}}},T=Object(c.a)(E,k,[],!1,null,null,null);T.options.__file="WebUI/VueJsComponentLibrary/src/components/Grid/GridSection.vue";var P=T.exports},function(e,t,n){"use strict";(function(t){var r=n(18),i=n(183),o=n(116),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(u=n(117)),u),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||c.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(a)})),e.exports=c}).call(this,n(115))},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";n(49)},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"afs-checkbox",class:[e.themeClass,e.classes],attrs:{"data-locator":e.dataLocator}},[n("input",e._g({staticClass:"afs-checkbox__input",attrs:{type:"checkbox",disabled:e.disabled,"data-locator":e.dataLocator+"-control"},domProps:{checked:e.modelValue}},e.listeners)),e._v(" "),n("span",{staticClass:"afs-checkbox__figure"},[e.isIndefinite?n("span",{staticClass:"afs-checkbox__figure-square"}):n("Icon",{staticClass:"afs-checkbox__figure-icon",attrs:{name:"checkmark"}})],1),e._v(" "),e.hasText?n("span",{staticClass:"afs-checkbox__text"},[e._t("default",null,{getBEMClass:e.getBEMClass})],2):e._e()])};r._withStripped=!0;var i=n(2),o=n(4);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={name:"AfsCheckbox",components:{Icon:n(5).a},model:{prop:"modelValue",event:"model-changed"},props:{modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},type:{type:String,default:"",validator:function(e){return["indefinite",""].includes(e)}},dataLocator:{type:String,default:"checkbox"}},computed:{themeClass:function(){var e=Object(o.a)(this.$root);return Object(i.c)(e.theme)},classes:function(){return{"is-checked":this.modelValue,"is-disabled":this.disabled}},isIndefinite:function(){return"indefinite"===this.type},hasText:function(){return this.$slots.default},listeners:function(){var e=this;return s(s({},this.$listeners),{},{change:function(t){e.$emit("change",t),e.$emit("model-changed",t.target.checked)}})}},methods:{getBEMClass:function(e){return Object(i.a)("afs-checkbox",e)}}},l=(n(153),n(0)),f=Object(l.a)(c,r,[],!1,null,null,null);f.options.__file="WebUI/VueJsComponentLibrary/src/components/Checkbox/App.vue";var d=f.exports;t.a=d},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==n(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"formatDate",(function(){return l}));var r=/\d\d(:\d\d){1,2}/,i=/[+-]\d\d:\d\d/,o=[{long:"January",short:"Jan"},{long:"February",short:"Feb"},{long:"March",short:"Mar"},{long:"April",short:"Apr"},{long:"May",short:"May"},{long:"June",short:"Jun"},{long:"July",short:"Jul"},{long:"August",short:"Aug"},{long:"September",short:"Sept"},{long:"October",short:"Oct"},{long:"November",short:"Nov"},{long:"December",short:"Dec"}],a=function(e,t){var n=e.getHours(),r=e.getMinutes();return{years:e.getFullYear(),month:t[e.getMonth()].short,days:e.getDate(),hours:0===n||12===n||24===n?12:n%12,minutes:r<10?"0"+r:r,postfix:n<12?"AM":"PM"}},s={second:"just now",seconds:"1 minute %s",minute:"minute %s",minutes:"%s minutes %s",hour:"an hour %s",hours:"%s hours %s",yesterday:"Yesterday"},u=function(){var e=new Date,t=e.toLocaleDateString(void 0),n=e.toLocaleDateString(void 0,{timeZoneName:"short"}),r=n.indexOf(t);return r>=0?(n.substring(0,r)+n.substring(r+t.length)).replace(/^[\s,.\-:;]+|[\s,.\-:;]+$/g,""):n},c=function(e){var t=r.test(e);return i.test(e)?e.replace(i,"+00:00"):t?e+"+00:00":e},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(t.ignoreTimeZone||0===t.timeZoneOffset)&&(e=c(e));var n=new Date(e).getTime(),r=new Date(n),i=u(),s=a(r,o),l=s.years,f=s.month,d=s.days,h=s.hours,p=s.minutes,m=s.postfix;return"".concat(f," ").concat(d," ").concat(l,", ").concat(h,":").concat(p," ").concat(m," ").concat(i)};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(t.ignoreTimeZone||0===t.timeZoneOffset)&&(e=c(e));var n=t.afterSuffix||"later",r=t.beforeSuffix||"ago",i=t.messages||s,u=t.months||o,l=new Date(e).getTime(),f=new Date,d=f.getFullYear(),h=new Date(l),p=f.getTime()-h.getTime(),m=Math.floor,v=1e3,y=60*v,g=60*y,b=24*g,w=365*b,_=p>0;p=p<0?v-p:p;var O=i.yesterday,C=a(h,u),S=C.years,x=C.month,k=C.days,E=C.hours,T=C.minutes,P=C.postfix,A=p<20*v?i.second:p<y?i.seconds:p<2*y?i.minute:p<g?i.minutes.replace("%s",m(p/y)):p<2*g?i.hour:p<b?i.hours.replace("%s",m(p/g)):p<2*b&&_?"".concat(O,", ").concat(E,":").concat(T," ").concat(P):p<w&&S===d?"".concat(x," ").concat(k,", ").concat(E,":").concat(T," ").concat(P):"".concat(x," ").concat(k," ").concat(S,", ").concat(E,":").concat(T," ").concat(P);return A.replace("%s",_?r:n)}}])},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e[e.none=0]="none",e[e.removed=1]="removed",e[e.added=2]="added",e[e.changed=3]="changed"}(r||(r={}));var i=["Unknow","Removed","Added","Modified"]},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.Render2D=2]="Render2D",e[e.Render3D=3]="Render3D"}(r||(r={}))},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){},function(e,t,n){"use strict";function r(e,t,n){return{name:e,native:t,item:o(window.__CORE__.response.metadata,e,t),views:i(t),senderId:n}}function i(e){for(var t=new Array,n=Object.keys(window.__CORE__.views),r=0;r<n.length;r++){var i=n[r],o=window.__CORE__.views[i];o.hasOwnProperty("canBeSelect")&&o.canBeSelect(e)&&t.push(o.metaInfo.name)}return t}function o(e,t,n){return"net"==t?function(e,t){var n={name:t.name,length:t.length,unroutedLength:t.unroutedLength,layersUsed:new Array};e&&e.layers&&t.layersUsed&&t.layersUsed.map((function(t){var r=e.layers.find((function(e){return e.id===t}));r&&n.layersUsed.push(r)}));return n}(e,n):"component"==t?function(e,t){var n={designator:t.designator,description:t.description,layerName:"None",parameters:t.parameters?t.parameters.map((function(e){return e})):[]};if(e&&e.layers){var r=e.layers.find((function(e){return e.id===t.layerId}));r&&(n.layerName=r.name)}return n}(e,n):n}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=window.__CORE__},function(e,t,n){e.exports=!n(54)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(55),i=n(440),o=n(176),a=Object.defineProperty;t.f=n(81)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";n(58)},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.tag,e._g({tag:"component",staticClass:"afs-user-avatar__container"},e.$listeners),[n("span",{staticClass:"afs-user-avatar",class:e.classes},[e.isUnknown?[n("Icon",{staticClass:"afs-user-avatar__icon",attrs:{name:"avatar",filled:""}})]:[e.img&&!e.isFailed?n("img",{staticClass:"afs-user-avatar__img",attrs:{src:e.img,alt:e.alt},on:{error:e.handleImgError}}):n("AfsText",{staticClass:"afs-user-avatar__placeholder",attrs:{type:"title",inline:""}},[e._v("\n        "+e._s(e.alt)+"\n      ")]),e._v(" "),e.addAvatar?[n("div",{staticClass:"afs-user-avatar__add-avatar-icon",class:{"afs-user-avatar__add-avatar-icon_has-img":e.img}},[n("Icon",{attrs:{name:"photo-32"}})],1)]:e._e()]],2),e._v(" "),e.online?n("div",{staticClass:"afs-user-avatar__online"}):e._e()])};r._withStripped=!0;var i=n(3),o=n(5),a=n(2),s=n(4),u={name:"AfsUserAvatar",components:{AfsText:i.a,Icon:o.a},props:{isUnknown:{type:Boolean,default:!1},addAvatar:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},img:{type:String,default:""},title:{type:String,default:""},isNew:{type:Boolean,default:!1},size:{type:String,default:"lg",validator:function(e){return["xxxl","xl","lg","md","sm","xs"].includes(e)}},online:{type:Boolean,default:!1},tag:{type:String,default:"div"}},data:function(){return{isFailed:!1}},computed:{classes:function(){return[this.themeClass,this.sizeClass,this.colorClass,{"afs-user-avatar_loaded":this.img&&!this.isFailed&&!this.isNew,"afs-user-avatar__add-avatar":this.addAvatar,"afs-user-avatar__show-icon":this.showIcon}]},colorClass:function(){return this.addAvatar?"afs-user-avatar-dark":(this.isUnknown||!this.img||this.isFailed)&&this.alt?"afs-user-avatar_".concat(this.altColorCode):null},themeClass:function(){var e=Object(s.a)(this.$root);return Object(a.c)(e.theme)},sizeClass:function(){return"afs-user-avatar_".concat(this.size)},alt:function(){var e="string"==typeof this.title||Array.isArray(this.title)?this.title[0]:"";return e},altColorCode:function(){if("@"===this.alt)return"at";var e="z".charCodeAt(0),t="a".charCodeAt(0),n=e-t,r=this.alt.toLowerCase().charCodeAt(0),i=r===e?r:((r-t)%n+n)%n+t;return String.fromCharCode(i)}},methods:{getBEMClass:function(e){return Object(a.a)("afs-user-avatar",e)},handleImgError:function(){this.isFailed=!0}}},c=(n(406),n(0)),l=Object(c.a)(u,r,[],!1,null,null,null);l.options.__file="WebUI/VueJsComponentLibrary/src/components/UserAvatar/App.vue";var f=l.exports;t.a=f},function(e,t,n){"use strict";var r=n(19);t.a=function(e,t){var n=t.value;if(Object(r.hasOwnProperty)(n,"query")){var i=Object(r.hasOwnProperty)(n,"value")?n.value:e.innerHTML,o=n.query.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),a=new RegExp(o,"ig"),s=n.color||"#f2c94c",u=n.textColor||"#000";e.innerHTML=n.query&&i?i.replace(a,(function(e){return'<mark style="color: '.concat(u,"; background: ").concat(s,';">').concat(e,"</mark>")})):i}}},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"afs-user-info",class:e.classes,attrs:{"data-locator":e.dataLocator}},[n("UserAvatar",{staticClass:"afs-user-info__avatar",class:e.imgClass,attrs:{img:e.img,title:e.avatarTitle,"is-new":e.isNew,online:e.online,size:e.avatarSize}}),e._v(" "),n("span",{staticClass:"afs-user-info__content"},[e.title?n("AfsText",{staticClass:"afs-user-info__title",class:e.titleClass,attrs:{tag:"span",type:"title",ellipsis:e.ellipsis}},[e._t("title",[e._v("\n        "+e._s(e.title)+"\n      ")],{text:e.title,getBEMClass:e.getBEMClass})],2):e._e(),e._v(" "),e.meta?n("AfsText",{directives:[{name:"hint",rawName:"v-hint:[metaHintId]",arg:e.metaHintId}],ref:"meta",staticClass:"afs-user-info__text",class:e.metaClass,attrs:{tag:"span",type:"text",ellipsis:e.ellipsis},on:{"~mouseenter":function(t){return e.onMetaHover(t)}}},[e._t("meta",[e._v("\n        "+e._s(e.meta)+"\n      ")],{text:e.meta,getBEMClass:e.getBEMClass})],2):e._e(),e._v(" "),n("ContextMenu",{attrs:{id:e.metaHintId,"is-exist":e.showHintForMeta,type:"hint"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.getBEMClass;return[n("AfsText",{class:r("text"),attrs:{type:"tooltip"}},[e._v("\n          "+e._s(e.meta)+"\n        ")])]}}])})],1)],1)};r._withStripped=!0;var i=n(84),o=n(3),a=n(10),s=n(2),u=n(4),c=n(17),l=n(24),f={name:"AfsUserInfo",components:{UserAvatar:i.a,AfsText:o.a,ContextMenu:a.a},directives:{hint:l.a},props:{dataLocator:{type:String,default:"user-info"},type:{type:String,default:"",validator:function(e){return!e.length||["reverse"].includes(e)}},img:{type:String,default:""},title:{type:String,default:""},meta:{type:String,default:""},ellipsis:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},isNew:{type:Boolean,default:!1},hasTitle:{type:Boolean,default:!0},hasMeta:{type:Boolean,default:!0},hasHintForMeta:{type:Boolean,default:!1},titleClass:{type:null,default:null},metaClass:{type:null,default:null},imgClass:{type:null,default:null},online:{type:Boolean,default:!1},avatarSize:{type:String,default:"lg",validator:function(e){return["xxxl","xl","lg","md","sm","xs"].includes(e)}},useMetaForAvatarLetter:{type:Boolean,default:!1}},data:function(){return{metaHintId:Object(c.a)(),showHintForMeta:!1}},computed:{classes:function(){return[this.themeClass,this.type.length&&"afs-user-info_".concat(this.type),{"afs-user-info_clickable":this.clickable}]},themeClass:function(){var e=Object(u.a)(this.$root);return Object(s.c)(e.theme)},avatarTitle:function(){return this.isNew?"@":this.useMetaForAvatarLetter?this.meta:this.title||this.meta}},methods:{getBEMClass:function(e){return Object(s.a)("afs-user-info",e)},onMetaHover:function(){var e,t=null===(e=this.$refs.meta)||void 0===e?void 0:e.$el;this.showHintForMeta&&t&&t.offsetWidth<t.scrollWidth&&(this.showHintForMeta=!0)}}},d=(n(407),n(0)),h=Object(d.a)(f,r,[],!1,null,null,null);h.options.__file="WebUI/VueJsComponentLibrary/src/components/UserInfo/App.vue";var p=h.exports;t.a=p},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=this.getStorage()}var t,n,i;return t=e,(n=[{key:"getStorage",value:function(){try{return localStorage}catch(e){return console.error("Cannot use localStorage",e),window}}},{key:"get",value:function(){return(this.store instanceof Storage?this.store.getItem("vwr_unit"):this.store.__vwrUnit)||null}},{key:"set",value:function(e){this.store instanceof Storage?this.store.setItem("vwr_unit",e):this.store.__vwrUnit=e}},{key:"remove",value:function(){this.store.removeItem("vwr_unit")}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new i},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade","enter-class":"afs-modal_enter","enter-active-class":"afs-modal_enter-active","leave-to-class":"afs-modal_leave-to","leave-active-class":"afs-modal_leave-active"},on:{"after-leave":function(t){return e.$emit("after-close")}}},[e.isOpened?n("div",{directives:[{name:"inject",rawName:"v-inject:[parentContainerId]",arg:e.parentContainerId}],staticClass:"afs-modal",class:[e.themeClass,e.sizeClass,e.levelClass,e.typeClass],attrs:{"data-afs-modal":e.id,"data-locator":e.dataLocator},on:{"!click":function(t){return e.handleOutsideClick(t)},mousedown:e.handleOutsideStart}},[n("div",{ref:"container",staticClass:"afs-modal__container",attrs:{"data-locator":e.dataLocator+"-container"}},[e.hasClose?n("ButtonIcon",{staticClass:"afs-modal__close",attrs:{icon:"close-8",transparent:!0,gallery:e.isGallery(),"data-locator":e.dataLocator+"-close"},on:{click:function(t){return t.preventDefault(),e.close(t)}}}):e._e(),e._v(" "),e.hasHeader?n("Subheader",{staticClass:"afs-modal__header",class:{"afs-modal__header_center":e.headerCenter},attrs:{center:e.headerCenter,radius:"top-left top-right"}},[e._t("header",null,{getBEMClass:e.getBEMClass})],2):e._e(),e._v(" "),n("div",{staticClass:"afs-modal__body"},[e._t("default",null,{getBEMClass:e.getBEMClass})],2)],1)]):e._e()])};r._withStripped=!0;var i=n(65),o=n(22),a=n(2),s=n(4),u=n(1),c=n(14),l=(n(40),{name:"AfsModal",directives:{inject:c.a},components:{Subheader:i.a,ButtonIcon:o.a},props:{dataLocator:{type:String,default:"modal"},level:{type:[String,Number],default:1,validator:function(e){return+e>0&&+e<5}},id:{type:[String,Number],default:"",required:!0},size:{type:String,default:"lg",validator:function(e){return["xxl","lg","md","mdl","sm"].includes(e)}},type:{type:String,default:"simple",validator:function(e){return["gallery","simple"].includes(e)}},hasClose:{type:Boolean,default:!0},hasOutsideClose:{type:Boolean,default:!0},headerCenter:{type:Boolean,default:!1},parentContainerId:{type:String,default:""},closeByEsc:{type:Boolean,default:!0}},data:function(){return{isOpened:!1,clickedElement:null}},computed:{themeClass:function(){var e=Object(s.a)(this.$root);return Object(a.c)(e.theme)},sizeClass:function(){return"afs-modal_".concat(this.size)},typeClass:function(){return"afs-modal_".concat(this.type)},hasHeader:function(){return this.$slots.header},levelClass:function(){return"afs-modal_".concat(this.level)}},watch:{isOpened:{immediate:!0,handler:function(e){e?this.closeByEsc&&document.addEventListener("keyup",this.handleKeyUp,!0):this.closeByEsc&&document.removeEventListener("keyup",this.handleKeyUp,!0)}}},mounted:function(){u.b.set({id:this.id,component:this})},beforeDestroy:function(){u.b.delete(this.id)},methods:{getBEMClass:function(e){return Object(a.a)("afs-modal",e)},handleOutsideClick:function(e){var t=this;!this.hasOutsideClose||e.target!==this.clickedElement||e.path.some((function(e){return e===t.$refs.container}))||e.path.some((function(e){return e.dataset&&e.dataset.afsModalTarget===t.id}))||this.close()},handleOutsideStart:function(e){this.clickedElement=e.target},toggle:function(){this.isOpened?this.close():this.open()},open:function(){this.show(),this.$emit("open")},close:function(){this.hide(),this.$emit("close")},show:function(){this.isOpened||(this.isOpened=!0)},hide:function(){this.isOpened&&(this.isOpened=!1)},handleKeyUp:function(e){var t=document.querySelectorAll(".afs-modal");27===e.keyCode&&t[t.length-1]===this.$el&&this.close()},isGallery:function(){return"gallery"===this.type}}}),f=(n(323),n(0)),d=Object(f.a)(l,r,[],!1,null,null,null);d.options.__file="WebUI/VueJsComponentLibrary/src/components/Modal/Modal.vue";var h=d.exports;t.a=h},function(e,t,n){},function(e,t,n){},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==n(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?(e.exports=r=function(e){return n(e)},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},e.exports.default=e.exports,e.exports.__esModule=!0),r(t)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=(window,function(e){return window.__afsComponents&&window.__afsComponents[e]});t.default={inserted:function(e,t){var n=t.value;if("object"===i()(n)&&null!==n&&!Array.isArray(n)){var r=null,a=n.id||"app-trimmed-text-hint",s=function(){var t=o(a);if(t){var r=function(){return t.setText(n.hint)};t.on&&t.on("open",r),t.open&&t.open(e),t.off&&t.off("open",r)}};e.addEventListener("mouseenter",(function(t){e.offsetWidth>=e.scrollWidth||(n.noDelay?s():r=setTimeout(s,n.delay||1e3))}),!1),e.addEventListener("mouseleave",(function(t){r&&clearTimeout(r);var n=o(a);if(n){var i=function(){return n.setText(null)};n.on&&n.on("close",i),n.close&&n.close(e),n.off&&n.off("close",i)}}),!1)}}}}])},function(e,t,n){"use strict";function r(e,t){try{t(e)}finally{e.dispose()}}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i.a}));var i=n(230)},function(e,t,n){"use strict";(function(e,n){
/*!
 * Vue.js v2.6.12
 * (c) 2014-2020 Evan You
 * Released under the MIT License.
 */
var r=Object.freeze({});function i(e){return null==e}function o(e){return null!=e}function a(e){return!0===e}function s(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function u(e){return null!==e&&"object"==typeof e}var c=Object.prototype.toString;function l(e){return"[object Object]"===c.call(e)}function f(e){return"[object RegExp]"===c.call(e)}function d(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function h(e){return o(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function p(e){return null==e?"":Array.isArray(e)||l(e)&&e.toString===c?JSON.stringify(e,null,2):String(e)}function m(e){var t=parseFloat(e);return isNaN(t)?e:t}function v(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}var y=v("slot,component",!0),g=v("key,ref,slot,slot-scope,is");function b(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var w=Object.prototype.hasOwnProperty;function _(e,t){return w.call(e,t)}function O(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}var C=/-(\w)/g,S=O((function(e){return e.replace(C,(function(e,t){return t?t.toUpperCase():""}))})),x=O((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),k=/\B([A-Z])/g,E=O((function(e){return e.replace(k,"-$1").toLowerCase()}));var T=Function.prototype.bind?function(e,t){return e.bind(t)}:function(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n};function P(e,t){t=t||0;for(var n=e.length-t,r=new Array(n);n--;)r[n]=e[n+t];return r}function A(e,t){for(var n in t)e[n]=t[n];return e}function M(e){for(var t={},n=0;n<e.length;n++)e[n]&&A(t,e[n]);return t}function j(e,t,n){}var D=function(e,t,n){return!1},I=function(e){return e};function R(e,t){if(e===t)return!0;var n=u(e),r=u(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var i=Array.isArray(e),o=Array.isArray(t);if(i&&o)return e.length===t.length&&e.every((function(e,n){return R(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(i||o)return!1;var a=Object.keys(e),s=Object.keys(t);return a.length===s.length&&a.every((function(n){return R(e[n],t[n])}))}catch(e){return!1}}function L(e,t){for(var n=0;n<e.length;n++)if(R(e[n],t))return n;return-1}function B(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var N=["component","directive","filter"],U=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],F={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:D,isReservedAttr:D,isUnknownElement:D,getTagNamespace:j,parsePlatformTagName:I,mustUseProp:D,async:!0,_lifecycleHooks:U},$=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function V(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function z(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var G=new RegExp("[^"+$.source+".$_\\d]");var H,W="__proto__"in{},Y="undefined"!=typeof window,q="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,X=q&&WXEnvironment.platform.toLowerCase(),Z=Y&&window.navigator.userAgent.toLowerCase(),K=Z&&/msie|trident/.test(Z),J=Z&&Z.indexOf("msie 9.0")>0,Q=Z&&Z.indexOf("edge/")>0,ee=(Z&&Z.indexOf("android"),Z&&/iphone|ipad|ipod|ios/.test(Z)||"ios"===X),te=(Z&&/chrome\/\d+/.test(Z),Z&&/phantomjs/.test(Z),Z&&Z.match(/firefox\/(\d+)/)),ne={}.watch,re=!1;if(Y)try{var ie={};Object.defineProperty(ie,"passive",{get:function(){re=!0}}),window.addEventListener("test-passive",null,ie)}catch(e){}var oe=function(){return void 0===H&&(H=!Y&&!q&&void 0!==e&&(e.process&&"server"===e.process.env.VUE_ENV)),H},ae=Y&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function se(e){return"function"==typeof e&&/native code/.test(e.toString())}var ue,ce="undefined"!=typeof Symbol&&se(Symbol)&&"undefined"!=typeof Reflect&&se(Reflect.ownKeys);ue="undefined"!=typeof Set&&se(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var le=j,fe=0,de=function(){this.id=fe++,this.subs=[]};de.prototype.addSub=function(e){this.subs.push(e)},de.prototype.removeSub=function(e){b(this.subs,e)},de.prototype.depend=function(){de.target&&de.target.addDep(this)},de.prototype.notify=function(){var e=this.subs.slice();for(var t=0,n=e.length;t<n;t++)e[t].update()},de.target=null;var he=[];function pe(e){he.push(e),de.target=e}function me(){he.pop(),de.target=he[he.length-1]}var ve=function(e,t,n,r,i,o,a,s){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ye={child:{configurable:!0}};ye.child.get=function(){return this.componentInstance},Object.defineProperties(ve.prototype,ye);var ge=function(e){void 0===e&&(e="");var t=new ve;return t.text=e,t.isComment=!0,t};function be(e){return new ve(void 0,void 0,void 0,String(e))}function we(e){var t=new ve(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var _e=Array.prototype,Oe=Object.create(_e);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var t=_e[e];z(Oe,e,(function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var i,o=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2)}return i&&a.observeArray(i),a.dep.notify(),o}))}));var Ce=Object.getOwnPropertyNames(Oe),Se=!0;function xe(e){Se=e}var ke=function(e){this.value=e,this.dep=new de,this.vmCount=0,z(e,"__ob__",this),Array.isArray(e)?(W?function(e,t){e.__proto__=t}(e,Oe):function(e,t,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];z(e,o,t[o])}}(e,Oe,Ce),this.observeArray(e)):this.walk(e)};function Ee(e,t){var n;if(u(e)&&!(e instanceof ve))return _(e,"__ob__")&&e.__ob__ instanceof ke?n=e.__ob__:Se&&!oe()&&(Array.isArray(e)||l(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new ke(e)),t&&n&&n.vmCount++,n}function Te(e,t,n,r,i){var o=new de,a=Object.getOwnPropertyDescriptor(e,t);if(!a||!1!==a.configurable){var s=a&&a.get,u=a&&a.set;s&&!u||2!==arguments.length||(n=e[t]);var c=!i&&Ee(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return de.target&&(o.depend(),c&&(c.dep.depend(),Array.isArray(t)&&Me(t))),t},set:function(t){var r=s?s.call(e):n;t===r||t!=t&&r!=r||s&&!u||(u?u.call(e,t):n=t,c=!i&&Ee(t),o.notify())}})}}function Pe(e,t,n){if(Array.isArray(e)&&d(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?n:r?(Te(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function Ae(e,t){if(Array.isArray(e)&&d(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||_(e,t)&&(delete e[t],n&&n.dep.notify())}}function Me(e){for(var t=void 0,n=0,r=e.length;n<r;n++)(t=e[n])&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Me(t)}ke.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Te(e,t[n])},ke.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Ee(e[t])};var je=F.optionMergeStrategies;function De(e,t){if(!t)return e;for(var n,r,i,o=ce?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++)"__ob__"!==(n=o[a])&&(r=e[n],i=t[n],_(e,n)?r!==i&&l(r)&&l(i)&&De(r,i):Pe(e,n,i));return e}function Ie(e,t,n){return n?function(){var r="function"==typeof t?t.call(n,n):t,i="function"==typeof e?e.call(n,n):e;return r?De(r,i):i}:t?e?function(){return De("function"==typeof t?t.call(this,this):t,"function"==typeof e?e.call(this,this):e)}:t:e}function Re(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(n):n}function Le(e,t,n,r){var i=Object.create(e||null);return t?A(i,t):i}je.data=function(e,t,n){return n?Ie(e,t,n):t&&"function"!=typeof t?e:Ie(e,t)},U.forEach((function(e){je[e]=Re})),N.forEach((function(e){je[e+"s"]=Le})),je.watch=function(e,t,n,r){if(e===ne&&(e=void 0),t===ne&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var i={};for(var o in A(i,e),t){var a=i[o],s=t[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},je.props=je.methods=je.inject=je.computed=function(e,t,n,r){if(!e)return t;var i=Object.create(null);return A(i,e),t&&A(i,t),i},je.provide=Ie;var Be=function(e,t){return void 0===t?e:t};function Ne(e,t,n){if("function"==typeof t&&(t=t.options),function(e,t){var n=e.props;if(n){var r,i,o={};if(Array.isArray(n))for(r=n.length;r--;)"string"==typeof(i=n[r])&&(o[S(i)]={type:null});else if(l(n))for(var a in n)i=n[a],o[S(a)]=l(i)?i:{type:i};else 0;e.props=o}}(t),function(e,t){var n=e.inject;if(n){var r=e.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(l(n))for(var o in n){var a=n[o];r[o]=l(a)?A({from:o},a):{from:a}}else 0}}(t),function(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"==typeof r&&(t[n]={bind:r,update:r})}}(t),!t._base&&(t.extends&&(e=Ne(e,t.extends,n)),t.mixins))for(var r=0,i=t.mixins.length;r<i;r++)e=Ne(e,t.mixins[r],n);var o,a={};for(o in e)s(o);for(o in t)_(e,o)||s(o);function s(r){var i=je[r]||Be;a[r]=i(e[r],t[r],n,r)}return a}function Ue(e,t,n,r){if("string"==typeof n){var i=e[t];if(_(i,n))return i[n];var o=S(n);if(_(i,o))return i[o];var a=x(o);return _(i,a)?i[a]:i[n]||i[o]||i[a]}}function Fe(e,t,n,r){var i=t[e],o=!_(n,e),a=n[e],s=ze(Boolean,i.type);if(s>-1)if(o&&!_(i,"default"))a=!1;else if(""===a||a===E(e)){var u=ze(String,i.type);(u<0||s<u)&&(a=!0)}if(void 0===a){a=function(e,t,n){if(!_(t,"default"))return;var r=t.default;0;if(e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n])return e._props[n];return"function"==typeof r&&"Function"!==$e(t.type)?r.call(e):r}(r,i,e);var c=Se;xe(!0),Ee(a),xe(c)}return a}function $e(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function Ve(e,t){return $e(e)===$e(t)}function ze(e,t){if(!Array.isArray(t))return Ve(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if(Ve(t[n],e))return n;return-1}function Ge(e,t,n){pe();try{if(t)for(var r=t;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{if(!1===i[o].call(r,e,t,n))return}catch(e){We(e,r,"errorCaptured hook")}}We(e,t,n)}finally{me()}}function He(e,t,n,r,i){var o;try{(o=n?e.apply(t,n):e.call(t))&&!o._isVue&&h(o)&&!o._handled&&(o.catch((function(e){return Ge(e,r,i+" (Promise/async)")})),o._handled=!0)}catch(e){Ge(e,r,i)}return o}function We(e,t,n){if(F.errorHandler)try{return F.errorHandler.call(null,e,t,n)}catch(t){t!==e&&Ye(t,null,"config.errorHandler")}Ye(e,t,n)}function Ye(e,t,n){if(!Y&&!q||"undefined"==typeof console)throw e;console.error(e)}var qe,Xe=!1,Ze=[],Ke=!1;function Je(){Ke=!1;var e=Ze.slice(0);Ze.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!=typeof Promise&&se(Promise)){var Qe=Promise.resolve();qe=function(){Qe.then(Je),ee&&setTimeout(j)},Xe=!0}else if(K||"undefined"==typeof MutationObserver||!se(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())qe=void 0!==n&&se(n)?function(){n(Je)}:function(){setTimeout(Je,0)};else{var et=1,tt=new MutationObserver(Je),nt=document.createTextNode(String(et));tt.observe(nt,{characterData:!0}),qe=function(){et=(et+1)%2,nt.data=String(et)},Xe=!0}function rt(e,t){var n;if(Ze.push((function(){if(e)try{e.call(t)}catch(e){Ge(e,t,"nextTick")}else n&&n(t)})),Ke||(Ke=!0,qe()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){n=e}))}var it=new ue;function ot(e){!function e(t,n){var r,i,o=Array.isArray(t);if(!o&&!u(t)||Object.isFrozen(t)||t instanceof ve)return;if(t.__ob__){var a=t.__ob__.dep.id;if(n.has(a))return;n.add(a)}if(o)for(r=t.length;r--;)e(t[r],n);else for(i=Object.keys(t),r=i.length;r--;)e(t[i[r]],n)}(e,it),it.clear()}var at=O((function(e){var t="&"===e.charAt(0),n="~"===(e=t?e.slice(1):e).charAt(0),r="!"===(e=n?e.slice(1):e).charAt(0);return{name:e=r?e.slice(1):e,once:n,capture:r,passive:t}}));function st(e,t){function n(){var e=arguments,r=n.fns;if(!Array.isArray(r))return He(r,null,arguments,t,"v-on handler");for(var i=r.slice(),o=0;o<i.length;o++)He(i[o],null,e,t,"v-on handler")}return n.fns=e,n}function ut(e,t,n,r,o,s){var u,c,l,f;for(u in e)c=e[u],l=t[u],f=at(u),i(c)||(i(l)?(i(c.fns)&&(c=e[u]=st(c,s)),a(f.once)&&(c=e[u]=o(f.name,c,f.capture)),n(f.name,c,f.capture,f.passive,f.params)):c!==l&&(l.fns=c,e[u]=l));for(u in t)i(e[u])&&r((f=at(u)).name,t[u],f.capture)}function ct(e,t,n){var r;e instanceof ve&&(e=e.data.hook||(e.data.hook={}));var s=e[t];function u(){n.apply(this,arguments),b(r.fns,u)}i(s)?r=st([u]):o(s.fns)&&a(s.merged)?(r=s).fns.push(u):r=st([s,u]),r.merged=!0,e[t]=r}function lt(e,t,n,r,i){if(o(t)){if(_(t,n))return e[n]=t[n],i||delete t[n],!0;if(_(t,r))return e[n]=t[r],i||delete t[r],!0}return!1}function ft(e){return s(e)?[be(e)]:Array.isArray(e)?function e(t,n){var r,u,c,l,f=[];for(r=0;r<t.length;r++)i(u=t[r])||"boolean"==typeof u||(c=f.length-1,l=f[c],Array.isArray(u)?u.length>0&&(dt((u=e(u,(n||"")+"_"+r))[0])&&dt(l)&&(f[c]=be(l.text+u[0].text),u.shift()),f.push.apply(f,u)):s(u)?dt(l)?f[c]=be(l.text+u):""!==u&&f.push(be(u)):dt(u)&&dt(l)?f[c]=be(l.text+u.text):(a(t._isVList)&&o(u.tag)&&i(u.key)&&o(n)&&(u.key="__vlist"+n+"_"+r+"__"),f.push(u)));return f}(e):void 0}function dt(e){return o(e)&&o(e.text)&&!1===e.isComment}function ht(e,t){if(e){for(var n=Object.create(null),r=ce?Reflect.ownKeys(e):Object.keys(e),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){for(var a=e[o].from,s=t;s;){if(s._provided&&_(s._provided,a)){n[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in e[o]){var u=e[o].default;n[o]="function"==typeof u?u.call(t):u}else 0}}return n}}function pt(e,t){if(!e||!e.length)return{};for(var n={},r=0,i=e.length;r<i;r++){var o=e[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==t&&o.fnContext!==t||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var c in n)n[c].every(mt)&&delete n[c];return n}function mt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function vt(e,t,n){var i,o=Object.keys(t).length>0,a=e?!!e.$stable:!o,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&n&&n!==r&&s===n.$key&&!o&&!n.$hasNormal)return n;for(var u in i={},e)e[u]&&"$"!==u[0]&&(i[u]=yt(t,u,e[u]))}else i={};for(var c in t)c in i||(i[c]=gt(t,c));return e&&Object.isExtensible(e)&&(e._normalized=i),z(i,"$stable",a),z(i,"$key",s),z(i,"$hasNormal",o),i}function yt(e,t,n){var r=function(){var e=arguments.length?n.apply(null,arguments):n({});return(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:ft(e))&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:r,enumerable:!0,configurable:!0}),r}function gt(e,t){return function(){return e[t]}}function bt(e,t){var n,r,i,a,s;if(Array.isArray(e)||"string"==typeof e)for(n=new Array(e.length),r=0,i=e.length;r<i;r++)n[r]=t(e[r],r);else if("number"==typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(u(e))if(ce&&e[Symbol.iterator]){n=[];for(var c=e[Symbol.iterator](),l=c.next();!l.done;)n.push(t(l.value,n.length)),l=c.next()}else for(a=Object.keys(e),n=new Array(a.length),r=0,i=a.length;r<i;r++)s=a[r],n[r]=t(e[s],s,r);return o(n)||(n=[]),n._isVList=!0,n}function wt(e,t,n,r){var i,o=this.$scopedSlots[e];o?(n=n||{},r&&(n=A(A({},r),n)),i=o(n)||t):i=this.$slots[e]||t;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function _t(e){return Ue(this.$options,"filters",e)||I}function Ot(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function Ct(e,t,n,r,i){var o=F.keyCodes[t]||n;return i&&r&&!F.keyCodes[t]?Ot(i,r):o?Ot(o,e):r?E(r)!==t:void 0}function St(e,t,n,r,i){if(n)if(u(n)){var o;Array.isArray(n)&&(n=M(n));var a=function(a){if("class"===a||"style"===a||g(a))o=e;else{var s=e.attrs&&e.attrs.type;o=r||F.mustUseProp(t,s,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var u=S(a),c=E(a);u in o||c in o||(o[a]=n[a],i&&((e.on||(e.on={}))["update:"+a]=function(e){n[a]=e}))};for(var s in n)a(s)}else;return e}function xt(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t||Et(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),r}function kt(e,t,n){return Et(e,"__once__"+t+(n?"_"+n:""),!0),e}function Et(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!=typeof e[r]&&Tt(e[r],t+"_"+r,n);else Tt(e,t,n)}function Tt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Pt(e,t){if(t)if(l(t)){var n=e.on=e.on?A({},e.on):{};for(var r in t){var i=n[r],o=t[r];n[r]=i?[].concat(i,o):o}}else;return e}function At(e,t,n,r){t=t||{$stable:!n};for(var i=0;i<e.length;i++){var o=e[i];Array.isArray(o)?At(o,t,n):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return r&&(t.$key=r),t}function Mt(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"==typeof r&&r&&(e[t[n]]=t[n+1])}return e}function jt(e,t){return"string"==typeof e?t+e:e}function Dt(e){e._o=kt,e._n=m,e._s=p,e._l=bt,e._t=wt,e._q=R,e._i=L,e._m=xt,e._f=_t,e._k=Ct,e._b=St,e._v=be,e._e=ge,e._u=At,e._g=Pt,e._d=Mt,e._p=jt}function It(e,t,n,i,o){var s,u=this,c=o.options;_(i,"_uid")?(s=Object.create(i))._original=i:(s=i,i=i._original);var l=a(c._compiled),f=!l;this.data=e,this.props=t,this.children=n,this.parent=i,this.listeners=e.on||r,this.injections=ht(c.inject,i),this.slots=function(){return u.$slots||vt(e.scopedSlots,u.$slots=pt(n,i)),u.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return vt(e.scopedSlots,this.slots())}}),l&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=vt(e.scopedSlots,this.$slots)),c._scopeId?this._c=function(e,t,n,r){var o=$t(s,e,t,n,r,f);return o&&!Array.isArray(o)&&(o.fnScopeId=c._scopeId,o.fnContext=i),o}:this._c=function(e,t,n,r){return $t(s,e,t,n,r,f)}}function Rt(e,t,n,r,i){var o=we(e);return o.fnContext=n,o.fnOptions=r,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function Lt(e,t){for(var n in t)e[S(n)]=t[n]}Dt(It.prototype);var Bt={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;Bt.prepatch(n,n)}else{(e.componentInstance=function(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;o(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns);return new e.componentOptions.Ctor(n)}(e,Kt)).$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions;!function(e,t,n,i,o){0;var a=i.data.scopedSlots,s=e.$scopedSlots,u=!!(a&&!a.$stable||s!==r&&!s.$stable||a&&e.$scopedSlots.$key!==a.$key),c=!!(o||e.$options._renderChildren||u);e.$options._parentVnode=i,e.$vnode=i,e._vnode&&(e._vnode.parent=i);if(e.$options._renderChildren=o,e.$attrs=i.data.attrs||r,e.$listeners=n||r,t&&e.$options.props){xe(!1);for(var l=e._props,f=e.$options._propKeys||[],d=0;d<f.length;d++){var h=f[d],p=e.$options.props;l[h]=Fe(h,p,t,e)}xe(!0),e.$options.propsData=t}n=n||r;var m=e.$options._parentListeners;e.$options._parentListeners=n,Zt(e,n,m),c&&(e.$slots=pt(o,i.context),e.$forceUpdate());0}(t.componentInstance=e.componentInstance,n.propsData,n.listeners,t,n.children)},insert:function(e){var t,n=e.context,r=e.componentInstance;r._isMounted||(r._isMounted=!0,tn(r,"mounted")),e.data.keepAlive&&(n._isMounted?((t=r)._inactive=!1,rn.push(t)):en(r,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?function e(t,n){if(n&&(t._directInactive=!0,Qt(t)))return;if(!t._inactive){t._inactive=!0;for(var r=0;r<t.$children.length;r++)e(t.$children[r]);tn(t,"deactivated")}}(t,!0):t.$destroy())}},Nt=Object.keys(Bt);function Ut(e,t,n,s,c){if(!i(e)){var l=n.$options._base;if(u(e)&&(e=l.extend(e)),"function"==typeof e){var f;if(i(e.cid)&&void 0===(e=function(e,t){if(a(e.error)&&o(e.errorComp))return e.errorComp;if(o(e.resolved))return e.resolved;var n=zt;n&&o(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n);if(a(e.loading)&&o(e.loadingComp))return e.loadingComp;if(n&&!o(e.owners)){var r=e.owners=[n],s=!0,c=null,l=null;n.$on("hook:destroyed",(function(){return b(r,n)}));var f=function(e){for(var t=0,n=r.length;t<n;t++)r[t].$forceUpdate();e&&(r.length=0,null!==c&&(clearTimeout(c),c=null),null!==l&&(clearTimeout(l),l=null))},d=B((function(n){e.resolved=Gt(n,t),s?r.length=0:f(!0)})),p=B((function(t){o(e.errorComp)&&(e.error=!0,f(!0))})),m=e(d,p);return u(m)&&(h(m)?i(e.resolved)&&m.then(d,p):h(m.component)&&(m.component.then(d,p),o(m.error)&&(e.errorComp=Gt(m.error,t)),o(m.loading)&&(e.loadingComp=Gt(m.loading,t),0===m.delay?e.loading=!0:c=setTimeout((function(){c=null,i(e.resolved)&&i(e.error)&&(e.loading=!0,f(!1))}),m.delay||200)),o(m.timeout)&&(l=setTimeout((function(){l=null,i(e.resolved)&&p(null)}),m.timeout)))),s=!1,e.loading?e.loadingComp:e.resolved}}(f=e,l)))return function(e,t,n,r,i){var o=ge();return o.asyncFactory=e,o.asyncMeta={data:t,context:n,children:r,tag:i},o}(f,t,n,s,c);t=t||{},Sn(e),o(t.model)&&function(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var i=t.on||(t.on={}),a=i[r],s=t.model.callback;o(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(i[r]=[s].concat(a)):i[r]=s}(e.options,t);var d=function(e,t,n){var r=t.options.props;if(!i(r)){var a={},s=e.attrs,u=e.props;if(o(s)||o(u))for(var c in r){var l=E(c);lt(a,u,c,l,!0)||lt(a,s,c,l,!1)}return a}}(t,e);if(a(e.options.functional))return function(e,t,n,i,a){var s=e.options,u={},c=s.props;if(o(c))for(var l in c)u[l]=Fe(l,c,t||r);else o(n.attrs)&&Lt(u,n.attrs),o(n.props)&&Lt(u,n.props);var f=new It(n,u,a,i,e),d=s.render.call(null,f._c,f);if(d instanceof ve)return Rt(d,n,f.parent,s,f);if(Array.isArray(d)){for(var h=ft(d)||[],p=new Array(h.length),m=0;m<h.length;m++)p[m]=Rt(h[m],n,f.parent,s,f);return p}}(e,d,t,n,s);var p=t.on;if(t.on=t.nativeOn,a(e.options.abstract)){var m=t.slot;t={},m&&(t.slot=m)}!function(e){for(var t=e.hook||(e.hook={}),n=0;n<Nt.length;n++){var r=Nt[n],i=t[r],o=Bt[r];i===o||i&&i._merged||(t[r]=i?Ft(o,i):o)}}(t);var v=e.options.name||c;return new ve("vue-component-"+e.cid+(v?"-"+v:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:d,listeners:p,tag:c,children:s},f)}}}function Ft(e,t){var n=function(n,r){e(n,r),t(n,r)};return n._merged=!0,n}function $t(e,t,n,r,c,l){return(Array.isArray(n)||s(n))&&(c=r,r=n,n=void 0),a(l)&&(c=2),function(e,t,n,r,s){if(o(n)&&o(n.__ob__))return ge();o(n)&&o(n.is)&&(t=n.is);if(!t)return ge();0;Array.isArray(r)&&"function"==typeof r[0]&&((n=n||{}).scopedSlots={default:r[0]},r.length=0);2===s?r=ft(r):1===s&&(r=function(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}(r));var c,l;if("string"==typeof t){var f;l=e.$vnode&&e.$vnode.ns||F.getTagNamespace(t),c=F.isReservedTag(t)?new ve(F.parsePlatformTagName(t),n,r,void 0,void 0,e):n&&n.pre||!o(f=Ue(e.$options,"components",t))?new ve(t,n,r,void 0,void 0,e):Ut(f,n,e,r,t)}else c=Ut(t,n,e,r);return Array.isArray(c)?c:o(c)?(o(l)&&function e(t,n,r){t.ns=n,"foreignObject"===t.tag&&(n=void 0,r=!0);if(o(t.children))for(var s=0,u=t.children.length;s<u;s++){var c=t.children[s];o(c.tag)&&(i(c.ns)||a(r)&&"svg"!==c.tag)&&e(c,n,r)}}(c,l),o(n)&&function(e){u(e.style)&&ot(e.style);u(e.class)&&ot(e.class)}(n),c):ge()}(e,t,n,r,c)}var Vt,zt=null;function Gt(e,t){return(e.__esModule||ce&&"Module"===e[Symbol.toStringTag])&&(e=e.default),u(e)?t.extend(e):e}function Ht(e){return e.isComment&&e.asyncFactory}function Wt(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(o(n)&&(o(n.componentOptions)||Ht(n)))return n}}function Yt(e,t){Vt.$on(e,t)}function qt(e,t){Vt.$off(e,t)}function Xt(e,t){var n=Vt;return function r(){var i=t.apply(null,arguments);null!==i&&n.$off(e,r)}}function Zt(e,t,n){Vt=e,ut(t,n||{},Yt,qt,Xt,e),Vt=void 0}var Kt=null;function Jt(e){var t=Kt;return Kt=e,function(){Kt=t}}function Qt(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function en(e,t){if(t){if(e._directInactive=!1,Qt(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)en(e.$children[n]);tn(e,"activated")}}function tn(e,t){pe();var n=e.$options[t],r=t+" hook";if(n)for(var i=0,o=n.length;i<o;i++)He(n[i],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+t),me()}var nn=[],rn=[],on={},an=!1,sn=!1,un=0;var cn=0,ln=Date.now;if(Y&&!K){var fn=window.performance;fn&&"function"==typeof fn.now&&ln()>document.createEvent("Event").timeStamp&&(ln=function(){return fn.now()})}function dn(){var e,t;for(cn=ln(),sn=!0,nn.sort((function(e,t){return e.id-t.id})),un=0;un<nn.length;un++)(e=nn[un]).before&&e.before(),t=e.id,on[t]=null,e.run();var n=rn.slice(),r=nn.slice();un=nn.length=rn.length=0,on={},an=sn=!1,function(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,en(e[t],!0)}(n),function(e){var t=e.length;for(;t--;){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&tn(r,"updated")}}(r),ae&&F.devtools&&ae.emit("flush")}var hn=0,pn=function(e,t,n,r,i){this.vm=e,i&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++hn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ue,this.newDepIds=new ue,this.expression="","function"==typeof t?this.getter=t:(this.getter=function(e){if(!G.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}(t),this.getter||(this.getter=j)),this.value=this.lazy?void 0:this.get()};pn.prototype.get=function(){var e;pe(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;Ge(e,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ot(e),me(),this.cleanupDeps()}return e},pn.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},pn.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},pn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var t=e.id;if(null==on[t]){if(on[t]=!0,sn){for(var n=nn.length-1;n>un&&nn[n].id>e.id;)n--;nn.splice(n+1,0,e)}else nn.push(e);an||(an=!0,rt(dn))}}(this)},pn.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||u(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(e){Ge(e,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},pn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},pn.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},pn.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||b(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var mn={enumerable:!0,configurable:!0,get:j,set:j};function vn(e,t,n){mn.get=function(){return this[t][n]},mn.set=function(e){this[t][n]=e},Object.defineProperty(e,n,mn)}function yn(e){e._watchers=[];var t=e.$options;t.props&&function(e,t){var n=e.$options.propsData||{},r=e._props={},i=e.$options._propKeys=[];e.$parent&&xe(!1);var o=function(o){i.push(o);var a=Fe(o,t,n,e);Te(r,o,a),o in e||vn(e,"_props",o)};for(var a in t)o(a);xe(!0)}(e,t.props),t.methods&&function(e,t){e.$options.props;for(var n in t)e[n]="function"!=typeof t[n]?j:T(t[n],e)}(e,t.methods),t.data?function(e){var t=e.$options.data;l(t=e._data="function"==typeof t?function(e,t){pe();try{return e.call(t,t)}catch(e){return Ge(e,t,"data()"),{}}finally{me()}}(t,e):t||{})||(t={});var n=Object.keys(t),r=e.$options.props,i=(e.$options.methods,n.length);for(;i--;){var o=n[i];0,r&&_(r,o)||V(o)||vn(e,"_data",o)}Ee(t,!0)}(e):Ee(e._data={},!0),t.computed&&function(e,t){var n=e._computedWatchers=Object.create(null),r=oe();for(var i in t){var o=t[i],a="function"==typeof o?o:o.get;0,r||(n[i]=new pn(e,a||j,j,gn)),i in e||bn(e,i,o)}}(e,t.computed),t.watch&&t.watch!==ne&&function(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)On(e,n,r[i]);else On(e,n,r)}}(e,t.watch)}var gn={lazy:!0};function bn(e,t,n){var r=!oe();"function"==typeof n?(mn.get=r?wn(t):_n(n),mn.set=j):(mn.get=n.get?r&&!1!==n.cache?wn(t):_n(n.get):j,mn.set=n.set||j),Object.defineProperty(e,t,mn)}function wn(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),de.target&&t.depend(),t.value}}function _n(e){return function(){return e.call(this,this)}}function On(e,t,n,r){return l(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,r)}var Cn=0;function Sn(e){var t=e.options;if(e.super){var n=Sn(e.super);if(n!==e.superOptions){e.superOptions=n;var r=function(e){var t,n=e.options,r=e.sealedOptions;for(var i in n)n[i]!==r[i]&&(t||(t={}),t[i]=n[i]);return t}(e);r&&A(e.extendOptions,r),(t=e.options=Ne(n,e.extendOptions)).name&&(t.components[t.name]=e)}}return t}function xn(e){this._init(e)}function kn(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var o=e.name||n.options.name;var a=function(e){this._init(e)};return(a.prototype=Object.create(n.prototype)).constructor=a,a.cid=t++,a.options=Ne(n.options,e),a.super=n,a.options.props&&function(e){var t=e.options.props;for(var n in t)vn(e.prototype,"_props",n)}(a),a.options.computed&&function(e){var t=e.options.computed;for(var n in t)bn(e.prototype,n,t[n])}(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,N.forEach((function(e){a[e]=n[e]})),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=A({},a.options),i[r]=a,a}}function En(e){return e&&(e.Ctor.options.name||e.tag)}function Tn(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:!!f(e)&&e.test(t)}function Pn(e,t){var n=e.cache,r=e.keys,i=e._vnode;for(var o in n){var a=n[o];if(a){var s=En(a.componentOptions);s&&!t(s)&&An(n,o,r,i)}}}function An(e,t,n,r){var i=e[t];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),e[t]=null,b(n,t)}!function(e){e.prototype._init=function(e){var t=this;t._uid=Cn++,t._isVue=!0,e&&e._isComponent?function(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}(t,e):t.$options=Ne(Sn(t.constructor),e||{},t),t._renderProxy=t,t._self=t,function(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(t),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Zt(e,t)}(t),function(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,i=n&&n.context;e.$slots=pt(t._renderChildren,i),e.$scopedSlots=r,e._c=function(t,n,r,i){return $t(e,t,n,r,i,!1)},e.$createElement=function(t,n,r,i){return $t(e,t,n,r,i,!0)};var o=n&&n.data;Te(e,"$attrs",o&&o.attrs||r,null,!0),Te(e,"$listeners",t._parentListeners||r,null,!0)}(t),tn(t,"beforeCreate"),function(e){var t=ht(e.$options.inject,e);t&&(xe(!1),Object.keys(t).forEach((function(n){Te(e,n,t[n])})),xe(!0))}(t),yn(t),function(e){var t=e.$options.provide;t&&(e._provided="function"==typeof t?t.call(e):t)}(t),tn(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}(xn),function(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Pe,e.prototype.$delete=Ae,e.prototype.$watch=function(e,t,n){if(l(t))return On(this,e,t,n);(n=n||{}).user=!0;var r=new pn(this,e,t,n);if(n.immediate)try{t.call(this,r.value)}catch(e){Ge(e,this,'callback for immediate watcher "'+r.expression+'"')}return function(){r.teardown()}}}(xn),function(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(Array.isArray(e))for(var i=0,o=e.length;i<o;i++)r.$on(e[i],n);else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var r=0,i=e.length;r<i;r++)n.$off(e[r],t);return n}var o,a=n._events[e];if(!a)return n;if(!t)return n._events[e]=null,n;for(var s=a.length;s--;)if((o=a[s])===t||o.fn===t){a.splice(s,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?P(n):n;for(var r=P(arguments,1),i='event handler for "'+e+'"',o=0,a=n.length;o<a;o++)He(n[o],t,r,t,i)}return t}}(xn),function(e){e.prototype._update=function(e,t){var n=this,r=n.$el,i=n._vnode,o=Jt(n);n._vnode=e,n.$el=i?n.__patch__(i,e):n.__patch__(n.$el,e,t,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){tn(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||b(t.$children,e),e._watcher&&e._watcher.teardown();for(var n=e._watchers.length;n--;)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),tn(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(xn),function(e){Dt(e.prototype),e.prototype.$nextTick=function(e){return rt(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,r=n.render,i=n._parentVnode;i&&(t.$scopedSlots=vt(i.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=i;try{zt=t,e=r.call(t._renderProxy,t.$createElement)}catch(n){Ge(n,t,"render"),e=t._vnode}finally{zt=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof ve||(e=ge()),e.parent=i,e}}(xn);var Mn=[String,RegExp,Array],jn={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Mn,exclude:Mn,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)An(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",(function(t){Pn(e,(function(e){return Tn(t,e)}))})),this.$watch("exclude",(function(t){Pn(e,(function(e){return!Tn(t,e)}))}))},render:function(){var e=this.$slots.default,t=Wt(e),n=t&&t.componentOptions;if(n){var r=En(n),i=this.include,o=this.exclude;if(i&&(!r||!Tn(i,r))||o&&r&&Tn(o,r))return t;var a=this.cache,s=this.keys,u=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;a[u]?(t.componentInstance=a[u].componentInstance,b(s,u),s.push(u)):(a[u]=t,s.push(u),this.max&&s.length>parseInt(this.max)&&An(a,s[0],s,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}}};!function(e){var t={get:function(){return F}};Object.defineProperty(e,"config",t),e.util={warn:le,extend:A,mergeOptions:Ne,defineReactive:Te},e.set=Pe,e.delete=Ae,e.nextTick=rt,e.observable=function(e){return Ee(e),e},e.options=Object.create(null),N.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,A(e.options.components,jn),function(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=P(arguments,1);return n.unshift(this),"function"==typeof e.install?e.install.apply(e,n):"function"==typeof e&&e.apply(null,n),t.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=Ne(this.options,e),this}}(e),kn(e),function(e){N.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&l(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"==typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}(e)}(xn),Object.defineProperty(xn.prototype,"$isServer",{get:oe}),Object.defineProperty(xn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(xn,"FunctionalRenderContext",{value:It}),xn.version="2.6.12";var Dn=v("style,class"),In=v("input,textarea,option,select,progress"),Rn=function(e,t,n){return"value"===n&&In(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},Ln=v("contenteditable,draggable,spellcheck"),Bn=v("events,caret,typing,plaintext-only"),Nn=v("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Un="http://www.w3.org/1999/xlink",Fn=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},$n=function(e){return Fn(e)?e.slice(6,e.length):""},Vn=function(e){return null==e||!1===e};function zn(e){for(var t=e.data,n=e,r=e;o(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(t=Gn(r.data,t));for(;o(n=n.parent);)n&&n.data&&(t=Gn(t,n.data));return function(e,t){if(o(e)||o(t))return Hn(e,Wn(t));return""}(t.staticClass,t.class)}function Gn(e,t){return{staticClass:Hn(e.staticClass,t.staticClass),class:o(e.class)?[e.class,t.class]:t.class}}function Hn(e,t){return e?t?e+" "+t:e:t||""}function Wn(e){return Array.isArray(e)?function(e){for(var t,n="",r=0,i=e.length;r<i;r++)o(t=Wn(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}(e):u(e)?function(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}(e):"string"==typeof e?e:""}var Yn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},qn=v("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Xn=v("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Zn=function(e){return qn(e)||Xn(e)};function Kn(e){return Xn(e)?"svg":"math"===e?"math":void 0}var Jn=Object.create(null);var Qn=v("text,number,password,search,email,tel,url");function er(e){if("string"==typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}var tr=Object.freeze({createElement:function(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createElementNS:function(e,t){return document.createElementNS(Yn[e],t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},setStyleScope:function(e,t){e.setAttribute(t,"")}}),nr={create:function(e,t){rr(t)},update:function(e,t){e.data.ref!==t.data.ref&&(rr(e,!0),rr(t))},destroy:function(e){rr(e,!0)}};function rr(e,t){var n=e.data.ref;if(o(n)){var r=e.context,i=e.componentInstance||e.elm,a=r.$refs;t?Array.isArray(a[n])?b(a[n],i):a[n]===i&&(a[n]=void 0):e.data.refInFor?Array.isArray(a[n])?a[n].indexOf(i)<0&&a[n].push(i):a[n]=[i]:a[n]=i}}var ir=new ve("",{},[]),or=["create","activate","update","remove","destroy"];function ar(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&o(e.data)===o(t.data)&&function(e,t){if("input"!==e.tag)return!0;var n,r=o(n=e.data)&&o(n=n.attrs)&&n.type,i=o(n=t.data)&&o(n=n.attrs)&&n.type;return r===i||Qn(r)&&Qn(i)}(e,t)||a(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&i(t.asyncFactory.error))}function sr(e,t,n){var r,i,a={};for(r=t;r<=n;++r)o(i=e[r].key)&&(a[i]=r);return a}var ur={create:cr,update:cr,destroy:function(e){cr(e,ir)}};function cr(e,t){(e.data.directives||t.data.directives)&&function(e,t){var n,r,i,o=e===ir,a=t===ir,s=fr(e.data.directives,e.context),u=fr(t.data.directives,t.context),c=[],l=[];for(n in u)r=s[n],i=u[n],r?(i.oldValue=r.value,i.oldArg=r.arg,hr(i,"update",t,e),i.def&&i.def.componentUpdated&&l.push(i)):(hr(i,"bind",t,e),i.def&&i.def.inserted&&c.push(i));if(c.length){var f=function(){for(var n=0;n<c.length;n++)hr(c[n],"inserted",t,e)};o?ct(t,"insert",f):f()}l.length&&ct(t,"postpatch",(function(){for(var n=0;n<l.length;n++)hr(l[n],"componentUpdated",t,e)}));if(!o)for(n in s)u[n]||hr(s[n],"unbind",e,e,a)}(e,t)}var lr=Object.create(null);function fr(e,t){var n,r,i=Object.create(null);if(!e)return i;for(n=0;n<e.length;n++)(r=e[n]).modifiers||(r.modifiers=lr),i[dr(r)]=r,r.def=Ue(t.$options,"directives",r.name);return i}function dr(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function hr(e,t,n,r,i){var o=e.def&&e.def[t];if(o)try{o(n.elm,e,n,r,i)}catch(r){Ge(r,n.context,"directive "+e.name+" "+t+" hook")}}var pr=[nr,ur];function mr(e,t){var n=t.componentOptions;if(!(o(n)&&!1===n.Ctor.options.inheritAttrs||i(e.data.attrs)&&i(t.data.attrs))){var r,a,s=t.elm,u=e.data.attrs||{},c=t.data.attrs||{};for(r in o(c.__ob__)&&(c=t.data.attrs=A({},c)),c)a=c[r],u[r]!==a&&vr(s,r,a);for(r in(K||Q)&&c.value!==u.value&&vr(s,"value",c.value),u)i(c[r])&&(Fn(r)?s.removeAttributeNS(Un,$n(r)):Ln(r)||s.removeAttribute(r))}}function vr(e,t,n){e.tagName.indexOf("-")>-1?yr(e,t,n):Nn(t)?Vn(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):Ln(t)?e.setAttribute(t,function(e,t){return Vn(t)||"false"===t?"false":"contenteditable"===e&&Bn(t)?t:"true"}(t,n)):Fn(t)?Vn(n)?e.removeAttributeNS(Un,$n(t)):e.setAttributeNS(Un,t,n):yr(e,t,n)}function yr(e,t,n){if(Vn(n))e.removeAttribute(t);else{if(K&&!J&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var r=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(t,n)}}var gr={create:mr,update:mr};function br(e,t){var n=t.elm,r=t.data,a=e.data;if(!(i(r.staticClass)&&i(r.class)&&(i(a)||i(a.staticClass)&&i(a.class)))){var s=zn(t),u=n._transitionClasses;o(u)&&(s=Hn(s,Wn(u))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var wr,_r,Or,Cr,Sr,xr,kr={create:br,update:br},Er=/[\w).+\-_$\]]/;function Tr(e){var t,n,r,i,o,a=!1,s=!1,u=!1,c=!1,l=0,f=0,d=0,h=0;for(r=0;r<e.length;r++)if(n=t,t=e.charCodeAt(r),a)39===t&&92!==n&&(a=!1);else if(s)34===t&&92!==n&&(s=!1);else if(u)96===t&&92!==n&&(u=!1);else if(c)47===t&&92!==n&&(c=!1);else if(124!==t||124===e.charCodeAt(r+1)||124===e.charCodeAt(r-1)||l||f||d){switch(t){case 34:s=!0;break;case 39:a=!0;break;case 96:u=!0;break;case 40:d++;break;case 41:d--;break;case 91:f++;break;case 93:f--;break;case 123:l++;break;case 125:l--}if(47===t){for(var p=r-1,m=void 0;p>=0&&" "===(m=e.charAt(p));p--);m&&Er.test(m)||(c=!0)}}else void 0===i?(h=r+1,i=e.slice(0,r).trim()):v();function v(){(o||(o=[])).push(e.slice(h,r).trim()),h=r+1}if(void 0===i?i=e.slice(0,r).trim():0!==h&&v(),o)for(r=0;r<o.length;r++)i=Pr(i,o[r]);return i}function Pr(e,t){var n=t.indexOf("(");if(n<0)return'_f("'+t+'")('+e+")";var r=t.slice(0,n),i=t.slice(n+1);return'_f("'+r+'")('+e+(")"!==i?","+i:i)}function Ar(e,t){console.error("[Vue compiler]: "+e)}function Mr(e,t){return e?e.map((function(e){return e[t]})).filter((function(e){return e})):[]}function jr(e,t,n,r,i){(e.props||(e.props=[])).push($r({name:t,value:n,dynamic:i},r)),e.plain=!1}function Dr(e,t,n,r,i){(i?e.dynamicAttrs||(e.dynamicAttrs=[]):e.attrs||(e.attrs=[])).push($r({name:t,value:n,dynamic:i},r)),e.plain=!1}function Ir(e,t,n,r){e.attrsMap[t]=n,e.attrsList.push($r({name:t,value:n},r))}function Rr(e,t,n,r,i,o,a,s){(e.directives||(e.directives=[])).push($r({name:t,rawName:n,value:r,arg:i,isDynamicArg:o,modifiers:a},s)),e.plain=!1}function Lr(e,t,n){return n?"_p("+t+',"'+e+'")':e+t}function Br(e,t,n,i,o,a,s,u){var c;(i=i||r).right?u?t="("+t+")==='click'?'contextmenu':("+t+")":"click"===t&&(t="contextmenu",delete i.right):i.middle&&(u?t="("+t+")==='click'?'mouseup':("+t+")":"click"===t&&(t="mouseup")),i.capture&&(delete i.capture,t=Lr("!",t,u)),i.once&&(delete i.once,t=Lr("~",t,u)),i.passive&&(delete i.passive,t=Lr("&",t,u)),i.native?(delete i.native,c=e.nativeEvents||(e.nativeEvents={})):c=e.events||(e.events={});var l=$r({value:n.trim(),dynamic:u},s);i!==r&&(l.modifiers=i);var f=c[t];Array.isArray(f)?o?f.unshift(l):f.push(l):c[t]=f?o?[l,f]:[f,l]:l,e.plain=!1}function Nr(e,t,n){var r=Ur(e,":"+t)||Ur(e,"v-bind:"+t);if(null!=r)return Tr(r);if(!1!==n){var i=Ur(e,t);if(null!=i)return JSON.stringify(i)}}function Ur(e,t,n){var r;if(null!=(r=e.attrsMap[t]))for(var i=e.attrsList,o=0,a=i.length;o<a;o++)if(i[o].name===t){i.splice(o,1);break}return n&&delete e.attrsMap[t],r}function Fr(e,t){for(var n=e.attrsList,r=0,i=n.length;r<i;r++){var o=n[r];if(t.test(o.name))return n.splice(r,1),o}}function $r(e,t){return t&&(null!=t.start&&(e.start=t.start),null!=t.end&&(e.end=t.end)),e}function Vr(e,t,n){var r=n||{},i=r.number,o="$$v";r.trim&&(o="(typeof $$v === 'string'? $$v.trim(): $$v)"),i&&(o="_n("+o+")");var a=zr(t,o);e.model={value:"("+t+")",expression:JSON.stringify(t),callback:"function ($$v) {"+a+"}"}}function zr(e,t){var n=function(e){if(e=e.trim(),wr=e.length,e.indexOf("[")<0||e.lastIndexOf("]")<wr-1)return(Cr=e.lastIndexOf("."))>-1?{exp:e.slice(0,Cr),key:'"'+e.slice(Cr+1)+'"'}:{exp:e,key:null};_r=e,Cr=Sr=xr=0;for(;!Hr();)Wr(Or=Gr())?qr(Or):91===Or&&Yr(Or);return{exp:e.slice(0,Sr),key:e.slice(Sr+1,xr)}}(e);return null===n.key?e+"="+t:"$set("+n.exp+", "+n.key+", "+t+")"}function Gr(){return _r.charCodeAt(++Cr)}function Hr(){return Cr>=wr}function Wr(e){return 34===e||39===e}function Yr(e){var t=1;for(Sr=Cr;!Hr();)if(Wr(e=Gr()))qr(e);else if(91===e&&t++,93===e&&t--,0===t){xr=Cr;break}}function qr(e){for(var t=e;!Hr()&&(e=Gr())!==t;);}var Xr;function Zr(e,t,n){var r=Xr;return function i(){var o=t.apply(null,arguments);null!==o&&Qr(e,i,n,r)}}var Kr=Xe&&!(te&&Number(te[1])<=53);function Jr(e,t,n,r){if(Kr){var i=cn,o=t;t=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}Xr.addEventListener(e,t,re?{capture:n,passive:r}:n)}function Qr(e,t,n,r){(r||Xr).removeEventListener(e,t._wrapper||t,n)}function ei(e,t){if(!i(e.data.on)||!i(t.data.on)){var n=t.data.on||{},r=e.data.on||{};Xr=t.elm,function(e){if(o(e.__r)){var t=K?"change":"input";e[t]=[].concat(e.__r,e[t]||[]),delete e.__r}o(e.__c)&&(e.change=[].concat(e.__c,e.change||[]),delete e.__c)}(n),ut(n,r,Jr,Qr,Zr,t.context),Xr=void 0}}var ti,ni={create:ei,update:ei};function ri(e,t){if(!i(e.data.domProps)||!i(t.data.domProps)){var n,r,a=t.elm,s=e.data.domProps||{},u=t.data.domProps||{};for(n in o(u.__ob__)&&(u=t.data.domProps=A({},u)),s)n in u||(a[n]="");for(n in u){if(r=u[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),r===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=r;var c=i(r)?"":String(r);ii(a,c)&&(a.value=c)}else if("innerHTML"===n&&Xn(a.tagName)&&i(a.innerHTML)){(ti=ti||document.createElement("div")).innerHTML="<svg>"+r+"</svg>";for(var l=ti.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}else if(r!==s[n])try{a[n]=r}catch(e){}}}}function ii(e,t){return!e.composing&&("OPTION"===e.tagName||function(e,t){var n=!0;try{n=document.activeElement!==e}catch(e){}return n&&e.value!==t}(e,t)||function(e,t){var n=e.value,r=e._vModifiers;if(o(r)){if(r.number)return m(n)!==m(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}(e,t))}var oi={create:ri,update:ri},ai=O((function(e){var t={},n=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var r=e.split(n);r.length>1&&(t[r[0].trim()]=r[1].trim())}})),t}));function si(e){var t=ui(e.style);return e.staticStyle?A(e.staticStyle,t):t}function ui(e){return Array.isArray(e)?M(e):"string"==typeof e?ai(e):e}var ci,li=/^--/,fi=/\s*!important$/,di=function(e,t,n){if(li.test(t))e.style.setProperty(t,n);else if(fi.test(n))e.style.setProperty(E(t),n.replace(fi,""),"important");else{var r=pi(t);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)e.style[r]=n[i];else e.style[r]=n}},hi=["Webkit","Moz","ms"],pi=O((function(e){if(ci=ci||document.createElement("div").style,"filter"!==(e=S(e))&&e in ci)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<hi.length;n++){var r=hi[n]+t;if(r in ci)return r}}));function mi(e,t){var n=t.data,r=e.data;if(!(i(n.staticStyle)&&i(n.style)&&i(r.staticStyle)&&i(r.style))){var a,s,u=t.elm,c=r.staticStyle,l=r.normalizedStyle||r.style||{},f=c||l,d=ui(t.data.style)||{};t.data.normalizedStyle=o(d.__ob__)?A({},d):d;var h=function(e,t){var n,r={};if(t)for(var i=e;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(n=si(i.data))&&A(r,n);(n=si(e.data))&&A(r,n);for(var o=e;o=o.parent;)o.data&&(n=si(o.data))&&A(r,n);return r}(t,!0);for(s in f)i(h[s])&&di(u,s,"");for(s in h)(a=h[s])!==f[s]&&di(u,s,null==a?"":a)}}var vi={create:mi,update:mi},yi=/\s+/;function gi(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(yi).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function bi(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(yi).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var n=" "+(e.getAttribute("class")||"")+" ",r=" "+t+" ";n.indexOf(r)>=0;)n=n.replace(r," ");(n=n.trim())?e.setAttribute("class",n):e.removeAttribute("class")}}function wi(e){if(e){if("object"==typeof e){var t={};return!1!==e.css&&A(t,_i(e.name||"v")),A(t,e),t}return"string"==typeof e?_i(e):void 0}}var _i=O((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),Oi=Y&&!J,Ci="transition",Si="transitionend",xi="animation",ki="animationend";Oi&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Ci="WebkitTransition",Si="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(xi="WebkitAnimation",ki="webkitAnimationEnd"));var Ei=Y?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Ti(e){Ei((function(){Ei(e)}))}function Pi(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),gi(e,t))}function Ai(e,t){e._transitionClasses&&b(e._transitionClasses,t),bi(e,t)}function Mi(e,t,n){var r=Di(e,t),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s="transition"===i?Si:ki,u=0,c=function(){e.removeEventListener(s,l),n()},l=function(t){t.target===e&&++u>=a&&c()};setTimeout((function(){u<a&&c()}),o+1),e.addEventListener(s,l)}var ji=/\b(transform|all)(,|$)/;function Di(e,t){var n,r=window.getComputedStyle(e),i=(r[Ci+"Delay"]||"").split(", "),o=(r[Ci+"Duration"]||"").split(", "),a=Ii(i,o),s=(r[xi+"Delay"]||"").split(", "),u=(r[xi+"Duration"]||"").split(", "),c=Ii(s,u),l=0,f=0;return"transition"===t?a>0&&(n="transition",l=a,f=o.length):"animation"===t?c>0&&(n="animation",l=c,f=u.length):f=(n=(l=Math.max(a,c))>0?a>c?"transition":"animation":null)?"transition"===n?o.length:u.length:0,{type:n,timeout:l,propCount:f,hasTransform:"transition"===n&&ji.test(r[Ci+"Property"])}}function Ii(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return Ri(t)+Ri(e[n])})))}function Ri(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Li(e,t){var n=e.elm;o(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=wi(e.data.transition);if(!i(r)&&!o(n._enterCb)&&1===n.nodeType){for(var a=r.css,s=r.type,c=r.enterClass,l=r.enterToClass,f=r.enterActiveClass,d=r.appearClass,h=r.appearToClass,p=r.appearActiveClass,v=r.beforeEnter,y=r.enter,g=r.afterEnter,b=r.enterCancelled,w=r.beforeAppear,_=r.appear,O=r.afterAppear,C=r.appearCancelled,S=r.duration,x=Kt,k=Kt.$vnode;k&&k.parent;)x=k.context,k=k.parent;var E=!x._isMounted||!e.isRootInsert;if(!E||_||""===_){var T=E&&d?d:c,P=E&&p?p:f,A=E&&h?h:l,M=E&&w||v,j=E&&"function"==typeof _?_:y,D=E&&O||g,I=E&&C||b,R=m(u(S)?S.enter:S);0;var L=!1!==a&&!J,N=Ui(j),U=n._enterCb=B((function(){L&&(Ai(n,A),Ai(n,P)),U.cancelled?(L&&Ai(n,T),I&&I(n)):D&&D(n),n._enterCb=null}));e.data.show||ct(e,"insert",(function(){var t=n.parentNode,r=t&&t._pending&&t._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),j&&j(n,U)})),M&&M(n),L&&(Pi(n,T),Pi(n,P),Ti((function(){Ai(n,T),U.cancelled||(Pi(n,A),N||(Ni(R)?setTimeout(U,R):Mi(n,s,U)))}))),e.data.show&&(t&&t(),j&&j(n,U)),L||N||U()}}}function Bi(e,t){var n=e.elm;o(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var r=wi(e.data.transition);if(i(r)||1!==n.nodeType)return t();if(!o(n._leaveCb)){var a=r.css,s=r.type,c=r.leaveClass,l=r.leaveToClass,f=r.leaveActiveClass,d=r.beforeLeave,h=r.leave,p=r.afterLeave,v=r.leaveCancelled,y=r.delayLeave,g=r.duration,b=!1!==a&&!J,w=Ui(h),_=m(u(g)?g.leave:g);0;var O=n._leaveCb=B((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),b&&(Ai(n,l),Ai(n,f)),O.cancelled?(b&&Ai(n,c),v&&v(n)):(t(),p&&p(n)),n._leaveCb=null}));y?y(C):C()}function C(){O.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),d&&d(n),b&&(Pi(n,c),Pi(n,f),Ti((function(){Ai(n,c),O.cancelled||(Pi(n,l),w||(Ni(_)?setTimeout(O,_):Mi(n,s,O)))}))),h&&h(n,O),b||w||O())}}function Ni(e){return"number"==typeof e&&!isNaN(e)}function Ui(e){if(i(e))return!1;var t=e.fns;return o(t)?Ui(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Fi(e,t){!0!==t.data.show&&Li(t)}var $i=function(e){var t,n,r={},u=e.modules,c=e.nodeOps;for(t=0;t<or.length;++t)for(r[or[t]]=[],n=0;n<u.length;++n)o(u[n][or[t]])&&r[or[t]].push(u[n][or[t]]);function l(e){var t=c.parentNode(e);o(t)&&c.removeChild(t,e)}function f(e,t,n,i,s,u,l){if(o(e.elm)&&o(u)&&(e=u[l]=we(e)),e.isRootInsert=!s,!function(e,t,n,i){var s=e.data;if(o(s)){var u=o(e.componentInstance)&&s.keepAlive;if(o(s=s.hook)&&o(s=s.init)&&s(e,!1),o(e.componentInstance))return d(e,t),h(n,e.elm,i),a(u)&&function(e,t,n,i){var a,s=e;for(;s.componentInstance;)if(s=s.componentInstance._vnode,o(a=s.data)&&o(a=a.transition)){for(a=0;a<r.activate.length;++a)r.activate[a](ir,s);t.push(s);break}h(n,e.elm,i)}(e,t,n,i),!0}}(e,t,n,i)){var f=e.data,m=e.children,v=e.tag;o(v)?(e.elm=e.ns?c.createElementNS(e.ns,v):c.createElement(v,e),g(e),p(e,m,t),o(f)&&y(e,t),h(n,e.elm,i)):a(e.isComment)?(e.elm=c.createComment(e.text),h(n,e.elm,i)):(e.elm=c.createTextNode(e.text),h(n,e.elm,i))}}function d(e,t){o(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,m(e)?(y(e,t),g(e)):(rr(e),t.push(e))}function h(e,t,n){o(e)&&(o(n)?c.parentNode(n)===e&&c.insertBefore(e,t,n):c.appendChild(e,t))}function p(e,t,n){if(Array.isArray(t)){0;for(var r=0;r<t.length;++r)f(t[r],n,e.elm,null,!0,t,r)}else s(e.text)&&c.appendChild(e.elm,c.createTextNode(String(e.text)))}function m(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return o(e.tag)}function y(e,n){for(var i=0;i<r.create.length;++i)r.create[i](ir,e);o(t=e.data.hook)&&(o(t.create)&&t.create(ir,e),o(t.insert)&&n.push(e))}function g(e){var t;if(o(t=e.fnScopeId))c.setStyleScope(e.elm,t);else for(var n=e;n;)o(t=n.context)&&o(t=t.$options._scopeId)&&c.setStyleScope(e.elm,t),n=n.parent;o(t=Kt)&&t!==e.context&&t!==e.fnContext&&o(t=t.$options._scopeId)&&c.setStyleScope(e.elm,t)}function b(e,t,n,r,i,o){for(;r<=i;++r)f(n[r],o,e,t,!1,n,r)}function w(e){var t,n,i=e.data;if(o(i))for(o(t=i.hook)&&o(t=t.destroy)&&t(e),t=0;t<r.destroy.length;++t)r.destroy[t](e);if(o(t=e.children))for(n=0;n<e.children.length;++n)w(e.children[n])}function _(e,t,n){for(;t<=n;++t){var r=e[t];o(r)&&(o(r.tag)?(O(r),w(r)):l(r.elm))}}function O(e,t){if(o(t)||o(e.data)){var n,i=r.remove.length+1;for(o(t)?t.listeners+=i:t=function(e,t){function n(){0==--n.listeners&&l(e)}return n.listeners=t,n}(e.elm,i),o(n=e.componentInstance)&&o(n=n._vnode)&&o(n.data)&&O(n,t),n=0;n<r.remove.length;++n)r.remove[n](e,t);o(n=e.data.hook)&&o(n=n.remove)?n(e,t):t()}else l(e.elm)}function C(e,t,n,r){for(var i=n;i<r;i++){var a=t[i];if(o(a)&&ar(e,a))return i}}function S(e,t,n,s,u,l){if(e!==t){o(t.elm)&&o(s)&&(t=s[u]=we(t));var d=t.elm=e.elm;if(a(e.isAsyncPlaceholder))o(t.asyncFactory.resolved)?E(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(a(t.isStatic)&&a(e.isStatic)&&t.key===e.key&&(a(t.isCloned)||a(t.isOnce)))t.componentInstance=e.componentInstance;else{var h,p=t.data;o(p)&&o(h=p.hook)&&o(h=h.prepatch)&&h(e,t);var v=e.children,y=t.children;if(o(p)&&m(t)){for(h=0;h<r.update.length;++h)r.update[h](e,t);o(h=p.hook)&&o(h=h.update)&&h(e,t)}i(t.text)?o(v)&&o(y)?v!==y&&function(e,t,n,r,a){var s,u,l,d=0,h=0,p=t.length-1,m=t[0],v=t[p],y=n.length-1,g=n[0],w=n[y],O=!a;for(0;d<=p&&h<=y;)i(m)?m=t[++d]:i(v)?v=t[--p]:ar(m,g)?(S(m,g,r,n,h),m=t[++d],g=n[++h]):ar(v,w)?(S(v,w,r,n,y),v=t[--p],w=n[--y]):ar(m,w)?(S(m,w,r,n,y),O&&c.insertBefore(e,m.elm,c.nextSibling(v.elm)),m=t[++d],w=n[--y]):ar(v,g)?(S(v,g,r,n,h),O&&c.insertBefore(e,v.elm,m.elm),v=t[--p],g=n[++h]):(i(s)&&(s=sr(t,d,p)),i(u=o(g.key)?s[g.key]:C(g,t,d,p))?f(g,r,e,m.elm,!1,n,h):ar(l=t[u],g)?(S(l,g,r,n,h),t[u]=void 0,O&&c.insertBefore(e,l.elm,m.elm)):f(g,r,e,m.elm,!1,n,h),g=n[++h]);d>p?b(e,i(n[y+1])?null:n[y+1].elm,n,h,y,r):h>y&&_(t,d,p)}(d,v,y,n,l):o(y)?(o(e.text)&&c.setTextContent(d,""),b(d,null,y,0,y.length-1,n)):o(v)?_(v,0,v.length-1):o(e.text)&&c.setTextContent(d,""):e.text!==t.text&&c.setTextContent(d,t.text),o(p)&&o(h=p.hook)&&o(h=h.postpatch)&&h(e,t)}}}function x(e,t,n){if(a(n)&&o(e.parent))e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}var k=v("attrs,class,staticClass,staticStyle,key");function E(e,t,n,r){var i,s=t.tag,u=t.data,c=t.children;if(r=r||u&&u.pre,t.elm=e,a(t.isComment)&&o(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(o(u)&&(o(i=u.hook)&&o(i=i.init)&&i(t,!0),o(i=t.componentInstance)))return d(t,n),!0;if(o(s)){if(o(c))if(e.hasChildNodes())if(o(i=u)&&o(i=i.domProps)&&o(i=i.innerHTML)){if(i!==e.innerHTML)return!1}else{for(var l=!0,f=e.firstChild,h=0;h<c.length;h++){if(!f||!E(f,c[h],n,r)){l=!1;break}f=f.nextSibling}if(!l||f)return!1}else p(t,c,n);if(o(u)){var m=!1;for(var v in u)if(!k(v)){m=!0,y(t,n);break}!m&&u.class&&ot(u.class)}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,s){if(!i(t)){var u,l=!1,d=[];if(i(e))l=!0,f(t,d);else{var h=o(e.nodeType);if(!h&&ar(e,t))S(e,t,d,null,null,s);else{if(h){if(1===e.nodeType&&e.hasAttribute("data-server-rendered")&&(e.removeAttribute("data-server-rendered"),n=!0),a(n)&&E(e,t,d))return x(t,d,!0),e;u=e,e=new ve(c.tagName(u).toLowerCase(),{},[],void 0,u)}var p=e.elm,v=c.parentNode(p);if(f(t,d,p._leaveCb?null:v,c.nextSibling(p)),o(t.parent))for(var y=t.parent,g=m(t);y;){for(var b=0;b<r.destroy.length;++b)r.destroy[b](y);if(y.elm=t.elm,g){for(var O=0;O<r.create.length;++O)r.create[O](ir,y);var C=y.data.hook.insert;if(C.merged)for(var k=1;k<C.fns.length;k++)C.fns[k]()}else rr(y);y=y.parent}o(v)?_([e],0,0):o(e.tag)&&w(e)}}return x(t,d,l),t.elm}o(e)&&w(e)}}({nodeOps:tr,modules:[gr,kr,ni,oi,vi,Y?{create:Fi,activate:Fi,remove:function(e,t){!0!==e.data.show?Bi(e,t):t()}}:{}].concat(pr)});J&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&Xi(e,"input")}));var Vi={inserted:function(e,t,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?ct(n,"postpatch",(function(){Vi.componentUpdated(e,t,n)})):zi(e,t,n.context),e._vOptions=[].map.call(e.options,Wi)):("textarea"===n.tag||Qn(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",Yi),e.addEventListener("compositionend",qi),e.addEventListener("change",qi),J&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){zi(e,t,n.context);var r=e._vOptions,i=e._vOptions=[].map.call(e.options,Wi);if(i.some((function(e,t){return!R(e,r[t])})))(e.multiple?t.value.some((function(e){return Hi(e,i)})):t.value!==t.oldValue&&Hi(t.value,i))&&Xi(e,"change")}}};function zi(e,t,n){Gi(e,t,n),(K||Q)&&setTimeout((function(){Gi(e,t,n)}),0)}function Gi(e,t,n){var r=t.value,i=e.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,u=e.options.length;s<u;s++)if(a=e.options[s],i)o=L(r,Wi(a))>-1,a.selected!==o&&(a.selected=o);else if(R(Wi(a),r))return void(e.selectedIndex!==s&&(e.selectedIndex=s));i||(e.selectedIndex=-1)}}function Hi(e,t){return t.every((function(t){return!R(t,e)}))}function Wi(e){return"_value"in e?e._value:e.value}function Yi(e){e.target.composing=!0}function qi(e){e.target.composing&&(e.target.composing=!1,Xi(e.target,"input"))}function Xi(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function Zi(e){return!e.componentInstance||e.data&&e.data.transition?e:Zi(e.componentInstance._vnode)}var Ki={model:Vi,show:{bind:function(e,t,n){var r=t.value,i=(n=Zi(n)).data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&i?(n.data.show=!0,Li(n,(function(){e.style.display=o}))):e.style.display=r?o:"none"},update:function(e,t,n){var r=t.value;!r!=!t.oldValue&&((n=Zi(n)).data&&n.data.transition?(n.data.show=!0,r?Li(n,(function(){e.style.display=e.__vOriginalDisplay})):Bi(n,(function(){e.style.display="none"}))):e.style.display=r?e.__vOriginalDisplay:"none")},unbind:function(e,t,n,r,i){i||(e.style.display=e.__vOriginalDisplay)}}},Ji={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Qi(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?Qi(Wt(t.children)):e}function eo(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var o in i)t[S(o)]=i[o];return t}function to(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}var no=function(e){return e.tag||Ht(e)},ro=function(e){return"show"===e.name},io={name:"transition",props:Ji,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(no)).length){0;var r=this.mode;0;var i=n[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return i;var o=Qi(i);if(!o)return i;if(this._leaving)return to(e,i);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var u=(o.data||(o.data={})).transition=eo(this),c=this._vnode,l=Qi(c);if(o.data.directives&&o.data.directives.some(ro)&&(o.data.show=!0),l&&l.data&&!function(e,t){return t.key===e.key&&t.tag===e.tag}(o,l)&&!Ht(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var f=l.data.transition=A({},u);if("out-in"===r)return this._leaving=!0,ct(f,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),to(e,i);if("in-out"===r){if(Ht(o))return c;var d,h=function(){d()};ct(u,"afterEnter",h),ct(u,"enterCancelled",h),ct(f,"delayLeave",(function(e){d=e}))}}return i}}},oo=A({tag:String,moveClass:String},Ji);function ao(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function so(e){e.data.newPos=e.elm.getBoundingClientRect()}function uo(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}delete oo.mode;var co={Transition:io,TransitionGroup:{props:oo,beforeMount:function(){var e=this,t=this._update;this._update=function(n,r){var i=Jt(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,i(),t.call(e,n,r)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=eo(this),s=0;s<i.length;s++){var u=i[s];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))o.push(u),n[u.key]=u,(u.data||(u.data={})).transition=a;else;}if(r){for(var c=[],l=[],f=0;f<r.length;f++){var d=r[f];d.data.transition=a,d.data.pos=d.elm.getBoundingClientRect(),n[d.key]?c.push(d):l.push(d)}this.kept=e(t,null,c),this.removed=l}return e(t,null,o)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(ao),e.forEach(so),e.forEach(uo),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,r=n.style;Pi(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Si,n._moveCb=function e(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Si,e),n._moveCb=null,Ai(n,t))})}})))},methods:{hasMove:function(e,t){if(!Oi)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){bi(n,e)})),gi(n,t),n.style.display="none",this.$el.appendChild(n);var r=Di(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}}};xn.config.mustUseProp=Rn,xn.config.isReservedTag=Zn,xn.config.isReservedAttr=Dn,xn.config.getTagNamespace=Kn,xn.config.isUnknownElement=function(e){if(!Y)return!0;if(Zn(e))return!1;if(e=e.toLowerCase(),null!=Jn[e])return Jn[e];var t=document.createElement(e);return e.indexOf("-")>-1?Jn[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Jn[e]=/HTMLUnknownElement/.test(t.toString())},A(xn.options.directives,Ki),A(xn.options.components,co),xn.prototype.__patch__=Y?$i:j,xn.prototype.$mount=function(e,t){return function(e,t,n){var r;return e.$el=t,e.$options.render||(e.$options.render=ge),tn(e,"beforeMount"),r=function(){e._update(e._render(),n)},new pn(e,r,j,{before:function(){e._isMounted&&!e._isDestroyed&&tn(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,tn(e,"mounted")),e}(this,e=e&&Y?er(e):void 0,t)},Y&&setTimeout((function(){F.devtools&&ae&&ae.emit("init",xn)}),0);var lo=/\{\{((?:.|\r?\n)+?)\}\}/g,fo=/[-.*+?^${}()|[\]\/\\]/g,ho=O((function(e){var t=e[0].replace(fo,"\\$&"),n=e[1].replace(fo,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+n,"g")}));var po={staticKeys:["staticClass"],transformNode:function(e,t){t.warn;var n=Ur(e,"class");n&&(e.staticClass=JSON.stringify(n));var r=Nr(e,"class",!1);r&&(e.classBinding=r)},genData:function(e){var t="";return e.staticClass&&(t+="staticClass:"+e.staticClass+","),e.classBinding&&(t+="class:"+e.classBinding+","),t}};var mo,vo={staticKeys:["staticStyle"],transformNode:function(e,t){t.warn;var n=Ur(e,"style");n&&(e.staticStyle=JSON.stringify(ai(n)));var r=Nr(e,"style",!1);r&&(e.styleBinding=r)},genData:function(e){var t="";return e.staticStyle&&(t+="staticStyle:"+e.staticStyle+","),e.styleBinding&&(t+="style:("+e.styleBinding+"),"),t}},yo=function(e){return(mo=mo||document.createElement("div")).innerHTML=e,mo.textContent},go=v("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),bo=v("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),wo=v("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),_o=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Oo=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Co="[a-zA-Z_][\\-\\.0-9_a-zA-Z"+$.source+"]*",So="((?:"+Co+"\\:)?"+Co+")",xo=new RegExp("^<"+So),ko=/^\s*(\/?)>/,Eo=new RegExp("^<\\/"+So+"[^>]*>"),To=/^<!DOCTYPE [^>]+>/i,Po=/^<!\--/,Ao=/^<!\[/,Mo=v("script,style,textarea",!0),jo={},Do={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},Io=/&(?:lt|gt|quot|amp|#39);/g,Ro=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,Lo=v("pre,textarea",!0),Bo=function(e,t){return e&&Lo(e)&&"\n"===t[0]};function No(e,t){var n=t?Ro:Io;return e.replace(n,(function(e){return Do[e]}))}var Uo,Fo,$o,Vo,zo,Go,Ho,Wo,Yo=/^@|^v-on:/,qo=/^v-|^@|^:|^#/,Xo=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Zo=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Ko=/^\(|\)$/g,Jo=/^\[.*\]$/,Qo=/:(.*)$/,ea=/^:|^\.|^v-bind:/,ta=/\.[^.\]]+(?=[^\]]*$)/g,na=/^v-slot(:|$)|^#/,ra=/[\r\n]/,ia=/\s+/g,oa=O(yo);function aa(e,t,n){return{type:1,tag:e,attrsList:t,attrsMap:ha(t),rawAttrsMap:{},parent:n,children:[]}}function sa(e,t){Uo=t.warn||Ar,Go=t.isPreTag||D,Ho=t.mustUseProp||D,Wo=t.getTagNamespace||D;var n=t.isReservedTag||D;(function(e){return!!e.component||!n(e.tag)}),$o=Mr(t.modules,"transformNode"),Vo=Mr(t.modules,"preTransformNode"),zo=Mr(t.modules,"postTransformNode"),Fo=t.delimiters;var r,i,o=[],a=!1!==t.preserveWhitespace,s=t.whitespace,u=!1,c=!1;function l(e){if(f(e),u||e.processed||(e=ua(e,t)),o.length||e===r||r.if&&(e.elseif||e.else)&&la(r,{exp:e.elseif,block:e}),i&&!e.forbidden)if(e.elseif||e.else)a=e,(s=function(e){for(var t=e.length;t--;){if(1===e[t].type)return e[t];e.pop()}}(i.children))&&s.if&&la(s,{exp:a.elseif,block:a});else{if(e.slotScope){var n=e.slotTarget||'"default"';(i.scopedSlots||(i.scopedSlots={}))[n]=e}i.children.push(e),e.parent=i}var a,s;e.children=e.children.filter((function(e){return!e.slotScope})),f(e),e.pre&&(u=!1),Go(e.tag)&&(c=!1);for(var l=0;l<zo.length;l++)zo[l](e,t)}function f(e){if(!c)for(var t;(t=e.children[e.children.length-1])&&3===t.type&&" "===t.text;)e.children.pop()}return function(e,t){for(var n,r,i=[],o=t.expectHTML,a=t.isUnaryTag||D,s=t.canBeLeftOpenTag||D,u=0;e;){if(n=e,r&&Mo(r)){var c=0,l=r.toLowerCase(),f=jo[l]||(jo[l]=new RegExp("([\\s\\S]*?)(</"+l+"[^>]*>)","i")),d=e.replace(f,(function(e,n,r){return c=r.length,Mo(l)||"noscript"===l||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Bo(l,n)&&(n=n.slice(1)),t.chars&&t.chars(n),""}));u+=e.length-d.length,e=d,k(l,u-c,u)}else{var h=e.indexOf("<");if(0===h){if(Po.test(e)){var p=e.indexOf("--\x3e");if(p>=0){t.shouldKeepComment&&t.comment(e.substring(4,p),u,u+p+3),C(p+3);continue}}if(Ao.test(e)){var m=e.indexOf("]>");if(m>=0){C(m+2);continue}}var v=e.match(To);if(v){C(v[0].length);continue}var y=e.match(Eo);if(y){var g=u;C(y[0].length),k(y[1],g,u);continue}var b=S();if(b){x(b),Bo(b.tagName,e)&&C(1);continue}}var w=void 0,_=void 0,O=void 0;if(h>=0){for(_=e.slice(h);!(Eo.test(_)||xo.test(_)||Po.test(_)||Ao.test(_)||(O=_.indexOf("<",1))<0);)h+=O,_=e.slice(h);w=e.substring(0,h)}h<0&&(w=e),w&&C(w.length),t.chars&&w&&t.chars(w,u-w.length,u)}if(e===n){t.chars&&t.chars(e);break}}function C(t){u+=t,e=e.substring(t)}function S(){var t=e.match(xo);if(t){var n,r,i={tagName:t[1],attrs:[],start:u};for(C(t[0].length);!(n=e.match(ko))&&(r=e.match(Oo)||e.match(_o));)r.start=u,C(r[0].length),r.end=u,i.attrs.push(r);if(n)return i.unarySlash=n[1],C(n[0].length),i.end=u,i}}function x(e){var n=e.tagName,u=e.unarySlash;o&&("p"===r&&wo(n)&&k(r),s(n)&&r===n&&k(n));for(var c=a(n)||!!u,l=e.attrs.length,f=new Array(l),d=0;d<l;d++){var h=e.attrs[d],p=h[3]||h[4]||h[5]||"",m="a"===n&&"href"===h[1]?t.shouldDecodeNewlinesForHref:t.shouldDecodeNewlines;f[d]={name:h[1],value:No(p,m)}}c||(i.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:f,start:e.start,end:e.end}),r=n),t.start&&t.start(n,f,c,e.start,e.end)}function k(e,n,o){var a,s;if(null==n&&(n=u),null==o&&(o=u),e)for(s=e.toLowerCase(),a=i.length-1;a>=0&&i[a].lowerCasedTag!==s;a--);else a=0;if(a>=0){for(var c=i.length-1;c>=a;c--)t.end&&t.end(i[c].tag,n,o);i.length=a,r=a&&i[a-1].tag}else"br"===s?t.start&&t.start(e,[],!0,n,o):"p"===s&&(t.start&&t.start(e,[],!1,n,o),t.end&&t.end(e,n,o))}k()}(e,{warn:Uo,expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,canBeLeftOpenTag:t.canBeLeftOpenTag,shouldDecodeNewlines:t.shouldDecodeNewlines,shouldDecodeNewlinesForHref:t.shouldDecodeNewlinesForHref,shouldKeepComment:t.comments,outputSourceRange:t.outputSourceRange,start:function(e,n,a,s,f){var d=i&&i.ns||Wo(e);K&&"svg"===d&&(n=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];pa.test(r.name)||(r.name=r.name.replace(ma,""),t.push(r))}return t}(n));var h,p=aa(e,n,i);d&&(p.ns=d),"style"!==(h=p).tag&&("script"!==h.tag||h.attrsMap.type&&"text/javascript"!==h.attrsMap.type)||oe()||(p.forbidden=!0);for(var m=0;m<Vo.length;m++)p=Vo[m](p,t)||p;u||(!function(e){null!=Ur(e,"v-pre")&&(e.pre=!0)}(p),p.pre&&(u=!0)),Go(p.tag)&&(c=!0),u?function(e){var t=e.attrsList,n=t.length;if(n)for(var r=e.attrs=new Array(n),i=0;i<n;i++)r[i]={name:t[i].name,value:JSON.stringify(t[i].value)},null!=t[i].start&&(r[i].start=t[i].start,r[i].end=t[i].end);else e.pre||(e.plain=!0)}(p):p.processed||(ca(p),function(e){var t=Ur(e,"v-if");if(t)e.if=t,la(e,{exp:t,block:e});else{null!=Ur(e,"v-else")&&(e.else=!0);var n=Ur(e,"v-else-if");n&&(e.elseif=n)}}(p),function(e){null!=Ur(e,"v-once")&&(e.once=!0)}(p)),r||(r=p),a?l(p):(i=p,o.push(p))},end:function(e,t,n){var r=o[o.length-1];o.length-=1,i=o[o.length-1],l(r)},chars:function(e,t,n){if(i&&(!K||"textarea"!==i.tag||i.attrsMap.placeholder!==e)){var r,o,l,f=i.children;if(e=c||e.trim()?"script"===(r=i).tag||"style"===r.tag?e:oa(e):f.length?s?"condense"===s&&ra.test(e)?"":" ":a?" ":"":"")c||"condense"!==s||(e=e.replace(ia," ")),!u&&" "!==e&&(o=function(e,t){var n=t?ho(t):lo;if(n.test(e)){for(var r,i,o,a=[],s=[],u=n.lastIndex=0;r=n.exec(e);){(i=r.index)>u&&(s.push(o=e.slice(u,i)),a.push(JSON.stringify(o)));var c=Tr(r[1].trim());a.push("_s("+c+")"),s.push({"@binding":c}),u=i+r[0].length}return u<e.length&&(s.push(o=e.slice(u)),a.push(JSON.stringify(o))),{expression:a.join("+"),tokens:s}}}(e,Fo))?l={type:2,expression:o.expression,tokens:o.tokens,text:e}:" "===e&&f.length&&" "===f[f.length-1].text||(l={type:3,text:e}),l&&f.push(l)}},comment:function(e,t,n){if(i){var r={type:3,text:e,isComment:!0};0,i.children.push(r)}}}),r}function ua(e,t){var n;!function(e){var t=Nr(e,"key");if(t){e.key=t}}(e),e.plain=!e.key&&!e.scopedSlots&&!e.attrsList.length,function(e){var t=Nr(e,"ref");t&&(e.ref=t,e.refInFor=function(e){var t=e;for(;t;){if(void 0!==t.for)return!0;t=t.parent}return!1}(e))}(e),function(e){var t;"template"===e.tag?(t=Ur(e,"scope"),e.slotScope=t||Ur(e,"slot-scope")):(t=Ur(e,"slot-scope"))&&(e.slotScope=t);var n=Nr(e,"slot");n&&(e.slotTarget='""'===n?'"default"':n,e.slotTargetDynamic=!(!e.attrsMap[":slot"]&&!e.attrsMap["v-bind:slot"]),"template"===e.tag||e.slotScope||Dr(e,"slot",n,function(e,t){return e.rawAttrsMap[":"+t]||e.rawAttrsMap["v-bind:"+t]||e.rawAttrsMap[t]}(e,"slot")));if("template"===e.tag){var r=Fr(e,na);if(r){0;var i=fa(r),o=i.name,a=i.dynamic;e.slotTarget=o,e.slotTargetDynamic=a,e.slotScope=r.value||"_empty_"}}else{var s=Fr(e,na);if(s){0;var u=e.scopedSlots||(e.scopedSlots={}),c=fa(s),l=c.name,f=c.dynamic,d=u[l]=aa("template",[],e);d.slotTarget=l,d.slotTargetDynamic=f,d.children=e.children.filter((function(e){if(!e.slotScope)return e.parent=d,!0})),d.slotScope=s.value||"_empty_",e.children=[],e.plain=!1}}}(e),"slot"===(n=e).tag&&(n.slotName=Nr(n,"name")),function(e){var t;(t=Nr(e,"is"))&&(e.component=t);null!=Ur(e,"inline-template")&&(e.inlineTemplate=!0)}(e);for(var r=0;r<$o.length;r++)e=$o[r](e,t)||e;return function(e){var t,n,r,i,o,a,s,u,c=e.attrsList;for(t=0,n=c.length;t<n;t++){if(r=i=c[t].name,o=c[t].value,qo.test(r))if(e.hasBindings=!0,(a=da(r.replace(qo,"")))&&(r=r.replace(ta,"")),ea.test(r))r=r.replace(ea,""),o=Tr(o),(u=Jo.test(r))&&(r=r.slice(1,-1)),a&&(a.prop&&!u&&"innerHtml"===(r=S(r))&&(r="innerHTML"),a.camel&&!u&&(r=S(r)),a.sync&&(s=zr(o,"$event"),u?Br(e,'"update:"+('+r+")",s,null,!1,0,c[t],!0):(Br(e,"update:"+S(r),s,null,!1,0,c[t]),E(r)!==S(r)&&Br(e,"update:"+E(r),s,null,!1,0,c[t])))),a&&a.prop||!e.component&&Ho(e.tag,e.attrsMap.type,r)?jr(e,r,o,c[t],u):Dr(e,r,o,c[t],u);else if(Yo.test(r))r=r.replace(Yo,""),(u=Jo.test(r))&&(r=r.slice(1,-1)),Br(e,r,o,a,!1,0,c[t],u);else{var l=(r=r.replace(qo,"")).match(Qo),f=l&&l[1];u=!1,f&&(r=r.slice(0,-(f.length+1)),Jo.test(f)&&(f=f.slice(1,-1),u=!0)),Rr(e,r,i,o,f,u,a,c[t])}else Dr(e,r,JSON.stringify(o),c[t]),!e.component&&"muted"===r&&Ho(e.tag,e.attrsMap.type,r)&&jr(e,r,"true",c[t])}}(e),e}function ca(e){var t;if(t=Ur(e,"v-for")){var n=function(e){var t=e.match(Xo);if(!t)return;var n={};n.for=t[2].trim();var r=t[1].trim().replace(Ko,""),i=r.match(Zo);i?(n.alias=r.replace(Zo,"").trim(),n.iterator1=i[1].trim(),i[2]&&(n.iterator2=i[2].trim())):n.alias=r;return n}(t);n&&A(e,n)}}function la(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)}function fa(e){var t=e.name.replace(na,"");return t||"#"!==e.name[0]&&(t="default"),Jo.test(t)?{name:t.slice(1,-1),dynamic:!0}:{name:'"'+t+'"',dynamic:!1}}function da(e){var t=e.match(ta);if(t){var n={};return t.forEach((function(e){n[e.slice(1)]=!0})),n}}function ha(e){for(var t={},n=0,r=e.length;n<r;n++)t[e[n].name]=e[n].value;return t}var pa=/^xmlns:NS\d+/,ma=/^NS\d+:/;function va(e){return aa(e.tag,e.attrsList.slice(),e.parent)}var ya=[po,vo,{preTransformNode:function(e,t){if("input"===e.tag){var n,r=e.attrsMap;if(!r["v-model"])return;if((r[":type"]||r["v-bind:type"])&&(n=Nr(e,"type")),r.type||n||!r["v-bind"]||(n="("+r["v-bind"]+").type"),n){var i=Ur(e,"v-if",!0),o=i?"&&("+i+")":"",a=null!=Ur(e,"v-else",!0),s=Ur(e,"v-else-if",!0),u=va(e);ca(u),Ir(u,"type","checkbox"),ua(u,t),u.processed=!0,u.if="("+n+")==='checkbox'"+o,la(u,{exp:u.if,block:u});var c=va(e);Ur(c,"v-for",!0),Ir(c,"type","radio"),ua(c,t),la(u,{exp:"("+n+")==='radio'"+o,block:c});var l=va(e);return Ur(l,"v-for",!0),Ir(l,":type",n),ua(l,t),la(u,{exp:i,block:l}),a?u.else=!0:s&&(u.elseif=s),u}}}}];var ga,ba,wa={expectHTML:!0,modules:ya,directives:{model:function(e,t,n){n;var r=t.value,i=t.modifiers,o=e.tag,a=e.attrsMap.type;if(e.component)return Vr(e,r,i),!1;if("select"===o)!function(e,t,n){var r='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(n&&n.number?"_n(val)":"val")+"});";r=r+" "+zr(t,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),Br(e,"change",r,null,!0)}(e,r,i);else if("input"===o&&"checkbox"===a)!function(e,t,n){var r=n&&n.number,i=Nr(e,"value")||"null",o=Nr(e,"true-value")||"true",a=Nr(e,"false-value")||"false";jr(e,"checked","Array.isArray("+t+")?_i("+t+","+i+")>-1"+("true"===o?":("+t+")":":_q("+t+","+o+")")),Br(e,"change","var $$a="+t+",$$el=$event.target,$$c=$$el.checked?("+o+"):("+a+");if(Array.isArray($$a)){var $$v="+(r?"_n("+i+")":i)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+zr(t,"$$a.concat([$$v])")+")}else{$$i>-1&&("+zr(t,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+zr(t,"$$c")+"}",null,!0)}(e,r,i);else if("input"===o&&"radio"===a)!function(e,t,n){var r=n&&n.number,i=Nr(e,"value")||"null";jr(e,"checked","_q("+t+","+(i=r?"_n("+i+")":i)+")"),Br(e,"change",zr(t,i),null,!0)}(e,r,i);else if("input"===o||"textarea"===o)!function(e,t,n){var r=e.attrsMap.type;0;var i=n||{},o=i.lazy,a=i.number,s=i.trim,u=!o&&"range"!==r,c=o?"change":"range"===r?"__r":"input",l="$event.target.value";s&&(l="$event.target.value.trim()");a&&(l="_n("+l+")");var f=zr(t,l);u&&(f="if($event.target.composing)return;"+f);jr(e,"value","("+t+")"),Br(e,c,f,null,!0),(s||a)&&Br(e,"blur","$forceUpdate()")}(e,r,i);else{if(!F.isReservedTag(o))return Vr(e,r,i),!1}return!0},text:function(e,t){t.value&&jr(e,"textContent","_s("+t.value+")",t)},html:function(e,t){t.value&&jr(e,"innerHTML","_s("+t.value+")",t)}},isPreTag:function(e){return"pre"===e},isUnaryTag:go,mustUseProp:Rn,canBeLeftOpenTag:bo,isReservedTag:Zn,getTagNamespace:Kn,staticKeys:function(e){return e.reduce((function(e,t){return e.concat(t.staticKeys||[])}),[]).join(",")}(ya)},_a=O((function(e){return v("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(e?","+e:""))}));function Oa(e,t){e&&(ga=_a(t.staticKeys||""),ba=t.isReservedTag||D,function e(t){if(t.static=function(e){if(2===e.type)return!1;if(3===e.type)return!0;return!(!e.pre&&(e.hasBindings||e.if||e.for||y(e.tag)||!ba(e.tag)||function(e){for(;e.parent;){if("template"!==(e=e.parent).tag)return!1;if(e.for)return!0}return!1}(e)||!Object.keys(e).every(ga)))}(t),1===t.type){if(!ba(t.tag)&&"slot"!==t.tag&&null==t.attrsMap["inline-template"])return;for(var n=0,r=t.children.length;n<r;n++){var i=t.children[n];e(i),i.static||(t.static=!1)}if(t.ifConditions)for(var o=1,a=t.ifConditions.length;o<a;o++){var s=t.ifConditions[o].block;e(s),s.static||(t.static=!1)}}}(e),function e(t,n){if(1===t.type){if((t.static||t.once)&&(t.staticInFor=n),t.static&&t.children.length&&(1!==t.children.length||3!==t.children[0].type))return void(t.staticRoot=!0);if(t.staticRoot=!1,t.children)for(var r=0,i=t.children.length;r<i;r++)e(t.children[r],n||!!t.for);if(t.ifConditions)for(var o=1,a=t.ifConditions.length;o<a;o++)e(t.ifConditions[o].block,n)}}(e,!1))}var Ca=/^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,Sa=/\([^)]*?\);*$/,xa=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,ka={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Ea={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},Ta=function(e){return"if("+e+")return null;"},Pa={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:Ta("$event.target !== $event.currentTarget"),ctrl:Ta("!$event.ctrlKey"),shift:Ta("!$event.shiftKey"),alt:Ta("!$event.altKey"),meta:Ta("!$event.metaKey"),left:Ta("'button' in $event && $event.button !== 0"),middle:Ta("'button' in $event && $event.button !== 1"),right:Ta("'button' in $event && $event.button !== 2")};function Aa(e,t){var n=t?"nativeOn:":"on:",r="",i="";for(var o in e){var a=Ma(e[o]);e[o]&&e[o].dynamic?i+=o+","+a+",":r+='"'+o+'":'+a+","}return r="{"+r.slice(0,-1)+"}",i?n+"_d("+r+",["+i.slice(0,-1)+"])":n+r}function Ma(e){if(!e)return"function(){}";if(Array.isArray(e))return"["+e.map((function(e){return Ma(e)})).join(",")+"]";var t=xa.test(e.value),n=Ca.test(e.value),r=xa.test(e.value.replace(Sa,""));if(e.modifiers){var i="",o="",a=[];for(var s in e.modifiers)if(Pa[s])o+=Pa[s],ka[s]&&a.push(s);else if("exact"===s){var u=e.modifiers;o+=Ta(["ctrl","shift","alt","meta"].filter((function(e){return!u[e]})).map((function(e){return"$event."+e+"Key"})).join("||"))}else a.push(s);return a.length&&(i+=function(e){return"if(!$event.type.indexOf('key')&&"+e.map(ja).join("&&")+")return null;"}(a)),o&&(i+=o),"function($event){"+i+(t?"return "+e.value+"($event)":n?"return ("+e.value+")($event)":r?"return "+e.value:e.value)+"}"}return t||n?e.value:"function($event){"+(r?"return "+e.value:e.value)+"}"}function ja(e){var t=parseInt(e,10);if(t)return"$event.keyCode!=="+t;var n=ka[e],r=Ea[e];return"_k($event.keyCode,"+JSON.stringify(e)+","+JSON.stringify(n)+",$event.key,"+JSON.stringify(r)+")"}var Da={on:function(e,t){e.wrapListeners=function(e){return"_g("+e+","+t.value+")"}},bind:function(e,t){e.wrapData=function(n){return"_b("+n+",'"+e.tag+"',"+t.value+","+(t.modifiers&&t.modifiers.prop?"true":"false")+(t.modifiers&&t.modifiers.sync?",true":"")+")"}},cloak:j},Ia=function(e){this.options=e,this.warn=e.warn||Ar,this.transforms=Mr(e.modules,"transformCode"),this.dataGenFns=Mr(e.modules,"genData"),this.directives=A(A({},Da),e.directives);var t=e.isReservedTag||D;this.maybeComponent=function(e){return!!e.component||!t(e.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function Ra(e,t){var n=new Ia(t);return{render:"with(this){return "+(e?La(e,n):'_c("div")')+"}",staticRenderFns:n.staticRenderFns}}function La(e,t){if(e.parent&&(e.pre=e.pre||e.parent.pre),e.staticRoot&&!e.staticProcessed)return Ba(e,t);if(e.once&&!e.onceProcessed)return Na(e,t);if(e.for&&!e.forProcessed)return Fa(e,t);if(e.if&&!e.ifProcessed)return Ua(e,t);if("template"!==e.tag||e.slotTarget||t.pre){if("slot"===e.tag)return function(e,t){var n=e.slotName||'"default"',r=Ga(e,t),i="_t("+n+(r?","+r:""),o=e.attrs||e.dynamicAttrs?Ya((e.attrs||[]).concat(e.dynamicAttrs||[]).map((function(e){return{name:S(e.name),value:e.value,dynamic:e.dynamic}}))):null,a=e.attrsMap["v-bind"];!o&&!a||r||(i+=",null");o&&(i+=","+o);a&&(i+=(o?"":",null")+","+a);return i+")"}(e,t);var n;if(e.component)n=function(e,t,n){var r=t.inlineTemplate?null:Ga(t,n,!0);return"_c("+e+","+$a(t,n)+(r?","+r:"")+")"}(e.component,e,t);else{var r;(!e.plain||e.pre&&t.maybeComponent(e))&&(r=$a(e,t));var i=e.inlineTemplate?null:Ga(e,t,!0);n="_c('"+e.tag+"'"+(r?","+r:"")+(i?","+i:"")+")"}for(var o=0;o<t.transforms.length;o++)n=t.transforms[o](e,n);return n}return Ga(e,t)||"void 0"}function Ba(e,t){e.staticProcessed=!0;var n=t.pre;return e.pre&&(t.pre=e.pre),t.staticRenderFns.push("with(this){return "+La(e,t)+"}"),t.pre=n,"_m("+(t.staticRenderFns.length-1)+(e.staticInFor?",true":"")+")"}function Na(e,t){if(e.onceProcessed=!0,e.if&&!e.ifProcessed)return Ua(e,t);if(e.staticInFor){for(var n="",r=e.parent;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o("+La(e,t)+","+t.onceId+++","+n+")":La(e,t)}return Ba(e,t)}function Ua(e,t,n,r){return e.ifProcessed=!0,function e(t,n,r,i){if(!t.length)return i||"_e()";var o=t.shift();return o.exp?"("+o.exp+")?"+a(o.block)+":"+e(t,n,r,i):""+a(o.block);function a(e){return r?r(e,n):e.once?Na(e,n):La(e,n)}}(e.ifConditions.slice(),t,n,r)}function Fa(e,t,n,r){var i=e.for,o=e.alias,a=e.iterator1?","+e.iterator1:"",s=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,(r||"_l")+"(("+i+"),function("+o+a+s+"){return "+(n||La)(e,t)+"})"}function $a(e,t){var n="{",r=function(e,t){var n=e.directives;if(!n)return;var r,i,o,a,s="directives:[",u=!1;for(r=0,i=n.length;r<i;r++){o=n[r],a=!0;var c=t.directives[o.name];c&&(a=!!c(e,o,t.warn)),a&&(u=!0,s+='{name:"'+o.name+'",rawName:"'+o.rawName+'"'+(o.value?",value:("+o.value+"),expression:"+JSON.stringify(o.value):"")+(o.arg?",arg:"+(o.isDynamicArg?o.arg:'"'+o.arg+'"'):"")+(o.modifiers?",modifiers:"+JSON.stringify(o.modifiers):"")+"},")}if(u)return s.slice(0,-1)+"]"}(e,t);r&&(n+=r+","),e.key&&(n+="key:"+e.key+","),e.ref&&(n+="ref:"+e.ref+","),e.refInFor&&(n+="refInFor:true,"),e.pre&&(n+="pre:true,"),e.component&&(n+='tag:"'+e.tag+'",');for(var i=0;i<t.dataGenFns.length;i++)n+=t.dataGenFns[i](e);if(e.attrs&&(n+="attrs:"+Ya(e.attrs)+","),e.props&&(n+="domProps:"+Ya(e.props)+","),e.events&&(n+=Aa(e.events,!1)+","),e.nativeEvents&&(n+=Aa(e.nativeEvents,!0)+","),e.slotTarget&&!e.slotScope&&(n+="slot:"+e.slotTarget+","),e.scopedSlots&&(n+=function(e,t,n){var r=e.for||Object.keys(t).some((function(e){var n=t[e];return n.slotTargetDynamic||n.if||n.for||Va(n)})),i=!!e.if;if(!r)for(var o=e.parent;o;){if(o.slotScope&&"_empty_"!==o.slotScope||o.for){r=!0;break}o.if&&(i=!0),o=o.parent}var a=Object.keys(t).map((function(e){return za(t[e],n)})).join(",");return"scopedSlots:_u(["+a+"]"+(r?",null,true":"")+(!r&&i?",null,false,"+function(e){var t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return t>>>0}(a):"")+")"}(e,e.scopedSlots,t)+","),e.model&&(n+="model:{value:"+e.model.value+",callback:"+e.model.callback+",expression:"+e.model.expression+"},"),e.inlineTemplate){var o=function(e,t){var n=e.children[0];0;if(n&&1===n.type){var r=Ra(n,t.options);return"inlineTemplate:{render:function(){"+r.render+"},staticRenderFns:["+r.staticRenderFns.map((function(e){return"function(){"+e+"}"})).join(",")+"]}"}}(e,t);o&&(n+=o+",")}return n=n.replace(/,$/,"")+"}",e.dynamicAttrs&&(n="_b("+n+',"'+e.tag+'",'+Ya(e.dynamicAttrs)+")"),e.wrapData&&(n=e.wrapData(n)),e.wrapListeners&&(n=e.wrapListeners(n)),n}function Va(e){return 1===e.type&&("slot"===e.tag||e.children.some(Va))}function za(e,t){var n=e.attrsMap["slot-scope"];if(e.if&&!e.ifProcessed&&!n)return Ua(e,t,za,"null");if(e.for&&!e.forProcessed)return Fa(e,t,za);var r="_empty_"===e.slotScope?"":String(e.slotScope),i="function("+r+"){return "+("template"===e.tag?e.if&&n?"("+e.if+")?"+(Ga(e,t)||"undefined")+":undefined":Ga(e,t)||"undefined":La(e,t))+"}",o=r?"":",proxy:true";return"{key:"+(e.slotTarget||'"default"')+",fn:"+i+o+"}"}function Ga(e,t,n,r,i){var o=e.children;if(o.length){var a=o[0];if(1===o.length&&a.for&&"template"!==a.tag&&"slot"!==a.tag){var s=n?t.maybeComponent(a)?",1":",0":"";return""+(r||La)(a,t)+s}var u=n?function(e,t){for(var n=0,r=0;r<e.length;r++){var i=e[r];if(1===i.type){if(Ha(i)||i.ifConditions&&i.ifConditions.some((function(e){return Ha(e.block)}))){n=2;break}(t(i)||i.ifConditions&&i.ifConditions.some((function(e){return t(e.block)})))&&(n=1)}}return n}(o,t.maybeComponent):0,c=i||Wa;return"["+o.map((function(e){return c(e,t)})).join(",")+"]"+(u?","+u:"")}}function Ha(e){return void 0!==e.for||"template"===e.tag||"slot"===e.tag}function Wa(e,t){return 1===e.type?La(e,t):3===e.type&&e.isComment?function(e){return"_e("+JSON.stringify(e.text)+")"}(e):function(e){return"_v("+(2===e.type?e.expression:qa(JSON.stringify(e.text)))+")"}(e)}function Ya(e){for(var t="",n="",r=0;r<e.length;r++){var i=e[r],o=qa(i.value);i.dynamic?n+=i.name+","+o+",":t+='"'+i.name+'":'+o+","}return t="{"+t.slice(0,-1)+"}",n?"_d("+t+",["+n.slice(0,-1)+"])":t}function qa(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)");function Xa(e,t){try{return new Function(e)}catch(n){return t.push({err:n,code:e}),j}}function Za(e){var t=Object.create(null);return function(n,r,i){(r=A({},r)).warn;delete r.warn;var o=r.delimiters?String(r.delimiters)+n:n;if(t[o])return t[o];var a=e(n,r);var s={},u=[];return s.render=Xa(a.render,u),s.staticRenderFns=a.staticRenderFns.map((function(e){return Xa(e,u)})),t[o]=s}}var Ka,Ja,Qa=(Ka=function(e,t){var n=sa(e.trim(),t);!1!==t.optimize&&Oa(n,t);var r=Ra(n,t);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}},function(e){function t(t,n){var r=Object.create(e),i=[],o=[];if(n)for(var a in n.modules&&(r.modules=(e.modules||[]).concat(n.modules)),n.directives&&(r.directives=A(Object.create(e.directives||null),n.directives)),n)"modules"!==a&&"directives"!==a&&(r[a]=n[a]);r.warn=function(e,t,n){(n?o:i).push(e)};var s=Ka(t.trim(),r);return s.errors=i,s.tips=o,s}return{compile:t,compileToFunctions:Za(t)}})(wa),es=(Qa.compile,Qa.compileToFunctions);function ts(e){return(Ja=Ja||document.createElement("div")).innerHTML=e?'<a href="\n"/>':'<div a="\n"/>',Ja.innerHTML.indexOf("&#10;")>0}var ns=!!Y&&ts(!1),rs=!!Y&&ts(!0),is=O((function(e){var t=er(e);return t&&t.innerHTML})),os=xn.prototype.$mount;xn.prototype.$mount=function(e,t){if((e=e&&er(e))===document.body||e===document.documentElement)return this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"==typeof r)"#"===r.charAt(0)&&(r=is(r));else{if(!r.nodeType)return this;r=r.innerHTML}else e&&(r=function(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}(e));if(r){0;var i=es(r,{outputSourceRange:!1,shouldDecodeNewlines:ns,shouldDecodeNewlinesForHref:rs,delimiters:n.delimiters,comments:n.comments},this),o=i.render,a=i.staticRenderFns;n.render=o,n.staticRenderFns=a}}return os.call(this,e,t)},xn.compile=es,t.a=xn}).call(this,n(68),n(226).setImmediate)},function(e,t,n){"use strict";var r=n(108);t.a=function(e,t){return new Promise((function(n,i){var o,a=setTimeout((function(){t&&o&&t.off("cancel",o),n()}),e);t&&(o=function(){clearTimeout(a),i(new r.a)},t.on("cancel",o))}))}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"afs-input"},[n("input",e._g(e._b({directives:[{name:"hint",rawName:"v-hint:[id]",arg:e.id}],ref:"input",staticClass:"afs-input__control",class:e.controlClasses,attrs:{type:e.type,"data-locator":e.dataLocator},domProps:{value:e.modelValue}},"input",e.$attrs,!1),e.listeners)),e._v(" "),n("ContextMenu",e._b({staticClass:"afs-input__hint",attrs:{id:e.id,"is-exist":e.hasError,modifiers:{y:"bottom",x:"center"},type:"hint",arrow:"",error:""},scopedSlots:e._u([{key:"default",fn:function(){return[e._t("error-message",[e._v("\n        "+e._s(e.errorMessage)+"\n      ")])]},proxy:!0}],null,!0)},"ContextMenu",e.errorHintProps,!1))],1)};r._withStripped=!0;var i=n(10),o=n(1),a=n(2),s=/[a-z]|[A-Z]/,u=/[0-9]/,c="".concat("%s;","X"),l="".concat("%s;","x"),f="".concat("%s;","9"),d=n(17),h=n(24);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={name:"AfsInput",components:{ContextMenu:i.a},directives:{hint:h.a},inheritAttrs:!1,model:{event:"model-changed",prop:"modelValue"},props:{type:{type:String,default:"text"},dataLocator:{type:String,default:"input"},radius:{type:String,default:"".concat(o.d.tl," ").concat(o.d.tr," ").concat(o.d.bl," ").concat(o.d.br)},modelValue:{type:String,default:""},isValid:{type:Boolean,default:!0},mask:{type:String,default:""},errorMessage:{type:String,default:""},controlClass:{type:null,default:null},errorHintProps:{type:Object,default:function(){return{}}}},computed:{id:function(){return Object(d.a)()},controlClasses:function(){return[this.controlClass,Object(a.b)("afs-input",this.radius),v({},o.a.isError,!this.isValid)]},hasMask:function(){return this.mask&&this.mask.length},listeners:function(){return m(m({},this.$listeners),{},{input:this.handleInput,blur:this.handleBlur})},isIntOnly:function(){return"int"===this.mask},hasError:function(){return!(this.isValid||!this.errorMessage||!this.errorMessage.length)}},methods:{focus:function(){this.$refs.input.focus()},select:function(){this.$refs.input.select()},blur:function(){this.$refs.input.blur()},handleBlur:function(e){this.$emit("blur",e)},handleInput:function(e){var t=e.target.value;if(this.hasMask){var n=this.isIntOnly?t.replace(/\D+/g,""):function(e,t){for(var n=t.split("").map((function(e){return s.test(e)||u.test(e)?"".concat("%s;").concat(e):e})).join(""),r=0;r<e.length;r++){var i=e[r],o=s.test(i),a=u.test(i),d=n.indexOf(c),h=n.indexOf(l),p=n.indexOf(f),m=-1!==d,v=-1!==h;if(o){if(-1!==p&&d>p&&h>p)break;var y=!m||v&&h<d;n=n.replace(y?l:c,y?i.toLowerCase():i.toUpperCase())}if(a){if(m&&d<p||v&&h<p)break;n=n.replace(f,i)}if(n.length===t.length)return n}return n.substring(0,n.indexOf("%s;"))}(t,this.mask);this.$refs.input.value=n,this.$emit("model-changed",n)}else this.$emit("model-changed",t);this.$emit("input",e)}}},g=(n(152),n(0)),b=Object(g.a)(y,r,[],!1,null,null,null);b.options.__file="WebUI/VueJsComponentLibrary/src/components/Input/App.vue";var w=b.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"afs-input",class:e.rootClasses},[n("div",e._g(e._b({directives:[{name:"hint",rawName:"v-hint:[id]",arg:e.id}],ref:"input",staticClass:"afs-input__control afs-input__control_clickable",class:e.controlClasses,attrs:{contenteditable:e.contentEditable},domProps:{innerHTML:e._s(e.parser(e.value))}},"div",e.$attrs,!1),e.listeners)),e._v(" "),n("ContextMenu",{staticClass:"afs-input__hint",attrs:{id:e.id,"is-exist":e.hasError,modifiers:{y:"bottom",x:"center"},type:"hint",arrow:!0,error:!0},scopedSlots:e._u([{key:"default",fn:function(){return[e._t("error-message",[e._v("\n        "+e._s(e.errorMessage)+"\n      ")])]},proxy:!0}],null,!0)})],1)};_._withStripped=!0;var O=n(4);function C(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E={name:"ClickableLinks",components:{ContextMenu:i.a},directives:{hint:h.a},inheritAttrs:!1,props:{type:{type:String,default:"text"},radius:{type:String,default:"".concat(o.d.tl," ").concat(o.d.tr," ").concat(o.d.bl," ").concat(o.d.br)},value:{type:String,default:""},isValid:{type:Boolean,default:!0},errorMessage:{type:String,default:""},parser:{type:Function,default:function(e){return e}},controlClass:{type:null,default:null}},data:function(){return{contentEditable:!0}},computed:{id:function(){return Object(d.a)()},rootClasses:function(){return[this.themeClass]},controlClasses:function(){return[this.controlClass,Object(a.b)("afs-input",this.radius),k({},o.a.isError,!this.isValid)]},themeClass:function(){var e=Object(O.a)(this.$root);return Object(a.c)(e.theme)},listeners:function(){return x(x({},this.$listeners),{},{input:this.handleInput,blur:this.handleBlur,click:this.handleClick})},hasError:function(){return!(this.isValid||!this.errorMessage||!this.errorMessage.length)}},methods:{handleBlur:function(e){this.$emit("blur",e)},handleInput:function(e){this.$emit("input",e)},handleClick:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("a"===e.target.tagName.toLowerCase()){t.next=2;break}return t.abrupt("return");case 2:return n.contentEditable=!1,t.next=5,n.$nextTick();case 5:setTimeout((function(){return n.contentEditable=!0}));case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){C(o,r,i,a,s,"next",e)}function s(e){C(o,r,i,a,s,"throw",e)}a(void 0)}))})()}}},T=Object(g.a)(E,_,[],!1,null,null,null);T.options.__file="WebUI/VueJsComponentLibrary/src/components/Input/ContentEditable.vue";T.exports,t.a=w},function(e,t,n){"use strict";n.d(t,"b",(function(){return r.b})),n.d(t,"a",(function(){return r.a})),n.d(t,"e",(function(){return r.c})),n.d(t,"f",(function(){return r.d})),n.d(t,"g",(function(){return r.e})),n.d(t,"h",(function(){return r.f})),n.d(t,"c",(function(){return i.a})),n.d(t,"d",(function(){return a}));var r=n(124),i=n(157);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=["./js/thenBy.js","./js/gl-matrix.js"],(n="urls")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,r;return t=e,(n=[{key:"registerLib",value:function(e){this.urls.push(e)}},{key:"loadLibByUrl",value:function(e){return new Promise((function(t,n){var r=document.createElement("script");r.src=e,r.async=!0,r.onload=function(){console.info("Loaded library: ".concat(e)),t(e)},r.onerror=function(t){console.error("Error loading library: ".concat(e,". Details: ").concat(t)),n(t)},document.getElementsByTagName("body")[0].appendChild(r)}))}},{key:"loadLibs",value:function(){return Promise.all(this.urls.map(this.loadLibByUrl))}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";t.a=function(e){return new Promise((function(t){return setTimeout((function(n){e&&e(),t()}),0)}))}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return d})),n.d(t,"g",(function(){return m})),n.d(t,"d",(function(){return w})),n.d(t,"f",(function(){return _})),n.d(t,"e",(function(){return O}));var o=function(){function e(t,n,i,o,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0];r(this,e),this.center=t,this.angles=n,this.radius=i,this.width=o,this.material=a,this.z=s}var t,n,o;return t=e,o=[{key:"createArc",value:function(t,n,r,i,o,a,s){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[0,.5],c=[t,n],l=[r,i];return new e(c,l,o,a,s,u)}},{key:"createArcCompatibility2D",value:function(t,n,r,i,o,a,s,u){var c=[t,n],l=2*Math.PI,f=i,d=o;return a?(f=l-i,d=2*l-o):d=(f=l-o)<d?l-i:2*l-i,new e(c,[f,d],r,s,u)}},{key:"createCircleStroke",value:function(t,n,r,i,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,.5],s=[t,n],u=[0,2*Math.PI];return new e(s,u,r,o,i,a)}},{key:"createCircleFill",value:function(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,.5],a=[t,n],s=[0,2*Math.PI];return new e(a,s,r/2,r,i,o)}}],(n=null)&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n,r,i,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=t,this.boundingArea=n,this.position=r,this.direction=i,this.fontHeight=o,this.material=a}var t,n,r;return t=e,(n=[{key:"GlyphsCount",value:function(){throw new Error("Method not supported for instance od class. Only for interface.")}},{key:"GetGlyph",value:function(e){throw new Error("Method not supported for instance od class. Only for interface.")}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=c((function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;l(this,e),f(this,"from",void 0),f(this,"to",void 0),f(this,"color",void 0),f(this,"width",void 0),f(this,"dash",void 0),this.from=t,this.to=n,this.color=r,this.width=i,this.dash=o}));function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(){function e(t,n,r,i,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"position",void 0),p(this,"direction",void 0),p(this,"size",void 0),p(this,"z",void 0),p(this,"radius",void 0),p(this,"material",void 0),this.position=t,this.direction=n,this.size=r,this.radius=i,this.material=o,this.z=a||[0,0]}var t,n,r;return t=e,r=[{key:"createLine",value:function(t,n,r,i,o,a,s){s=s||"butt";var u=Math.sqrt((r-t)*(r-t)+(i-n)*(i-n)),c=(r-t)/u,l=(i-n)/u,f=[c,l],d=0,h=[0,0],p=[0,0];if("round"===s||"square"===s){var m=t-(d=o/2)*c,v=n-d*l,y=d*c+r,g=d*l+i;h=[.5*(m+y),.5*(v+g)],p=[u=Math.sqrt((y-m)*(y-m)+(g-v)*(g-v)),o],"square"===s&&(d=0)}else h=[.5*(t+r),.5*(n+i)],p=[u,o];return new e(h,f,p,d,a)}},{key:"createRoundedSegmentFill",value:function(t,n,r,i,o,a){var s=2*a,u=Math.sqrt((r-t)*(r-t)+(i-n)*(i-n));return new e([.5*(t+r),.5*(n+i)],[(r-t)/u,(i-n)/u],[u+=s,s],a,o)}},{key:"createRectangle",value:function(t,n,r,i,o,a,s,u){return new e([t,n],a||[1,0],[r,i],s||0,o,u)}},{key:"createStrokedRectangle",value:function(e,t,n,r,i,o,a){var s=i/2;return[this.createLine(e-s,t,e+n+s,t,i,o,a),this.createLine(e+n,t+s,e+n,t-r-s,i,o,a),this.createLine(e-s,t-r,e+n+s,t-r,i,o,a),this.createLine(e,t+s,e,t-r-s,i,o,a)]}},{key:"createRotatedRect",value:function(t,n,r,i,o,a,s){s=s||0;var u=[r,i];if(0===(a=a||0))return new e([t+r/2,n-i/2],[1,0],u,s,o);var c=Math.cos(a),l=Math.sin(a),f=[c,-l];return new e([t+(c*=.5)*r-(l*=.5)*i,n-l*r-c*i],f,u,s,o)}},{key:"createRoundRect",value:function(t,n,r,i,o,a){var s={x:0,y:0},u={x:0,y:0};t<r?n>i?(s.x=t,s.y=n,u.x=r,u.y=i):(s.x=t,s.y=i,u.x=r,u.y=n):n>i?(s.x=r,s.y=n,u.x=t,u.y=i):(s.x=r,s.y=i,u.x=t,u.y=n);var c=u.x-s.x,l=s.y-u.y;return new e([s.x+c/2,s.y-l/2],[1,0],[c,l],a,o)}}],(n=[{key:"isFailed",value:function(){return isNaN(this.direction[0])||isNaN(this.direction[1])||isNaN(this.position[0])||isNaN(this.position[1])}}])&&h(t.prototype,n),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=y((function e(){g(this,e),b(this,"vertices",[]),b(this,"indices",[]),b(this,"outlineIndices",[]),b(this,"GetVertices",(function(){return this.vertices})),b(this,"GetIndices",(function(){return this.indices})),b(this,"GetOutlineIndices",(function(){return this.outlineIndices}))})),_=y((function e(t,n,r,i,o,a){g(this,e),b(this,"polygon",void 0),b(this,"position",void 0),b(this,"material",void 0),b(this,"z",void 0),b(this,"angle",void 0),b(this,"scale",void 0),this.polygon=t,this.position=n,this.material=r,this.z=i||[0,0],this.angle=o||0,this.scale=a||[1,1]})),O=function(){function e(){g(this,e),b(this,"contours",[])}return y(e,[{key:"addPolygonContour",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={is_hole:t,points:e};this.contours.push(n)}},{key:"GetContours",value:function(){return this.contours}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return i.a})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l}));var r=n(308),i=n(132),o=n(51);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"materials",[]),s(this,"materialDictionary",void 0)}var t,n,r;return t=e,(n=[{key:"getMaterialId",value:function(e,t,n){var r=e+","+(t||0).toString()+","+(n||0).toString();if(r in this.materialDictionary)return this.materialDictionary[r];var a=o.a.toRgbaArray(e);if(!a)return this.getMaterialId("#ffffff");var s=new i.a(a,t||0,n||!1),u=this.materials.push(s)-1;return this.materialDictionary[r]=u,u}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=void 0,(r="materials")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.materials=t||[]}var t,n,r;return t=e,(n=[{key:"GetMaterialsCount",value:function(){return this.materials.length}},{key:"GetMaterial",value:function(e){return e>=this.materials.length?null:this.materials[e]}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return s}));var r={id:"num",text:"",width:64,minWidth:64,visible:!0},i=[{id:"Comment",text:"Name",width:"22%",minWidth:100,sorted:!0,visible:!0},{id:"Description",text:"Description",width:"34%",minWidth:100,sorted:!0,visible:!0},{id:"Designator",text:"Designator",width:"22%",minWidth:100,sorted:!0,visible:!0},{id:"part",text:"Part Number",width:"15%",minWidth:100,sorted:!0,visible:!0},{id:"Price",text:"Price",width:60,minWidth:60,sorted:!0,visible:!0,money:!0},{id:"Quantity",text:"Qty",width:60,minWidth:48,sorted:!0,visible:!0}],o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{id:e.name,text:e.name,width:e.width,minWidth:Math.min(e.width,t?100:60),sorted:!0,visible:t,money:a(e.name)}},a=function(e){var t=e.toLowerCase();return t.startsWith("supplier subtotal")||t.startsWith("supplier unit price")||t.startsWith("price")},s=function(e){return e.split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0).toString()}},function(e,t,n){var r=n(161);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",e._g({attrs:{"enter-class":"afs-snackbar_enter","leave-to-class":"afs-snackbar_leave-to","enter-active-class":"afs-snackbar_enter-active","leave-active-class":"afs-snackbar_leave-active"}},e.listeners.transition),[e.isOpened?n("div",e._b({directives:[{name:"inject",rawName:"v-inject",value:e.containerId,expression:"containerId"}],staticClass:"afs-snackbar",class:e.classes,attrs:{"data-locator":e.dataLocator}},"div",e.$attrs,!1),[n("div",{staticClass:"afs-snackbar__container"},[e.hasIcon?n("div",{staticClass:"afs-snackbar__icon"},[e._v("\n        "+e._s(e.icon)+"\n        "),e._t("icon",null,{getBEMClass:e.getBEMClass})],2):e._e(),e._v(" "),n("div",{staticClass:"afs-snackbar__content"},[n("AfsText",{staticClass:"afs-snackbar__text",attrs:{type:"text"}},[e._t("default",null,{getBEMClass:e.getBEMClass})],2)],1),e._v(" "),e.hasSlot("action")?n("div",{staticClass:"afs-snackbar__action"},[e._t("action",null,{getBEMClass:e.getBEMClass})],2):e._e(),e._v(" "),e.autoclose||e.hideClose?e._e():n("Icon",{staticClass:"afs-snackbar__close",attrs:{name:"close-16","data-locator":e.dataLocator+"-close"},on:{click:e.close}})],1)]):e._e()])};r._withStripped=!0;var i=n(3),o=n(5),a=n(2),s=n(4),u=n(14);var c={name:"AfsSnackbar",components:{AfsText:i.a,Icon:o.a},directives:{inject:u.a},inheritAttrs:!1,props:{dataLocator:{type:String,default:"snackbar"},autoclose:{type:Boolean,default:!1},autocloseDelay:{type:[Number,String],default:3e3,validator:function(e){return isFinite(+e)}},icon:{type:String,default:""},containerId:{type:String,default:null},hideClose:{type:Boolean,default:!1},primary:{type:Boolean,default:!1}},data:function(){return{isOpened:!1}},computed:{classes:function(){return[this.themeClass,this.primary&&"afs-snackbar_primary"]},themeClass:function(){var e=Object(s.a)(this.$root);return Object(a.c)(e.theme)},hasIcon:function(){return!!this.icon.length||this.hasSlot("icon")},transitionListeners:function(){return{"before-enter":!0,enter:!0,"after-enter":!0,"enter-cancelled":!0,"before-leave":!0,leave:!0,"after-leave":!0,"leave-cancelled":!0}},listeners:function(){var e=this;return Object.entries(this.$listeners).reduce((function(t,n){var r=n[0],i=n[1];return e.transitionListeners[r]&&e.addTransitionListener(t,r,i),t}),{})}},methods:{getBEMClass:function(e){return Object(a.a)("afs-snackbar",e)},addTransitionListener:function(e,t,n){var r,i,o;e.transition?e.transition[t]=n:e.transition=(o=n,(i=t)in(r={})?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,r)},open:function(){this.isOpened=!0,this.autoclose&&(this.clearAutoclose(),this.timer=setTimeout(this.close,this.autocloseDelay))},close:function(){this.isOpened=!1,this.clearAutoclose()},clearAutoclose:function(){this.timer&&clearTimeout(this.timer)},hasSlot:function(e){return this.$slots[e]}}},l=(n(195),n(0)),f=Object(l.a)(c,r,[],!1,null,null,null);f.options.__file="WebUI/VueJsComponentLibrary/src/components/Snackbar/App.vue";var d=f.exports;t.a=d},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return w}));var r=n(37);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function l(e){var t=m();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){var t="function"==typeof Map?new Map:void 0;return(h=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return p(e,arguments,y(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),v(r,e)})(e)}function p(e,t,n){return(p=m()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&v(i,n.prototype),i}).apply(null,arguments)}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g,b=function(e){c(n,e);var t=l(n);function n(){return u(this,n),t.call(this,"Cancelled")}return s(n)}(h(Error)),w=function(e){c(n,e);var t=l(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return o(d(e=t.call.apply(t,[this].concat(i))),"_isCancellationRequested",!1),e}return s(n,[{key:"isCancellationRequested",get:function(){return this._isCancellationRequested},set:function(e){this._isCancellationRequested||e!==this._isCancellationRequested&&(this._isCancellationRequested=e,this.emit("cancel"))}},{key:"throwIfCancellationRequested",value:function(){if(this.isCancellationRequested)throw new b}}]),n}(r.a);o(w,"default",(g=new w,Object.defineProperty(g,"isCancellationRequested",{get:function(){return!1},set:function(){},enumerable:!0,configurable:!0}),g))},function(e,t,n){var r=n(53),i=n(128),o=n(127),a=n(210)("src"),s=n(521),u=(""+s).split("toString");n(77).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(e,t,n){var r=n(11),i=n(54),o=n(161),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},function(e,t,n){"use strict";n(78)},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"afs-tabs",class:e.classes,attrs:{"data-locator":e.dataLocator}},e._l(e.modelValue,(function(t){return n("AfsText",{key:t.id,staticClass:"afs-tabs__item",class:{"is-active":t.isActive},attrs:{"data-locator":e.dataLocator+"-item"},on:{click:function(n){return e.onClick(t.id)}}},[e._v("\n    "+e._s(t.name)+"\n  ")])})),1)};r._withStripped=!0;var i=n(3),o=n(2),a=n(4);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={name:"AfsTabs",components:{AfsText:i.a},model:{prop:"modelValue",event:"model-change"},props:{dataLocator:{type:String,default:"tabs"},modelValue:{type:Array,default:function(){return[]},validator:function(e){return e.every((function(e){return!function(e){return void 0===e}(e.id)}))}}},computed:{classes:function(){return[this.themeClass]},themeClass:function(){var e=Object(a.a)(this.$root);return Object(o.c)(e.theme)}},methods:{getBEMClass:function(e){return Object(o.a)("afs-tabs",e)},onClick:function(e){var t=this.modelValue.map((function(t){return u(u({},t),{},{isActive:e===t.id})}));this.$emit("model-change",t)}}},f=(n(164),n(0)),d=Object(f.a)(l,r,[],!1,null,null,null);d.options.__file="WebUI/VueJsComponentLibrary/src/components/Tabs/App.vue";var h=d.exports;t.a=h},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(18);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},function(e,t,n){"use strict";var r=n(18),i=n(184),o=n(185),a=n(114),s=n(186),u=n(189),c=n(190),l=n(118),f=n(70),d=n(71);e.exports=function(e){return new Promise((function(t,n){var h,p=e.data,m=e.headers,v=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(h),e.signal&&e.signal.removeEventListener("abort",h)}r.isFormData(p)&&delete m["Content-Type"];var g=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(b+":"+w)}var _=s(e.baseURL,e.url);function O(){if(g){var r="getAllResponseHeaders"in g?u(g.getAllResponseHeaders()):null,o={data:v&&"text"!==v&&"json"!==v?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:r,config:e,request:g};i((function(e){t(e),y()}),(function(e){n(e),y()}),o),g=null}}if(g.open(e.method.toUpperCase(),a(_,e.params,e.paramsSerializer),!0),g.timeout=e.timeout,"onloadend"in g?g.onloadend=O:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(O)},g.onabort=function(){g&&(n(l("Request aborted",e,"ECONNABORTED",g)),g=null)},g.onerror=function(){n(l("Network Error",e,null,g)),g=null},g.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||f.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",g)),g=null},r.isStandardBrowserEnv()){var C=(e.withCredentials||c(_))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;C&&(m[e.xsrfHeaderName]=C)}"setRequestHeader"in g&&r.forEach(m,(function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete m[t]:g.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(g.withCredentials=!!e.withCredentials),v&&"json"!==v&&(g.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&g.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(h=function(e){g&&(n(!e||e&&e.type?new d("canceled"):e),g.abort(),g=null)},e.cancelToken&&e.cancelToken.subscribe(h),e.signal&&(e.signal.aborted?h():e.signal.addEventListener("abort",h))),p||(p=null),g.send(p)}))}},function(e,t,n){"use strict";var r=n(116);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function a(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function u(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var c={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||o,i=t(e);r.isUndefined(i)&&t!==u||(n[e]=i)})),n}},function(e,t){e.exports={version:"0.25.0"}},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return f}));var r=n(140),i=n(94);function o(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}var a=Object(r.b)("request");function s(e){e.text().then((function(t){return a.LogWarn("Response status: [".concat(e.status,"] ").concat(null==e?void 0:e.statusText,"; body: ").concat(t))}))}var u=function(e){return e().then((function(e){switch(null==e?void 0:e.status){case 200:return Promise.resolve(e);case 401:return new Promise((function(){window.__CORE__.bus.emit("unAuthorized")}));default:return s(e),Promise.reject(new Error("".concat(e.statusText)))}}))},c=function e(t,n){return function(){var r,u=(r=regeneratorRuntime.mark((function r(o){var u,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(u=function(){return n?n(t):5e3},0!==t){r.next=3;break}throw new Error("Too many requests sent.");case 3:return r.prev=3,r.next=6,o();case 6:if(200!==(null==(c=r.sent)?void 0:c.status)){r.next=11;break}return r.next=10,c.json();case 10:return r.abrupt("return",r.sent);case 11:s(c),r.t0=null==c?void 0:c.status,r.next=401===r.t0?15:429===r.t0||503===r.t0?17:22;break;case 15:throw window.__CORE__.bus.emit("unAuthorized"),new Error("".concat(c.statusText));case 17:return r.next=19,Object(i.a)(u());case 19:return r.next=21,e(--t,n)(o);case 21:return r.abrupt("return",r.sent);case 22:throw new Error("".concat(c.statusText));case 23:r.next=33;break;case 25:return r.prev=25,r.t1=r.catch(3),a.LogWarn("Failed to process request: ".concat(null===r.t1||void 0===r.t1?void 0:r.t1.toString())),r.next=30,Object(i.a)(u());case 30:return r.next=32,e(--t,n)(o);case 32:return r.abrupt("return",r.sent);case 33:case"end":return r.stop()}}),r,null,[[3,25]])})),function(){var e=this,t=arguments;return new Promise((function(n,i){var a=r.apply(e,t);function s(e){o(a,n,i,s,u,"next",e)}function u(e){o(a,n,i,s,u,"throw",e)}s(void 0)}))});return function(e){return u.apply(this,arguments)}}()},l=function(e){return c(5,(function(e){return 1e3*Math.pow(4,5-e)}))(e)},f=function(e){return new Promise((function(t){return setTimeout(t,e)}))}},function(e,t,n){"use strict";var r,i,o,a,s;function u(e){return 255&e}function c(e){switch(e){case o.Arc:return"Arc";case o.Pad:return"Pad";case o.Via:return"Via";case o.Track:return"Track";case o.Text:return"Text";case o.Fill:return"Fill";case o.Connection:return"Connection";case o.Net:return"Net";case o.Component:return"Component";case o.Poly:return"Poly";case o.Region:return"Region";case o.ComponentBody:return"ComponentBody";case o.Dimension:return"Dimension";case o.Coordinate:return"Coordinate";case o.Class:return"Class";case o.Rule:return"Rule";case o.FromTo:return"FromTo";case o.DifferentialPair:return"DifferentialPair";case o.Violation:return"Violation";case o.Embedded:return"Embedded";case o.EmbeddedBoard:return"EmbeddedBoard";case o.SplitPlane:return"SplitPlane";case o.Trace:return"Trace";case o.SpareVia:return"SpareVia";case o.Board:return"Board";case o.BoardOutline:return"BoardOutline";case o.Last:return"Last";default:return"None"}}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return c})),function(e){e[e.None=0]="None",e[e.Temporal=1]="Temporal",e[e.Supesampling=2]="Supesampling"}(r||(r={})),function(e){e[e.FocusAnimation=0]="FocusAnimation",e[e.StartingPositionAnimation=1]="StartingPositionAnimation"}(i||(i={})),function(e){e[e.None=0]="None",e[e.Arc=1]="Arc",e[e.Pad=2]="Pad",e[e.Via=3]="Via",e[e.Track=4]="Track",e[e.Text=5]="Text",e[e.Fill=6]="Fill",e[e.Connection=7]="Connection",e[e.Net=8]="Net",e[e.Component=9]="Component",e[e.Poly=10]="Poly",e[e.Region=11]="Region",e[e.ComponentBody=12]="ComponentBody",e[e.Dimension=13]="Dimension",e[e.Coordinate=14]="Coordinate",e[e.Class=15]="Class",e[e.Rule=16]="Rule",e[e.FromTo=17]="FromTo",e[e.DifferentialPair=18]="DifferentialPair",e[e.Violation=19]="Violation",e[e.Embedded=20]="Embedded",e[e.EmbeddedBoard=21]="EmbeddedBoard",e[e.SplitPlane=22]="SplitPlane",e[e.Trace=23]="Trace",e[e.SpareVia=24]="SpareVia",e[e.Board=25]="Board",e[e.BoardOutline=26]="BoardOutline",e[e.Last=27]="Last"}(o||(o={})),function(e){e[e.None=0]="None",e[e.Arc=1]="Arc",e[e.Pad=2]="Pad",e[e.Via=3]="Via",e[e.Track=4]="Track",e[e.Text=5]="Text",e[e.Fill=6]="Fill",e[e.Connection=7]="Connection",e[e.Net=8]="Net",e[e.Component=9]="Component",e[e.Poly=10]="Poly",e[e.LinearDimension=11]="LinearDimension",e[e.AngularDimension=12]="AngularDimension",e[e.RadialDimension=13]="RadialDimension",e[e.LeaderDimension=14]="LeaderDimension",e[e.DatumDimension=15]="DatumDimension",e[e.BaselineDimension=16]="BaselineDimension",e[e.CenterDimension=17]="CenterDimension",e[e.OriginalDimension=18]="OriginalDimension",e[e.LinearDiameterDimension=19]="LinearDiameterDimension",e[e.RadialDiameterDimension=20]="RadialDiameterDimension",e[e.Coordinate=21]="Coordinate",e[e.Class=22]="Class",e[e.RuleClearance=23]="RuleClearance",e[e.RuleParallelSegment=24]="RuleParallelSegment",e[e.RuleMaxMinWidth=25]="RuleMaxMinWidth",e[e.RuleMaxMinLength=26]="RuleMaxMinLength",e[e.RuleMatchedLengths=27]="RuleMatchedLengths",e[e.RuleDaisyChainStubLength=28]="RuleDaisyChainStubLength",e[e.RulePowerPlaneConnectStyle=29]="RulePowerPlaneConnectStyle",e[e.RuleRoutingTopology=30]="RuleRoutingTopology",e[e.RuleRoutingPriority=31]="RuleRoutingPriority",e[e.RuleRoutingLayers=32]="RuleRoutingLayers",e[e.RuleRoutingCornerStyle=33]="RuleRoutingCornerStyle",e[e.RuleRoutingViaStyle=34]="RuleRoutingViaStyle",e[e.RulePowerPlaneClearance=35]="RulePowerPlaneClearance",e[e.RuleSolderMaskExpansion=36]="RuleSolderMaskExpansion",e[e.RulePasteMaskExpansion=37]="RulePasteMaskExpansion",e[e.RuleShortCircuit=38]="RuleShortCircuit",e[e.RuleBrokenNets=39]="RuleBrokenNets",e[e.RuleViasUnderSMD=40]="RuleViasUnderSMD",e[e.RuleMaximumViaCount=41]="RuleMaximumViaCount",e[e.RuleMinimumAnnularRing=42]="RuleMinimumAnnularRing",e[e.RulePolygonConnectStyle=43]="RulePolygonConnectStyle",e[e.RuleAcuteAngle=44]="RuleAcuteAngle",e[e.RuleConfinementConstraint=45]="RuleConfinementConstraint",e[e.RuleSMDToCorner=46]="RuleSMDToCorner",e[e.RuleComponentClearance=47]="RuleComponentClearance",e[e.RuleComponentRotations=48]="RuleComponentRotations",e[e.RulePermittedLayers=49]="RulePermittedLayers",e[e.RuleNetsToIgnore=50]="RuleNetsToIgnore",e[e.RuleSignalStimulus=51]="RuleSignalStimulus",e[e.RuleOvershootFallingEdge=52]="RuleOvershootFallingEdge",e[e.RuleOvershootRisingEdge=53]="RuleOvershootRisingEdge",e[e.RuleUndershootFallingEdge=54]="RuleUndershootFallingEdge",e[e.RuleUndershootRisingEdge=55]="RuleUndershootRisingEdge",e[e.RuleMaxMinImpedance=56]="RuleMaxMinImpedance",e[e.RuleSignalTopValue=57]="RuleSignalTopValue",e[e.RuleSignalBaseValue=58]="RuleSignalBaseValue",e[e.RuleFlightTimeRisingEdge=59]="RuleFlightTimeRisingEdge",e[e.RuleFlightTimeFallingEdge=60]="RuleFlightTimeFallingEdge",e[e.RuleLayerStack=61]="RuleLayerStack",e[e.RuleMaxSlopeRisingEdge=62]="RuleMaxSlopeRisingEdge",e[e.RuleMaxSlopeFallingEdge=63]="RuleMaxSlopeFallingEdge",e[e.RuleSupplyNets=64]="RuleSupplyNets",e[e.RuleMaxMinHoleSize=65]="RuleMaxMinHoleSize",e[e.RuleTestPointStyle=66]="RuleTestPointStyle",e[e.RuleTestPointUsage=67]="RuleTestPointUsage",e[e.RuleUnconnectedPin=68]="RuleUnconnectedPin",e[e.RuleSMDToPlane=69]="RuleSMDToPlane",e[e.RuleSMDNeckDown=70]="RuleSMDNeckDown",e[e.RuleLayerPair=71]="RuleLayerPair",e[e.RuleFanoutControl=72]="RuleFanoutControl",e[e.RuleMaxMinHeight=73]="RuleMaxMinHeight",e[e.RuleDifferentialPairs=74]="RuleDifferentialPairs",e[e.RuleHoleToHoleClearance=75]="RuleHoleToHoleClearance",e[e.RuleMinimumSolderMaskSliver=76]="RuleMinimumSolderMaskSliver",e[e.RuleSilkToSolderMaskClearance=77]="RuleSilkToSolderMaskClearance",e[e.RuleSilkToSilkClearance=78]="RuleSilkToSilkClearance",e[e.RuleNetAntennae=79]="RuleNetAntennae",e[e.FromTo=80]="FromTo",e[e.DifferentialPair=81]="DifferentialPair",e[e.Violation=82]="Violation",e[e.Board=83]="Board",e[e.BoardOutline=84]="BoardOutline",e[e.Group=85]="Group",e[e.Clipboard=86]="Clipboard",e[e.SplitPlane=87]="SplitPlane",e[e.EmbeddedBoard=88]="EmbeddedBoard",e[e.Region=89]="Region",e[e.ComponentBody=90]="ComponentBody",e[e.RuleAssyTestPointStyle=91]="RuleAssyTestPointStyle",e[e.RuleAssyTestPointUsage=92]="RuleAssyTestPointUsage",e[e.OwnerDraw=93]="OwnerDraw",e[e.DrillTable=94]="DrillTable",e[e.ViaStitching=95]="ViaStitching",e[e.LayerStackTable=96]="LayerStackTable",e[e.Viewport=97]="Viewport",e[e.BoardRegion=98]="BoardRegion",e[e.RuleSilkToBoardRegion=99]="RuleSilkToBoardRegion",e[e.AccordionObject=100]="AccordionObject",e[e.OLEObject=101]="OLEObject",e[e.RuleSMDPADEntry=102]="RuleSMDPADEntry",e[e.ViaShielding=103]="ViaShielding",e[e.RuleUnpouredPolygon=104]="RuleUnpouredPolygon",e[e.MultilineText=105]="MultilineText",e[e.RuleBoardOutlineClearance=106]="RuleBoardOutlineClearance",e[e.CoverlayPoly=107]="CoverlayPoly",e[e.PinPair=108]="PinPair",e[e.RuleBackDrilling=109]="RuleBackDrilling",e[e.StackedVia=110]="StackedVia",e[e.StaggeredVia=111]="StaggeredVia",e[e.Last=112]="Last"}(a||(a={})),function(e){e[e.eNoShape=0]="eNoShape",e[e.eRounded=1]="eRounded",e[e.eRectangular=2]="eRectangular",e[e.eOctagonal=3]="eOctagonal",e[e.eCircleShape=4]="eCircleShape",e[e.eArcShape=5]="eArcShape",e[e.eTerminator=6]="eTerminator",e[e.eRoundRectShape=7]="eRoundRectShape",e[e.eRotatedRectShape=8]="eRotatedRectShape",e[e.eRoundedRectangular=9]="eRoundedRectangular"}(s||(s={}))},function(e,t,n){"use strict";t.a=function(){return["","","-","-","-","-","","",""].reduce((function(e,t){return e+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+t}))}},function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return h})),n.d(t,"e",(function(){return g}));var r=n(137),i=n.n(r),o=n(6),a=n(138),s=n(206),u=function(e){var t=e.match(/\((.*?)\)/);if(t&&t[1])return parseInt(t[1],10)},c=o.m||!o.z,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.reduce((function(e,t){return e[t.id]=t,e}),{});return Object.values(t)},f=function(e){return Array.isArray(e)&&e.length?e.map((function(e){return{id:e.id,username:e.name,name:e.fullName||e.name,email:e.email,mentionType:1===e.suggestionType?i.a.group:i.a.user,avatarUrl:e.ProfilePicture?Object(a.a)(e.ProfilePicture):""}})):[]},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.isArray(e)&&e.length?e.map((function(e){return{id:e.UserId||e.Id,globalUserId:e.GlobalUserId,username:e.UserName||e.Name||e.Email,name:e.Name||"".concat(e.FirstName," ").concat(e.LastName),email:e.Email,mentionType:e.MentionType||t,avatarUrl:e.ProfilePicture?Object(a.a)(e.ProfilePicture):""}})):[]},h=function(e){return Array.isArray(e)&&e.length?e.map((function(e){var t,n,r;r="LSM"===(null===(t=e.Properties)||void 0===t?void 0:t.DocumentType)?"Lsm":e.Data.split("|").find((function(e){return e.includes("DocumentUniqueID")}));var i={packageId:e.EntityId,id:e.Guid,threadNumber:e.ThreadNumber||"#",docId:r?r.replace("DocumentUniqueID=",""):null,drawing:e.Drawing?Object(s.a)(e.Drawing,""):"",modifiedBy:e.ModifiedBy,assignedTo:e.AssignedTo,screenshotUrl:e.OriginalStateScreenshotUrl||"",editable:e.ModifiedBy===o.u,resolved:0===e.Status,resolvable:!0,comments:Array.isArray(e.Comments)&&e.Comments.length?p(e.Comments,0===e.Status):[],properties:e.Properties?m(e.Properties):null,data:e.Data,threadType:(null==e||null===(n=e.Properties)||void 0===n?void 0:n.Type)||"",status:e.Status};return c||(i.taskInfo=e.taskInfo&&e.taskInfo.userDetailsInfo?e.taskInfo:{userDetailsInfo:null,taskName:null}),i})):[]},p=function(e,t){return e.map((function(e){return{id:e.Guid,date:c&&e.CreatedAt?new Date(e.CreatedAt):u(e.CreatedAt),isEdited:y(e),text:e.Text,resolved:t,author:v(e.Author),editable:e.Author&&e.Author.UserId===o.u,mentions:e.Mentions}}))},m=function(e){return{activity:e.Activity,autogeneratedComments:e.AutogeneratedComments,taskId:e.TaskId,type:e.Type,releaseGuid:e.ReleaseGuid||"",documentType:e.DocumentType,LwTaskHrid:e.LwTaskHrid,LwTaskId:e.LwTaskId,LwTaskPriority:e.LwTaskPriority,LwTaskStatus:e.LwTaskStatus,coords:{iconOffsetX:e.IconOffsetX||0,iconOffsetY:e.IconOffsetY||0,originOffsetX:e.OriginOffsetX||0,originOffsetY:e.OriginOffsetY||0}}},v=function(e){return e?{id:e.UserId,name:e.FullName,proficePicture:e.ProfilePicture,avatarUrl:e.ProfilePicture?Object(a.a)(e.ProfilePicture):""}:{id:"",name:"User",avatarUrl:""}},y=function(e){var t=u(null==e?void 0:e.ModifiedAt);return t&&t>u(null==e?void 0:e.CreatedAt)},g=function(e){return e.map((function(e){return{Name:e.name,Value:e.id}}))}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(82),i=n(209);e.exports=n(81)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(246),i=n(161);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";var r=n(12),i=n(9);function o(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}var a=0,s=null,u=function(e){e.headers.__RequestVerificationToken=Object(i.c)("data-csrf-token","")};t.a=function(e){return e.interceptors.request.use((function(e){var t=e._withVerification;if(void 0!==t&&t){["post","put","patch","delete"].includes(null==e?void 0:e.method)&&u(e)}return e})),e.interceptors.response.use(null,function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var i,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(412===(null==n||null===(i=n.response)||void 0===i?void 0:i.status)&&a<1)){t.next=19;break}return o=n.config,t.prev=2,a+=1,t.next=6,new Promise((function(e,t){r.a.emit("csrf-token:requestUpdate"),r.a.once("csrf-token:update",e),s=setTimeout((function(){t(new Error("[viewer] csrf-token:update timeout"))}),15e3)}));case 6:return clearTimeout(s),u(o),t.next=10,e.request(o);case 10:return c=t.sent,a=0,t.abrupt("return",c);case 15:return t.prev=15,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return",Promise.reject(n));case 19:return t.abrupt("return",Promise.reject(n));case 20:case"end":return t.stop()}}),t,null,[[2,15]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(e){o(a,r,i,s,u,"next",e)}function u(e){o(a,r,i,s,u,"throw",e)}s(void 0)}))});return function(e){return n.apply(this,arguments)}}()),e}},function(e,t,n){"use strict";n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return _}));var r=n(99),i=n(92),o=n(51),a=n(52),s=n(102),u=n(101),c=n(46),l=n(203),f=n(135),d=n(157),h=n(80);function p(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=y((function e(t,n){g(this,e),b(this,"boxMin",void 0),b(this,"boxMax",void 0),this.boxMin=t,this.boxMax=n})),_=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1?arguments[1]:void 0,u=arguments.length>2?arguments[2]:void 0,p=arguments.length>3?arguments[3]:void 0,m=arguments.length>4?arguments[4]:void 0,v=arguments.length>5?arguments[5]:void 0,y=arguments.length>6?arguments[6]:void 0;g(this,e),b(this,"resized",new i.a),b(this,"beforeRender",new i.a),b(this,"rendered",new i.a),b(this,"zoomToFitChanged",new i.a),b(this,"centerChanged",new i.a),b(this,"background",void 0),b(this,"hiddenNodes",[]),b(this,"layers",void 0),b(this,"polygonStringBuilder",void 0),b(this,"sceneRenderOptions",void 0),b(this,"module",void 0),b(this,"commonCore",void 0),b(this,"scene",void 0),b(this,"rootNode",void 0),b(this,"viewport_",void 0),b(this,"renderPath",void 0),b(this,"sceneMustDisposed",!1),b(this,"disposed",!1),b(this,"defZoom",7),b(this,"viewportZoom_",this.defZoom),b(this,"viewportCenter_",[0,0]),b(this,"viewportFlipped_",!1),b(this,"materials",void 0),b(this,"materialMap",void 0),b(this,"antiAliasingMethod",r.b.None),b(this,"fitFixedView_",void 0),b(this,"id_",void 0),b(this,"parentScene_",void 0),b(this,"logger",h.a.createLogger("Scene")),b(this,"clonedPolygons",new Map),this.id_=null!=y?y:"Default_Scene",v&&(this.parentScene_=v,this.parentScene_.resized.on((function(e){return t.resize(e.width,e.height)}))),this.background=l.a.BackgroundColor,this.logger.LogInfo("Resolve graphite module.");var w=(new d.a).init();if(this.module=w.module,this.commonCore=w.commonCore,this.logger.LogInfo("Initializing scene."),this.layers=o||a.a.createLayerArray(1),null!=n)return this.scene=n,void(this.rootNode=this.scene.GetRootNode().GetChild(0));this.sceneRenderOptions=p||c.h.createRenderOptions(this.layers),this.materials=u||[new s.b],this.materialMap=new s.d(this.materials);var _=new a.d(this.layers);this.scene=this.module.CreateScene(this.commonCore,this.materialMap,_),this.rootNode=this.scene.GetRootNode().AddChild(this.materialMap,_),this.sceneMustDisposed=!0,m&&(this.polygonStringBuilder=new f.c(m,this))}return y(e,[{key:"viewportZoom",get:function(){return this.isRoot?this.viewportZoom_:this.parentScene_.viewportZoom}},{key:"viewportCenter",get:function(){return this.isRoot?this.viewportCenter_:this.parentScene_.viewportCenter}},{key:"viewportFlipped",get:function(){return this.isRoot?this.viewportFlipped_:this.parentScene_.viewportFlipped}},{key:"viewport",get:function(){return this.isRoot?this.viewport_:this.parentScene_.viewport}},{key:"fitFixedView",get:function(){return this.isRoot?this.fitFixedView_:this.parentScene_.fitFixedView}},{key:"id",get:function(){return this.id_}},{key:"parentScene",get:function(){return this.parentScene_}},{key:"isRoot",get:function(){return null==this.parentScene}},{key:"antialiasing",get:function(){return this.antiAliasingMethod},set:function(e){this.scene.GetRenderSmoother().SelectMethod(e),this.antiAliasingMethod=e}},{key:"layerMap",get:function(){return this.rootNode.GetLayerMap()}},{key:"canvasHeight",get:function(){return this.module.canvas?this.module.canvas.height:300}},{key:"canvasWidth",get:function(){return this.module.canvas?this.module.canvas.width:300}},{key:"needRender",get:function(){return this.scene.NeedRender()}},{key:"getSystemScene",value:function(){return this.scene}},{key:"cameraController",get:function(){return this.viewport.DefaultCameraController()}},{key:"clear",value:function(e){e?this.background=e:e=this.background,this.renderPath&&this.commonCore.Clear(e)}},{key:"renderOptions",get:function(){return this.sceneRenderOptions},set:function(e){this.sceneRenderOptions=e,this.viewport.SetDirty(!0)}},{key:"getNodeItemById",value:function(e){return this.rootNode.GetNodeItemById(e)}},{key:"getNodeItemsByIds",value:function(e){return this.rootNode.GetNodeItemsByIds(e)}},{key:"getLayersCount",value:function(){return this.layers?this.layers.length:0}},{key:"setRectangle",value:function(e,t,n,r){this.viewport.SetRectangle([e,t,n,r]),this.resized.emit(new o.e(n,r))}},{key:"getRectangle",value:function(){return this.viewport.GetRectangle()}},{key:"getSize",value:function(){var e=this.getRectangle();return new o.e(e[2],e[3])}},{key:"resize",value:function(e,t){this.viewport.SetRectangle([0,0,e,t]),this.scene.Resize(e,t),this.resized.emit(new o.e(e,t))}},{key:"getForward",value:function(){return this.viewport.GetForward()}},{key:"getEye",value:function(){return this.viewport.GetEye()}},{key:"getAt",value:function(){return this.viewport.GetAt()}},{key:"getUp",value:function(){return this.viewport.GetUp()}},{key:"getView",value:function(){return this.viewport.GetView()}},{key:"getInverseView",value:function(){return this.viewport.GetInverseView()}},{key:"addPolygon",value:function(e){return this.scene.AddPolygon(e)}},{key:"addPolygonContours",value:function(e){return this.scene.AddPolygonContours(e)}},{key:"getPolygonGenerator",value:function(){return this.scene.GetPolygonGenerator()}},{key:"getPolygonByID",value:function(e){return this.scene.GetPolygonByID(e)}},{key:"addMesh",value:function(e){return this.scene.AddMesh(e)}},{key:"addItem",value:function(e,t,n,r,i,o,s){n=n||[],r=r||[],i=i||[],o=o||[],s=s||[];try{var u=new a.c(e,t,n,r,i,o),l=new c.g([u],s);return this.rootNode.AddItem(l)}catch(e){return this.logger.LogError("Add item error.",e),null}}},{key:"addNode",value:function(e,t){return this.addItem(e,t.unis,t.arcs,t.polygons,t.labels,t.lines,t.meshes)}},{key:"addNodeItem",value:function(e){return this.rootNode.AddItem(e)}},{key:"removeItem",value:function(e){e&&(this.getNodeItemById(e.GetId())&&this.rootNode.DeleteItem(e))}},{key:"deleteItem",value:function(e){e&&this.getNodeItemById(e.GetId())&&this.rootNode.DeleteItem(e)}},{key:"deleteItems",value:function(e){this.rootNode.DeleteItems(e)}},{key:"deleteItemsByIds",value:function(e){this.rootNode.DeleteItemsByIds(e)}},{key:"updateRootNode",value:function(e){this.rootNode=e}},{key:"updateMaterials",value:function(e){e&&(this.materials=e),this.materialMap=new s.d(this.materials),this.rootNode.UpdateMaterialMap(this.materialMap)}},{key:"updateMaterialMap",value:function(e){null!=e&&(this.materialMap=e),this.rootNode.UpdateMaterialMap(this.materialMap)}},{key:"setMaterials",value:function(e){this.materials=e.slice();var t={Name:this instanceof c.k?"3DMaterials":"2DMaterials",Materials:this.materials,CustomData:""};this.materialMap=t,this.rootNode.SetMaterialMap(t)}},{key:"getMaterials",value:function(){return this.materials}},{key:"setMaterialMap",value:function(e){this.materials&&0!=this.materials.length||(this.materials=e.Materials.slice()),this.materialMap=e,this.rootNode.SetMaterialMap(e)}},{key:"getMaterialMap",value:function(){return this.rootNode.GetMaterialMap()}},{key:"toArrayMaterials",value:function(e){for(var t=[],n=e.GetMaterialsCount(),r=0;r<n;r++){var i=s.b.Clone(e.GetMaterial(r));t[r]=i}return t}},{key:"addMaterial",value:function(e){var t=this.materials?this.materials:this.toArrayMaterials(this.getMaterialMap()),n=t.push(e)-1;return this.materials=t,this.setMaterials(this.materials),this.emitAddedMaterial(n,t),n}},{key:"removeMaterial",value:function(e){var t=this.materials?this.materials:this.toArrayMaterials(this.getMaterialMap()),n=t.findIndex((function(t){return t===e}));n>=0&&t.splice(n,1),this.setMaterials(this.materials),this.emitRemovedMaterial(e,this.materials)}},{key:"setZoomRatio",value:function(e){var t=this.getZoom()*e;this.setZoom(t)}},{key:"setDirty",value:function(e){this.viewport.SetDirty(e)}},{key:"getBoxForLayers",value:function(){var e=this.renderOptions.map((function(e){return e.layer}));return this.rootNode.GetBoxForLayers(e)}},{key:"getBoundingBoxForItem",value:function(e){return this.rootNode.GetItemBBox(e)}},{key:"cloneNodeItemToLayerToAnotherScene",value:function(e,t,n,r,i){var o=this;if(!t)return t;for(var s=[],l=function(){if(r<0)return null;var t=e.getMaterialMap().GetMaterial(r);return t?t.Diffuse:null}(),f=function(i){var c,f,d,h,m=t.GetLayerGeometry(i);if(!m)return"continue";var v,y=(v=m.GetLayerIndex(),n<0?new a.c(v):(0===s.length&&s.push(new a.c(n)),s[0])),g=Array.from(Array(m.GetArcsCount()).keys()).map((function(e){return m.GetArc(e)})).filter((function(e){return e})).map((function(e){return new u.a(e.center,e.angles,e.radius,e.width,r<0?e.material:r,e.z)}));y.arcsArray?(c=y.arcsArray).push.apply(c,p(g)):y.arcsArray=g;var b=Array.from(Array(m.GetLinesCount()).keys()).map((function(e){return m.GetLine(e)})).filter((function(e){return e})).map((function(e){return new u.c(e.from,e.to,null!=l?l:e.color,e.width,e.dash)}));y.linesArray?(f=y.linesArray).push.apply(f,p(b)):y.linesArray=b;var w=Array.from(Array(m.GetPolysCount()).keys()).map((function(e){return m.GetPoly(e)})).filter((function(e){return e})).map((function(t){return new u.f(o.clonePolygon(e,t.polygon),t.position,r<0?t.material:r,t.z,t.angle,t.scale)}));y.polygonsArray?(d=y.polygonsArray).push.apply(d,p(w)):y.polygonsArray=w;var _=Array.from(Array(m.GetUnisCount()).keys()).map((function(e){return m.GetUni(e)})).filter((function(e){return e})).map((function(e){return new u.g(e.position,e.direction,e.size,e.radius,r<0?e.material:r,e.z)}));y.unisArray?(h=y.unisArray).push.apply(h,p(_)):y.unisArray=_},d=0;d<t.GetLayersCount();d++)f(d);if(i)throw new Error("Not Implemented");return e.rootNode.AddItem(new c.g(s,[]))}},{key:"cloneNodeItemToLayer",value:function(e,t,n,r,i){return i&&i!==this?this.cloneNodeItemToLayerToAnotherScene(i,e,t,n,!1):this.rootNode.CloneToLayer(e,t,n,r)}},{key:"cloneNodeItemToMultiLayers",value:function(e,t,n){return this.rootNode.CloneToMultiLayers(e,t,n)}},{key:"cloneNodeItemsToMultiLayers",value:function(e,t,n){return this.rootNode.CloneNodesToMultiLayers(e,t,n)}},{key:"cloneNodeItemsToMultiLayersByIds",value:function(e,t,n){return this.rootNode.CloneNodesToMultiLayersByIds(e,t,n)}},{key:"setNodeItemsVisibility",value:function(e,t){this.rootNode.SetNodeItemsVisibility(e,t),this.hiddenNodes=this.hiddenNodes.filter((function(t){return!e.includes(t)})),t||(this.hiddenNodes=[].concat(p(this.hiddenNodes),p(e)))}},{key:"dispose",value:function(){this.disposed||(this.sceneMustDisposed&&this.scene.delete(),this.disposed=!0)}},{key:"emitAddedMaterial",value:function(e,t){var n=this instanceof c.k?"GraphiteEngine:addedMaterial3d":"GraphiteEngine:addedMaterial2d";h.a.bus.emit(n,e,t)}},{key:"emitRemovedMaterial",value:function(e,t){var n=this instanceof c.k?"GraphiteEngine:removedMaterial3d":"GraphiteEngine:removedMaterial2d";h.a.bus.emit(n,e,t)}},{key:"clonePolygon",value:function(e,t){var n=this.clonedPolygons.get(e.id);n||(n=new Map,this.clonedPolygons.set(e.id,n));var r=n.get(t);if(r)return r;var i=this.scene.GetPolygonByID(t),o=new u.d;return i&&(o.outlineIndices=p(i.GetOutlineIndices()),o.indices=p(i.GetFillIndices()),o.vertices=p(i.GetVertices().map((function(e){return e.position})))),r=e.addPolygon(o),n.set(t,r),r}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}));var a=function(){function e(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];r(this,e),o(this,"Diffuse",void 0),o(this,"Hatching",void 0),o(this,"Bordered",void 0),o(this,"OnTop",void 0),o(this,"GrayscaleMesh",void 0),this.Diffuse=t||[0,0,0,255],this.Hatching=n||0,this.Bordered=i||!1,this.OnTop=a,this.GrayscaleMesh=s}var t,n,a;return t=e,a=[{key:"Clone",value:function(t){return new e(t.Diffuse,t.Hatching,t.Bordered)}},{key:"create",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new e(t,n,r,i,o)}},{key:"toArrayMaterials",value:function(t){for(var n=[],r=t.GetMaterialsCount(),i=0;i<r;i++){var o=e.Clone(t.GetMaterial(i));n[i]=o}return n}}],(n=null)&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";var r=n(54);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){"use strict";n(90)},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a})),n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return C})),n.d(t,"g",(function(){return O}));var a=i((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"fontSymbols",{}),o(this,"fontDataView",void 0)}));function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o(a,"cachedFont",void 0);var f=u((function e(t,n){c(this,e),l(this,"offset",void 0),l(this,"advance",void 0),this.offset=t,this.advance=n})),d=function(){function e(){c(this,e),l(this,"fontData",new a)}return u(e,[{key:"getFontData",value:function(){return this.fontData}},{key:"isLoaded",get:function(){return!(!this.fontData.fontSymbols||!this.fontData.fontDataView)}},{key:"requestPolygonFont",value:function(e,t){var n=this;fetch(e,{method:"GET"}).then((function(e){if(!e.ok)throw new Error("PolygonFont load HTTP error, status = "+e.status);return e.arrayBuffer()})).then((function(e){n.loadPolygonFont(e),console.log("Font loaded."),t(n.fontData)}))}},{key:"loadPolygonFont",value:function(e){this.fontData.fontDataView=new DataView(e);var t=this.fontData.fontDataView.getUint32(0,!0);console.log("Symbols: "+t);for(var n=0;n<t;++n){var r=this.fontData.fontDataView.getUint32(4+12*n,!0),i=String.fromCharCode(r),o=this.fontData.fontDataView.getUint32(8+12*n,!0),a=this.fontData.fontDataView.getFloat32(12+12*n,!0);this.fontData.fontSymbols[i]=new f(o,a)}}}]),e}(),h=n(99),p=n(101);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y,g=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"scene",void 0),v(this,"fontSymbols",void 0),v(this,"fontDataView",void 0),v(this,"module",void 0),t.fontDataView&&t.fontSymbols||console.error("Font data not initialized.");var r=(new h.c).init();this.module=r.module,this.scene=n,this.fontSymbols=t.fontSymbols,this.fontDataView=t.fontDataView}var t,n,r;return t=e,(n=[{key:"getStringWidth",value:function(e,t){for(var n=0,r=0;r<e.length;++r){var i=e.charAt(r),o=this.fontSymbols[i];o&&(n+=o.advance*t.size*t.spacing)}return n}},{key:"createPolygonString",value:function(e,t){var n=[];t.flipped&&(t.size=-t.size,t.height=-t.height);var r=Math.sin(t.angle),i=Math.cos(t.angle);if(t.align!=y.Right){var o=this.getStringWidth(e,t);t.x+=.5*(t.align-1)*o*i,t.y+=.5*(t.align-1)*o*r}var a=t.baseline/100;t.x-=a*t.size*t.height*1.431641*-r,t.y-=a*t.size*t.height*1.431641*i;for(var s=0;s<e.length;++s){var u=this.createPolygonSymbol(e.charAt(s),t);u&&n.push(u)}return n}},{key:"pixelsToUnits",value:function(e){return e*this.scene.getZoom()/this.module.canvas.height}},{key:"unitsToPixels",value:function(e){return e*this.module.canvas.height/this.scene.getZoom()/2}},{key:"createPolygonSymbol",value:function(e,t){var n=this.fontSymbols[e];if(null==n)return console.log("Symbol "+e+" ("+e.charCodeAt(0)+") not found"),null;var r=this.scene.getPolygonGenerator().GetPolygon(e.charCodeAt(0));if(0==r){var i=n.offset,o=this.fontDataView.getUint32(i,!0);if(0!=o){var a=[];i+=4;for(var s=0;s<o;++s)a.push([this.fontDataView.getFloat32(i+0,!0),this.fontDataView.getFloat32(i+4,!0)]),i+=8;var u=this.fontDataView.getUint32(i,!0),c=[];i+=4;for(var l=0;l<u;++l)c.push(this.fontDataView.getUint32(i,!0)),i+=4;var f=this.fontDataView.getUint32(i,!0),d=[];i+=4;for(var h=0;h<f;++h)d.push(this.fontDataView.getUint32(i,!0)),i+=4;r=this.scene.getPolygonGenerator().GeneratePolygon(e.charCodeAt(0),a,c,d)}}var m=t.angle,v=Math.sin(m),y=Math.cos(m),g=[t.x,t.y];t.x+=n.advance*t.size*t.spacing*y,t.y+=n.advance*t.size*t.spacing*v;var b=[t.size,t.size*t.height];return 0==r?null:new p.f(r,g,t.material,[0,0],m,b)}}])&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(y||(y={}));var O,C=w((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:y.Right,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]&&arguments[9],f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:O.Alphabetic;_(this,e),this.x=t,this.y=n,this.size=r,this.height=i,this.spacing=o,this.angle=a,this.align=s,this.layer=u,this.material=c,this.flipped=l,this.baseline=f}));!function(e){e[e.Top=100]="Top",e[e.Middle=50]="Middle",e[e.Alphabetic=0]="Alphabetic",e[e.Bottom=-27]="Bottom"}(O||(O={}))},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==n(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"customMentionRegExp",(function(){return a})),n.d(t,"matchEmail",(function(){return s})),n.d(t,"getViewKey",(function(){return u})),n.d(t,"makeDictionary",(function(){return l})),n.d(t,"commentToText",(function(){return d})),n.d(t,"textToEditHtml",(function(){return h})),n.d(t,"textToPreviewHtml",(function(){return p}));var r=/(\b(https?|ftp|file|dxp):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/gi,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"link";return(e||"").replace(r,'<a class="'.concat(t,'" target="_blank" href="$1">$1</a>'))},o=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/gim,a=/@(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))\s/gim,s=function(e){return e.match(o)||[]},u=function(e){var t=e.name;return"@".concat(void 0===t?"":t)},c=function(e){return 1===e.mentionType?"@".concat(e.email):3===e.mentionType?e.email:"{@".concat(e.name,"}")},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.reduce((function(e,n){if(void 0!==n.email&&""===n.email)return e;var r=t?u(n):c(n),i=t?c(n):u(n);return e.map.set(r.toLowerCase(),i),e.keys.push(r.replace(/\./g,"\\.").replace(/\+/g,"\\+")),e}),{map:new Map,keys:[]}),r=n.map,i=n.keys;return r.size?{map:r,regex:new RegExp("(".concat(i.join("|"),")"),"gmi")}:null},f=function(e,t){return t?e.replace(t.regex,(function(e){if(e){var n=t.map.get(e.toLowerCase());return'<span class="full-match" data-mention="'.concat(n,'">').concat(n,"</span>")}})):e},d=function(e,t){var n=l(t,!0);return n?e.replace(n.regex,(function(e){return n.map.get(e.toLowerCase())})):e},h=function(e,t){var n=l(t);return f(e,n)},p=function(e){for(var t=i(e),n=s(e).map((function(e){return{email:e,name:e,mentionType:1}})),r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];if(n.length){var u=l(n);o.push(u)}return o.filter(Boolean).reduce((function(e,t){return f(e,t)}),t)}}])},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==n(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"mentionStrings",(function(){return r})),t.default={user:1,group:2,system:3};var r={user:"User",group:"Group",system:"System"}}])},function(e,t,n){"use strict";var r=n(6);t.a=function(e){return r.C||e?r.C.replace("{name}",e).replace("{size}","px48x48"):""}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var r,i=window.__CORE__;!function(e){e[e.Json=0]="Json",e[e.Binary=1]="Binary",e[e.BinaryZip=2]="BinaryZip",e[e.SceneBinZipStream=3]="SceneBinZipStream",e[e.SceneBinZipFile=4]="SceneBinZipFile"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(47);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t,n){i(this,e),s(this,"name",void 0),s(this,"transports",void 0),s(this,"LogTrace",this.log.bind(this,r.a.Trace)),s(this,"LogDebug",this.log.bind(this,r.a.Debug)),s(this,"LogInfo",this.log.bind(this,r.a.Info)),s(this,"LogWarn",this.log.bind(this,r.a.Warn)),s(this,"LogError",this.log.bind(this,r.a.Error)),s(this,"LogCritical",this.log.bind(this,r.a.Critical)),this.name=t,this.transports=n}return a(e,[{key:"log",value:function(e,t,n){var i={name:this.name,timestamp:Date.now(),level:r.a[e],message:t,error:n};this.transports.filter((function(t){return e>=t.level})).forEach((function(e){return e.log(i)}))}}]),e}(),c=function(){function e(){i(this,e)}return a(e,null,[{key:"registerTransport",value:function(t){e.transports.push(t)}},{key:"createLogger",value:function(t){return new u(t,e.transports)}}]),e}();s(c,"transports",[]),t.b=c.createLogger},function(e,t,n){"use strict";t.a=function(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var r=function(){var e=this.$createElement;return(this._self._c||e)(this.tag,{tag:"component"},[this._v("\n  "+this._s(this.displayValue)+"\n")])};r._withStripped=!0;var i=new Map([["DKK","kr"],["EUR","€"],["GBP","£"],["INR","₹"],["JPY","¥"],["KRW","₩"],["PLN","zł"],["RUB","₽"],["SEK","kr"],["USD","$"],["VND","₫"]]),o=function(e,t){var n=parseFloat(e||"0"),r=function(e,t){if(isNaN(e))return 0;var n=e.toString().split(".");return n[1]?1*Number(n.join(".")+(n[1].length>=t?"1":"")).toFixed(t):e}(n,n>1?2:5);return t?i.has(t)?"".concat(i.get(t)).concat(r):"".concat(r," ").concat(t):"".concat(r)},a={props:{code:{type:String,required:!0,validator:function(e){return 3===e.length||2===e.length}},tag:{type:String,default:"span"},value:{type:String,required:!0,validator:function(e){return/^\d+(\.[\d]+)?$/.test(e)}}},computed:{displayValue:function(){return o(this.value,this.code)}}},s=n(0),u=Object(s.a)(a,r,[],!1,null,null,null);u.options.__file="WebUI/VueJsComponentLibrary/src/components/Money/App.vue";var c=u.exports},function(e,t,n){"use strict";var r=n(1),i=n(35),o=function e(t,n){if(!Object(i.a)(t))return n;var r=function e(t){if(!Object(i.a)(t)){var n=document.querySelector("html");return n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight?window:null}var r=window.getComputedStyle(t).getPropertyValue("overflow"),o=r&&r.split(" ").some((function(e){return"auto"===e||"scroll"===e}));return(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)&&o?t:e(t.parentNode)}(t);return r?(n.push(r),e(r.parentNode,n)):n},a=function(e){var t=[];return o(e.parentNode,t),t},s=function(e){var t=a(e).map((function(e){return function(e){var t={x:0,y:0},n=function(e){return e.currentTarget===window?window.scrollTo(t.x,t.y):(e.currentTarget.scrollTop=t.y,e.currentTarget.scrollLeft=t.x),e.preventDefault(),!1};return{enable:function(){return e.removeEventListener("scroll",n)},disable:function(){t.y=e.scrollTop,t.x=e.scrollLeft,e.addEventListener("scroll",n)}}}(e)}));return t.length?{disable:function(){t.forEach((function(e){return e.disable()}))},enable:function(){t.forEach((function(e){return e.enable()}))}}:null};t.a={inserted:function(e,t,n){var i=t.arg,o=t.modifiers,a=n.context;e.dataset.afsDropdownControl=i;var u=o.open,c=o.close,l=null;e.addEventListener("click",(function(){if(l=r.b.get(i)){var t=s(e),n=function e(){l.close(),window.removeEventListener("scroll",e)};u?l.open(e):c?l.close():l.toggle(e),t?window.addEventListener("scroll",n):window.removeEventListener("scroll",n)}}),!0),a.$on("hook:beforeDestroy",(function(){l&&l.close()}))}}},function(e,t,n){"use strict";t.a=function(e){return Array.isArray(e)&&e.length?e.map((function(e){return{id:e.id,name:e.fileName,order:e.order||0}})):[]}},function(e,t,n){var r=n(146);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(247),i=n(209),o=n(129),a=n(176),s=n(127),u=n(440),c=Object.getOwnPropertyDescriptor;t.f=n(81)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(11),i=n(77),o=n(54);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},function(e,t,n){var r=n(145),i=n(246),o=n(104),a=n(67),s=n(456);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,f=6==e,d=5==e||f,h=t||s;return function(t,s,p){for(var m,v,y=o(t),g=i(y),b=r(s,p,3),w=a(g.length),_=0,O=n?h(t,w):u?h(t,0):void 0;w>_;_++)if((d||_ in g)&&(v=b(m=g[_],_,y),e))if(n)O[_]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return _;case 2:O.push(m)}else if(l)return!1;return f?-1:c||l?l:O}}},function(e,t,n){"use strict";n(95)},function(e,t,n){"use strict";n(96)},function(e,t,n){"use strict";n(97)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=c(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return p}));var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(c,e);var t,n,r,o=f(c);function c(){return a(this,c),o.apply(this,arguments)}return t=c,r=[{key:"sortDesignators",value:function(e,t){return e.designator.localeCompare(t.designator,void 0,{numeric:!0,sensitivity:"base"})}}],(n=[{key:"push",value:function(e){return u(h(c.prototype),"push",this).call(this,e)}},{key:"setDefaultSort",value:function(){return u(h(c.prototype),"setSort",this).call(this,c.sortDesignators)}},{key:"toString",value:function(){return this.toArray().map((function(e){return e.designator})).join(", ")}},{key:"getItem",value:function(e){return this.toArray().find((function(t){return t.id===e}))}},{key:"findItem",value:function(e){var t=e.schId,n=e.hash,r=e.subParts,o=[t||n].concat(i((null==r?void 0:r.map((function(e){return e.schId})))||[]));return this.toArray().find((function(e){return e.uniqueIdName.includes("@")?o.some((function(t){return e.uniqueIdName.startsWith(t)})):o.includes(e.uniqueIdName)}))}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n(57).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r="fabricationId",i="gerberId"},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(15),i=n(28),o=n(80);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m={where:function(e){return["Resolve"===e.type]},to:"PENDING"},v={IDLE:[m],PENDING:[m,{where:function(e){return["Complete"===e.type]},to:"COMPLETED"},{where:function(e){return["Error"===e.type]},to:"CRASHED",error:!0}]},y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(h,e);var t,n,r,a=l(h);function h(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),p(d(e=a.call(this,"IDLE",v)),"module",void 0),p(d(e),"commonCore",void 0),p(d(e),"isInitialized",!1),p(d(e),"onPending",function(){var t,n=(t=regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.resolveModulePathByUrl("./js/graphite.js");case 3:return o.a.bus.emit("GraphiteEngine:afterGraphiteLoad","./js/graphite.js"),t.prev=4,t.next=7,Promise.resolve(window.GraphiteModule);case 7:e.module=t.sent,window.GraphiteModule=e.module,o.a.bus.emit("GraphiteEngine:beforeGraphiteInit",e.module),e.commonCore=e.module.Initialize(),e.module.LoadComplete=!0,e.isInitialized=!0,o.a.bus.emit("GraphiteEngine:afterGraphiteInit",{module:e.module,commonCore:e.commonCore}),e.dispatch(new i.b("Complete",{graphiteResolver:d(e)})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(4),"string"==typeof t.t0?e.dispatch(new i.a("Load Graphite module error. "+t.t0)):e.dispatch(new i.a("Load Graphite module error.",t.t0));case 20:t.next=25;break;case 22:t.prev=22,t.t1=t.catch(0),"string"==typeof t.t1?e.dispatch(new i.a("Resolve Graphite module error. "+t.t1)):e.dispatch(new i.a("Resolve Graphite module error.",t.t1));case 25:case"end":return t.stop()}}),t,null,[[0,22],[4,17]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){s(o,r,i,a,u,"next",e)}function u(e){s(o,r,i,a,u,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}()),window["GraphiteResolver.instance"]?f(e,window["GraphiteResolver.instance"]):(e.on("PENDING",e.onPending),window["GraphiteResolver.instance"]=d(e),e)}return t=h,(n=[{key:"resolveModulePathByUrl",value:function(e){return new Promise((function(t,n){o.a.bus.emit("GraphiteEngine:beforeGraphiteLoad",e);var r=document.createElement("script");r.src=e,r.async=!0,r.onload=t,r.onerror=n,document.getElementsByTagName("body")[0].appendChild(r)}))}},{key:"init",value:function(){var e=this;return this.isInitialized||setTimeout((function(){return e.dispatch(new i.b("Resolve",{moduleName:"GraphiteModule"}))})),this}}])&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),h}(r.a);p(y,"instance",void 0)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}));var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,e),o(this,"height",void 0),o(this,"width",void 0),this.width=t,this.height=n}var t,n,a;return t=e,a=[{key:"empty",value:function(){return new e}},{key:"add",value:function(t,n){return new e(t.width+n.width,t.height+n.height)}},{key:"subtract",value:function(t,n){return new e(t.width-n.width,t.height-n.height)}},{key:"truncate",value:function(t){return new e(this.trunc(t.width),this.trunc(t.height))}},{key:"trunc",value:function(e){return e>0?Math.floor(e):Math.ceil(e)}}],(n=[{key:"add",value:function(e){return this.width+=e.width,this.height+=e.height,this}},{key:"subtract",value:function(e){return this.width-=e.width,this.height-=e.height,this}},{key:"equals",value:function(e){return this.width==e.width&&this.height==e.height}},{key:"truncate",value:function(){return this.width=e.trunc(this.width),this.height=e.trunc(this.height),this}},{key:"toString",value:function(){return"{width="+this.width+", height="+this.height+"}"}},{key:"isEmpty",value:function(){return 0==this.height&&0==this.width}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(219),i=n.n(r);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2?arguments[2]:void 0;return i()(e,t,{leading:n})}n.d(t,"a",(function(){return i.a}))},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";if(n(81)){var r=n(211),i=n(53),o=n(54),a=n(11),s=n(321),u=n(393),c=n(145),l=n(238),f=n(209),d=n(128),h=n(239),p=n(147),m=n(67),v=n(467),y=n(213),g=n(176),b=n(127),w=n(248),_=n(56),O=n(104),C=n(385),S=n(214),x=n(216),k=n(215).f,E=n(387),T=n(210),P=n(64),A=n(150),M=n(311),j=n(249),D=n(389),I=n(236),R=n(314),L=n(237),B=n(388),N=n(458),U=n(82),F=n(148),$=U.f,V=F.f,z=i.RangeError,G=i.TypeError,H=i.Uint8Array,W=Array.prototype,Y=u.ArrayBuffer,q=u.DataView,X=A(0),Z=A(2),K=A(3),J=A(4),Q=A(5),ee=A(6),te=M(!0),ne=M(!1),re=D.values,ie=D.keys,oe=D.entries,ae=W.lastIndexOf,se=W.reduce,ue=W.reduceRight,ce=W.join,le=W.sort,fe=W.slice,de=W.toString,he=W.toLocaleString,pe=P("iterator"),me=P("toStringTag"),ve=T("typed_constructor"),ye=T("def_constructor"),ge=s.CONSTR,be=s.TYPED,we=s.VIEW,_e=A(1,(function(e,t){return ke(j(e,e[ye]),t)})),Oe=o((function(){return 1===new H(new Uint16Array([1]).buffer)[0]})),Ce=!!H&&!!H.prototype.set&&o((function(){new H(1).set({})})),Se=function(e,t){var n=p(e);if(n<0||n%t)throw z("Wrong offset!");return n},xe=function(e){if(_(e)&&be in e)return e;throw G(e+" is not a typed array!")},ke=function(e,t){if(!_(e)||!(ve in e))throw G("It is not a typed array constructor!");return new e(t)},Ee=function(e,t){return Te(j(e,e[ye]),t)},Te=function(e,t){for(var n=0,r=t.length,i=ke(e,r);r>n;)i[n]=t[n++];return i},Pe=function(e,t,n){$(e,t,{get:function(){return this._d[n]}})},Ae=function(e){var t,n,r,i,o,a,s=O(e),u=arguments.length,l=u>1?arguments[1]:void 0,f=void 0!==l,d=E(s);if(null!=d&&!C(d)){for(a=d.call(s),r=[],t=0;!(o=a.next()).done;t++)r.push(o.value);s=r}for(f&&u>2&&(l=c(l,arguments[2],2)),t=0,n=m(s.length),i=ke(this,n);n>t;t++)i[t]=f?l(s[t],t):s[t];return i},Me=function(){for(var e=0,t=arguments.length,n=ke(this,t);t>e;)n[e]=arguments[e++];return n},je=!!H&&o((function(){he.call(new H(1))})),De=function(){return he.apply(je?fe.call(xe(this)):xe(this),arguments)},Ie={copyWithin:function(e,t){return N.call(xe(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return J(xe(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return B.apply(xe(this),arguments)},filter:function(e){return Ee(this,Z(xe(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Q(xe(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(xe(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){X(xe(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(xe(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(xe(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ce.apply(xe(this),arguments)},lastIndexOf:function(e){return ae.apply(xe(this),arguments)},map:function(e){return _e(xe(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(xe(this),arguments)},reduceRight:function(e){return ue.apply(xe(this),arguments)},reverse:function(){for(var e,t=xe(this).length,n=Math.floor(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this},some:function(e){return K(xe(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return le.call(xe(this),e)},subarray:function(e,t){var n=xe(this),r=n.length,i=y(e,r);return new(j(n,n[ye]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,m((void 0===t?r:y(t,r))-i))}},Re=function(e,t){return Ee(this,fe.call(xe(this),e,t))},Le=function(e){xe(this);var t=Se(arguments[1],1),n=this.length,r=O(e),i=m(r.length),o=0;if(i+t>n)throw z("Wrong length!");for(;o<i;)this[t+o]=r[o++]},Be={entries:function(){return oe.call(xe(this))},keys:function(){return ie.call(xe(this))},values:function(){return re.call(xe(this))}},Ne=function(e,t){return _(e)&&e[be]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Ue=function(e,t){return Ne(e,t=g(t,!0))?f(2,e[t]):V(e,t)},Fe=function(e,t,n){return!(Ne(e,t=g(t,!0))&&_(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?$(e,t,n):(e[t]=n.value,e)};ge||(F.f=Ue,U.f=Fe),a(a.S+a.F*!ge,"Object",{getOwnPropertyDescriptor:Ue,defineProperty:Fe}),o((function(){de.call({})}))&&(de=he=function(){return ce.call(this)});var $e=h({},Ie);h($e,Be),d($e,pe,Be.values),h($e,{slice:Re,set:Le,constructor:function(){},toString:de,toLocaleString:De}),Pe($e,"buffer","b"),Pe($e,"byteOffset","o"),Pe($e,"byteLength","l"),Pe($e,"length","e"),$($e,me,{get:function(){return this[be]}}),e.exports=function(e,t,n,u){var c=e+((u=!!u)?"Clamped":"")+"Array",f="get"+e,h="set"+e,p=i[c],y=p||{},g=p&&x(p),b=!p||!s.ABV,O={},C=p&&p.prototype,E=function(e,n){$(e,n,{get:function(){return function(e,n){var r=e._d;return r.v[f](n*t+r.o,Oe)}(this,n)},set:function(e){return function(e,n,r){var i=e._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[h](n*t+i.o,r,Oe)}(this,n,e)},enumerable:!0})};b?(p=n((function(e,n,r,i){l(e,p,c,"_d");var o,a,s,u,f=0,h=0;if(_(n)){if(!(n instanceof Y||"ArrayBuffer"==(u=w(n))||"SharedArrayBuffer"==u))return be in n?Te(p,n):Ae.call(p,n);o=n,h=Se(r,t);var y=n.byteLength;if(void 0===i){if(y%t)throw z("Wrong length!");if((a=y-h)<0)throw z("Wrong length!")}else if((a=m(i)*t)+h>y)throw z("Wrong length!");s=a/t}else s=v(n),o=new Y(a=s*t);for(d(e,"_d",{b:o,o:h,l:a,e:s,v:new q(o)});f<s;)E(e,f++)})),C=p.prototype=S($e),d(C,"constructor",p)):o((function(){p(1)}))&&o((function(){new p(-1)}))&&R((function(e){new p,new p(null),new p(1.5),new p(e)}),!0)||(p=n((function(e,n,r,i){var o;return l(e,p,c),_(n)?n instanceof Y||"ArrayBuffer"==(o=w(n))||"SharedArrayBuffer"==o?void 0!==i?new y(n,Se(r,t),i):void 0!==r?new y(n,Se(r,t)):new y(n):be in n?Te(p,n):Ae.call(p,n):new y(v(n))})),X(g!==Function.prototype?k(y).concat(k(g)):k(y),(function(e){e in p||d(p,e,y[e])})),p.prototype=C,r||(C.constructor=p));var T=C[pe],P=!!T&&("values"==T.name||null==T.name),A=Be.values;d(p,ve,!0),d(C,be,c),d(C,we,!0),d(C,ye,p),(u?new p(1)[me]==c:me in C)||$(C,me,{get:function(){return c}}),O[c]=p,a(a.G+a.W+a.F*(p!=y),O),a(a.S,c,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*o((function(){y.of.call(p,1)})),c,{from:Ae,of:Me}),"BYTES_PER_ELEMENT"in C||d(C,"BYTES_PER_ELEMENT",t),a(a.P,c,Ie),L(c),a(a.P+a.F*Ce,c,{set:Le}),a(a.P+a.F*!P,c,Be),r||C.toString==de||(C.toString=de),a(a.P+a.F*o((function(){new p(1).slice()})),c,{slice:Re}),a(a.P+a.F*(o((function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()}))||!o((function(){C.toLocaleString.call([1,2])}))),c,{toLocaleString:De}),I[c]=P?T:A,r||P||d(C,pe,A)}}else e.exports=function(){}},function(e,t,n){"use strict";n(106)},function(e,t,n){"use strict";n(107)},function(e,t,n){"use strict";n.r(t);var r=function(){var e=this.$createElement;return(this._self._c||e)("AfsButton",this._b({staticClass:"comment-panel__btn-register",on:{click:this.onSignupClick}},"AfsButton",this.btnProps,!1),[this._t("default",[this._v("Register in Altium 365")])],2)};r._withStripped=!0;var i=n(30),o=n(12),a={name:"SignupButton",components:{AfsButton:i.a},props:{btnProps:{type:Object,default:function(){return{}}},url:{type:String,default:""},sendFrom:{type:String,default:""},openedFrom:{type:String,default:"embed"}},methods:{onSignupClick:function(){o.a.emit("signup:redirect",{sendFrom:this.sendFrom}),this.url&&window.open("".concat(this.url,"?openedFrom=").concat(this.openedFrom,".").concat(this.sendFrom),"_blank")}}},s=n(0),u=Object(s.a)(a,r,[],!1,null,null,null);u.options.__file="src/ui/components/SignupButton.vue";t.default=u.exports},function(e,t,n){"use strict";t.a=function(e){var t=e.data,n=e.isTools,r=void 0===n||n,i=e.menuStartHeight,o=window.innerWidth,a=window.innerHeight,s={x:0,y:0},u=t||null,c=i||200;if(u){var l=u.top,f=u.left,d=u.width,h=f+d+336+238,p=f-336,m=f+d+16,v=r?l+36:l+40,y=v+c<=a?v:v-c-50;s.x=parseInt(h>o?p:m),s.y=parseInt(y)}return s}},function(e,t,n){"use strict";t.a=[{id:1,color:"#EC4025",isSelected:!0},{id:2,color:"#F29737",isSelected:!1},{id:3,color:"#FEFA53",isSelected:!1},{id:4,color:"#6EF44A",isSelected:!1},{id:5,color:"#6FF9FD",isSelected:!1},{id:6,color:"#0D39F5",isSelected:!1},{id:7,color:"#EC56F7",isSelected:!1},{id:8,color:"#FFFFFF",isSelected:!1},{id:9,color:"#000000",isSelected:!1}]},function(e,t,n){"use strict";t.a=[{id:1,thickness:2,isSelected:!0},{id:2,thickness:4,isSelected:!1},{id:3,thickness:8,isSelected:!1}]},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comments-tools",class:{"pointer-events-none":e.isDrawingActive}},[e._l(e.shownButtons,(function(t,r,i){return[i?n("div",{key:t.id+"-"+r,staticClass:"comments-tools__separator"}):e._e(),e._v(" "),n("button",{key:t.id,staticClass:"comments-tools__btn",class:{"is-selected":t.isSelected,"is-mark":t.isMark},attrs:{title:t.title,disabled:e.isLoading,type:"button"},on:{click:function(t){return e.onBtnClick(r)}}},[n("AfsIcon",{staticClass:"comments-tools__icon",attrs:{name:t.icon}}),e._v(" "),t.isMark&&e.isShowMark?n("div",{staticClass:"comments-tools__btn-hint"},[e._v("\n        Your comment is still available\n      ")]):e._e()],1)]})),e._v(" "),e.isPaint?[n("div",{staticClass:"comments-tools__separator"}),e._v(" "),n("ColorPicker",{attrs:{disabled:e.isLoading},on:{"current-color":e.onStartColorPicker}}),e._v(" "),n("LinePicker",{attrs:{disabled:e.isLoading},on:{"current-line":e.onStartLinePicker}}),e._v(" "),n("div",{staticClass:"comments-tools__separator"}),e._v(" "),n("button",{staticClass:"comments-tools__btn",attrs:{disabled:!e.isDrawing||e.isLoading,title:"Delete Drawing",type:"button"},on:{click:e.onDeleteDrawing}},[n("AfsIcon",{staticClass:"comments-tools__icon",attrs:{name:"trash-16"}})],1),e._v(" "),n("AfsButton",{staticClass:"comments-tools__btn comments-tools__btn-post",attrs:{disabled:!e.hasPost,"is-busy":e.isLoading,primary:""},on:{click:e.onPost}},[e._v("\n      Post\n    ")]),e._v(" "),n("button",{staticClass:"comments-tools__btn",attrs:{disabled:e.isLoading,title:"Close comment without saving changes",type:"button"},on:{click:e.onClose}},[n("AfsIcon",{staticClass:"comments-tools__icon",attrs:{name:"cross-16"}})],1)]:e._e()],2)};r._withStripped=!0;var i=n(30),o=n(5),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"color-picker"},[n("button",{directives:[{name:"dropdown",rawName:"v-dropdown:pickerDropMenu",arg:"pickerDropMenu"}],staticClass:"color-picker__btn",attrs:{disabled:e.disabled,title:"Line Color",type:"button"}},[n("div",{staticClass:"color-picker__square",style:{"background-color":e.currentColor}})]),e._v(" "),n("AfsContextMenu",{ref:"pickerDropContextMenu",attrs:{id:"pickerDropMenu",type:"dropdown","init-width":"98",modifiers:{y:"bottom",x:"center"},offset:8},on:{open:e.pickerDropOpen}},[n("div",{staticClass:"color-picker__align-btn"},[e._l(e.colors,(function(t,r){return[n("button",{key:t.id,staticClass:"color-picker__btn",class:{"is-selected":t.isSelected},attrs:{type:"button"},on:{click:function(t){return e.onBtnClick(r)}}},[n("div",{staticClass:"color-picker__square",style:{"background-color":t.color}})])]}))],2)])],1)};a._withStripped=!0;var s=n(10),u=n(39),c=n.n(u),l=n(167),f={name:"ColorPicker",directives:{dropdown:c.a},components:{AfsContextMenu:s.a},props:{disabled:{type:Boolean,default:!1}},data:function(){return{isOpened:!1,positionDropdown:{x:0,y:0},colors:l.a}},computed:{currentColor:function(){return this.colors.find((function(e){return e.isSelected})).color||this.colors[0].color}},mounted:function(){var e=this.colors.find((function(e){return e.isSelected}))||{};this.$emit("current-color",{id:e.id})},methods:{pickerDropOpen:function(){this.isOpened=!0},pickerDropClose:function(){this.isOpened=!1},toggle:function(){this.isOpened?this.close():this.open()},open:function(){this.isOpened||(this.isOpened=!0,this.$refs.pickerDropContextMenu.open(),this.$emit("open"))},close:function(){this.isOpened&&(this.isOpened=!1,this.$refs.pickerDropContextMenu.close(),this.$emit("close"))},onBtnClick:function(e){for(var t in this.colors)this.colors[t].isSelected=!1;this.colors[e].isSelected=!0,this.$emit("current-color",{id:this.colors[e].id}),this.close()}}},d=(n(418),n(0)),h=Object(d.a)(f,a,[],!1,null,null,null);h.options.__file="src/lib/commentPanel/components/ColorPicker.vue";var p=h.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"line-picker"},[n("button",{directives:[{name:"dropdown",rawName:"v-dropdown:lineDropMenu",arg:"lineDropMenu"}],staticClass:"line-picker__main-btn",attrs:{disabled:e.disabled,title:"Line Width",type:"button"}},[n("Icon",{staticClass:"line-picker__icon",attrs:{name:"thickness"}})],1),e._v(" "),n("AfsContextMenu",{ref:"lineDropContextMenu",attrs:{id:"lineDropMenu",type:"dropdown","init-width":"128",modifiers:{y:"bottom",x:"center"},offset:8},on:{open:e.lineDropOpen}},[n("div",{staticClass:"line-picker__dropdown"},[e._l(e.lineThicknessData,(function(t,r){return[n("button",{key:t.id,staticClass:"line-picker__btn",attrs:{type:"button"},on:{click:function(t){return e.onBtnClick(r)}}},[n("Icon",{directives:[{name:"show",rawName:"v-show",value:t.isSelected,expression:"item.isSelected"}],staticClass:"line-picker__checkmark",attrs:{name:"checkmark"}}),e._v(" "),n("div",{staticClass:"line-picker__line",style:{height:t.thickness+"px"}})],1)]}))],2)])],1)};m._withStripped=!0;var v=n(168),y={name:"LinePicker",directives:{dropdown:c.a},components:{Icon:o.a,AfsContextMenu:s.a},props:{disabled:{type:Boolean,default:!1}},data:function(){return{isOpened:!1,positionDropdown:{x:0,y:0},lineThicknessData:v.a}},mounted:function(){var e=this.lineThicknessData.find((function(e){return e.isSelected}))||{};this.$emit("current-line",{id:e.id})},methods:{lineDropOpen:function(){this.isOpened=!0},lineDropClose:function(){this.isOpened=!1},toggle:function(){this.isOpened?this.close():this.open()},open:function(){this.isOpened||(this.isOpened=!0,this.$refs.lineDropContextMenu.open(),this.$emit("open"))},close:function(){this.isOpened&&(this.isOpened=!1,this.$refs.lineDropContextMenu.close(),this.$emit("close"))},onBtnClick:function(e){for(var t in this.lineThicknessData)this.lineThicknessData[t].isSelected=!1;this.lineThicknessData[e].isSelected=!0,this.$emit("current-line",{id:this.lineThicknessData[e].id}),this.close()}}},g=(n(419),Object(d.a)(y,m,[],!1,null,null,null));g.options.__file="src/lib/commentPanel/components/LinePicker.vue";var b=g.exports;function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=window.__CORE__,C={name:"CommentsTools",components:{AfsIcon:o.a,AfsButton:i.a,ColorPicker:p,LinePicker:b},props:{hasText:{type:Boolean,default:!1},isDrawing:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},editModes:{type:Array,default:function(){return["area","draw"]}},thread:{type:Array,default:function(){return[]}}},data:function(e){return{tempID:null,isShowMark:!1,isDrawingActive:!1,buttons:{area:{id:1,icon:"text-16",isSelected:!0,isMark:!1,type:"area",title:"Text Comment",fn:function(){return e.onStartArea()}},paint:{id:2,icon:"paint-16-2",isSelected:!1,isMark:!1,type:"draw",title:"Freehand Drawing",fn:function(){return e.onStartDrawing()}}}}},computed:{isPaint:function(){return this.buttons.paint.isSelected},hasPost:function(){return(this.hasText||this.isDrawing||this.thread.length)&&!this.isLoading},shownButtons:function(){if(!this.editModes)return this.buttons;var e=Object.entries(this.buttons),t=this.editModes.reduce((function(t,n){var r=e.find((function(e){var t=w(e,2);t[0];return t[1].type===n})),i=w(r,2),o=i[0],a=i[1];return t[o]=a,t}),{});return 1===Object.entries(t).length?{}:t}},watch:{isPaint:{handler:function(e){e?(this.buttons.area.isMark=this.hasText,this.delay(this.hasText)):(this.delay(),this.buttons.area.isMark=!1),this.$emit("paint-mode",e)}},isLoading:function(e){e&&this.isPaint&&O.bus.emit("CommentsDrawingEngine:changeEditMode")}},created:function(){O.bus.on("CommentsDrawingEngine:startDraw",this.toggleDrawingActive),O.bus.on("CommentsDrawingEngine:endDraw",this.toggleDrawingActive)},destroyed:function(){O.bus.off("CommentsDrawingEngine:startDraw",this.toggleDrawingActive),O.bus.off("CommentsDrawingEngine:endDraw",this.toggleDrawingActive)},methods:{onBtnClick:function(e){for(var t in this.buttons)this.buttons[t].isSelected=!1;this.buttons[e].isSelected=!0,this.buttons[e].fn()},onStartArea:function(){O.bus.emit("CommentsDrawingEngine:changeEditMode","text"),this.$emit("mode-text",!0)},onStartDrawing:function(){O.bus.emit("CommentsDrawingEngine:changeEditMode","drawing"),this.$emit("mode-text",!1)},onStartColorPicker:function(e){O.bus.emit("CommentsDrawingEngine:startColorPicker",e)},onStartLinePicker:function(e){O.bus.emit("CommentsDrawingEngine:startLinePicker",e)},onDeleteDrawing:function(){O.bus.emit("CommentsDrawingEngine:deleteDrawing")},onPost:function(){this.hasPost&&this.$emit("confirm")},onClose:function(){this.onDeleteDrawing(),this.onBtnClick("area"),this.$emit("close")},delay:function(e){var t=this;clearInterval(this.tempID),e?this.tempID=setTimeout((function(){t.isShowMark=!0}),4e3):this.isShowMark=!1},toggleDrawingActive:function(){this.isDrawingActive=!this.isDrawingActive}}},S=(n(420),Object(d.a)(C,r,[],!1,null,"291ed376",null));S.options.__file="src/lib/commentPanel/components/CommentsTools.vue";t.a=S.exports},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("GridContainer",{staticClass:"placeholder",attrs:{size:"fullscreen","center-content":""}},[n("GridContainer",[n("ContentPlaceholder",{attrs:{"icon-size":"lg"},scopedSlots:e._u([{key:"title",fn:function(){return[e._t("icon",[n("Icon",{staticClass:"placeholder__icon",attrs:{name:"comments"}})]),e._v(" "),n("div",{staticClass:"placeholder__text"},[e._t("default")],2),e._v(" "),e.hasSlot("btns")?n("div",{staticClass:"placeholder__btns"},[e._t("btns")],2):e._e()]},proxy:!0}],null,!0)})],1)],1)};r._withStripped=!0;var i=n(69),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.tag,{tag:"component",staticClass:"afs-content-placeholder",class:e.classes,attrs:{"data-locator":e.dataLocator}},[e.img?n("img",{staticClass:"afs-content-placeholder__icon",attrs:{src:e.img,alt:""}}):e._e(),e._v(" "),e.icon?n("Icon",{staticClass:"afs-content-placeholder__icon",class:e.iconClass,attrs:{name:e.icon,filled:e.iconFilled}}):e._e(),e._v(" "),e.hasTitle?n("AfsText",{staticClass:"afs-content-placeholder__title",attrs:{type:e.titleTextType}},[e._t("title",null,{getBEMClass:e.getBEMClass})],2):e._e(),e._v(" "),e.hasText?n("AfsText",{staticClass:"afs-content-placeholder__text",attrs:{type:"paragraph"}},[e._t("text",null,{getBEMClass:e.getBEMClass})],2):e._e(),e._v(" "),e.hasExtraContent?n("div",{staticClass:"afs-content-placeholder__footer"},[e._t("default",null,{getBEMClass:e.getBEMClass})],2):e._e()],1)};o._withStripped=!0;var a=n(5),s=n(3),u=n(2),c=n(4),l={name:"AfsContentPlaceholder",components:{Icon:a.a,AfsText:s.a},props:{iconSize:{type:String,default:"lg",validator:function(e){return["lg","md","sm","xs"].some((function(t){return t===e}))}},iconColor:{type:String,default:"secondary",validator:function(e){return["primary","secondary"].some((function(t){return t===e}))}},titleSize:{type:String,default:"md",validator:function(e){return["lg","md"].some((function(t){return t===e}))}},iconFilled:{type:Boolean,default:!1},icon:{type:String,default:""},img:{type:String,default:""},isCard:{type:Boolean,default:!1},isInvalid:{type:Boolean,default:!1},tag:{type:String,default:"div"},dataLocator:{type:String,default:"content-placeholder"}},computed:{classes:function(){return[this.themeClass,{"afs-content-placeholder_card":this.isCard,"is-error":this.isInvalid}]},themeClass:function(){var e=Object(c.a)(this.$root);return Object(u.c)(e.theme)},iconClass:function(){return"afs-content-placeholder__icon_".concat(this.iconSize," afs-content-placeholder__icon-").concat(this.iconColor)},titleTextType:function(){return"lg"===this.titleSize?"large title":"title"},hasTitle:function(){return this.$slots.title},hasText:function(){return this.$slots.text},hasExtraContent:function(){return this.$slots.default}},methods:{getBEMClass:function(e){return Object(u.a)("afs-content-placeholder",e)}}},f=(n(411),n(0)),d=Object(f.a)(l,o,[],!1,null,null,null);d.options.__file="WebUI/VueJsComponentLibrary/src/components/ContentPlaceholder/App.vue";var h=d.exports,p={name:"Placeholder",components:{Icon:a.a,GridContainer:i.b,ContentPlaceholder:h},methods:{hasSlot:function(e){return!!this.$slots[e]}}},m=(n(412),Object(f.a)(p,r,[],!1,null,null,null));m.options.__file="src/lib/commentPanel/components/Placeholder.vue";t.a=m.exports},function(e,t,n){"use strict";var r=function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"dragTitle",staticClass:"dragger-title"},[this._t("default")],2)};r._withStripped=!0;var i={name:"ModalDraggerTitle",data:function(){return{pos1:0,pos2:0,pos3:0,pos4:0,parent:null}},mounted:function(){this.$refs.dragTitle&&this.$refs.dragTitle.addEventListener("mousedown",this.dragMouseDown,!0)},beforeDestroy:function(){this.parent=null,this.$refs.dragTitle&&this.$refs.dragTitle.removeEventListener("mousedown",this.dragMouseDown)},methods:{dragMouseDown:function(e){this.parent=document.querySelector(".comments-modal"),this.parent&&((e=e||window.event).preventDefault(),this.pos3=e.clientX,this.pos4=e.clientY,document.addEventListener("mouseup",this.closeDragElement),document.addEventListener("mousemove",this.elementDrag,!0))},elementDrag:function(e){(e=e||window.event).preventDefault(),this.pos1=this.pos3-e.clientX,this.pos2=this.pos4-e.clientY,this.pos3=e.clientX,this.pos4=e.clientY;var t=parseInt(this.parent.offsetTop-this.pos2),n=parseInt(this.parent.offsetLeft-this.pos1);this.$emit("drag",{y:t,x:n})},closeDragElement:function(){document.removeEventListener("mouseup",this.closeDragElement),document.removeEventListener("mousemove",this.elementDrag,!0)}}},o=(n(417),n(0)),a=Object(o.a)(i,r,[],!1,null,null,null);a.options.__file="src/lib/commentPanel/components/ModalDraggerTitle.vue";t.a=a.exports},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade","enter-class":"comments-modal_enter","enter-active-class":"comments-modal_enter-active","leave-to-class":"comments-modal_leave-to","leave-active-class":"comments-modal_leave-active"},on:{"after-leave":function(t){return e.$emit("after-close")}}},[e.isOpened?n("div",{directives:[{name:"inject",rawName:"v-inject"}],staticClass:"comments-modal",style:e.position,attrs:{"data-afs-modal":e.id}},[e._t("default")],2):e._e()])};r._withStripped=!0;var i=n(231),o=n.n(i),a=n(59),s={name:"AppModal",directives:{inject:o.a},components:{},props:{id:{type:[String,Number],default:"",required:!0},x:{type:[String,Number],default:"0",required:!0},y:{type:[String,Number],default:"0",required:!0},closeOnViewClick:{type:Boolean,default:!0}},data:function(){return{isOpened:!1}},computed:{position:function(){return{top:"".concat(this.y,"px"),left:"".concat(this.x,"px")}}},watch:{isOpened:{immediate:!0,handler:function(e){e?(document.addEventListener("mousedown",this.handleDocumentClick,!0),document.addEventListener("keyup",this.handleDocumentKey,!0),window.addEventListener("resize",this.handleDocumentResize),a.a.add(this)):(document.removeEventListener("mousedown",this.handleDocumentClick,!0),document.removeEventListener("keyup",this.handleDocumentKey,!0),window.removeEventListener("resize",this.handleDocumentResize),a.a.remove(this))}}},methods:{toggle:function(){this.isOpened?this.close():this.open()},open:function(){this.isOpened||(this.isOpened=!0,this.$emit("open"))},close:function(){this.isOpened&&(this.isOpened=!1,this.$emit("close"))},handleDocumentKey:function(e){27===e.keyCode&&a.a.isLast(this)&&this.close()},handleDocumentClick:function(e){e&&(e.target.closest(".comments-modal")||e.target.closest(".afs-modal")||e.target.closest(".comment-item")||e.target.closest(".afs-context-menu")||e.target.closest(".main-icon-interaction-group"))||(e.target.closest(".app__view")?this.closeOnViewClick&&(e.stopPropagation(),this.close()):this.closeAllModal())},handleDocumentResize:function(){this.closeAllModal()},closeAllModal:function(){this.$emit("close-all-modal")}}},u=(n(421),n(0)),c=Object(u.a)(s,r,[],!1,null,"29369fab",null);c.options.__file="src/lib/commentPanel/components/Modal.vue";t.a=c.exports},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return o}));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"toRgbaArray",value:function(e){if(!e)return this.defaultColor;if("#"===e[0]){var t=this.hexToRgb(e);return t.push(255),t}var n=e.indexOf("rgb(");if(n>-1){var r=e.substring(n).split(",");return[parseInt(r[0].substring(4).trim(),10),parseInt(r[1].trim(),10),parseInt(r[2].substring(0,r[2].length-1).trim(),10),255]}return(n=e.indexOf("rgba("))>-1?(r=e.substring(n).split(","),[parseInt(r[0].substring(5).trim(),10),parseInt(r[1].trim(),10),parseInt(r[2].trim(),10),255*parseFloat(r[3].substring(0,r[3].length-1).trim())|0]):this.defaultColor}},{key:"hexToRgb",value:function(e){return e=this.normalizeHex(e),[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]}},{key:"normalizeHex",value:function(e){return 4==e.length&&(e=e.replace(this.hexTripletRe,"#$1$1$2$2$3$3")),e.toLowerCase()}},{key:"toGrayscale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:77,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:151,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:28,i=[255,255,255,255];if("string"==typeof e&&(i=this.toRgbaArray(e)),!Array.isArray(e))return i;i=e;var o=Math.min(i[0]*t+i[1]*n+i[2]*r>>8,255);return i=[o,o,o,i[3]]}},{key:"rgbaToHex",value:function(e){var t="#";if("string"==typeof e){var n=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);if(!n)return e;var r=(n&&n[4]||"").trim();return t=t+(256|Number(n[1])).toString(16).slice(1)+(256|Number(n[2])).toString(16).slice(1)+(256|Number(n[3])).toString(16).slice(1),t+=(255*(""!==r?Number(r):1)|256).toString(16).slice(1)}return t=t+(256|e[0]).toString(16).slice(1)+(256|e[1]).toString(16).slice(1)+(256|e[2]).toString(16).slice(1),t+=(256|e[3]).toString(16).slice(1)}}],(n=null)&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();i(o,"hexTripletRe",/#(.)(.)(.)/),i(o,"defaultColor",[0,0,0,255])},function(e,t,n){"use strict";var r=function(){var e=this.$createElement;return(this._self._c||e)(this.tag,{tag:"component",staticClass:"afs-badge",class:this.classes,attrs:{"data-locator":this.dataLocator}},[this._t("default")],2)};r._withStripped=!0;var i=n(2),o=n(4),a=n(1);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={default:"",xs:"xs",small:"small",middle:"middle"},c={default:"",base:"base",pro:"pro",success:"success",alpha:"alpha",new:"new"},l={name:"AfsBadge",props:{tag:{type:String,default:"div"},size:{type:String,default:u.default,validator:function(e){return Object.values(u).includes(e)}},type:{type:String,default:c.default,validator:function(e){return Object.values(c).includes(e)}},uppercase:{type:Boolean,default:!1},radius:{type:String,default:"".concat(a.d.tl," ").concat(a.d.tr," ").concat(a.d.bl," ").concat(a.d.br)},dataLocator:{type:String,default:"badge"}},computed:{classes:function(){return[this.type&&s({},"afs-badge_".concat(this.type),!!this.type.length),this.size&&s({},"afs-badge_".concat(this.size),!!this.size.length),Object(i.b)("afs-badge",this.radius),this.uppercase&&"afs-badge_uppercase",this.themeClass]},themeClass:function(){var e=Object(o.a)(this.$root);return Object(i.c)(e.theme)}}},f=(n(240),n(0)),d=Object(f.a)(l,r,[],!1,null,null,null);d.options.__file="WebUI/VueJsComponentLibrary/src/components/Badge/App.vue";var h=d.exports;t.a=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return u}));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"x",0),i(this,"y",0),i(this,"width",0),i(this,"height",0)}var t,n,o;return t=e,o=[{key:"fromBox",value:function(t,n){var r=new e;return t&&(t.x||0===t.x?(r.x=t.x,r.y=t.y,r.width=t.width,r.height=t.height):(t.top||0===t.top)&&(r.x=t.left,r.y=t.top,r.width=t.right-t.left,r.height=t.bottom-t.top)),n>0&&(r.x-=n,r.y-=n,r.width+=2*n,r.height+=2*n),r}},{key:"fromPoints",value:function(t,n,r,i,o){var a=new e;return t>r?(a.x=r,a.width=t-r):(a.x=t,a.width=r-t),n>i?(a.y=i,a.height=n-i):(a.y=n,a.height=i-n),o>0&&(a.x-=o,a.y-=o,a.width+=2*o,a.height+=2*o),a}}],(n=[{key:"createSvgElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=document.createElementNS("http://www.w3.org/2000/svg","rect");return t.setAttribute("x","".concat(this.x-e)),t.setAttribute("y","".concat(this.y-e)),t.setAttribute("width","".concat(this.width+2*e)),t.setAttribute("height","".concat(this.height+2*e)),t}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"selectedPath",null)}var t,n,r;return t=e,r=[{key:"join",value:function(t){var n=new e;n.selectedPath=[];for(var r=0;r<t.length;r++){var i;null===(i=t[r].selectedPath)||void 0===i||i.forEach((function(e){var t;return null===(t=n.selectedPath)||void 0===t?void 0:t.push(e)}))}return n}},{key:"getPathForGroup",value:function(t){return e.getPathBBox(t,0)}},{key:"getPathForLine",value:function(t){return e.getPathBBox(t,3)}},{key:"getPathForEllipse",value:function(t){return e.getPathBBox(t,3)}},{key:"getPathForPolyLine",value:function(t){var n=new e;n.selectedPath=[];for(var r=0;r<t.points.length-1;r++){var i=t.points[r],a=t.points[r+1],s=o.fromPoints(i.x,i.y,a.x,a.y,3);n.selectedPath.push(s)}return n}},{key:"getPathForPolygon",value:function(t){return e.getPathBBox(t,3)}},{key:"getPathBBox",value:function(t,n){var r=new e,i=t.getBBox(),a=o.fromBox(i,n);return r.selectedPath=[a],r}}],(n=[{key:"createSvgElement",value:function(e){if(!this.selectedPath)return null;if(1===this.selectedPath.length){var t=this.selectedPath[0].createSvgElement(0);return e(t),t}var n=document.createElementNS("http://www.w3.org/2000/svg","g");return this.selectedPath.forEach((function(t){var r=t.createSvgElement(0);e(r),n.appendChild(r)})),n}},{key:"test",value:function(e){if(!this.selectedPath)return!1;for(var t=0;t<this.selectedPath.length;t++){var n=this.selectedPath[t];if(n.x<=e.x&&e.x<=n.x+n.width&&n.y<=e.y&&e.y<=n.y+n.height)return!0}return!1}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();s(u,"margin",3)},function(e,t,n){var r=n(56);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(210)("meta"),i=n(56),o=n(127),a=n(82).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(54)((function(){return u(Object.preventExtensions({}))})),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return c&&f.NEED&&u(e)&&!o(e,r)&&l(e),e}}},function(e,t,n){"use strict";var r=n(18),i=n(113),o=n(179),a=n(120);var s=function e(t){var n=new o(t),s=i(o.prototype.request,n);return r.extend(s,o.prototype,n),r.extend(s,n),s.create=function(n){return e(a(t,n))},s}(n(70));s.Axios=o,s.Cancel=n(71),s.CancelToken=n(192),s.isCancel=n(119),s.VERSION=n(121).version,s.all=function(e){return Promise.all(e)},s.spread=n(193),s.isAxiosError=n(194),e.exports=s,e.exports.default=s},function(e,t,n){"use strict";var r=n(18),i=n(114),o=n(180),a=n(181),s=n(120),u=n(191),c=u.validators;function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e,t){if("string"==typeof e?(t=t||{}).url=e:t=e||{},!t.url)throw new Error("Provided config url is not valid");(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!i){var f=[a,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(l),o=Promise.resolve(t);f.length;)o=o.then(f.shift(),f.shift());return o}for(var d=t;r.length;){var h=r.shift(),p=r.shift();try{d=h(d)}catch(e){p(e);break}}try{o=a(d)}catch(e){return Promise.reject(e)}for(;l.length;)o=o.then(l.shift(),l.shift());return o},l.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l},function(e,t,n){"use strict";var r=n(18);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(18),i=n(182),o=n(119),a=n(70),s=n(71);function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s("canceled")}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return u(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(u(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(18),i=n(70);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(118);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";var r=n(18);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(187),i=n(188);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(18),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},function(e,t,n){"use strict";var r=n(18);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(121).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,a){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],u=void 0===s||a(s,o,e);if(!0!==u)throw new TypeError("option "+o+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},function(e,t,n){"use strict";var r=n(71);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},function(e,t,n){"use strict";n(122)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(57);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function h(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,m(e,t,"set"),n),n}function p(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,m(e,t,"get"))}function m(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var v=new WeakMap,y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(c,e);var t,n,r,i=u(c);function c(){var e;o(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(l(e=i.call.apply(i,[this].concat(n))),v,{writable:!0,value:null}),e}return t=c,(n=[{key:"color",get:function(){return"Deleted"===this.anyValue()?"var(--afs-additional-red)":null!==p(this,v)?"rgb(".concat(p(this,v).join(","),")"):null}},{key:"setColor",value:function(e){var t=e&&e.padStart(8,"f").match(/.{2}/g);return Array.isArray(t)&&h(this,v,[parseInt(t[3],16),parseInt(t[2],16),parseInt(t[1],16)]),this}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.a)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return l}));var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,n,r,u=s(c);function c(){return i(this,c),u.apply(this,arguments)}return t=c,(n=[{key:"color",get:function(){switch(this.anyValue()){case"Deleted":case"Out of date":return"var(--afs-additional-red)";case"Up to date":return"var(--afs-additional-green)"}return null}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n(57).a)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return l}));var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,n,r,u=s(c);function c(){return i(this,c),u.apply(this,arguments)}return t=c,(n=[{key:"color",get:function(){switch(this.anyValue()){case"Obsolete":case"End of Life":return"var(--afs-additional-red)";case"Volume Production":case"New Product":return"var(--afs-additional-green)";case"Not Recommended for New Design":return"var(--afs-additional-orange)";case"Unknown":return"var(--afs-additional-gray)"}return null}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n(57).a)},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"afs-radiobutton",class:[e.themeClass,e.classes],attrs:{"data-locator":e.dataLocator}},[n("input",{staticClass:"afs-radiobutton__input",attrs:{type:"radio",name:e.name,disabled:e.disabled,"data-locator":e.dataLocator+"-control"},domProps:{value:e.value,checked:e.shouldBeChecked},on:{change:e.updateInput}}),e._v(" "),n("span",{staticClass:"afs-radiobutton__figure"}),e._v(" "),e.hasText?n("span",{staticClass:"afs-radiobutton__text"},[e._t("default",null,{getBEMClass:e.getBEMClass})],2):e._e()])};r._withStripped=!0;var i=n(2),o=n(4),a={name:"AfsRadiobutton",model:{prop:"modelValue",event:"change"},props:{dataLocator:{type:String,default:"radiobutton"},name:{type:String,default:""},value:{type:String,default:""},modelValue:{type:String,default:""},disabled:{type:Boolean,default:!1}},computed:{themeClass:function(){var e=Object(o.a)(this.$root);return Object(i.c)(e.theme)},classes:function(){return{"is-checked":this.shouldBeChecked,"is-disabled":this.disabled}},hasText:function(){return this.$slots.default},shouldBeChecked:function(){return this.modelValue===this.value}},methods:{getBEMClass:function(e){return Object(i.a)("afs-radiobutton",e)},updateInput:function(){this.$emit("change",this.value)}}},s=(n(423),n(0)),u=Object(s.a)(a,r,[],!1,null,null,null);u.options.__file="WebUI/VueJsComponentLibrary/src/components/RadioButton/App.vue";var c=u.exports;t.a=c},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.priorityIconName?n("span",[n("AfsIcon",{directives:[{name:"hint",rawName:"v-hint",value:{id:"priorityHint_"+e.id,delay:400},expression:"{ id: `priorityHint_${id}`, delay: 400 }"}],staticClass:"task-priority",class:e.priorityIconClass,attrs:{"data-locator":e.dataLocator,name:e.priorityIconName}}),e._v(" "),n("ContextMenu",{staticClass:"afs-input__hint",attrs:{id:"priorityHint_"+e.id,modifiers:{y:"bottom",x:"start"},type:"hint"},scopedSlots:e._u([{key:"default",fn:function(){return[e._v("\n      Priority: "+e._s(e.priorityName)+"\n    ")]},proxy:!0}],null,!1,535427238)})],1):e._e()};r._withStripped=!0;var i=n(10),o=n(141),a=n(27),s=n(17),u=n(24),c={undefined:{icon:"",name:"Undefined"},low:{icon:"arrow-down",name:"Low"},medium:{icon:"arrow-up-orange",name:"Medium"},high:{icon:"arrow-up",name:"High"},highest:{icon:"flame",name:"Highest"}},l={name:"TaskPriority",components:{AfsIcon:a.a,ContextMenu:i.a},directives:{hint:u.a},props:{dataLocator:{type:String,default:"task-priority"},value:{type:String,default:"Undefined",validator:function(e){return Object(o.a)(c,e.toLowerCase())}},size:{type:String,default:"lg",validator:function(e){return["sm","lg"].includes(e)}}},data:function(){return{id:Object(s.a)()}},computed:{priorityName:function(){return c[this.value.toLowerCase()].name},priorityIconName:function(){return c[this.value.toLowerCase()].icon},priorityIconClass:function(){return"task-priority_".concat(this.value.toLowerCase()," task-priority_").concat(this.size)}}},f=(n(409),n(0)),d=Object(f.a)(l,r,[],!1,null,null,null);d.options.__file="WebUI/VueJsComponentLibrary/src/components/TaskPriority/App.vue";var h=d.exports;t.a=h},function(e,t,n){"use strict";t.a={showVote:!0,showEmailNotification:!0}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return g})),n.d(t,"h",(function(){return b})),n.d(t,"f",(function(){return j})),n.d(t,"g",(function(){return V})),n.d(t,"c",(function(){return W})),n.d(t,"i",(function(){return ie})),n.d(t,"e",(function(){return Pe})),n.d(t,"d",(function(){return Me}));var s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r(this,e),a(this,"id",void 0),a(this,"info",void 0),this.id=t,this.info=n}return o(e,[{key:"isEmpty",get:function(){return this.id<=0}}]),e}();a(s,"emptyNode",new s(-1,"Empty"));var u=o((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;r(this,e),a(this,"nodes",void 0),a(this,"x",void 0),a(this,"y",void 0),a(this,"clickX",void 0),a(this,"clickY",void 0),this.nodes=null==t?new Array:t,this.x=n,this.y=i,this.clickX=o,this.clickY=s})),c=n(7),l=n(20);function f(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){f(o,r,i,a,s,"next",e)}function s(e){f(o,r,i,a,s,"throw",e)}a(void 0)}))}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var y=m((function e(t,n,r,i,o,a,s){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;v(this,e),this.originalMaterialMap=t,this.selectedMaterialMap=n,this.selectionLayer=r,this.highlightLayer=i,this.selectionMaterial=o,this.highlightMaterial=a,this.selectionHatchingMaterial=s,this.colorShift=u,this.layerShift=c})),g=function(){function e(t,n){v(this,e),this.minPoint=t,this.maxPoint=n}return m(e,[{key:"isEmpty",get:function(){return!this.minPoint||!this.maxPoint}}],[{key:"create",value:function(t){return new e(new c.Point(t[0],t[1]),new c.Point(t[2],t[3]))}}]),e}(),b=function(){function e(t){var n=this;v(this,e),h(this,"scene",void 0),h(this,"selectionOptions",void 0),h(this,"lastMaterialMap",null),h(this,"selectionNodeItems",[]),h(this,"selectionIds",new Map),h(this,"highlightData",void 0),h(this,"highlightScene",void 0),h(this,"isSelected",!1),this.checkSceneInstance(t),this.scene=t,this.selectionOptions=this.createSelectionOptions(t),this.highlightData={add:null,remove:null,nodeInfo:null},this.highlightScene=this.createHighlightScene(t,this.selectionOptions),this.highlightScene&&this.highlightScene.beforeRender.on((function(e){return n.onHighlightSceneRender(e)})),l.a.bus.on(this.addedMaterialEvent,(function(e,t){return n.onAddedMaterial(e,t)})),l.a.bus.on(this.removedMaterialEvent,(function(e,t){return n.onAddedMaterial(e,t)}))}var t,n;return m(e,[{key:"addedMaterialEvent",get:function(){return""}},{key:"removedMaterialEvent",get:function(){return""}},{key:"addSelection",value:(n=d(regeneratorRuntime.mark((function e(t,n,r){var i,o,a,s,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.setSelection(!0),this.updateMaterialMap(),i=[],o=[],t.forEach((function(e){9===u.getPcbObjectId(e)?i.push(e):o.push(e)})),e.next=7,this.addSelectionComponents(i,n,r);case 7:return a=e.sent,e.next=10,this.addSelectionPrimitives(o,n,r);case 10:return s=e.sent,this.scene.setDirty(!0),e.abrupt("return",null!=a&&a.length?a:s);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"clearSelection",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e&&(this.clearMaterialMap(),this.scene.setSelection(!1)),this.selectionNodeItems.length){for(var t=0,n=this.selectionNodeItems.length;t<n;t++)this.scene.removeItem(this.selectionNodeItems[t]),this.selectionNodeItems[t]=null;this.selectionNodeItems.length=0,this.selectionIds.clear(),this.scene.setDirty(!0)}}},{key:"updateMaterialMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.isSelected?this.selectionOptions.selectedMaterialMap:this.selectionOptions.originalMaterialMap;(this.lastMaterialMap!=t||e)&&(this.scene.setMaterialMap(t),this.lastMaterialMap=t)}},{key:"removeHighlight",value:function(){this.highlightData.nodeInfo&&(this.highlightData.remove=this.highlightData.nodeInfo.node,this.highlightData.nodeInfo=null,this.highlightData.add=null)}},{key:"onHighlightSceneRender",value:function(e){if(this.highlightData.remove){var t=this.highlightData.remove;this.highlightData.remove=null,e.removeItem(t)}if(this.highlightData.add){this.highlightData.nodeInfo&&e.removeItem(this.highlightData.nodeInfo.node);var n=this.highlightData.add,r=this.createHighlightNode(e,n);r&&(this.highlightData.nodeInfo={root:n.pcbId,node:r})}}},{key:"createHighlightScene",value:function(e,t){return e}},{key:"createHighlightNode",value:function(e,t){return null}},{key:"isHighlight",value:function(e){return null!==this.highlightData.nodeInfo&&this.highlightData.nodeInfo.root===e}},{key:"addHighlight",value:function(e){e&&e.pcbId?this.isHighlight(e.pcbId)||this.selectionIds.has(e.pcbId)||(this.removeHighlight(),this.highlightData.add=e):this.removeHighlight()}},{key:"clearHighlight",value:function(){this.removeHighlight()}},{key:"addSelectionComponents",value:function(e,t,n){return n.throwIfCancellationRequested(),e.forEach((function(e){return t(e)})),Promise.resolve([])}},{key:"addSelectionPrimitives",value:(t=d(regeneratorRuntime.mark((function e(t,n,r){var i,o,a,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],o=this.scene.hiddenNodes,a=function(e){for(var n=[],r=0,i=t.length;r<i;r+=e)n.push(t.slice(r,r+e));return n}(500),s=0;case 5:if(!(s<a.length)){e.next=20;break}return r.throwIfCancellationRequested(),u=a[s],c=u.map((function(e){return e.pcbId})),o.length&&(c=c.filter((function(e){return!o.includes(e)}))),l=this.scene.cloneNodeItemsToMultiLayersByIds(c,this.selectionOptions.layerShift,this.selectionOptions.colorShift),i=i.concat(l),this.selectionNodeItems=this.selectionNodeItems.concat(l.filter((function(e){return e}))),u.forEach((function(e){return n(e)})),this.scene.setDirty(!0),e.next=17,new Promise((function(e){return setTimeout((function(){return e()}),0)}));case 17:s++,e.next=5;break;case 20:return e.abrupt("return",i);case 21:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"clearMaterialMap",value:function(){this.scene.setMaterialMap(this.selectionOptions.originalMaterialMap),this.lastMaterialMap=null}},{key:"toGrayscaleMaterials",value:function(e){return e.map((function(e){var t=c.ColorHelper.toGrayscale(e.Diffuse);return new c.Material(t,e.Hatching,e.Bordered,!1,!0)}))}},{key:"getPcbObjectId",value:function(e){return 255&e.kind}},{key:"isComponent",value:function(e){return 9==(255&e.kind)}}]),e}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=[255,255,255,128],A=[46,224,192,255],M=[0,128,0,255],j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(o,e);var t,n,r,i=x(o);function o(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=i.call(this,e),n=E(t),r="logger",a=l.a.createLogger("SelectionManager2D"),r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t}return t=o,(n=[{key:"addedMaterialEvent",get:function(){return"GraphiteEngine:addedMaterial2d"}},{key:"removedMaterialEvent",get:function(){return"GraphiteEngine:removedMaterial2d"}},{key:"onAddedMaterial",value:function(e,t){this.updateMaterialSelectionOptions(this.scene,this.selectionOptions)}},{key:"onePixelUnits",get:function(){return this.scene.pixelsToUnits(1)}},{key:"createHighlightScene",value:function(e,t){var n=[new c.Layer("Default",0,[-1,1],!1,!1,!1,!1,!1)];t.highlightLayer=0;var r=c.RenderOption.createRenderOptions(n),i=new c.Scene2D(null,n,[],r,void 0,e,"PCB_2D_Highlight_Scene");return t.highlightMaterial=i.addMaterial(new c.Material(A,c.HatchStyle.None,!1,!1,!1)),e.rendered.on((function(e){return i.render(!1)})),i}},{key:"createHighlightNode",value:function(e,t){if(9===this.getPcbObjectId(t)){var n=this.createHighlightComponent(t);return e.addNode(this.selectionOptions.highlightLayer,n)}return null}},{key:"createHighlightComponent",value:function(e){var t=g.create(e.boundRect),n=2*this.onePixelUnits,r=4*this.onePixelUnits;return this.createStrokedRectangle(t.minPoint,t.maxPoint,n,this.selectionOptions.highlightMaterial,r)}},{key:"addSelectionComponents",value:function(e,t,n){var r=this,i=[];return e.forEach((function(e){n.throwIfCancellationRequested();var o=g.create(e.boundRect),a=r.createFilledRectangle(o.minPoint,o.maxPoint,r.selectionOptions.selectionHatchingMaterial,r.selectionOptions.selectionLayer);a&&(r.selectionNodeItems.push(a),r.selectionIds.set(e.pcbId,e),t(e),i.push(a))})),Promise.resolve(i)}},{key:"checkSceneInstance",value:function(e){if(!(e instanceof c.Scene2D)){var t="scene2d parameter is not an instance of type Scene2D.";throw this.logger.LogError(t),new Error(t)}}},{key:"createSelectionOptions",value:function(e){var t=e.layerMap.GetLayersCount()-1;console.log("highlightLayer",t);var n=t-1,r=e.addMaterial(new c.Material(P)),i=e.addMaterial(new c.Material(A,c.HatchStyle.None)),o=this.scene.addMaterial(new c.Material(M,c.HatchStyle.DiagSecond)),a=e.layers.length-e.layers.filter((function(e){return e.name==c.LayerConst.SelectionLayerName})).length,s={Name:"",Materials:[],CustomData:""},u=new y(s,s,n,t,r,i,o,0,a);return this.updateMaterialSelectionOptions(e,u),u}},{key:"updateMaterialSelectionOptions",value:function(e,t){var n,r={Name:"2DMaterials",Materials:e.getMaterials().slice(),CustomData:""},i={Name:"2DMaterials",Materials:this.toGrayscaleMaterials(e.getMaterials()),CustomData:""},o=t.highlightMaterial-t.colorShift,a=t.selectionMaterial-t.colorShift,s=t.selectionHatchingMaterial-t.colorShift,u=r.Materials.length;(n=i.Materials).push.apply(n,_(r.Materials.slice())),i.Materials[o]=i.Materials[o+u],t.originalMaterialMap=r,t.selectedMaterialMap=i,t.selectionMaterial=a+u,t.selectionHatchingMaterial=s+u,t.colorShift=u}},{key:"createFilledRectangle",value:function(e,t,n,r){var i=new c.NodeContainer;e.x/=1e6,e.y/=1e6,t.x/=1e6,t.y/=1e6;var o=(e.x+t.x)/2,a=(e.y+t.y)/2,s=t.x-e.x,u=t.y-e.y,l=c.Uni.createRectangle(o,a,s,u,n);return i.unis.push(l),this.scene.addNode(r,i)}},{key:"createStrokedRectangleNodeItem",value:function(e,t,n,r,i){var o,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=new c.NodeContainer,u=1e6,l=e.x/u-a,f=t.y/u+a,d=(t.x-e.x)/u+2*a,h=(t.y-e.y)/u+2*a,p=c.Uni.createStrokedRectangle(l,f,d,h,n,r);(o=s.unis).push.apply(o,_(p));var m=this.scene.addNode(i,s);return m}},{key:"createStrokedRectangle",value:function(e,t,n,r){var i,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=new c.NodeContainer,s=1e6,u=e.x/s-o,l=t.y/s+o,f=(t.x-e.x)/s+2*o,d=(t.y-e.y)/s+2*o,h=c.Uni.createStrokedRectangle(u,l,f,d,n,r);return(i=a.unis).push.apply(i,_(h)),a}}])&&C(t.prototype,n),r&&C(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(b);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$(e);if(t){var i=$(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return U(this,n)}}function U(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return F(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(o,e);var t,n,r,i=N(o);function o(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=i.call(this,e),n=F(t),r="logger",a=l.a.createLogger("SelectionManager3D"),r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t}return t=o,(n=[{key:"addedMaterialEvent",get:function(){return"GraphiteEngine:addedMaterial3d"}},{key:"removedMaterialEvent",get:function(){return"GraphiteEngine:removedMaterial3d"}},{key:"onAddedMaterial",value:function(e,t){this.updateMaterialSelectionOptions(this.scene,this.selectionOptions)}},{key:"checkSceneInstance",value:function(e){if(!(e instanceof c.Scene3D)){var t="scene3d parameter is not an instance of type Scene3D.";throw this.logger.LogError(t),new Error(t)}}},{key:"createSelectionOptions",value:function(e){var t=e.layerMap.GetLayersCount()-2,n=e.layers.length-e.layers.filter((function(e){return e.name==c.LayerConst.SelectionLayerName})).length,r={Name:"",Materials:[],CustomData:""},i=new y(r,r,t,t,0,0,0,0,n);return this.updateMaterialSelectionOptions(e,i),i}},{key:"updateMaterialSelectionOptions",value:function(e,t){var n,r={Name:"3DMaterials",Materials:e.getMaterials().slice(),CustomData:""},i={Name:"3DMaterials",Materials:this.toGrayscaleMaterials(e.getMaterials()),CustomData:""},o=r.Materials.length,a=r.Materials.slice().map((function(e){return new c.Material(e.Diffuse,e.Hatching,e.Bordered,!0,e.GrayscaleMesh)}));(n=i.Materials).push.apply(n,I(a)),t.originalMaterialMap=r,t.selectedMaterialMap=i,t.colorShift=o}}])&&L(t.prototype,n),r&&L(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(b);function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];z(this,e),H(this,"name",void 0),H(this,"item",void 0),H(this,"selectedPrimitive",void 0),H(this,"fit",void 0),H(this,"_isPrimitiveContainer",!0),this.name=n,this.item=t,this.fit=r,this.selectedPrimitive=i,this._isPrimitiveContainer=o}var t,n,r;return t=e,r=[{key:"getObjectId",value:function(e){return e?255&e.kind:c.ObjectId.None}},{key:"createComponent",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new e(t,"component",n,r,!0)}},{key:"createNet",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.getObjectId(r),o=!this.netChildPrimitiveTypes.has(i);return new e(t,"net",n,r,o)}}],(n=[{key:"objectId",get:function(){return this.isNet&&!this.selectedPrimitive?c.ObjectId.Net:!this.selectedPrimitive&&this.isComponent?c.ObjectId.Component:e.getObjectId(this.selectedPrimitive)}},{key:"layerId",get:function(){var e,t;return!this.selectedPrimitive&&this.isComponent?this.item.layerId:null!==(e=null===(t=this.selectedPrimitive)||void 0===t?void 0:t.layerId)&&void 0!==e?e:-1}},{key:"isNet",get:function(){return"net"===this.name}},{key:"isComponent",get:function(){return"component"===this.name}},{key:"isEmpty",get:function(){return"none"===this.name}},{key:"isPrimitiveContainer",get:function(){return this._isPrimitiveContainer}}])&&G(t.prototype,n),r&&G(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();H(W,"empty",new W(void 0,"none",!1)),H(W,"netChildPrimitiveTypes",new Set([c.ObjectId.Pad,c.ObjectId.Via,c.ObjectId.Track]));var Y=n(79),q=n(439);function X(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),J(this,"selectedObjects",[]),J(this,"index",-1),J(this,"selectionPoint",{x:0,y:0}),J(this,"captureDistance",.02),J(this,"metadataRepository",q.a.instance),J(this,"layerManager",void 0),J(this,"selectedPrimitiveTypes",new Set([c.ObjectId.Pad,c.ObjectId.Via])),J(this,"supportedPrimitiveTypes",new Set([c.ObjectId.Pad,c.ObjectId.Via,c.ObjectId.Track])),J(this,"currentVariant",null),this.layerManager=t,l.a.bus.on("Variants:changed",(function(e){return n.currentVariant=null==e?void 0:e.projectVariant}))}var t,n,r;return t=e,(n=[{key:"count",get:function(){return this.selectedObjects.length}},{key:"isEmpty",get:function(){return this.index<0}},{key:"current",get:function(){return this.isEmpty?W.empty:this.selectedObjects[this.index]}},{key:"next",get:function(){return this.isEmpty?W.empty:(this.index=this.selectedObjects.length==this.index+1?0:this.index+1,this.current)}},{key:"get",value:function(e,t,n){return this.update(e,t,n)?this.current:this.next}},{key:"update",value:function(e,t,n){return!this.isCaptureDistance(e)&&(this.selectionPoint=e,this.selectedObjects=n?this.createQueue2d(e,t):this.createQueue3d(t),this.index=this.selectedObjects.length?0:-1,!0)}},{key:"createSelectedPads",value:function(e,t,n){var r=this,i=new Set(e.map((function(e){return e.id}))),o=new Set(n.filter((function(e){return"net"===e.name&&!e.isPrimitiveContainer&&e.objectId===c.ObjectId.Pad})).map((function(e){var t;return null===(t=e.selectedPrimitive)||void 0===t?void 0:t.pcbId})).filter((function(e){return!!e}))),a=t.flatMap((function(e){return e.primitives})),s=this.metadataRepository.getChildPads({primitives:a});return null!=s&&s.length?(s.forEach((function(e){if(!o.has(e.pcbId)&&i.has(e.pcbId)){var t=r.metadataRepository.getNetByName(e.netName);n.push(W.createNet(t,!1,e))}})),[]):[]}},{key:"createSelectedFreePads",value:function(e,t){var n=this,r=[],i=new Set(t.filter((function(e){return!e.isPrimitiveContainer&&e.objectId===c.ObjectId.Pad})).map((function(e){var t;return null===(t=e.selectedPrimitive)||void 0===t?void 0:t.pcbId})).filter((function(e){return!!e})));if(e.forEach((function(e){if(!i.has(e.id)){var t=n.metadataRepository.getPrimitiveById(e.id);t&&Object(c.getObjectId)(t.kind)===c.ObjectId.Pad&&r.push(t)}})),null==r||!r.length)return[];var o=this.metadataRepository.getNetByName("");return r.forEach((function(e){t.push(W.createNet(o,!1,e))})),[]}},{key:"createQueue2d",value:function(e,t){var n,r=this,i=[];null==t||t.forEach((function(e){var t,n=r.metadataRepository.getNetsByPrimitiveId(e.id);null!=n&&n.length&&(t=i).push.apply(t,X(n.filter((function(e){return r.supportedPrimitiveTypes.has(Object(c.getObjectId)(e.primitive.kind))})).map((function(e){return W.createNet(e.net,!1,e.primitive)}))))}));var o=this.metadataRepository.getComponentsByPos(e.x,e.y);if(null==o||o.forEach((function(e){i.push(W.createComponent(e))})),null!=o&&o.length){var a,s=this.createSelectedPads(t,o,i);(a=i).push.apply(a,X(s))}var u=this.createSelectedFreePads(t,i);u.length&&(n=i).push.apply(n,X(u));var l=new Set(this.layerManager.getLayers().filter((function(e){return e.isVisible})).map((function(e){return e.metaId})));return(i=i.filter((function(e){return r.selectedPrimitiveTypes.has(e.objectId)||l.has(e.layerId)||l.has(e.item.layerId)}))).length?(this.addNetToQueue(i),i.sort((function(e,t){return r.getSortValue(e.objectId)-r.getSortValue(t.objectId)})),i):[]}},{key:"addNetToQueue",value:function(e){new Set(e.filter((function(e){return e.isNet})).map((function(e){return e.item.name}))).forEach((function(t){var n=e.find((function(e){return e.item.name===t}));n&&e.push(W.createNet(n.item,!1))}))}},{key:"createQueue3d",value:function(e){var t=this,n=[],r=new Set;return null==e||e.forEach((function(e){var i=t.metadataRepository.getComponentById(e.id,t.currentVariant);if(i){var o=W.createComponent(i,!1);n.push(o)}else{var a=t.metadataRepository.getComponentByPrimitiveId(e.id);if(a){if(Object(c.getObjectId)(a.primitive.kind)===c.ObjectId.Pad){var s=t.metadataRepository.getNetByName(a.primitive.netName);n.push(W.createNet(s,!1,a.primitive))}else if(!r.has(a.component.pcbId)){var u=W.createComponent(a.component);n.push(u),r.add(a.component.pcbId)}}else{var l=t.metadataRepository.getNetsByPrimitiveId(e.id);null!=l&&l.length&&n.push.apply(n,X(l.map((function(e){return W.createNet(e.net,!1,e.primitive)}))))}}})),this.addNetToQueue(n),n.sort((function(e,n){return t.getSortValue(e.objectId)-t.getSortValue(n.objectId)})),n}},{key:"getSortValue",value:function(e){var t=1e4;switch(e){case c.ObjectId.Via:t=100;break;case c.ObjectId.Pad:t=200;break;case c.ObjectId.Track:t=300;break;case c.ObjectId.Component:t=400;break;case c.ObjectId.Poly:t=500;break;case c.ObjectId.Net:t=999}return t}},{key:"isCaptureDistance",value:function(e){return!this.isEmpty&&Math.pow(e.x-this.selectionPoint.x,2)+Math.pow(e.y-this.selectionPoint.y,2)<=Math.pow(this.captureDistance,2)}}])&&K(t.prototype,n),r&&K(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ee(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.simulationManager=n,re(this,"metadata",void 0),re(this,"layerManager",void 0),re(this,"selectionObjectQueue",void 0),re(this,"renderMode",c.RenderMode.Render2D),re(this,"logger",l.a.createLogger("SelectionNodesObserver")),re(this,"subscribed",!1),re(this,"onSelectNodes",(function(e){if(e){var t=r.selectionObjectQueue.get({x:e.x,y:e.y},e.nodes,r.is2D),n=t.isEmpty?null:Object(Y.a)(t.name,t.item,"PcbEngine");n&&(n.selectedPrimitive=t.selectedPrimitive,n.isPrimitiveContainer=t.isPrimitiveContainer,n.isPrimitiveContainer||(n.views=["PCBView3D","PCBView"])),l.a.bus.emit("select",n)}else l.a.bus.emit("select",null),l.a.bus.emit("selectMany",null)})),re(this,"onHighlightNodes",(function(e){if(!r.simulationManager.simulationEnabled)if(e){var t=r.getHighlightItem(e.x,e.y,e.nodes),n=t?{name:t.name,native:t.item,senderId:"PcbEngine"}:null;l.a.bus.emit("PcbEngine:highlight",n)}else l.a.bus.emit("PcbEngine:highlight",null)})),this.layerManager=t,this.selectionObjectQueue=new Q(t);var i=l.a.response;this.metadata=i.metadata,this.subscribeEvents(),this.onEnableSelection=this.onEnableSelection.bind(this),l.a.bus.on("PcbEngine:enableSelection",this.onEnableSelection)}var t,n,r;return t=e,(n=[{key:"setRenderMode",value:function(e){this.renderMode=e}},{key:"dispose",value:function(){l.a.bus.off("PcbEngine:enableSelection",this.onEnableSelection),this.unsubscribeEvents()}},{key:"onEnableSelection",value:function(e){e?this.subscribeEvents():this.unsubscribeEvents()}},{key:"subscribeEvents",value:function(){this.subscribed||(l.a.bus.on("PcbEngine:selectNodes",this.onSelectNodes),l.a.bus.on("PcbEngine:highlightNodes",this.onHighlightNodes),this.subscribed=!0)}},{key:"unsubscribeEvents",value:function(){this.subscribed=!1,l.a.bus.off("PcbEngine:selectNodes",this.onSelectNodes)}},{key:"logSelect",value:function(e){var t=this.selectionObjectQueue.count,n=e.selectedPrimitive,r=" EMPTY SELECTED PRIMITIVE";if(n){var i=Object(c.getObjectIdName)(this.getObjectId(n));r=" PRIMITIVE: pcbId: ".concat(n.pcbId,", objectName: ").concat(i)}if("component"===e.name){var o=e.item;this.logger.LogInfo("= SELECTED : ".concat(e.name,", queueSize: ").concat(t,", pcbId: ").concat(o.pcbId,", designator: ").concat(o.designator,", layer: ").concat(o.layerName,", ").concat(r))}else if("net"===e.name){var a=e.item;this.logger.LogInfo("= SELECTED : ".concat(e.name,", queueSize: ").concat(t,", pcbId: ").concat(a.name,", ").concat(r))}else this.logger.LogInfo("= SELECTED : ".concat(e.name,", queueSize: ").concat(t,", ").concat(r))}},{key:"getHighlightItem",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this.is2D)return null;var o=[],a=this.getLayersMap((function(e){return e.isVisible})),s=this.getComponents2d(n,e,t,a);return s.length&&o.push.apply(o,ee(s.map((function(e){return W.createComponent(e)})))),o.sort((function(e,t){return i?r.getStackIndex(t,a,i)-r.getStackIndex(e,a,i):r.getStackIndex(e,a,i)-r.getStackIndex(t,a,i)})),o[0]}},{key:"is2D",get:function(){return c.RenderMode.Render2D===this.renderMode}},{key:"flipped",get:function(){return"bottom"===this.layerManager.viewType}},{key:"getStackIndex",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.isComponent){var r=t.get(e.item.layerId);if(r)return 1e4*r.stackIndex+100}if(e.isNet){var i=e.item,o=i.layersUsed.filter((function(e){return t.has(e)})).map((function(e){return t.get(e).stackIndex}));if(o.length)return o.sort((function(e,t){return n?t-e:e-t})),1e4*o[0]+200}return Number.MAX_VALUE}},{key:"getLayersMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e?this.layerManager.getLayers().filter(e):this.layerManager.getLayers(),n=new Map(t.map((function(e){return[e.metaId,e]})));return n}},{key:"getComponents2d",value:function(e,t,n,r){return(this.findComponentsByPos(t,n)||[]).filter((function(e){return r.has(e.layerId)}))}},{key:"findComponentsByPos",value:function(e,t){var n=this;return this.metadata.components.filter((function(r){return r.boundRect&&n.pointInRectangle(e,t,r.boundRect)}))}},{key:"pointInRectangle",value:function(e,t,n){return e>=n[0]/1e6&&e<=n[2]/1e6&&t>=n[1]/1e6&&t<=n[3]/1e6}},{key:"getObjectId",value:function(e){return 255&e.kind}}])&&ne(t.prototype,n),r&&ne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),oe=n(15),ae=n(108);function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function ce(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ue(o,r,i,a,s,"next",e)}function s(e){ue(o,r,i,a,s,"throw",e)}a(void 0)}))}}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(){return(fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=de(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function de(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ye(e)););return e}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ye(e);if(t){var i=ye(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return me(this,n)}}function me(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ve(e)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be={where:function(e){return["READY"===e.type]},to:"READY"},we={where:function(e){return["BREAK"===e.type]},to:"BREAK"},_e={where:function(e){return["CLEAR"===e.type]},to:"CLEAR"},Oe={where:function(e){return["COMPLETE"===e.type]},to:"COMPLETE"},Ce={IDLE:[be],READY:[{where:function(e){return["DRAW"===e.type]},to:"DRAW"},{where:function(e){return["DRAWMANY"===e.type]},to:"DRAWMANY"}],DRAW:[be,we,_e,Oe],DRAWMANY:[be,we,_e,Oe],BREAK:[Oe],COMPLETE:[_e],CLEAR:[be]},Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(f,e);var t,n,r,i,o,a,s,u=pe(f);function f(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),ge(ve(e=u.call(this,"IDLE",Ce)),"logger",window.__CORE__.createLogger("PCBEngine:SelectionSession")),ge(ve(e),"metadata",void 0),ge(ve(e),"renderer",void 0),ge(ve(e),"data",{selectedItem:null,target:null}),ge(ve(e),"renderMode",void 0),e.logger=window.__CORE__.createLogger("PCBEngine:DrawSelectionSession"),e.on("READY",(function(){return e.logger.LogDebug("READY")})),e.on("DRAW",(function(){return e.logger.LogDebug("DRAW")})),e.on("DRAWMANY",(function(){return e.logger.LogDebug("DRAWMANY")})),e.on("BREAK",(function(){return e.logger.LogDebug("BREAK")})),e.on("COMPLETE",(function(){return e.logger.LogDebug("COMPLETE")})),e.on("CLEAR",(function(){return e.logger.LogDebug("CLEAR")})),e.doDraw=e.doDraw.bind(ve(e)),e.doDrawMany=e.doDrawMany.bind(ve(e)),e.doClear=e.doClear.bind(ve(e)),e.on("DRAW",e.doDraw),e.on("DRAWMANY",e.doDrawMany),e.on("CLEAR",e.doClear),e}return t=f,(n=[{key:"setup",value:function(e,t){this.dispatch({type:"READY"})&&(this.metadata=e,this.renderer=t)}},{key:"draw",value:(s=ce(regeneratorRuntime.mark((function e(t,n){var r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(null==t?void 0:t.native)===(null===(r=this.data.selectedItem)||void 0===r?void 0:r.native)&&n!==this.renderMode,o=!(null!=t&&t.native),e.next=4,this.gotoReady(o);case 4:this.dispatch({type:"DRAW",data:t,renderMode:n,update:i});case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"drawMany",value:(a=ce(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n!==this.renderMode,i=!t,e.next=4,this.gotoReady(i);case 4:this.dispatch({type:"DRAWMANY",data:t,renderMode:n,update:r});case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"dispatch",value:function(e){return fe(ye(f.prototype),"dispatch",this).call(this,e)}},{key:"dispatchClear",value:function(e){return this.dispatch({type:"CLEAR",deselect:e})}},{key:"gotoReady",value:function(e){var t=this;return new Promise((function(n){if("READY"!==t.state){var r=function(){t.off("READY",r),setTimeout((function(){return n()}),0)}.bind(t);if(t.on("READY",r),"DRAW"===t.state||"DRAWMANY"===t.state){var i=function(){t.off("COMPLETE",i),setTimeout((function(){t.dispatchClear(e)}),0)}.bind(t);t.on("COMPLETE",i),t.dispatch({type:"BREAK"})}"COMPLETE"===t.state&&t.dispatchClear(e)}else setTimeout((function(){return n()}),0)}))}},{key:"doClear",value:function(e){var t=this;try{e.deselect&&this.renderer.setSelected(!1),this.renderer.clearSelection(e.deselect)}catch(e){this.logger.LogError("Clear error. "+e)}setTimeout((function(){return t.dispatch({type:"READY"})}))}},{key:"addCustomNodesToDraw",value:function(e,t){e&&e.customNodes&&e.customNodes.forEach((function(e){return t.push({pcbId:e})}))}},{key:"handleComponentSelection",value:function(e,t){var n,r=this;if(e&&e.pcbId){t.push(e),this.addCustomNodesToDraw(e,t);var i={currentVariant:null,variants:null};l.a.bus.emit("Variants:get",i);var o=function(e,t){if(!e)return[];var n=e.graphiteMapping;return n?Object.entries(n).filter((function(e){return e[1]===t})).map((function(e){return Number.parseInt(e[0])})):[]},a=o(i.currentVariant,e.pcbId),s=i.variants?Array.from(i.variants.entries()).filter((function(e){var t;return e[0]!==(null===(t=i.currentVariant)||void 0===t?void 0:t.uniqueId)})).flatMap((function(t){return o(t[1],e.pcbId)})):[];null===(n=e.primitives)||void 0===n||n.forEach((function(e){var n=r.metadata.primitivesMap.get(e);if(null!=n&&n.pcbId){var i=a.findIndex((function(e){return e===n.pcbId}));if(i>=0)a.splice(i,1);else if((i=s.findIndex((function(e){return e===n.pcbId})))>=0)return;t.push(n),r.addCustomNodesToDraw(n,t)}})),a.forEach((function(e){return t.push(r.createVariantPrimitive(e))}))}}},{key:"doDraw",value:(o=ce(regeneratorRuntime.mark((function e(t){var n,r,i,o,a,s,u,c,l,f,d,h=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.data.selectedItem=t.data,this.renderMode=t.renderMode,null!==(n=t.data)&&void 0!==n&&n.native){e.next=5;break}return this.dispatch({type:"READY"}),e.abrupt("return");case 5:if(r=new ae.b,i=function(){setTimeout((function(){return r.isCancellationRequested=!0}),0)},this.on("BREAK",i),e.prev=8,this.renderer.setSelected(!0),(o=t.data.native).primitives){e.next=14;break}return this.dispatchClear(!0),e.abrupt("return");case 14:return a=null,t.update?a=this.data.target:(a=this.getZoomToFitTargets(t.data,t.renderMode),this.data.target=a),s=a.fit2d||a.fit3d,u=[],"component"===t.data.name?this.handleComponentSelection(t.data.native,u):null!==(c=t.data)&&void 0!==c&&c.isPrimitiveContainer||"net"===t.data.name&&(null===(l=t.data)||void 0===l||!l.selectedPrimitive)?o.primitives.forEach((function(e){var t=h.metadata.primitivesMap.get(e);t&&(t.pcbId&&u.push(t),h.addCustomNodesToDraw(t,u))})):null!==(f=t.data)&&void 0!==f&&f.selectedPrimitive&&(u.push(t.data.selectedPrimitive),this.addCustomNodesToDraw(t.data.selectedPrimitive,u)),r.throwIfCancellationRequested(),e.next=22,this.renderer.addSelection(u,r);case 22:d=e.sent,s&&!t.update&&(r.throwIfCancellationRequested(),this.renderer.zoomToFitTargets(d,a)),this.dispatch({type:"COMPLETE"}),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(8),e.t0 instanceof ae.a?setTimeout((function(){return h.dispatch({type:"COMPLETE"})}),0):(this.data.selectedItem=null,this.logger.LogError("Draw select error. ".concat(e.t0.message)),setTimeout((function(){return h.dispatchClear(!0)}),0));case 30:return e.prev=30,this.off("BREAK",i),e.finish(30);case 33:case"end":return e.stop()}}),e,this,[[8,27,30,33]])}))),function(e){return o.apply(this,arguments)})},{key:"doDrawMany",value:(i=ce(regeneratorRuntime.mark((function e(t){var n,r,i,o,a,s,u,c,l,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=[],r=Array.isArray(t.data)?t.data[0]:null,i=t.data,this.renderMode=t.renderMode,null!==(n=r)&&void 0!==n&&n.native){e.next=7;break}return this.dispatch({type:"READY"}),e.abrupt("return");case 7:return a=new ae.b,s=function(){setTimeout((function(){return a.isCancellationRequested=!0}),0)},this.on("BREAK",s),e.prev=10,this.renderer.setSelected(!0),u=null,t.update?u=this.data.target:(u=this.getZoomToFitTargets(r,t.renderMode),this.data.target=u),c=u.fit2d||u.fit3d,i.forEach((function(e){e.native.primitives?"component"===e.name&&f.handleComponentSelection(e.native,o):f.dispatchClear(!0)})),a.throwIfCancellationRequested(),e.next=19,this.renderer.addSelection(o,a);case 19:l=e.sent,c&&!t.update&&(a.throwIfCancellationRequested(),this.renderer.zoomToFitTargets(l,u)),this.dispatch({type:"COMPLETE"}),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(10),e.t0 instanceof ae.a?setTimeout((function(){return f.dispatch({type:"COMPLETE"})}),0):(this.logger.LogError("Draw select error. ".concat(e.t0.message)),setTimeout((function(){return f.dispatchClear(!0)}),0));case 27:return e.prev=27,this.off("BREAK",s),e.finish(27);case 30:case"end":return e.stop()}}),e,this,[[10,24,27,30]])}))),function(e){return i.apply(this,arguments)})},{key:"createVariantPrimitive",value:function(e){return{pcbId:e,id:e,kind:c.ObjectId.Track,layerId:1,x:0,y:0}}},{key:"getZoomToFitTargets",value:function(e,t){return"PcbEngine"!==e.senderId?{fit2d:!0,fit3d:!0}:{fit2d:t!==c.RenderMode.Render2D,fit3d:t!==c.RenderMode.Render3D}}}])&&le(t.prototype,n),r&&le(t,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(oe.a);function xe(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function ke(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){xe(o,r,i,a,s,"next",e)}function s(e){xe(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pe=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Te(this,"metadata",void 0),Te(this,"renderer",void 0),Te(this,"renderMode",void 0),Te(this,"selectionSession",void 0),Te(this,"selectedItem",void 0),Te(this,"selectedComponents",void 0),Te(this,"subscribed",!1),Te(this,"onSelectedItem",function(){var e=ke(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.selectedItem=n,t.renderMode&&(t.renderer.clearHighlight(),t.selectionSession.draw(n,t.renderMode));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Te(this,"onSelectedMany",function(){var e=ke(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.selectedComponents=n,t.renderMode&&(t.renderer.clearHighlight(),t.selectionSession.drawMany(n,t.renderMode));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Te(this,"onHighlightItem",(function(e){if(t.renderMode){if(e&&e.native)return"net"===e.name?void e.native.primitives.forEach((function(e){var n=t.metadata.primitivesMap.get(e);t.launchHighlight(n)})):void t.launchHighlight(e.native);t.renderer.clearHighlight()}})),this.subscribeEvents()}var t,n,r;return t=e,(n=[{key:"setup",value:function(e){this.renderer=e;var t=l.a.response;this.metadata=t.metadata,this.selectionSession=new Se,this.selectionSession.setup(this.metadata,this.renderer),this.onEnableSelection=this.onEnableSelection.bind(this),l.a.bus.on("PcbEngine:enableSelection",this.onEnableSelection)}},{key:"setRenderMode",value:function(e){this.renderMode=e,this.onSelectedItem(this.selectedItem)}},{key:"dispose",value:function(){l.a.bus.off("PcbEngine:enableSelection",this.onEnableSelection),this.unsubscribeEvents()}},{key:"onEnableSelection",value:function(e){e?this.subscribeEvents():this.unsubscribeEvents()}},{key:"subscribeEvents",value:function(){this.subscribed||(l.a.bus.on("select",this.onSelectedItem),l.a.bus.on("selectMany",this.onSelectedMany),l.a.bus.on("PcbEngine:highlight",this.onHighlightItem),this.subscribed=!0)}},{key:"unsubscribeEvents",value:function(){this.subscribed=!1,l.a.bus.off("select",this.onSelectedItem),l.a.bus.off("selectMany",this.onSelectedMany),l.a.bus.off("PcbEngine:highlight",this.onHighlightItem)}},{key:"launchHighlight",value:function(e){if(e){if(this.renderer.isHighlight(e.pcbId))return;this.renderer.clearHighlight(),this.renderer.addHighlight(e)}else this.renderer.clearHighlight()}}])&&Ee(t.prototype,n),r&&Ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Me=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"cretateSelectionManager2d",value:function(e){return new j(e)}},{key:"cretateSelectionManager3d",value:function(e){return new V(e)}}])&&Ae(t.prototype,n),r&&Ae(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}));var a=i((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));o(a,"BackgroundColor",[.18,.18,.18,.5]),o(a,"DegreesToRadians",Math.PI/180),o(a,"ViewportFov",45)},function(e,t,n){"use strict";var r=n(60),i=n.n(r),o=n(130);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=window.__CORE__,l={json:"application/json",stream:"application/octet-stream",form:"application/x-www-form-urlencoded"};t.a=function(e){var t=e.baseURL,n=e.type,r=e.headers,a=e.withCredentials,u=e.data,f=i.a.create({baseURL:t,withCredentials:a||!1,headers:s({"Content-Type":l[n||"json"],Accept:"*/*"},r),data:u});return Object(o.a)(f),f.interceptors.response.use((function(e){return e}),(function(e){var t;return i.a.isCancel(e)?new Promise((function(){})):(401===(null==e||null===(t=e.response)||void 0===t?void 0:t.status)&&c.bus.emit("unAuthorized"),Promise.reject(e))})),f}},function(e,t,n){"use strict";t.a=function(e,t){return e}},function(e,t,n){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e)try{return JSON.parse(e)}catch(e){return console.error(e),t}return t}},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"afs-select",class:e.classes,attrs:{"data-locator":e.dataLocator},on:{keydown:e.handleKeyboard}},[n("AfsButton",e._b({directives:[{name:"dropdown",rawName:"v-dropdown:[id]",arg:e.id},{name:"hint",rawName:"v-hint:[hintId]",arg:e.hintId}],staticClass:"afs-select__button",class:{"is-open":e.isOpened},attrs:{transparent:e.transparent,"data-locator":e.dataLocator+"-button"},scopedSlots:e._u([{key:"customIcon",fn:function(){return[e._t("custom",null,{data:e.selected})]},proxy:!0},{key:"default",fn:function(){return[e._t("default",[e._v("\n        "+e._s(e.selectedName)+"\n      ")],{data:e.selected}),e._v(" "),e.hasSlot("arrow")?n("span",{staticClass:"afs-select__arrow"},[e._t("arrow")],2):e._e()]},proxy:!0}],null,!0)},"AfsButton",e.scope.menuBtn.attr,!1)),e._v(" "),n("ContextMenu",e._b({staticClass:"afs-input__hint",scopedSlots:e._u([{key:"default",fn:function(){return[e._t("error-message",[e._v("\n        "+e._s(e.errorMessage)+"\n      ")])]},proxy:!0}],null,!0)},"ContextMenu",e.scope.hint.attr,!1)),e._v(" "),n("ContextMenu",e._g(e._b({ref:"dropdown",staticClass:"afs-context-menu-select",class:{"hide-separate-line":e.hideSeparateLine},attrs:{"data-locator":e.dataLocator+"-dropdown"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.getBEMClass;return[e._l(e.optionsComplate,(function(t){return[t.items.length?n("ul",{key:t.id,class:r("section")},[t.name?n("li",{key:t.id,class:[r("item"),e.getOptionClasses(t),r("item-in"),r("item_group-label")]},[e._t("group-label-"+t.id,[n("AfsText",{attrs:{type:"group",inline:!0}},[e._v("\n                "+e._s(t.name)+"\n              ")])],{data:t})],2):e._e(),e._v(" "),e._l(t.items,(function(t){return n("li",{key:t.id,staticClass:"afs-select__menu-item",class:[r("item"),e.getOptionClasses(t)]},[n("button",{directives:[{name:"dropdown",rawName:"v-dropdown:[id].close",arg:e.id,modifiers:{close:!0}}],class:e.optionControlClasses,attrs:{type:"button",disabled:!!t.isDisabled,"data-locator":e.dataLocator+"-option"},on:{click:function(n){return e.change(t)}}},[e.isSelected(t.id)&&e.hasIcon?n("Icon",{class:r("item-checkmark"),attrs:{name:e.icon||e.option.icon}}):e._e(),e._v(" "),e._t("option",[n("AfsText",{attrs:{type:"single line",inline:!0}},[e._v("\n                  "+e._s(t.name)+"\n                ")])],{data:t})],2)])}))],2):e._e()]}))]}}],null,!0)},"ContextMenu",e.scope.menu.attr,!1),e.scope.menu.listeners))],1)};r._withStripped=!0;var i=n(10),o=n(30),a=n(3),s=n(5),u=n(4),c=n(2),l=n(143),f=n(24),d=n(17),h=n(1),p=38,m=40,v=13,y=n(141),g=["group"];function b(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C={name:"Select",components:{ContextMenu:i.a,AfsButton:o.a,Icon:s.a,AfsText:a.a},directives:{dropdown:l.a,hint:f.a},model:{prop:"value",event:"input"},props:{dataLocator:{type:String,default:"select"},value:{type:Object,default:null},placeholder:{type:String,default:null},id:{type:String,default:d.a},offset:{type:[Number,String],default:0},options:{type:Array,required:!0,default:function(){return[]},validator:function(e){return e.every((function(e){return!function(e){return void 0===e}(e.id)}))}},groups:{type:Array,default:function(){return[]}},position:{type:Object,default:function(){return{y:"bottom",x:"start"}}},wide:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},maxHeightMenu:{type:Number,default:392},radius:{type:String,default:"".concat(h.d.tl," ").concat(h.d.tr," ").concat(h.d.bl," ").concat(h.d.br)},disabled:{type:Boolean,default:!1},hasIcon:{type:Boolean,default:!1},hideSeparateLine:{type:Boolean,default:!1},icon:{type:String,default:"checkmark"},isValid:{type:Boolean,default:!0},errorMessage:{type:String,default:""},hasArrow:{type:Boolean,default:!0}},data:function(){return{selected:null,isOpened:!1,activeOption:null,keyboard:null}},computed:{selectedName:function(){return this.selected&&this.selected.name?this.selected.name:this.placeholder},controlClasses:function(){return O({},h.a.isError,!this.isValid)},scope:function(){return{menu:{attr:{id:this.id,type:"dropdown",modifiers:this.position,offset:this.parseOffset,wide:this.wide,fullWidth:this.fullWidth,maxHeightLimit:this.maxHeightMenu},listeners:{open:this.open,close:this.close}},menuBtn:{attr:{hasArrow:this.hasArrow,disabled:this.disabled,wide:this.wide,class:this.controlClasses,isValid:this.isValid,justify:"left",radius:this.radius}},hint:{attr:{id:this.hintId,isExist:this.hasError,modifiers:{y:"bottom",x:"center"},type:"hint",arrow:!0,error:!0}}}},hasError:function(){return!(this.isValid||!this.errorMessage||!this.errorMessage.length)},hintId:function(){return Object(d.a)()},parseOffset:function(){return parseInt(this.offset)},classes:function(){return[this.themeClass]},themeClass:function(){var e=Object(u.a)(this.$root);return Object(c.c)(e.theme)},activeOptionIndex:function(){var e=this.activeOption||this.selected;return e?this.options.indexOf(e):-1},optionControlClasses:function(){var e=this.$refs.dropdown.getBEMClass;return[e("item-clickable"),e("item-in"),e("item-in_flex"),this.hasIcon&&e("item-in_icon")]},optionsGroups:function(){var e=this.groups.reduce((function(e,t){return e[t.id]=_(_({},t),{},{items:[]}),e}),{});return e.default||(e.default={id:"default",items:[]}),e},optionsComplate:function(){var e=this.optionsGroups;return e.default.items=[],this.options.reduce((function(e,t){var n=t.group,r=b(t,g);return"string"!=typeof n&&"number"!=typeof n||!Object(y.a)(e,n)?r.id&&e.default.items.push(r):e[n].items.push(r),e}),_({},e))}},watch:{value:{immediate:!0,handler:function(e){!this.placeholder&&e&&(this.selected=e)}},options:{immediate:!0,handler:function(){this.placeholder||this.selected||this.value||(this.selected=this.getFirstEnabledOption())}}},created:function(){var e;this.keyboard=(e={up:{keyCodes:[p],events:[],fire:function(e){this.keyCodes.includes(e)&&this.events.forEach((function(e){return"function"==typeof e&&e()}))}},down:{keyCodes:[m],events:[],fire:function(e){this.keyCodes.includes(e)&&this.events.forEach((function(e){return"function"==typeof e&&e()}))}},enter:{keyCodes:[v],events:[],fire:function(e){this.keyCodes.includes(e)&&this.events.forEach((function(e){return"function"==typeof e&&e()}))}}},{up:function(t){return e.up.events.push(t),this},down:function(t){return e.down.events.push(t),this},enter:function(t){return e.enter.events.push(t),this},fire:function(t){return Object.values(e).forEach((function(e){return e.fire(t)}))}}).up(this.handleUpKey).down(this.handleDownKey).enter(this.handleEnterKey)},methods:{handleKeyboard:function(e){this.isOpened&&this.keyboard.fire(e.keyCode)},getFirstEnabledOption:function(){return this.options.find((function(e){return!("isDisabled"in e)||"isDisabled"in e&&!e.isDisabled}))},isSelected:function(e){return this.selected&&this.selected.id===e},isActive:function(e){return null!==this.activeOption&&this.activeOption.id===e},getOptionById:function(e){return this.options.find((function(t){return t.id===e}))},hasSlot:function(e){return this.$slots[e]},handleUpKey:function(){var e=this.activeOptionIndex;e>0&&(this.activeOption=this.options[e-1])},handleDownKey:function(){var e=this.activeOptionIndex;e<this.options.length-1&&(this.activeOption=this.options[e+1])},handleEnterKey:function(){this.change(this.activeOption)},getOptionClasses:function(e){return{"is-active":this.isActive(e.id),"is-selected":this.isSelected(e.id)&&!this.hasIcon}},getBEMClass:function(e){return Object(c.a)("afs-select",e)},open:function(){this.isOpened=!0,this.$emit("open")},close:function(){this.isOpened=!1,this.activeOption=null,this.$emit("close")},change:function(e){null===e||"string"!=typeof e.id&&"number"!=typeof e.id||e.id===(this.selected&&this.selected.id)||e.isDisabled||(this.selected=e,this.$emit("change",e),this.$emit("input",e))}}},S=(n(324),n(0)),x=Object(S.a)(C,r,[],!1,null,null,null);x.options.__file="WebUI/VueJsComponentLibrary/src/components/Select/App.vue";var k=x.exports;t.a=k},function(e,t,n){"use strict";var r={alpha:"alpha",beta:"success",new:"new"};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"small",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.toLowerCase();return{text:i,variant:"filled",type:r[i]||"success",uppercase:n,size:t}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=!1},function(e,t,n){var r=n(442),i=n(372);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(147),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(55),i=n(443),o=n(372),a=n(371)("IE_PROTO"),s=function(){},u=function(){var e,t=n(369)("iframe"),r=o.length;for(t.style.display="none",n(373).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(442),i=n(372).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(127),i=n(104),o=n(371)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(64)("unscopables"),i=Array.prototype;null==i[r]&&n(128)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){var r=n(56);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,c=s||u||Function("return this")(),l=Object.prototype.toString,f=Math.max,d=Math.min,h=function(){return c.Date.now()};function p(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==l.call(e)}(e))return NaN;if(p(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=p(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=i.test(e);return s||o.test(e)?a(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,u,c=0,l=!1,v=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function b(e){return c=e,s=setTimeout(_,t),l?g(e):a}function w(e){var n=e-u;return void 0===u||n>=t||n<0||v&&e-c>=o}function _(){var e=h();if(w(e))return O(e);s=setTimeout(_,function(e){var n=t-(e-u);return v?d(n,o-(e-c)):n}(e))}function O(e){return s=void 0,y&&r?g(e):(r=i=void 0,a)}function C(){var e=h(),n=w(e);if(r=arguments,i=this,u=e,n){if(void 0===s)return b(u);if(v)return s=setTimeout(_,t),g(u)}return void 0===s&&(s=setTimeout(_,t)),a}return t=m(t)||0,p(n)&&(l=!!n.leading,o=(v="maxWait"in n)?f(m(n.maxWait)||0,t):o,y="trailing"in n?!!n.trailing:y),C.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=i=s=void 0},C.flush=function(){return void 0===s?a:O(h())},C}}).call(this,n(68))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}));var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,e),o(this,"x",void 0),o(this,"y",void 0),o(this,"z",void 0),this.x=t,this.y=n,this.z=i}var t,n,a;return t=e,(n=[{key:"isEmpty",get:function(){return 0==this.x&&0==this.y&&0==this.z}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return c}));var s=i((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,e),a(this,"vertices",void 0),a(this,"indices",void 0),a(this,"GetVertices",(function(){return this.vertices})),a(this,"GetIndices",(function(){return this.indices})),this.vertices=t||[],this.indices=n||[]})),u=i((function e(t,n,r){o(this,e),a(this,"position",void 0),a(this,"normal",void 0),a(this,"color",void 0),this.position=t,this.normal=n,this.color=r})),c=i((function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;o(this,e),a(this,"mesh_id",void 0),a(this,"position",void 0),a(this,"rotation",void 0),a(this,"scale",void 0),a(this,"angle",void 0),a(this,"material",void 0),a(this,"matrix",void 0),this.mesh_id=t,this.material=n,this.position=i||[0,0,0],this.rotation=s||[1,1,1],this.scale=u||[1,1,1],"number"==typeof r?(this.angle=r,this.matrix=[]):(this.matrix=r,this.angle=0)}))},function(e,t,n){"use strict";n.r(t);var r=function(){var e=this.$createElement;return(this._self._c||e)(this.name,this._g({tag:"component",staticClass:"lib-icon"},this.$listeners))};r._withStripped=!0;var i={name:"LibIcon",props:{name:{type:String,required:!0}}},o=(n(322),n(0)),a=Object(o.a)(i,r,[],!1,null,null,null);a.options.__file="src/ui/components/Icon.vue";t.default=a.exports},function(e,t,n){(function(n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){s(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,n,a){var s=o.URL||o.webkitURL,u=document.createElement("a");n=n||e.name||"download",u.download=n,u.rel="noopener","string"==typeof e?(u.href=e,u.origin===location.origin?i(u):r(u.href)?t(e,n,a):i(u,u.target="_blank")):(u.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(u.href)}),4e4),setTimeout((function(){i(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,o){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,o),n);else if(r(e))t(e,n,o);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){i(a)}))}}:function(e,n,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var s="application/octet-stream"===e.type,u=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&u||a)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},l.readAsDataURL(e)}else{var f=o.URL||o.webkitURL,d=f.createObjectURL(e);i?i.location=d:location.href=d,i=null,setTimeout((function(){f.revokeObjectURL(d)}),4e4)}});o.saveAs=s.saveAs=s,e.exports=s})?r.apply(t,i):r)||(e.exports=o)}).call(this,n(68))},function(e,t,n){"use strict";t.a=function(e,t){return t?"".concat(e,"-").concat(t):e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var r=n(13);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"groupStackIndex",[[{type:r.a.Plated,subType:null}],[{type:r.a.NonPlated,subType:null}],[{type:r.a.Drillmap,subType:null},{type:r.a.NcDrill,subType:null}],[{type:r.a.Legend,subType:r.b.Top}],[{type:r.a.Soldermask,subType:r.b.Top}],[{type:r.a.Carbonmask,subType:r.b.Top}],[{type:r.a.Goldmask,subType:r.b.Top}],[{type:r.a.Heatsinkmask,subType:r.b.Top}],[{type:r.a.Peelablemask,subType:r.b.Top}],[{type:r.a.Silvermask,subType:r.b.Top}],[{type:r.a.Tinmask,subType:r.b.Top}],[{type:r.a.Paste,subType:r.b.Top}],[{type:r.a.Glue,subType:r.b.Top}],[{type:r.a.Depthrout,subType:r.b.Top}],[{type:r.a.Copper,subType:null}],[{type:r.a.Depthrout,subType:r.b.Top}],[{type:r.a.Glue,subType:r.b.Bot}],[{type:r.a.Paste,subType:r.b.Bot}],[{type:r.a.Tinmask,subType:r.b.Bot}],[{type:r.a.Silvermask,subType:r.b.Bot}],[{type:r.a.Peelablemask,subType:r.b.Bot}],[{type:r.a.Heatsinkmask,subType:r.b.Bot}],[{type:r.a.Goldmask,subType:r.b.Bot}],[{type:r.a.Carbonmask,subType:r.b.Bot}],[{type:r.a.Soldermask,subType:r.b.Bot}],[{type:r.a.Legend,subType:r.b.Bot}],[{type:r.a.Vcut,subType:null}],[{type:r.a.Viafill,subType:null}]]),o(this,"groupDisplayStackIndex",[[r.a.Copper],[r.a.Soldermask],[r.a.Carbonmask],[r.a.Goldmask],[r.a.Heatsinkmask],[r.a.Peelablemask],[r.a.Silvermask],[r.a.Tinmask],[r.a.Legend],[r.a.Paste],[r.a.Glue],[r.a.Depthrout],[r.a.Vcut],[r.a.Viafill],[r.a.Plated],[r.a.NonPlated],[r.a.Profile],[r.a.Drillmap,r.a.NcDrill]])}var t,n,a;return t=e,(n=[{key:"getLayerName",value:function(e){switch(e.kind){case r.a.Copper:return e.subKind===r.b.Top?"Top":e.subKind===r.b.Bot?"Bottom":"Mid ".concat(e.indexFrom-1);case r.a.Plated:case r.a.NonPlated:return e.subKind===r.b.Pth?"PTH ".concat(e.indexFrom,"-").concat(e.indexTo):e.subKind===r.b.Npth?"NPTH ".concat(e.indexFrom,"-").concat(e.indexTo):e.subKind===r.b.Blind?"Blind ".concat(e.indexFrom,"-").concat(e.indexTo):e.subKind===r.b.Buried?"Buried ".concat(e.indexFrom,"-").concat(e.indexTo):"Other ".concat(e.indexFrom,"-").concat(e.indexTo);case r.a.Profile:return e.subKind===r.b.P?"Profile P":e.subKind===r.b.Np?"Profile NP":e.name;case r.a.Soldermask:return e.subKind===r.b.Top?"Top Solder ".concat(e.indexFrom?e.indexFrom:""):e.subKind===r.b.Bot?"Bottom Solder ".concat(e.indexFrom?e.indexFrom:""):e.name;case r.a.Legend:return e.subKind===r.b.Top?"Top Overlay ".concat(e.indexFrom?e.indexFrom:""):e.subKind===r.b.Bot?"Bottom Overlay ".concat(e.indexFrom?e.indexFrom:""):e.name;case r.a.Paste:return e.subKind===r.b.Top?"Top Paste ".concat(e.indexFrom?e.indexFrom:""):e.subKind===r.b.Bot?"Bottom Paste ".concat(e.indexFrom?e.indexFrom:""):e.name;case r.a.Glue:return e.subKind===r.b.Top?"Top Glue ".concat(e.indexFrom?e.indexFrom:""):e.subKind===r.b.Bot?"Bottom Glue ".concat(e.indexFrom?e.indexFrom:""):e.name;case r.a.Carbonmask:return e.subKind===r.b.Top?"Top Carbon ".concat(e.indexFrom?e.indexFrom:""):e.subKind===r.b.Bot?"Bottom Carbon ".concat(e.indexFrom?e.indexFrom:""):e.name;case r.a.Goldmask:return e.subKind===r.b.Top?"Top Gold ".concat(e.indexFrom?e.indexFrom:""):e.subKind===r.b.Bot?"Bottom Gold ".concat(e.indexFrom?e.indexFrom:""):e.name;case r.a.Heatsinkmask:return e.subKind===r.b.Top?"Top Heatsink ".concat(e.indexFrom?e.indexFrom:""):e.subKind===r.b.Bot?"Bottom Heatsink ".concat(e.indexFrom?e.indexFrom:""):e.name;case r.a.Peelablemask:return e.subKind===r.b.Top?"Top Peelable ".concat(e.indexFrom?e.indexFrom:""):e.subKind===r.b.Bot?"Bottom Peelable ".concat(e.indexFrom?e.indexFrom:""):e.name;case r.a.Silvermask:return e.subKind===r.b.Top?"Top Silver ".concat(e.indexFrom?e.indexFrom:""):e.subKind===r.b.Bot?"Bottom Silver ".concat(e.indexFrom?e.indexFrom:""):e.name;case r.a.Tinmask:return e.subKind===r.b.Top?"Top Tin ".concat(e.indexFrom?e.indexFrom:""):e.subKind===r.b.Bot?"Bottom Tin ".concat(e.indexFrom?e.indexFrom:""):e.name;case r.a.Pads:if(e.subKind===r.b.Top)return"Top Pad Master";if(e.subKind===r.b.Bot)return"Bottom Pad Master";case r.a.Drawing:return"Drawing ".concat(e.indexFrom);case r.a.KeepOut:return"Keep-Out";case r.a.NcDrill:return"NC Drill";case r.a.Other:case r.a.OtherDrawing:return e.details?"".concat(e.details," (").concat(e.name,")"):"".concat(e.name);default:return e.name}}},{key:"getLayerGroupStackIndex",value:function(e){var t=this.groupStackIndex.findIndex((function(t){return t.findIndex((function(t){return t.type===e.kind&&(t.subType===e.subKind||null===t.subType)}))>=0}));return t>=0?t:this.groupStackIndex.length}},{key:"getLayerGroupDisplayStackIndex",value:function(e){var t=this.groupDisplayStackIndex.findIndex((function(t){return t.findIndex((function(t){return t===e.kind}))>=0}));return t>=0?t:this.groupDisplayStackIndex.length}},{key:"getLayerGroup",value:function(e){switch(e.kind){case r.a.Copper:return"Copper";case r.a.Plated:return"Plated";case r.a.NonPlated:return"Non Plated";case r.a.Profile:return"Profile";case r.a.Soldermask:return"Solder Mask";case r.a.Legend:return"Silkscreen";case r.a.Paste:return"Paste";case r.a.Glue:return"Glue";case r.a.Carbonmask:return"Carbon Mask";case r.a.Goldmask:return"Gold Mask";case r.a.Heatsinkmask:return"Heatsink Mask";case r.a.Peelablemask:return"Peelable Mask";case r.a.Silvermask:return"Silver Mask";case r.a.Tinmask:return"Tin Mask";case r.a.Depthrout:return"Depthrout";case r.a.Vcut:return"Vcut";case r.a.Viafill:return"Via Fill";case r.a.NcDrill:case r.a.Drillmap:return"Drills";default:return"Other Layers"}}},{key:"getDisplayIndex",value:function(e,t){return t}},{key:"isTop",value:function(e){return e.subKind===r.b.Top}},{key:"isBottom",value:function(e){return e.subKind===r.b.Bot}},{key:"isKeepOut",value:function(e){return e.kind===r.a.KeepOut||e.kind===r.a.Profile}},{key:"isDrillMap",value:function(e){return e.kind===r.a.Drillmap||e.kind===r.a.NcDrill||e.kind===r.a.Plated||e.kind===r.a.NonPlated}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=f(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(a,e);var t,n,i,o=h(a);function a(){return u(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"getLayerName",value:function(e){switch(e.kind){case r.a.Other:return e.name.match(/.gm(\d+)$/g)?"Mechanical "+(e.indexFrom?e.indexFrom:""):e.details?e.details:e.name;case r.a.Drillmap:var t=e.name.match(/drillmap_(\d+).gbr$/);return t?"Drill Map "+t[1]:e.name}return l(m(a.prototype),"getLayerName",this).call(this,e)}}])&&c(t.prototype,n),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function _(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var i=x(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(a,e);var t,n,i,o=C(a);function a(){return g(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"getLayerName",value:function(e){var t;switch(e.kind){case r.a.OtherDrawing:if(t=/-dwgs_user.gbr$/g,e.name.match(t))return"Explanatory Drawings";if(t=/-cmts_user.gbr$/g,e.name.match(t))return"Explanatory Comments";case r.a.Other:if(t=/-b_crtyd.gbr$/g,e.name.match(t))return"Bottom Courtyards";if(t=/-f_crtyd.gbr$/g,e.name.match(t))return"Top Courtyards";if(t=/-b_fab.gbr$/g,e.name.match(t))return"Bottom Footprint Assembly";if(t=/-f_fab.gbr$/g,e.name.match(t))return"Top Footprint Assembly";if(t=/-eco1_user.gbr$/g,e.name.match(t))return"Eco User 1";if(t=/-eco2_user.gbr$/g,e.name.match(t))return"Eco User 2";if(t=/-margin.gbr$/g,e.name.match(t))return"Margin"}return w(x(a.prototype),"getLayerName",this).call(this,e)}},{key:"getDisplayIndex",value:function(e,t){var n;switch(e.kind){case r.a.OtherDrawing:return n=/-dwgs_user.gbr$/g,e.name.match(n)?2:(n=/-cmts_user.gbr$/g,e.name.match(n)?1:t+2);case r.a.Other:return n=/-b_crtyd.gbr$/g,e.name.match(n)?2:(n=/-f_crtyd.gbr$/g,e.name.match(n)?1:(n=/-b_fab.gbr$/g,e.name.match(n)?4:(n=/-f_fab.gbr$/g,e.name.match(n)?3:(n=/-eco1_user.gbr$/g,e.name.match(n)?5:(n=/-eco2_user.gbr$/g,e.name.match(n)?6:(n=/-margin.gbr$/g,e.name.match(n)?7:t+7))))))}return w(x(a.prototype),"getDisplayIndex",this).call(this,e,t)}}])&&b(t.prototype,n),i&&b(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getLayer",value:function(e){if(e){if(e.startsWith("Altium Limited"))return this.altiumLayer;if(e.startsWith("KiCad"))return this.kicadLayer}return this.defaultLayer}}],(n=null)&&E(t.prototype,n),r&&E(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();T(P,"defaultLayer",new a),T(P,"altiumLayer",new v),T(P,"kicadLayer",new k)},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(241),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(68))},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}));var a=i((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"listeners",[]),o(this,"listenersOncer",[]),o(this,"on",(function(e){return t.listeners.push(e),{dispose:function(){return t.off(e)}}})),o(this,"once",(function(e){t.listenersOncer.push(e)})),o(this,"off",(function(e){var n=t.listeners.indexOf(e);n>-1&&t.listeners.splice(n,1)})),o(this,"emit",(function(e){t.listeners.forEach((function(t){return t(e)})),t.listenersOncer.forEach((function(t){return t(e)})),t.listenersOncer=[]})),o(this,"pipe",(function(e){return t.on((function(t){return e.emit(t)}))}))}))},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==n(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,n){"use strict";n.r(t),t.default={inserted:function(e,t,n){var r=t.arg,i=void 0===r?void 0:r,o=t.value,a=void 0===o?void 0:o,s=n.context,u=void 0===s?void 0:s;(i||a?document.getElementById(i||a):document.body).appendChild(e),u.$on("hook:beforeDestroy",(function(){this.$parent.$el instanceof Element&&this.$parent.$el.appendChild(this.$el)}))}}}])},function(e,t,n){"use strict";t.a=function(e){return 255&e}},,function(e,t,n){var r=n(82).f,i=n(127),o=n(64)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(11),i=n(161),o=n(54),a=n(375),s="["+a+"]",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),l=function(e,t,n){var i={},s=o((function(){return!!a[e]()||"​"!="​"[e]()})),u=i[e]=s?t(f):a[e];n&&(i[n]=u),r(r.P+r.F*s,"String",i)},f=l.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};e.exports=l},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(53),i=n(82),o=n(81),a=n(64)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(109);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){"use strict";n(156)},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,u=1,c={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[u]=i,r(u),u++},d.clearImmediate=h}function h(e){delete c[e]}function p(e){if(l)setTimeout(p,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{h(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(68),n(115))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}));var a=i((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));o(a,"SelectionLayerName","Selection Layer"),o(a,"HighlightLayerName","Highlight layer")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return _})),n.d(t,"e",(function(){return w}));var r=("undefined"!=typeof window?window:void 0!==e?e:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function i(e,t){if(void 0===t&&(t=[]),null===e||"object"!=typeof e)return e;var n,r=(n=function(t){return t.original===e},t.filter(n)[0]);if(r)return r.copy;var o=Array.isArray(e)?[]:{};return t.push({original:e,copy:o}),Object.keys(e).forEach((function(n){o[n]=i(e[n],t)})),o}function o(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function a(e){return null!==e&&"object"==typeof e}var s=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"==typeof n?n():n)||{}},u={namespaced:{configurable:!0}};u.namespaced.get=function(){return!!this._rawModule.namespaced},s.prototype.addChild=function(e,t){this._children[e]=t},s.prototype.removeChild=function(e){delete this._children[e]},s.prototype.getChild=function(e){return this._children[e]},s.prototype.hasChild=function(e){return e in this._children},s.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},s.prototype.forEachChild=function(e){o(this._children,e)},s.prototype.forEachGetter=function(e){this._rawModule.getters&&o(this._rawModule.getters,e)},s.prototype.forEachAction=function(e){this._rawModule.actions&&o(this._rawModule.actions,e)},s.prototype.forEachMutation=function(e){this._rawModule.mutations&&o(this._rawModule.mutations,e)},Object.defineProperties(s.prototype,u);var c=function(e){this.register([],e,!1)};c.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},c.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return e+((t=t.getChild(n)).namespaced?n+"/":"")}),"")},c.prototype.update=function(e){!function e(t,n,r){0;if(n.update(r),r.modules)for(var i in r.modules){if(!n.getChild(i))return void 0;e(t.concat(i),n.getChild(i),r.modules[i])}}([],this.root,e)},c.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0);var i=new s(t,n);0===e.length?this.root=i:this.get(e.slice(0,-1)).addChild(e[e.length-1],i);t.modules&&o(t.modules,(function(t,i){r.register(e.concat(i),t,n)}))},c.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],r=t.getChild(n);r&&r.runtime&&t.removeChild(n)},c.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var l;var f=function(e){var t=this;void 0===e&&(e={}),!l&&"undefined"!=typeof window&&window.Vue&&b(window.Vue);var n=e.plugins;void 0===n&&(n=[]);var i=e.strict;void 0===i&&(i=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new c(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new l,this._makeLocalGettersCache=Object.create(null);var o=this,a=this.dispatch,s=this.commit;this.dispatch=function(e,t){return a.call(o,e,t)},this.commit=function(e,t,n){return s.call(o,e,t,n)},this.strict=i;var u=this._modules.root.state;v(this,u,[],this._modules.root),m(this,u),n.forEach((function(e){return e(t)})),(void 0!==e.devtools?e.devtools:l.config.devtools)&&function(e){r&&(e._devtoolHook=r,r.emit("vuex:init",e),r.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){r.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){r.emit("vuex:action",e,t)}),{prepend:!0}))}(this)},d={state:{configurable:!0}};function h(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function p(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;v(e,n,[],e._modules.root,!0),m(e,n,t)}function m(e,t,n){var r=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var i=e._wrappedGetters,a={};o(i,(function(t,n){a[n]=function(e,t){return function(){return e(t)}}(t,e),Object.defineProperty(e.getters,n,{get:function(){return e._vm[n]},enumerable:!0})}));var s=l.config.silent;l.config.silent=!0,e._vm=new l({data:{$$state:t},computed:a}),l.config.silent=s,e.strict&&function(e){e._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}(e),r&&(n&&e._withCommit((function(){r._data.$$state=null})),l.nextTick((function(){return r.$destroy()})))}function v(e,t,n,r,i){var o=!n.length,a=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[a],e._modulesNamespaceMap[a]=r),!o&&!i){var s=y(t,n.slice(0,-1)),u=n[n.length-1];e._withCommit((function(){l.set(s,u,r.state)}))}var c=r.context=function(e,t,n){var r=""===t,i={dispatch:r?e.dispatch:function(n,r,i){var o=g(n,r,i),a=o.payload,s=o.options,u=o.type;return s&&s.root||(u=t+u),e.dispatch(u,a)},commit:r?e.commit:function(n,r,i){var o=g(n,r,i),a=o.payload,s=o.options,u=o.type;s&&s.root||(u=t+u),e.commit(u,a,s)}};return Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return function(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach((function(i){if(i.slice(0,r)===t){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return e.getters[i]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}(e,t)}},state:{get:function(){return y(e.state,n)}}}),i}(e,a,n);r.forEachMutation((function(t,n){!function(e,t,n,r){(e._mutations[t]||(e._mutations[t]=[])).push((function(t){n.call(e,r.state,t)}))}(e,a+n,t,c)})),r.forEachAction((function(t,n){var r=t.root?n:a+n,i=t.handler||t;!function(e,t,n,r){(e._actions[t]||(e._actions[t]=[])).push((function(t){var i,o=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t);return(i=o)&&"function"==typeof i.then||(o=Promise.resolve(o)),e._devtoolHook?o.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):o}))}(e,r,i,c)})),r.forEachGetter((function(t,n){!function(e,t,n,r){if(e._wrappedGetters[t])return void 0;e._wrappedGetters[t]=function(e){return n(r.state,r.getters,e.state,e.getters)}}(e,a+n,t,c)})),r.forEachChild((function(r,o){v(e,t,n.concat(o),r,i)}))}function y(e,t){return t.reduce((function(e,t){return e[t]}),e)}function g(e,t,n){return a(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}function b(e){l&&e===l||
/*!
 * vuex v3.6.2
 * (c) 2021 Evan You
 * @license MIT
 */
function(e){if(Number(e.version.split(".")[0])>=2)e.mixin({beforeCreate:n});else{var t=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[n].concat(e.init):n,t.call(this,e)}}function n(){var e=this.$options;e.store?this.$store="function"==typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}(l=e)}d.state.get=function(){return this._vm._data.$$state},d.state.set=function(e){0},f.prototype.commit=function(e,t,n){var r=this,i=g(e,t,n),o=i.type,a=i.payload,s=(i.options,{type:o,payload:a}),u=this._mutations[o];u&&(this._withCommit((function(){u.forEach((function(e){e(a)}))})),this._subscribers.slice().forEach((function(e){return e(s,r.state)})))},f.prototype.dispatch=function(e,t){var n=this,r=g(e,t),i=r.type,o=r.payload,a={type:i,payload:o},s=this._actions[i];if(s){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(a,n.state)}))}catch(e){0}var u=s.length>1?Promise.all(s.map((function(e){return e(o)}))):s[0](o);return new Promise((function(e,t){u.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(a,n.state)}))}catch(e){0}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(a,n.state,e)}))}catch(e){0}t(e)}))}))}},f.prototype.subscribe=function(e,t){return h(e,this._subscribers,t)},f.prototype.subscribeAction=function(e,t){return h("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},f.prototype.watch=function(e,t,n){var r=this;return this._watcherVM.$watch((function(){return e(r.state,r.getters)}),t,n)},f.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},f.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),v(this,this.state,e,this._modules.get(e),n.preserveState),m(this,this.state)},f.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var n=y(t.state,e.slice(0,-1));l.delete(n,e[e.length-1])})),p(this)},f.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},f.prototype.hotUpdate=function(e){this._modules.update(e),p(this,!0)},f.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(f.prototype,d);var w=x((function(e,t){var n={};return S(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var r=k(this.$store,"mapState",e);if(!r)return;t=r.context.state,n=r.context.getters}return"function"==typeof i?i.call(this,t,n):t[i]},n[r].vuex=!0})),n})),_=x((function(e,t){var n={};return S(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=this.$store.commit;if(e){var o=k(this.$store,"mapMutations",e);if(!o)return;r=o.context.commit}return"function"==typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}})),n})),O=x((function(e,t){var n={};return S(t).forEach((function(t){var r=t.key,i=t.val;i=e+i,n[r]=function(){if(!e||k(this.$store,"mapGetters",e))return this.$store.getters[i]},n[r].vuex=!0})),n})),C=x((function(e,t){var n={};return S(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=this.$store.dispatch;if(e){var o=k(this.$store,"mapActions",e);if(!o)return;r=o.context.dispatch}return"function"==typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}})),n}));function S(e){return function(e){return Array.isArray(e)||a(e)}(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function x(e){return function(t,n){return"string"!=typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function k(e,t,n){return e._modulesNamespaceMap[n]}function E(e,t,n){var r=n?e.groupCollapsed:e.group;try{r.call(e,t)}catch(n){e.log(t)}}function T(e){try{e.groupEnd()}catch(t){e.log("—— log end ——")}}function P(){var e=new Date;return" @ "+A(e.getHours(),2)+":"+A(e.getMinutes(),2)+":"+A(e.getSeconds(),2)+"."+A(e.getMilliseconds(),3)}function A(e,t){return n="0",r=t-e.toString().length,new Array(r+1).join(n)+e;var n,r}var M={Store:f,install:b,version:"3.6.2",mapState:w,mapMutations:_,mapGetters:O,mapActions:C,createNamespacedHelpers:function(e){return{mapState:w.bind(null,e),mapGetters:O.bind(null,e),mapMutations:_.bind(null,e),mapActions:C.bind(null,e)}},createLogger:function(e){void 0===e&&(e={});var t=e.collapsed;void 0===t&&(t=!0);var n=e.filter;void 0===n&&(n=function(e,t,n){return!0});var r=e.transformer;void 0===r&&(r=function(e){return e});var o=e.mutationTransformer;void 0===o&&(o=function(e){return e});var a=e.actionFilter;void 0===a&&(a=function(e,t){return!0});var s=e.actionTransformer;void 0===s&&(s=function(e){return e});var u=e.logMutations;void 0===u&&(u=!0);var c=e.logActions;void 0===c&&(c=!0);var l=e.logger;return void 0===l&&(l=console),function(e){var f=i(e.state);void 0!==l&&(u&&e.subscribe((function(e,a){var s=i(a);if(n(e,f,s)){var u=P(),c=o(e),d="mutation "+e.type+u;E(l,d,t),l.log("%c prev state","color: #9E9E9E; font-weight: bold",r(f)),l.log("%c mutation","color: #03A9F4; font-weight: bold",c),l.log("%c next state","color: #4CAF50; font-weight: bold",r(s)),T(l)}f=s})),c&&e.subscribeAction((function(e,n){if(a(e,n)){var r=P(),i=s(e),o="action "+e.type+r;E(l,o,t),l.log("%c action","color: #03A9F4; font-weight: bold",i),T(l)}})))}}};t.b=M}).call(this,n(68))},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return s}));var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"unis",[]),a(this,"arcs",[]),a(this,"polygons",[]),a(this,"labels",[]),a(this,"lines",[]),a(this,"meshes",[])}var t,n,i;return t=e,(n=[{key:"isEmpty",get:function(){return!(this.unis.length||this.arcs.length||this.polygons.length||this.labels.length||this.lines.length||this.meshes.length)}},{key:"add",value:function(e){var t,n,i,o,a,s;e.unis.length&&(t=this.unis).push.apply(t,r(e.unis)),e.arcs.length&&(n=this.arcs).push.apply(n,r(e.arcs)),e.polygons.length&&(i=this.polygons).push.apply(i,r(e.polygons)),e.labels.length&&(o=this.labels).push.apply(o,r(e.labels)),e.lines.length&&(a=this.lines).push.apply(a,r(e.lines)),e.meshes.length&&(s=this.meshes).push.apply(s,r(e.meshes))}},{key:"clear",value:function(){this.unis.length=0,this.arcs.length=0,this.polygons.length=0,this.labels.length=0,this.lines.length=0,this.meshes.length=0}}])&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}));var a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,e),o(this,"geometries",void 0),o(this,"meshParts",void 0),o(this,"GetLayersCount",(function(){return this.geometries.length})),o(this,"GetLayerGeometry",(function(e){return void 0!==e?this.geometries[e]:this.geometries})),o(this,"GetMeshParts",(function(){return this.meshParts})),o(this,"GetMeshesCount",(function(){return this.meshParts.length})),o(this,"GetMesh",(function(e){return this.meshParts[e]})),this.geometries=t,this.meshParts=n||[]}var t,n,a;return t=e,(n=[{key:"GetId",value:function(){return-1}},{key:"SetGrayscaleMeshes",value:function(e){throw new Error("Method not supported on JS side (only WASM).")}},{key:"ResetGrayscaleMeshes",value:function(){throw new Error("Method not supported on JS side (only WASM).")}},{key:"SetMeshesMaterialShift",value:function(e){throw new Error("Method not supported on JS side (only WASM).")}},{key:"delete",value:function(){}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){var r=n(160);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(160),i=n(64)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(55),i=n(146),o=n(64)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return m}));var r,i=n(51),o=n(46),a=n(131);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e[e.Front=0]="Front",e[e.Back=1]="Back"}(r||(r={}));var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(f,e);var t,n,a,s=l(f);function f(e,t,n,r,i,o,a){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),p(d(u=s.call(this,e,t,n,r,i,o,a)),"showRotationBall",!1),p(d(u),"viewportQuat",window.quat.create()),p(d(u),"viewportAt",window.vec3.create()),p(d(u),"viewportOffset",10),p(d(u),"viewportNear",1.2),p(d(u),"viewportFar",700),p(d(u),"rotationSensitivity",.005*Math.PI),u.viewport||(u.viewport_=u.module.canvas?u.scene.AddViewport([0,0,u.canvasWidth,u.canvasHeight]):u.scene.AddViewport([0,0,300,300])),u.renderPath=u.scene.CreateRenderPath(),u.updatePerspectiveMatrix(),u.setZoom(.4),u.logger.LogInfo("".concat(o?"Overlay":"Main"," 3D [").concat(u.id,"] scene successfully initialized.")),u}return t=f,(n=[{key:"render",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this.clear(),this.renderScene()}},{key:"renderScene",value:function(){this.beforeRender.emit(this),this.cameraController.UpdateAnimation(),this.renderPath.BeginRender()&&(this.renderPath.SelectViewport(this.viewport),this.renderPath.ShowRotationBall(this.showRotationBall),this.renderPath.Render(this.rootNode),this.renderPath.EndRender(),this.rendered.emit(this))}},{key:"getNodeItemsAtRay",value:function(e,t){return this.scene.GetNodeItemsAtRay(e,t)}},{key:"setCenter",value:function(e,t){var n="number"==typeof e?[e,t]:e;this.viewportAt=window.vec3.fromValues(n[0],n[1],0),this.updateViewMatrix(),this.centerChanged.emit(new i.c(this.viewportCenter[0],this.viewportCenter[1]))}},{key:"setCenterOffset",value:function(e,t){var n=window.vec2,r=window.vec3,o=window.quat,a=n.fromValues(e,t),s=n.scale(n.create(),a,this.rotationSensitivity),u=r.transformQuat(r.create(),r.fromValues(0,1,0),this.viewportQuat);r.normalize(u,u);var c=o.setAxisAngle(o.create(),u,s[0]);o.mul(this.viewportQuat,c,this.viewportQuat);var l=r.transformQuat(r.create(),r.fromValues(1,0,0),this.viewportQuat);r.normalize(l,l);var f=o.setAxisAngle(o.create(),l,s[1]);o.mul(this.viewportQuat,f,this.viewportQuat),this.updateViewMatrix(),this.centerChanged.emit(new i.c(e,t))}},{key:"setRectangle",value:function(e,t,n,r){this.viewport.SetRectangle([e,t,n,r]),this.updatePerspectiveMatrix(),this.resized.emit(new i.e(n,r))}},{key:"resize",value:function(e,t){this.viewport.SetRectangle([0,0,e,t]),this.scene.Resize(e,t),this.updatePerspectiveMatrix(),this.resized.emit(new i.e(e,t))}},{key:"setZoom",value:function(e){e=this.defZoom/e,this.viewportOffset=e,this.updateViewMatrix()}},{key:"getZoom",value:function(){return this.viewportOffset}},{key:"setFitFixedView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;if(n||(n=.8),null==e||null==t){var r=this.renderOptions.map((function(e){return e.layer})),i=this.rootNode.GetBoxForLayers(r);null==e&&(e=[i[0],i[1],i[2]]),null==t&&(t=[i[3],i[4],i[5]])}this.viewport.FitFixedView(e,t,n)}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=.8;if(null==e||null==t){var i=this.getRenderLayers(),a=this.rootNode.GetBoxForLayers(i);null==e&&(e=[a[0],a[1],a[2]]),null==t&&(t=[a[3],a[4],a[5]])}if(1!=n){n/=this.getRelativeAspect(e,t);var s=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],u=(s[0]/n-s[0])/2,c=(s[1]/n-s[1])/2,l=(s[2]/n-s[2])/2;e=[e[0]-u,e[1]-c,e[2]-l],t=[t[0]+u,t[1]+c,t[2]+l]}this.fitFixedView_={boxMin:e,boxMax:t,fixedScale:r},this.viewport.FitFixedView(e,t,r),this.zoomToFitChanged.emit(new o.n(e,t))}},{key:"zoomToFitFixedView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=this.rootNode.GetBoxForLayers(this.getRenderLayers());null!=t&&null!=n||(null==t&&(t=[a[0],a[1],a[2]]),null==n&&(n=[a[3],a[4],a[5]]));var s=window.vec3.clone(t),u=window.vec3.clone(n),c=1!=i?i:.8;switch(this.fitFixedView_={boxMin:t,boxMax:n,fixedScale:c,view:e},e){case r.Back:var l=Math.max(Math.abs(u[2]),Math.abs(s[2]));s[2]=-l,u[2]=l,this.viewport.FitFixedView(s,u,c);var f=this.viewport.GetEye();f[2]=-f[2],this.viewport.ViewSetLookAt(f,this.viewport.GetAt(),this.viewport.GetUp()),this.viewport.SetDirty(!0);break;default:this.viewport.FitFixedView(s,u,c)}this.zoomToFitChanged.emit(new o.n(t,n))}},{key:"getRelativeAspect",value:function(e,t){var n=window.vec2,r=n.sub([0,0],t,e);n.scale(r,r,.5);var i=this.viewport.GetRectangle(),o=r[0]/r[1],a=i[2]/i[3],s=o>a?o/a*1.2:1;return s>2&&(s=1),s}},{key:"getRenderLayers",value:function(){var e={};return this.layers.forEach((function(t,n){return e[n]=t.show3d})),this.renderOptions.filter((function(t){return e[t.layer]})).map((function(e){return e.layer}))}},{key:"viewportToWorld",value:function(e){return this.viewport.Unproject(e)}},{key:"unproject",value:function(e){return this.viewport.Unproject(e)}},{key:"project",value:function(e){var t=this.viewport,n=window.vec4.fromValues(e[0],e[1],e[2],1),r=t.GetRectangle(),i=t.GetProjection(),o=t.GetView(),a=window.mat4.multiply([],i,o),s=r[2]/2,u=r[3]/2;return window.vec4.transformMat4(n,n,a),[s+s*(n[0]/n[3]),u-u*(n[1]/n[3])]}},{key:"getViewportQuat",value:function(){return this.viewportQuat}},{key:"getViewportAt",value:function(){return this.viewportAt}},{key:"getViewportOffset",value:function(){return this.viewportOffset}},{key:"setSelection",value:function(e){this.renderPath.SetSelection(e)}},{key:"viewportIntersectWithZ",value:function(e,t){var n=window.vec3,r=this.unproject(e),i=[0,0,1],o=[0,0,t],a=this.getEye(),s=n.normalize([],n.sub([],r,a)),u=n.dot(n.sub([],o,a),i)/n.dot(s,i);return n.scaleAndAdd([],a,s,u)}},{key:"updateViewMatrix",value:function(){var e=window.vec3,t=e.transformQuat([0,0,0],[0,0,1],this.viewportQuat);e.scale(t,t,this.viewportOffset);var n=this.viewportAt,r=e.transformQuat([0,0,0],[0,1,0],this.viewportQuat),i=e.sub([0,0,0],n,t);this.viewport.ViewSetLookAt(i,n,r)}},{key:"updatePerspectiveMatrix",value:function(){var e=o.m.ViewportFov*Math.PI/180,t=this.canvasWidth/this.canvasHeight;this.viewport.ProjectionSetPerspective(e,t,this.viewportNear,this.viewportFar),this.scene.Resize(this.canvasWidth,this.canvasHeight)}}])&&u(t.prototype,n),a&&u(t,a),Object.defineProperty(t,"prototype",{writable:!1}),f}(a.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(15),i=n(79);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m={where:function(e){return["Ready"===e.type]},to:"READY"},v={where:function(e){return["Load"===e.type]},to:"LOAD"},y={IDLE:[m,{where:function(e){return["Hidden"===e.type]},to:"HIDDEN"}],READY:[v],HIDDEN:[m],LOAD:[{where:function(e){return["Run"===e.type]},to:"RUN"},{where:function(e){return["Error"===e.type]},to:"CRASHED",error:!0},m],RUN:[v],CRASHED:[v]},g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(a,e);var t,n,r,o=l(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),p(d(e=o.call(this,"IDLE",y)),"logger",void 0),p(d(e),"domain",""),p(d(e),"designId",""),p(d(e),"metadata",null),p(d(e),"apiHeaders",void 0),e}return t=a,(n=[{key:"setup",value:function(e){this.logger=e.createLogger("FBOMEngine"),this.domain=e.domain,this.apiHeaders=e.apiHeaders;var t=e.response;t&&t.storage&&t.storage.files?(this.metadata=t.metadata,this.designId=t.designId,this.dispatch({type:"Ready"})):this.dispatch({type:"Hidden"})}},{key:"load",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(n,r){e.dispatch({type:"Load"})?e.loadBomData(t).then((function(){n()})).catch((function(t){e.logger.LogError("Get BOM data error. ".concat(t.message,".")),e.dispatch({type:"Error",error:t}),r(t)})):"LOAD"===e.state?(e.once("CRASHED",r),e.once("RUN",n)):"CRASHED"===e.state?r():n()}))}},{key:"getComponent",value:function(e,t){var n,r;return null===(n=this.metadata)||void 0===n||null===(r=n.components)||void 0===r?void 0:r.find((function(n){var r;return((n.schId||n.hash)===t||(null===(r=n.subParts)||void 0===r?void 0:r.some((function(e){return e.schId===t}))))&&n.designator.includes(e)}))}},{key:"getSelectData",value:function(e,t){var n=this.getComponent(e.designator,e.uniqueIdName)||e.uniqueIdName.includes("@")&&this.getComponent(e.designator,e.uniqueIdName.split("@")[0]);if(n)return Object(i.a)("component",s(s({},n),{},{systemBomId:t}),"FBOMEngine")}}])&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(103),i=function(e,t){if(Object(r.e)(e))return s(e,t);switch(e){case"Designator":return a(t);case"Quantity":return u(t);case"part":return c(t);default:return o(e,t)}},o=function(e,t){return function(n,r){var i,o,a=((null===(i=n.parameters[e])||void 0===i?void 0:i.toString())||"").toLowerCase().localeCompare(((null===(o=r.parameters[e])||void 0===o?void 0:o.toString())||"").toLowerCase(),void 0,{numeric:!0,sensitivity:"base"});return t?a:-a}},a=function(e){return function(t,n){var r,i,o,a,s,u,c=(null===(r=t.parameters)||void 0===r||null===(i=r.Designator)||void 0===i||null===(o=i.firstValue())||void 0===o?void 0:o.designator)||"",l=(null===(a=n.parameters)||void 0===a||null===(s=a.Designator)||void 0===s||null===(u=s.firstValue())||void 0===u?void 0:u.designator)||"",f=0;try{var d=c.match(/^[^0-9]+/g)[0],h=l.match(/^[^0-9]+/g)[0];if(!(f=d.toLowerCase().localeCompare(h.toLowerCase(),void 0,{numeric:!0,sensitivity:"base"})))f=+c.match(/[0-9]+/g)[0]-+l.match(/[0-9]+/g)[0]}catch(e){f=t.toString().localeCompare(n.toString(),void 0,{numeric:!0,sensitivity:"base"})}return e?f:-f}},s=function(e,t){return function(n,r){return t?null===n.parameters[e]||void 0===n.parameters[e]?-1:n.parameters[e].anyValue()-r.parameters[e].anyValue():null===r.parameters[e]||void 0===n.parameters[e]?-1:r.parameters[e].anyValue()-n.parameters[e].anyValue()}},u=function(e){return function(t,n){return e?t.parameters.Quantity-n.parameters.Quantity:n.parameters.Quantity-t.parameters.Quantity}},c=function(e){return function(t,n){var r=(t.parameters.supplier||"").toLowerCase().localeCompare((n.parameters.supplier||"").toLowerCase(),void 0,{numeric:!0,sensitivity:"base"});return r||(r=(t.parameters.mpn||"").toLowerCase().localeCompare((n.parameters.mpn||"").toLowerCase(),void 0,{numeric:!0,sensitivity:"base"})),e?r:-r}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(15),i=n(57),o=n(196),a=n(197),s=n(198),u=n(62),c=n(154);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=window.__CORE__,_={where:function(e){return["Activate"===e.type]},to:"ACTIVE"},O={where:function(e){return["Load"===e.type]},to:"LOAD"},C={where:function(e){return["Deactivate"===e.type]},to:"NONACTIVE"},S={where:function(e){return["Error"===e.type]},to:"CRASHED",error:!0},x={HIDDEN:[S,{where:function(e){return["Ready"===e.type]},to:"READY"}],READY:[S,_,O],LOAD:[S,_,O],ACTIVE:[S,_,C],NONACTIVE:[S,_,O],CRASHED:[C,_,O]},k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(O,e);var t,n,l,v,g,_=m(O);function O(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BomViewManager",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"FBOMEngine";return d(this,O),b(y(t=_.call(this,"HIDDEN",x)),"logger",void 0),b(y(t),"creator",void 0),b(y(t),"engine",void 0),b(y(t),"bus",void 0),b(y(t),"bomData",void 0),b(y(t),"selectedData",null),b(y(t),"selectDisabled",!1),b(y(t),"isDataFailed",!1),b(y(t),"pluginName",void 0),t.creator=e,t.logger=w.createLogger(n),t.pluginName=i,t.events.forEach((function(e){return w.bus.registerEvent(e)})),t.initHandlers(),t.on(r.a.TRANSITION_EVENT,(function(e){return t.emitDidStateChange(t.state,e)})),t.on(r.a.ERROR_EVENT,(function(e){return t.emitDidStateChange(t.state,e)})),t}return t=O,(n=[{key:"initHandlers",value:function(){var e=this;w.bus.on("FBOMEngine:setup",(function(t){return e.setup(t)})),w.bus.on("FBOMEngine:activate",(function(t){return e.activate()})),w.bus.on("FBOMEngine:deactivate",(function(t){return e.deactivate()})),w.bus.on("FBOMEngine:select",(function(t){return e.select(t)})),w.bus.on("FBOMEngine:disableSelect",(function(t){e.selectDisabled=t})),w.bus.on("FBOMEngine:checkSelection",(function(t){return e.canBeSelect(t)}))}},{key:"events",get:function(){return["FBOMEngine:setup","FBOMEngine:activate","FBOMEngine:deactivate","FBOMEngine:select","FBOMEngine:disableSelect","FBOMEngine:checkSelection","FBOMEngine:didStateChange","FBOMEngine:loaded"]}},{key:"emitDidStateChange",value:function(e,t){this.bus.emit("FBOMEngine:didStateChange",{state:e,message:t})}},{key:"setup",value:function(e){var t=this;return new Promise((function(n){t.logger.LogDebug("Setup"),t.bus=e.bus,t.bus.on("select",(function(e){return t.onSelect(e)})),t.setupEngine(e),n()}))}},{key:"activate",value:(v=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.bomData){e.next=6;break}return e.next=4,this.toActive();case 4:e.next=7;break;case 6:"CRASHED"===this.engine.getState()?this.dispatch({type:"Error"}):"LOAD"===this.engine.getState()&&this.dispatch({type:"Load"});case 7:this.isDataFailed&&"LOAD"!==this.engine.getState()&&this.engine.load(!this.bomData).catch((function(){})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this.dispatch({type:"Error",error:e.t0});case 13:case"end":return e.stop()}}),e,this,[[0,10]])})),g=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=v.apply(e,t);function o(e){f(i,n,r,o,a,"next",e)}function a(e){f(i,n,r,o,a,"throw",e)}o(void 0)}))},function(){return g.apply(this,arguments)})},{key:"deactivate",value:function(){this.dispatch({type:"Deactivate"})}},{key:"select",value:function(e){var t=this;if(!this.selectDisabled)if(e&&e.id&&e.item){var n=this.engine.getSelectData(e.item,e.id);this.bus.emit("select",n)}else if(Array.isArray(e)){var r=e.map((function(e){return t.engine.getSelectData(e.item,e.id)}));this.bus.emit("select",r)}else this.bus.emit("select",null)}},{key:"canBeSelect",value:function(e){if(!e)return{item:null,can:!1};e.item&&Object.getOwnPropertyDescriptor(e.item,"designator")&&this.bomData?e.can=this.bomData.items.find((function(t){return t.designator===e.item.designator})):e.can=!1}},{key:"toActive",value:function(){var e,t,n,r;this.dispatch({type:"Activate",items:this.transformData(this.bomData),currency:null==this||null===(e=this.bomData)||void 0===e?void 0:e.currency,columnAliases:null==this||null===(t=this.bomData)||void 0===t?void 0:t.columnAliases,visibleColumns:null==this||null===(n=this.bomData)||void 0===n?void 0:n.visibleColumns,selectedItem:null==this||null===(r=this.selectedData)||void 0===r?void 0:r.native,isLiveDataFailed:this.isDataFailed})}},{key:"setupEngine",value:function(e){var t=this;this.engine=new this.creator,this.engine.on("READY",(function(){return t.prefetchData()})),this.engine.on("RUN",(function(e){return t.onEngineRun(e)})),this.engine.on("CRASHED",(function(){return t.isDataFailed=!0})),this.engine.setup(e)}},{key:"prefetchData",value:function(){this.dispatch({type:"Ready"}),this.engine.load(!0).catch((function(){}))}},{key:"onEngineRun",value:function(e){var t,n,r,i;w.bus.emit("FBOMEngine:loaded",e.data),this.bomData=null===(t=e.data)||void 0===t?void 0:t.systemBom,this.isDataFailed=!1,this.toActive(),(null===(n=e.data)||void 0===n||!n.hasLiveData)&&(null===(r=this.bomData)||void 0===r||null===(i=r.items)||void 0===i?void 0:i.length)>0&&this.engine.load(!1).catch((function(){}))}},{key:"onSelect",value:function(e){this.selectedData=e}},{key:"transformData",value:function(e){var t=this,n=this.getVariant(),r=e.items.reduce((function(e,r){if(r.parentId)e.alternateParts.push(r);else if(!t.shouldSkipRow(r,n)){var i=r.parameters["%CATALOGID%"];e.viewItems[r.id]=e.viewRows[i]?t.mergeParameters(e.viewRows[i],r,n):e.viewRows[i]=t.asViewItem(r,n)}return e}),{alternateParts:[],viewItems:{},viewRows:{}}),i=r.alternateParts,o=r.viewItems,a=r.viewRows;return i.forEach((function(e){var r=o[e.parentId];if(r){r.alternateParts||(r.alternateParts={});var i=e.parameters["%CATALOGID%"];r.alternateParts[i]?t.mergeParameters(r.alternateParts[i],e,n):r.alternateParts[i]=t.asViewItem(e,n)}})),Object.values(a)}},{key:"shouldSkipRow",value:function(e,t){return!this.isExtraRowOrItem(e)&&parseInt(this.getVariantData(e,"Quantity",t))<=0}},{key:"mergeParameters",value:function(e,t,n){for(var r=0,o=Object.keys(e.parameters);r<o.length;r++){var a=o[r];a===this.createVariantKey("Quantity",n)?e.parameters.Quantity+=parseInt(this.getVariantData(t,"Quantity",n)):""!==t.parameters[a]&&(e.parameters[a]instanceof c.a?e.parameters[a].push(t):e.parameters[a]instanceof i.a&&e.parameters[a].push(t.parameters[a]))}return e}},{key:"isExtraRowOrItem",value:function(e){var t,n;return Boolean("Extra-Row"===(null==e||null===(t=e.parameters)||void 0===t?void 0:t.ItemType)||"Extra-Place Holder"===(null==e||null===(n=e.parameters)||void 0===n?void 0:n.ItemType))}},{key:"asViewItem",value:function(e,t){for(var n,r=Object.assign({},e.parameters),i=0,o=Object.keys(r);i<o.length;i++)"Price"!==(n=o[i])&&"Quantity"!==n&&(r[n]=this.valuePresenterFactory(n,e));return r.Price=this.valuePresenterFactory(this.createVariantKey("Price",t),e),r.Quantity=parseInt(this.getVariantData(e,"Quantity",t)),r.Description=e.description,r.part=this.factoryPartNumber(e.manufacturers[0]),Object.assign({},e,{parameters:r})}},{key:"factoryPartNumber",value:function(e){return e?(new u.a).push("".concat(e.name," ").concat(e.mpn)).setUrl(e.manufacturerUrl).setStatusName(e.lifecycleStatus):new u.a}},{key:"valuePresenterFactory",value:function(e,t){switch(e){case"Revision State":return(new o.a).setColor(t.parameters["%REVISION_STATE_COLOR%"]).push(t.parameters[e]);case"Revision Status":return(new a.a).push(t.parameters[e]);case"Designator":return(new c.a).setDefaultSort().push(t)}if(e.startsWith("Manufacturer Lifecycle"))return(new s.a).push(t.parameters[e]);if(e.startsWith("Supplier Part Number")){var n=t.parameters[e];if(n){var r=Number(e.replace("Supplier Part Number ","")),l=t.parameters["Supplier ".concat(r)],f=t.manufacturers.flatMap((function(e){return e.suppliers})).find((function(e){return e.name===l&&e.spn===n}));if(f)return(new u.a).setUrl(f.supplierUrl).push(t.parameters[e])}return new u.a}if(e.startsWith("Manufacturer Part Number")){var d=t.parameters[e];if(d){var h=Number(e.replace("Manufacturer Part Number ","")),p=t.parameters["Manufacturer ".concat(h)],m=t.manufacturers.find((function(e){return e.name===p&&e.mpn===d}));if(m)return(new u.a).setUrl(m.manufacturerUrl).setStatusName(m.lifecycleStatus).push(t.parameters[e])}return new u.a}return(new i.a).push(t.parameters[e])}},{key:"getVariant",value:function(){var e,t={};return this.bus.emit("Variants:getCurrent",t),null===(e=t.currentVariant)||void 0===e?void 0:e.name}},{key:"getVariantData",value:function(e,t,n){return e.parameters[this.createVariantKey(t,n)]||e.parameters[t]}},{key:"createVariantKey",value:function(e,t){return t&&"[No Variations]"!==t?"".concat(e,"@").concat(t):e}}])&&h(t.prototype,n),l&&h(t,l),Object.defineProperty(t,"prototype",{writable:!1}),O}(r.a)},function(e,t,n){"use strict";var r=n(17),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AfsModalWarning",e._g({ref:"modalWarning",attrs:{id:e.id},scopedSlots:e._u([{key:"default",fn:function(){return[e.hasMessage?[n("AfsText",{staticClass:"afs-color-text"},[e._v("\n        "+e._s(e.message)+"\n      ")])]:[n("AfsText",{staticClass:"afs-color-text"},[e._v("\n        Oops! Something went wrong.\n      ")])]]},proxy:!0}])},e.$listeners))};i._withStripped=!0;var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",e._g({ref:"modal",staticClass:"afs-modal-warning",attrs:{id:e.id,level:"2",size:"sm","data-locator":e.dataLocator},scopedSlots:e._u([{key:"default",fn:function(){return[n("div",{staticClass:"afs-modal-warning__container"},[n("div",{staticClass:"afs-modal-warning__body"},[n("div",{staticClass:"afs-modal-warning__icon"},[e._t("icon",[e._v("\n            🙁\n          ")])],2),e._v(" "),n("div",{staticClass:"afs-modal-warning__content"},[e._t("default",null,{getBEMClass:e.getBEMClass})],2)])])]},proxy:!0}],null,!0)},e.$listeners))};o._withStripped=!0;var a=n(88),s=n(2),u=n(4),c={name:"AfsModalWarning",components:{Modal:a.a},props:{dataLocator:{type:String,default:"modal-warning"}},data:function(){return{id:Object(r.a)()}},computed:{themeClass:function(){var e=Object(u.a)(this.$root);return Object(s.c)(e.theme)}},methods:{getBEMClass:function(e){return Object(s.a)("afs-modal-warning",e)},open:function(){this.$refs.modal&&this.$refs.modal.open()},close:function(){this.$refs.modal&&this.$refs.modal.close()}}},l=(n(405),n(0)),f=Object(l.a)(c,o,[],!1,null,null,null);f.options.__file="WebUI/VueJsComponentLibrary/src/components/ModalWarning/App.vue";var d=f.exports,h={name:"AfsErrorHandler",components:{AfsText:n(3).a,AfsModalWarning:d},props:{id:{type:String,default:null},message:{type:String,default:null}},computed:{hasMessage:function(){return"string"==typeof this.message&&!!this.message.length}},methods:{open:function(){this.$refs.modalWarning.open()},close:function(){this.$refs.modalWarning.close()}}},p=Object(l.a)(h,i,[],!1,null,null,null);p.options.__file="WebUI/VueJsComponentLibrary/src/apps/ErrorHandler/App.vue";var m=p.exports;var v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.id,i=void 0===n?"errorHandler_".concat(Object(r.a)()):n,o=t.afsConfig,a=void 0===o?{}:o,s=t.message,u=void 0===s?null:s,c="function"==typeof e;if(c){var l=document.querySelector("body");if(l){if(!document.querySelector("#".concat(i))){var f=document.createElement("div");f.setAttribute("id",i),l.appendChild(f)}return new e({components:{App:m},data:{afsConfig:a,message:u,id:i},methods:{setMessage:function(e){return this.message=e,this},resetMessage:function(){return this.setMessage(u),this},open:function(){return this.$refs.app.open(),this},close:function(){return this.$refs.app.close(),this}},template:'<App ref="app" :id="id" :message="message" @open="$emit(\'open\', id)" @close="$emit(\'close\', id)" @after-close="$emit(\'after-close\', id)"/>'}).$mount("#".concat(i))}console.error("You should initialize ErrorHandler after dom loaded")}else console.error("You should pass Vue as first argument to initialize ErrorHandler")};t.a=function(e,t){var n=v(e,t);return n&&function(e,t){return new Promise((function(r,i){e.then((function(n){if(t&&"function"==typeof t.resolveCallback){var i=t.resolveCallback(n);if(i&&!0===i.promiseReject)return Promise.reject(e)}return r(n)})).catch((function(e){var r=e&&e.response&&e.response.data;if(401!==(e&&e.response&&e.response.status)){var o=t&&"function"==typeof t.showModalCondition?t.showModalCondition(e):!(r&&r.additionalInfo);if(o){null!=t&&t.allowReject&&i(e);var a=o.message||r&&r.message;n.setMessage(null),n.setMessage(a||null),n.open()}i(e)}else window.location.reload()}))}))}}},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-comments-filters"},[e.titleData?n("button",{directives:[{name:"dropdown",rawName:"v-dropdown:[menuId]",arg:e.menuId}],staticClass:"app-comments-filters__btn"},[n("AfsIcon",{staticClass:"app-comments-filters__icon-filter",attrs:{name:"filter-empty-16"}}),e._v(" "),e.titleData.text?n("AfsText",{staticClass:"app-comments-filters__title",attrs:{type:"title",ellipsis:""}},[e._v("\n      "+e._s(e.titleData.text)+"\n    ")]):e.titleData.user?n("UserAvatar",{attrs:{size:"sm",img:e.titleData.user.img,title:e.titleData.user.name}}):e._e(),e._v(" "),n("AfsIcon",{staticClass:"app-comments-filters__icon",attrs:{name:"chevron-down-8"}})],1):e._e(),e._v(" "),n("div",{class:{"app-comments-filters__align-btn":!e.titleData}},[n("AfsButtonIcon",{directives:[{name:"hint",rawName:"v-hint",value:{id:e.hintId,delay:10},expression:"{ id: hintId, delay: 10 }"}],attrs:{size:"lg",transparent:"",icon:e.visibilityIcon},on:{click:e.toggleVisibility}}),e._v(" "),n("AfsButtonIcon",{directives:[{name:"dropdown",rawName:"v-dropdown:[menuId2]",arg:e.menuId2}],attrs:{size:"lg",transparent:"",icon:"slider-16"}})],1),e._v(" "),n("AfsContextMenu",e._b({},"AfsContextMenu",e.hintConfig,!1),[e._v(" "+e._s(e.hintText)+" ")]),e._v(" "),n("AfsContextMenu",{ref:"filtersContextMenu",attrs:{id:e.menuId,type:"dropdown","init-width":"208",modifiers:{y:"bottom",x:"center"},offset:12},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.getBEMClass;return[n("ul",{class:[r("section"),r("section_pad-sm")]},e._l(e.filters.radios,(function(t){return n("li",{key:t.id,class:r("item")},[e.isRadioBtnVisible(t)?n("AfsRadio",{class:r("item-checkbox"),attrs:{"model-value":e.selectedRadio,value:t.text,name:"filters"},on:{change:function(n){return e.onChangeRadio(n,t)}}},[n("AfsText",{attrs:{type:"paragraph",inline:""}},[e._v("\n              "+e._s(t.text)+"\n              "),t.description?n("AfsText",{staticClass:"app-comments-filters__item-description",attrs:{type:"text",inline:""}},[e._v("\n                "+e._s(t.description)+"\n              ")]):e._e()],1)],1):e._e(),e._v(" "),t.users&&t.users.length?n("AppUserSelect",{staticClass:"app-comments-filters__select",attrs:{disabled:!t.isSelected,list:t.users},on:{"change-user":e.onChangeUser}}):e._e()],1)})),0)]}}])}),e._v(" "),n("AfsContextMenu",{ref:"filtersContextMenu2",attrs:{id:e.menuId2,type:"dropdown","init-width":"208",modifiers:{y:"bottom",x:"center"},offset:12},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.getBEMClass;return[n("ul",{class:[r("section"),r("section_pad-sm")]},e._l(e.filters.checkboxes,(function(t){return n("li",{key:t.id,class:r("item")},[n("AfsCheckbox",{class:r("item-checkbox"),attrs:{"model-value":t.isSelected},on:{"model-changed":function(n){return e.onChangeCheckbox(n,t)}}},[n("AfsText",{attrs:{type:"paragraph",inline:""}},[e._v("\n              "+e._s(t.text)+"\n            ")])],1)],1)})),0),e._v(" "),e.hideNotification?e._e():n("ul",{staticClass:"app-comments-filters__item-list",class:r("section")},[n("li",{class:r("item")},[n("button",{staticClass:"app-comments-filters__btn-icon",class:[r("item-clickable"),r("item-in"),r("item-in_icon")],on:{click:e.onNotificationsClick}},[n("AfsIcon",{staticClass:"app-comments-filters__item-icon",attrs:{name:"envelope-badge-16",filled:""}}),e._v(" "),n("AfsText",{staticClass:"app-comments-filters__btn-text"},[e._v("\n              Notification Settings\n            ")])],1)])])]}}])})],1)};r._withStripped=!0;var i=n(3),o=n(5),a=n(22),s=n(10),u=n(73),c=n(199),l=n(84),f=n(21),d=n.n(f),h=n(39),p=n.n(h),m=n(8),v=n.n(m),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-user-select",attrs:{id:e.containerId}},[n("AfsButton",{directives:[{name:"dropdown",rawName:"v-dropdown:[menuId]",arg:e.menuId}],staticClass:"app-user-select__btn",attrs:{type:"button",disabled:e.disabled}},[n("UserAvatar",{staticClass:"app-user-select__img",attrs:{size:"sm",img:e.selectedUser.img,title:e.selectedUser.name}}),e._v(" "),n("AfsText",{staticClass:"app-user-select__text",attrs:{tag:"span",ellipsis:""}},[e._v("\n      "+e._s(e.selectedUser.name)+"\n    ")]),e._v(" "),n("AfsIcon",{staticClass:"app-user-select__icon",attrs:{name:"chevron-down-8"}})],1),e._v(" "),n("AfsContextMenu",{ref:e.menuId,attrs:{id:e.menuId,type:"dropdown",modifiers:{y:"bottom",x:"center"},"parent-container-id":e.containerId},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.getBEMClass;return[n("ul",{class:r("section")},e._l(e.list,(function(t){return n("li",{key:t.id,class:r("item")},[n("button",{staticClass:"app-user-select__menu-btn",class:[r("item-clickable"),r("user")],attrs:{type:"button"},on:{click:function(n){return e.onClickUser(t)}}},[n("UserAvatar",{class:r("user-figure"),attrs:{size:"md",img:t.img,title:t.name}}),e._v(" "),n("AfsText",{attrs:{type:"single line",inline:"",ellipsis:""}},[n("span",[e._v("\n                "+e._s(t.fullName||t.name)+"\n              ")])])],1)])})),0)]}}])})],1)};y._withStripped=!0;var g={name:"AppUserSelect",components:{AfsButton:n(30).a,AfsContextMenu:s.a,AfsText:i.a,AfsIcon:o.a,UserAvatar:l.a},directives:{dropdown:p.a},props:{list:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1}},data:function(){return{menuId:v()(),containerId:v()()}},computed:{selectedUser:function(){return this.list.find((function(e){return e.isSelected}))||this.list[0]}},methods:{onClickUser:function(e){this.$emit("change-user",e),this.$refs[this.menuId].close()}}},b=(n(424),n(0)),w=Object(b.a)(g,y,[],!1,null,null,null);w.options.__file="src/lib/commentPanel/components/UserSelect.vue";var _=w.exports,O={name:"AppCommentsFilters",components:{AfsText:i.a,AfsIcon:o.a,AfsButtonIcon:a.a,AfsContextMenu:s.a,AfsCheckbox:u.a,AfsRadio:c.a,AppUserSelect:_,UserAvatar:l.a},directives:{dropdown:p.a,hint:d.a},props:{filters:{type:Object,default:null},hideNotification:{type:Boolean,default:!1}},data:function(){return{menuId:"filters-menu-id",menuId2:"filters-menu-id-2",hintId:v()(),isVisible:!0}},computed:{titleData:function(){var e,t,n,r;if(null===(e=this.filters)||void 0===e||!e.radios)return!1;var i=null===(t=this.filters)||void 0===t||null===(n=t.radios)||void 0===n?void 0:n.find((function(e){return e.isSelected})),o={text:"",user:null};if(null!=i&&null!==(r=i.users)&&void 0!==r&&r.length){var a=i.users.find((function(e){return e.isSelected}));o.text=null==a?void 0:a.name}else o.text=null==i?void 0:i.text;return o},selectedRadio:function(){return this.filters.radios.find((function(e){return e.isSelected})).text||""},visibilityIcon:function(){return this.isVisible?"eye-16-2":"eye-off-16-2"},hintConfig:function(){return{type:"hint",id:this.hintId,modifiers:{y:"bottom",x:"center"},offset:4}},hintText:function(){return this.isVisible?"Hide pins on design":"Show pins on design"}},methods:{onChangeRadio:function(e,t){var n,r,i=Array.isArray(t.users)&&(null===(n=t.users.find((function(e){return e.isSelected})))||void 0===n?void 0:n.id);this.$emit("change-radio",{name:e,item:t,forSave:{Name:t.name,Value:JSON.stringify({id:t.id,userId:i||(null==t||null===(r=t.users)||void 0===r?void 0:r[0])||""})}})},onChangeCheckbox:function(e,t){this.$emit("change-checkbox",{isSelected:e,item:t,forSave:{Name:t.name,Value:e?1:0}})},onChangeUser:function(e){this.$emit("change-radio",{user:e,forSave:{Name:"UserFrom",Value:JSON.stringify({id:"from",userId:e.id})}})},isRadioBtnVisible:function(e){return!e.users||e.users&&e.users.length},onNotificationsClick:function(){this.$emit("open-notifications"),this.$refs.filtersContextMenu2.close()},toggleVisibility:function(){this.isVisible=!this.isVisible,this.$emit("visibility-change",this.isVisible)}}},C=(n(425),Object(b.a)(O,r,[],!1,null,null,null));C.options.__file="src/lib/commentPanel/components/CommentFilters.vue";t.a=C.exports},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-header"},[n("div",{staticClass:"comment-header__task"},[e._t("header"),e._v(" "),e.taskHrid?[n("a",{staticClass:"comment-header__task-hrid",attrs:{href:e.taskLink,target:"_parent"}},[e._v("\n        "+e._s(e.taskHrid)+"\n      ")]),e._v(" "),n("TaskPriority",{attrs:{value:e.taskPriority}})]:e._e()],2),e._v(" "),n("div",{staticClass:"comment-header__align",class:{"comment-header__align_right":!e.taskHrid}},[e.taskStatus?n("ModalEditCommentsSelectStatus",{attrs:{"task-status":e.taskStatus},on:{input:function(t){return e.$emit("change-status",t)}}}):e._e(),e._v(" "),e.taskHrid||e.isAnonymous?e._e():n("span",{directives:[{name:"hint",rawName:"v-hint",value:{id:"resolve",delay:1},expression:"{ id: 'resolve', delay: 1 }"}],staticClass:"comment-header__resolve-comment",on:{click:function(t){return e.$emit("handle-resolve")}}},[n("AfsButtonIcon",{class:{"is-resolved":e.isResolved},attrs:{transparent:"",size:"lg",icon:"checkmark-circle"}}),e._v(" "),n("span",[e._v(e._s(e.isResolved?"Resolved":"Resolve"))])],1),e._v(" "),n("AfsButtonIcon",{directives:[{name:"hint",rawName:"v-hint",value:{id:"prev-comment",delay:1},expression:"{ id: 'prev-comment', delay: 1 }"}],attrs:{transparent:"",icon:"chevron-left",disabled:!e.prevNextThreadIds.prev},on:{click:function(t){return e.changeActiveThread("prev")}}}),e._v(" "),n("AfsButtonIcon",{directives:[{name:"hint",rawName:"v-hint",value:{id:"next-comment",delay:1},expression:"{ id: 'next-comment', delay: 1 }"}],staticClass:"comment-header__btn-right",attrs:{transparent:"",icon:"chevron-left",disabled:!e.prevNextThreadIds.next},on:{click:function(t){return e.changeActiveThread("next")}}})],1),e._v(" "),n("ContextMenu",e._b({ref:"prev-comment",attrs:{id:"prev-comment"}},"ContextMenu",e.hintConfigPrev,!1),[e._v("\n    Previous Comment (Shift+Left)\n  ")]),e._v(" "),n("ContextMenu",e._b({ref:"next-comment",attrs:{id:"next-comment"}},"ContextMenu",e.hintConfig,!1),[e._v("\n    Next Comment (Shift+Right)\n  ")]),e._v(" "),n("ContextMenu",e._b({attrs:{id:"resolve"}},"ContextMenu",e.hintConfig,!1),[e._v("\n    "+e._s(e.isResolved?"Unresolve":"Resolve")+" Comment\n  ")])],1)};r._withStripped=!0;var i=n(10),o=n(22),a=n(200),s=n(21),u=n.n(s),c=function(){var e=this.$createElement;return(this._self._c||e)("Select",{staticClass:"modal-edit-task-status",attrs:{options:this.statusOptions,value:this.currentStatus},on:{input:this.handleStatusChange}})};c._withStripped=!0;var l={name:"ModalEditCommentsSelectStatus",components:{Select:n(207).a},props:{taskStatus:{type:String,default:""}},computed:{statusOptions:function(){return[{id:"ToDo",name:"To Do"},{id:"InProgress",name:"In Progress"},{id:"Resolved",name:"Resolved"}]},currentStatus:function(){var e=this;return this.statusOptions.find((function(t){return t.id===e.taskStatus}))}},methods:{handleStatusChange:function(e){this.$emit("input",e)}}},f=(n(415),n(0)),d=Object(f.a)(l,c,[],!1,null,null,null);d.options.__file="src/lib/commentPanel/components/ModalEditCommentsSelectStatus.vue";var h=d.exports,p=window.__CORE__,m={name:"CommentEditHeaderPanel",directives:{hint:u.a},components:{ContextMenu:i.a,AfsButtonIcon:o.a,TaskPriority:a.a,ModalEditCommentsSelectStatus:h},props:{activeThread:{type:Object,default:function(){return{}}},activeThreadId:{type:[String,Number],default:""},sortedThreads:{type:Array,default:function(){return[]}},taskLink:{type:String,default:""},isAnonymous:{type:Boolean,default:!1}},computed:{taskPriority:function(){var e,t;return(null===(e=this.activeThread)||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.LwTaskPriority)||""},taskHrid:function(){var e,t;return(null===(e=this.activeThread)||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.LwTaskHrid)||""},taskStatus:function(){var e,t;return(null===(e=this.activeThread)||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.LwTaskStatus)||""},prevNextThreadIds:function(){var e=this,t={prev:"",next:""};if(this.activeThreadId){var n=this.sortedThreads.findIndex((function(t){return t===e.activeThreadId}));n>-1&&(t.prev=this.sortedThreads[n-1]||"",t.next=this.sortedThreads[n+1]||"")}return t},hintConfigPrev:function(){return{type:"hint",modifiers:{y:"bottom",x:"left"},offset:4}},hintConfig:function(){return{type:"hint",modifiers:{y:"bottom",x:"right"},offset:4}},isResolved:function(){var e;return(null===(e=this.activeThread)||void 0===e?void 0:e.resolved)||!1}},created:function(){document.addEventListener("keyup",this.handleKey)},beforeDestroy:function(){document.removeEventListener("keyup",this.handleKey)},methods:{changeActiveThread:function(e){var t=this,n=this.prevNextThreadIds[e]||null;n&&(this.$emit("set-active-thread",n),this.$nextTick((function(){p.bus.emit("CommentsDrawingEngine:activate",{id:n,zoomToFit:!0}),t.$refs["prev-comment"].close(),t.$refs["next-comment"].close()})))},handleKey:function(e){var t=e.code,n=e.shiftKey;"ArrowLeft"===t&&n&&this.changeActiveThread("prev"),"ArrowRight"===t&&n&&this.changeActiveThread("next")}}},v=(n(416),Object(f.a)(m,r,[],!1,null,null,null));v.options.__file="src/lib/commentPanel/components/CommentEditHeaderPanel.vue";t.a=v.exports},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContextMenu",{attrs:{id:e.menuId,type:"dropdown","init-width":e.menuWidth,modifiers:{y:"bottom",x:"end"},"max-height-limit":e.maxHeightMenu},on:{close:e.menuClose}},[[n("GridColumn",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapsed,expression:"!isCollapsed"}],attrs:{"padding-size":"xl"}},[n("GridSection",[n("Search",{attrs:{icon:"search-thin-16"},on:{keyup:function(e){e.stopPropagation()},keydown:function(e){e.stopPropagation()}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),n("GridColumn",{style:{maxHeight:e.maxHeightMenuList+"px"},attrs:{"padding-size":"xl"}},[n("GridSection",[e.columnsFound?n("ul",e._l(e.columns,(function(t,r){return n("ColumnsMenuItem",{directives:[{name:"show",rawName:"v-show",value:e.isVisible(t,r),expression:"isVisible(column, index)"}],key:t.id,attrs:{id:t.id,text:t.text,"model-value":t.visible},on:{"model-changed":function(n){return e.toggleColumn(t)}}})})),1):n("ul",{staticClass:"not-found"},[n("AfsText",{attrs:{type:"paragraph"}},[e._v('"'+e._s(e.search)+'" not found')])],1),e._v(" "),n("AfsLink",{attrs:{href:"#"},on:{click:e.toggleItemsList}},[e._v("\n          "+e._s(e.btnShowMoreText)+"\n        ")])],1)],1)]],2)};r._withStripped=!0;var i=n(25),o=n(3),a=n(10),s=n(69),u=n(66),c=n(21),l=n.n(c),f=n(8),d=n.n(f),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{directives:[{name:"hint",rawName:"v-hint:[keyHintId]",arg:e.keyHintId}],staticClass:"columns-menu-item",on:{mouseover:e.mouseOver}},[n("Checkbox",{staticClass:"columns-menu-item__checkbox",attrs:{"model-value":e.modelValue},on:{"model-changed":function(t){return e.$emit("model-changed")}}},[n("AfsText",{ref:"text",staticClass:"columns-menu-item__text",attrs:{type:"paragraph",inline:!0,ellipsis:""}},[e._v("\n      "+e._s(e.text)+"\n    ")])],1),e._v(" "),e.hintVisible?n("ContextMenu",{attrs:{id:e.keyHintId,type:"hint",modifiers:{y:"bottom",x:"start"}}},[e._v("\n    "+e._s(e.text)+"\n  ")]):e._e()],1)};h._withStripped=!0;var p=n(73),m={name:"ColumnsMenuItem",components:{AfsText:o.a,Checkbox:p.a,ContextMenu:a.a},directives:{hint:l.a},props:{id:{type:String,required:!0},text:{type:String,required:!0},modelValue:{type:Boolean},guid:{type:String,default:d()()}},data:function(){return{hintVisible:!1}},computed:{keyHintId:function(){return"".concat(this.guid,"-menu-").concat(this.id)}},methods:{mouseOver:function(){var e;this.hintVisible=this.isOverflowing(null===(e=this.$refs.text)||void 0===e?void 0:e.$el)},isOverflowing:function(e){return e&&e.offsetWidth<e.scrollWidth}}},v=(n(399),n(0)),y=Object(v.a)(m,h,[],!1,null,"1e45f693",null);y.options.__file="src/plugins/FBOM/view/components/ColumnsMenuItem.vue";var g=y.exports,b=n(19),w={name:"ColumnsMenu",components:{AfsLink:i.a,AfsText:o.a,ColumnsMenuItem:g,ContextMenu:a.a,GridColumn:s.a,GridSection:s.c,Search:u.a},directives:{hint:l.a},props:{menuId:{type:String,default:"menu"},columns:{type:Array,default:function(){return[]},validator:function(e){return!e.length||e.every((function(e){return Object(b.hasOwnProperty)(e,"id")&&Object(b.hasOwnProperty)(e,"text")}))}},menuWidth:{type:Number,default:208},maxHeightMenu:{type:Number,default:328},maxHeightMenuList:{type:Number,default:260},menuLength:{type:Number,default:6}},data:function(){return{isCollapsed:!0,search:""}},computed:{btnShowMoreText:function(){return this.isCollapsed?"Show More":"Show Less"},componentId:function(){return d()()},searchText:function(){return this.search.trim().toLowerCase()},columnsFound:function(){return this.columns.some(this.isVisible)}},methods:{createElementId:function(e){return"".concat(this.componentId,"-").concat(e)},isVisible:function(e,t){return this.isCollapsed&&t<this.menuLength||!this.isCollapsed&&e.text.toLowerCase().includes(this.searchText)},toggleItemsList:function(){this.isCollapsed=!this.isCollapsed,this.isCollapsed&&(this.search="")},menuClose:function(){this.search=""},toggleColumn:function(e){e.visible=!e.visible}}},_=(n(400),Object(v.a)(w,r,[],!1,null,"757b8640",null));_.options.__file="src/plugins/FBOM/view/components/ColumnsMenu.vue";t.a=_.exports},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{ref:"modal",staticClass:"afs-modal-confirmation",attrs:{id:e.id,level:"2",size:"md","has-close":e.hasClose,"has-outside-close":!1,"parent-container-id":e.parentContainerId,"data-locator":e.dataLocator},on:{open:e.onOpen,close:e.onClose},scopedSlots:e._u([{key:"default",fn:function(){return[n("div",{staticClass:"afs-modal-confirmation__container"},[n("div",{staticClass:"afs-modal-confirmation__body"},[e._t("default",null,{getBEMClass:e.getBEMClass})],2),e._v(" "),n("div",{staticClass:"afs-modal-confirmation__footer"},[e.hasSlot("footer-additional")?n("div",{staticClass:"afs-modal-confirmation__footer-additional"},[e._t("footer-additional")],2):e._e(),e._v(" "),e.showLoader?n("div",{staticClass:"afs-modal-confirmation__loader"},[n("Loader"),e._v(" "),e.loaderText.length?n("AfsText",{staticClass:"afs-modal-confirmation__loader-text"},[e._v("\n            "+e._s(e.loaderText)+"\n          ")]):e._e()],1):e._e(),e._v(" "),e.hasBtnAccept?n("AfsButton",{staticClass:"afs-modal-confirmation__btn",attrs:{type:"button",primary:!0,disabled:e.acceptBtnDisabled},on:{click:function(t){return t.preventDefault(),e.handleAccept(t)}}},[e._t("accept")],2):e._e(),e._v(" "),e.hasBtnReject?n("AfsButton",{staticClass:"afs-modal-confirmation__btn",attrs:{disabled:e.rejectBtnDisabled,type:"button"},on:{click:function(t){return t.preventDefault(),e.handleReject(t)}}},[e._t("reject")],2):e._e()],1)])]},proxy:!0}],null,!0)})};r._withStripped=!0;var i=n(88),o=n(30),a=n(43),s=n(3),u=n(17),c=n(4),l=n(2),f={name:"AfsModalConfirmation",components:{Modal:i.a,AfsButton:o.a,Loader:a.a,AfsText:s.a},props:{dataLocator:{type:String,default:"modal-confirmation"},id:{type:String,default:Object(u.a)()},hasBtnAccept:{type:Boolean,default:!0},hasBtnReject:{type:Boolean,default:!0},hasClose:{type:Boolean,default:!1},acceptBtnDisabled:{type:Boolean,default:!1},rejectBtnDisabled:{type:Boolean,default:!1},showLoader:{type:Boolean,default:!1},loaderText:{type:String,default:""},parentContainerId:{type:String,default:""}},data:function(){return{confirmed:!1}},computed:{themeClass:function(){var e=Object(c.a)(this.$root);return Object(l.c)(e.theme)}},methods:{getBEMClass:function(e){return Object(l.a)("afs-modal-confirmation",e)},hasSlot:function(e){return!!this.$slots[e]},handleModalOpen:function(){this.confirmed=!1},onOpen:function(){this.handleModalOpen(),this.$emit("open")},onClose:function(){this.$emit("close")},open:function(){this.$refs.modal&&this.$refs.modal.open()},close:function(){this.$refs.modal&&this.$refs.modal.close()},preventConfirmed:function(){if(this.confirmed)return!0;this.confirmed=!0},handleAccept:function(){if(this.preventConfirmed())return!1;this.$emit("accept")},handleReject:function(){if(this.preventConfirmed())return!1;this.$emit("reject")}}},d=(n(413),n(0)),h=Object(d.a)(f,r,[],!1,null,null,null);h.options.__file="WebUI/VueJsComponentLibrary/src/components/ModalConfirmation/App.vue";var p=h.exports;t.a=p},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{ref:"modalAddComment",staticClass:"comment",attrs:{id:"modalAddComment",y:e.modalCoords.y,x:e.modalCoords.x,"close-on-view-click":!e.isPaintMode},on:{close:e.onClose,"close-all-modal":function(t){return e.$emit("close-all-modal")}}},[n("div",[e.editModes.length>1?n("CommentsTools",{attrs:{"edit-modes":e.editModes,"has-text":e.hasCommentText,"is-loading":e.isLoading,"is-drawing":e.isDrawing,thread:e.updatePostedThread},on:{"mode-text":e.setModeText,confirm:function(t){return e.$emit("confirm")},close:e.close,"paint-mode":function(t){e.isPaintMode=t}}}):e._e(),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.modeText,expression:"modeText"}],staticClass:"comment__wrap"},[e.hideHeader?e._e():n("ModalDraggerTitle",{on:{drag:e.moveModal}}),e._v(" "),n("div",{staticClass:"comment__body"},[e._t("content")],2)],1)],1),e._v(" "),e.modeText?[e._t("toast")]:e._e()],2)};r._withStripped=!0;var i=n(166),o=n(169),a=n(171),s={name:"ModalAddComments",components:{Modal:n(172).a,CommentsTools:o.a,ModalDraggerTitle:a.a},props:{editModes:{type:Array,default:function(){return["area"]}},activeCommentPosition:{type:Object,default:function(){return{}}},isDrawing:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},hasCommentText:{type:Boolean,default:!1},updatePostedThread:{type:Array,default:function(){return[]}},hideHeader:{type:Boolean,default:!1}},data:function(){return{modeText:!0,isMovePosition:!1,moveModalPosition:{x:0,y:0},menuStartHeight:200,isPaintMode:!1}},computed:{modalCoords:function(){var e;return this.isMovePosition?this.moveModalPosition:Object(i.a)({data:null===(e=this.activeCommentPosition)||void 0===e?void 0:e.iconRect,menuStartHeight:this.menuStartHeight})}},watch:{activeCommentPosition:{immediate:!0,deep:!0,handler:function(e){this.isMovePosition=!1}}},methods:{open:function(){this.isOpened||(this.isOpened=!0,this.modeText=!0,this.isMovePosition=!1,this.$refs.modalAddComment.open(),this.moveModalPosition={x:0,y:0},this.$emit("open"),this.$emit("set-open-modal",this),this.setStartMenuHeight())},close:function(){this.isOpened&&(this.isOpened=!1,this.$refs.modalAddComment.close(),this.$emit("remove-open-modal",this))},onClose:function(){this.$emit("close")},setModeText:function(e){this.modeText=e,e||this.$emit("check-exist-text")},moveModal:function(e){this.moveModalPosition=e,this.isMovePosition=!0},setStartMenuHeight:function(){var e=this;this.$nextTick((function(){e.menuStartHeight=e.$refs.modalAddComment.$el.offsetHeight}))}}},u=(n(422),n(0)),c=Object(u.a)(s,r,[],!1,null,"92fb6a8c",null);c.options.__file="src/lib/commentPanel/components/ModalAddComments.vue";t.a=c.exports},function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return t("AfsSubHeader",{staticClass:"app-comments-header",attrs:{center:!1}},[t("div",{staticClass:"app-comments-header__container"},[this._v("\n    "+this._s(this.subheaderText)+"\n  ")])])};r._withStripped=!0;var i=n(65),o=n(26),a={name:"AppCommentsHeader",components:{AfsSubHeader:i.a},computed:{areTasksEnabled:function(){return o.a.getLicenseDetails(o.a.names.lightWeightTasks).isEnabled},subheaderText:function(){return this.areTasksEnabled?"Comments and Tasks":"Comments"}}},s=n(0),u=Object(s.a)(a,r,[],!1,null,null,null);u.options.__file="src/lib/commentPanel/components/Header.vue";t.a=u.exports},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-toast"},[n("Snackbar",{ref:"snackbarToast",staticClass:"comment-toast__first-plan",attrs:{"hide-close":""},nativeOn:{click:function(t){return e.close(t)}},scopedSlots:e._u([{key:"icon",fn:function(){return[n("Icon",{staticClass:"comment-toast__icon",attrs:{name:"plus-16-2"}})]},proxy:!0},{key:"default",fn:function(){return[n("AfsText",{staticClass:"comment-toast__text",attrs:{inline:""}},[e._v("\n        "+e._s(e.toastText)+"\n      ")])]},proxy:!0},{key:"action",fn:function(){return[n("AfsText",{staticClass:"comment-toast__btn",attrs:{inline:""},on:{click:e.exit}},[e._v("\n        Esc to Exit\n      ")])]},proxy:!0}])})],1)};r._withStripped=!0;var i=n(5),o=n(3),a=n(105),s=n(59),u={PCBView3D:"Select an object or point to leave a comment",LSMView:"Select an object to leave a comment",FBOM:"Select a row to leave a comment",default:"Select an object or click and drag to leave a comment"},c={name:"AddCommentToast",components:{Icon:i.a,AfsText:o.a,Snackbar:a.a},props:{activeTab:{type:String,default:""}},data:function(){return{isOpened:!1}},computed:{toastText:function(){return(null==u?void 0:u[this.activeTab])||u.default}},watch:{isOpened:{immediate:!0,handler:function(e){e?(document.addEventListener("keyup",this.handleKeyUp,!0),window.addEventListener("resize",this.handleDocumentResize),s.a.add(this)):(document.removeEventListener("keyup",this.handleKeyUp,!0),window.removeEventListener("resize",this.handleDocumentResize),s.a.remove(this))}}},methods:{toggle:function(){this.isOpened?this.close():this.open()},open:function(){this.isOpened||(this.$refs.snackbarToast&&this.$refs.snackbarToast.open(),this.isOpened=!0)},close:function(){this.isOpened&&(this.$refs.snackbarToast&&this.$refs.snackbarToast.close(),this.isOpened=!1)},handleKeyUp:function(e){e.stopPropagation(),e.preventDefault();var t=document.querySelectorAll(".comment-toast");27===e.keyCode&&t[t.length-1]===this.$el&&s.a.isLast(this)&&this.exit()},exit:function(){this.close(),this.$emit("close:esc")},handleDocumentResize:function(){this.close()}}},l=(n(426),n(0)),f=Object(l.a)(c,r,[],!1,null,null,null);f.options.__file="src/lib/commentPanel/components/AddCommentToast.vue";t.a=f.exports},function(e,t,n){"use strict";var r=function(e){return new Promise((function(t,n){e.addEventListener("did-screenshot",(function r(i){var o=i.detail;e.removeEventListener("did-screenshot",r);var a=o.error,s=o.data;setTimeout((function(){a?n(a):t(s)}),0)})),e.dispatchEvent(new Event("do-screenshot"))}))},i=function(e){var t=(new XMLSerializer).serializeToString(e);return"data:image/svg+xml; charset=utf8, "+encodeURIComponent(t)},o=function(e){return new Promise((function(t,n){var r=new Image;r.onerror=n,r.onload=function(){t(r)},r.src=e}))};function a(e){var t,n=e.cloneNode(!1);if((null!==(t=e.shadowRoot)&&void 0!==t?t:e).childNodes.forEach((function(e){var t=e;null!==t.offsetParent&&function(e){if(e.getBoundingClientRect&&e.tagName&&!e.dataset.screenshot){var t=e.getBoundingClientRect(),n=document.documentElement.clientWidth,r=document.documentElement.clientHeight;return!(t.right<0||t.bottom<0||t.left>n||t.top>r)}return!0}(t)&&n.appendChild(a(t))})),n.style){var r=window.getComputedStyle(e);if(r.cssText)n.style.cssText=r.cssText;else for(var i=0;i<r.length;i+=1){var o=r[i];n.style.setProperty(o,r.getPropertyValue(o),r.getPropertyPriority(o))}}return n}var s=function(e){var t,n,r,i=e.parentElement,o=null===(t=i.getBoundingClientRect())||void 0===t?void 0:t.width,s=Math.min((null===(n=i.getBoundingClientRect())||void 0===n?void 0:n.height)+80,null===(r=e.getBoundingClientRect())||void 0===r?void 0:r.height),u=a(e);return u&&(u.style.width="".concat(o,"px"),u.style.height="".concat(s,"px")),function(e,t,n){var r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),o=document.createElementNS(r,"foreignObject");return i.setAttribute("width","".concat(t)),i.setAttribute("height","".concat(n)),i.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),i.appendChild(o),o.appendChild(e),i}(u,o,s)};function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}t.a=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,a,c,l,f,d,h,p,m,v,y,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("options is null");case 3:return(t.svg||t.html)&&(f=t.svg||s(t.html),n=o(i(f))),t.canvas&&(d=t.canvas,c=d.width,l=d.height,a=r(d).then(o)),e.next=7,Promise.all([n,a]);case 7:return h=e.sent,p=u(h,2),m=p[0],v=p[1],(y=document.createElement("canvas")).width=c||(null==m?void 0:m.width)||0,y.height=l||(null==m?void 0:m.height)||0,g=y.getContext("2d"),v&&g.drawImage(v,0,0,y.width,y.height),m&&g.drawImage(m,0,0,y.width,y.height),e.abrupt("return",y.toDataURL());case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,s,"next",e)}function s(e){l(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"part-number"},[n("div",{staticClass:"part-number__clip"},[e.url?n("AfsLink",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:e.search,value:e.value},expression:"{\n        query: search,\n        value: value\n      }"}],attrs:{href:e.url,target:"_blank"},on:{click:e.onLinkClick}},[e._v("\n      "+e._s(e.value)+"\n    ")]):n("AfsText",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:e.search,value:e.value},expression:"{\n        query: search,\n        value: value\n      }"}]},[e._v("\n      "+e._s(e.value)+"\n    ")])],1),e._v(" "),e.statusName?n("div",{staticClass:"marker-container"},[n("div",{staticClass:"marker-lifecycle",class:e.createStatusClass(e.statusName),attrs:{title:e.statusName}})]):e._e()])};r._withStripped=!0;var i=n(25),o=n(3),a=n(85),s=window.__APP__.analytics,u={name:"ValuePartNumber",components:{AfsLink:i.a,AfsText:o.a},directives:{highlight:a.a},props:{search:{type:String,default:""},url:{type:String,default:void 0},statusName:{type:String,default:void 0},value:{type:String,default:""}},methods:{createStatusClass:function(e){switch(e){case"EOL":case"Obsolete":return"error";case"NRND":return"warning";case"Unknown":return"unknown";default:return"success"}},onLinkClick:function(){s.dispatchViewNavigationEvent("FBom",{action:"OctopartClick"})}}},c=(n(402),n(0)),l=Object(c.a)(u,r,[],!1,null,null,null);l.options.__file="src/plugins/FBOM/view/components/ValuePartNumber.vue";t.a=l.exports},function(e,t,n){"use strict";var r=function(){var e=this.$createElement;return(this._self._c||e)("AfsText",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:this.search,value:this.value},expression:"{\n    query: search,\n    value: value\n  }"}],style:{color:this.color}},[this._v(this._s(this.value))])};r._withStripped=!0;var i=n(3),o=n(85),a={name:"ValueColoredText",components:{AfsText:i.a},directives:{highlight:o.a},props:{search:{type:String,default:""},color:{type:String,default:void 0},value:{type:String,default:""},col:{type:Object,default:void 0}}},s=n(0),u=Object(s.a)(a,r,[],!1,null,null,null);u.options.__file="src/plugins/FBOM/view/components/ValueColoredText.vue";t.a=u.exports},function(e,t,n){"use strict";var r=function(){var e=this.$createElement;return(this._self._c||e)("AfsText",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:this.search,value:this.value},expression:"{\n    query: search,\n    value: value\n  }"}],style:this.color&&{paddingLeft:"8px",borderLeft:"16px solid "+this.color}},[this._v(this._s(this.value))])};r._withStripped=!0;var i=n(3),o=n(85),a={name:"ValueRevisionState",components:{AfsText:i.a},directives:{highlight:o.a},props:{search:{type:String,default:""},color:{type:String,default:void 0},value:{type:String,default:""}}},s=n(0),u=Object(s.a)(a,r,[],!1,null,null,null);u.options.__file="src/plugins/FBOM/view/components/ValueRevisionState.vue";t.a=u.exports},function(e,t,n){"use strict";var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fbom-no-results"},[t("AfsIcon",{staticClass:"fbom-no-results__icon",attrs:{name:"search-thin-16"}}),this._v(" "),t("AfsText",{staticClass:"fbom-no-results__title",attrs:{type:"large title"}},[this._v("No results for your search")]),this._v(" "),t("AfsText",{attrs:{type:"single line"}},[this._v("Clear the search and start again.")])],1)};r._withStripped=!0;var i=n(5),o=n(3),a={name:"NotFound",components:{AfsIcon:i.a,AfsText:o.a}},s=(n(403),n(0)),u=Object(s.a)(a,r,[],!1,null,null,null);u.options.__file="src/plugins/FBOM/view/components/NotFound.vue";t.a=u.exports},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("Icon",{staticClass:"alternate-part-expander",class:{"alternate-part-expander--collapsed":!e.expanded},attrs:{name:"chevron-down-s"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$emit("click")}}})};r._withStripped=!0;var i={name:"AlternatePartsExpander",components:{Icon:n(5).a},props:{expanded:{type:Boolean,default:!1}}},o=(n(404),n(0)),a=Object(o.a)(i,r,[],!1,null,"fd8086ce",null);a.options.__file="src/plugins/FBOM/view/components/AlternatePartsExpander.vue";t.a=a.exports},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"thread-group"},[e.title?n("div",{staticClass:"thread-group__title"},[e.icon?n("Icon",{staticClass:"thread-group__icon",attrs:{name:e.icon,filled:e.iconFilled}}):e._e(),e._v(" "),n("AfsText",{staticClass:"thread-group__name",attrs:{type:"group",ellipsis:""}},[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),n("AfsText",{staticClass:"thread-group__count"},[e._v(" ("+e._s(e.count)+") ")])],1):e._e(),e._v(" "),e._t("default")],2)};r._withStripped=!0;var i=n(3),o=n(5),a={name:"ThreadGroup",components:{AfsText:i.a,Icon:o.a},props:{title:{type:String,default:""},icon:{type:String,default:""},iconFilled:{type:Boolean,default:!0},count:{type:Number,default:0}}},s=(n(410),n(0)),u=Object(s.a)(a,r,[],!1,null,"3f89db13",null);u.options.__file="src/lib/commentPanel/components/ThreadGroup.vue";t.a=u.exports},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isAnonymous?n("Placeholder",{scopedSlots:e._u([{key:"default",fn:function(){return[e._v("\n      To place and view comments, you must register in Altium 365\n    ")]},proxy:!0},{key:"btns",fn:function(){return[n("SignupButton",{attrs:{url:e.registerLink}})]},proxy:!0}],null,!1,1944887250)}):n("Placeholder",{scopedSlots:e._u([{key:"default",fn:function(){return[e._v("\n      "+e._s(e.noCommentsText||"Ask a question, leave a note, or just draw. Comments that you and other people post will appear here.")+"\n    ")]},proxy:!0},{key:"btns",fn:function(){return[n("AfsButton",{attrs:{icon:"bubble-add-16",wide:"","is-selected":e.isActiveAddComment},on:{click:e.onAddComment}},[e._v("\n        Place a Comment\n      ")])]},proxy:!0}])})],1)};r._withStripped=!0;var i=n(30),o=n(170),a=n(165),s={name:"ThreadPlaceholder",components:{AfsButton:i.a,Placeholder:o.a,SignupButton:a.default},props:{isAnonymous:{type:Boolean,default:!1},registerLink:{type:String,default:""},isActiveAddComment:{type:Boolean,default:!1},noCommentsText:{type:String,default:""}},methods:{onAddComment:function(){this.$emit("add-comment")}}},u=n(0),c=Object(u.a)(s,r,[],!1,null,null,null);c.options.__file="src/lib/commentPanel/components/ThreadPlaceholder.vue";t.a=c.exports},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"context-menu"},[n("AfsButtonIcon",{directives:[{name:"hint",rawName:"v-hint",value:{id:"more",delay:10},expression:"{ id: 'more', delay: 10 }"},{name:"dropdown",rawName:"v-dropdown:[id]",arg:e.id}],attrs:{transparent:"",size:"lg",icon:"more-16-2"}}),e._v(" "),n("ContextMenu",{ref:"contextMenu",attrs:{id:e.id,type:"dropdown",offset:-6,modifiers:{y:"bottom",x:"end"}},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.getBEMClass;return[n("ul",{class:r("section")},e._l(e.contextMenu,(function(t,i){return n("li",{key:i,class:r("item")},[t.isHide?e._e():n("button",{class:[r("item-clickable"),r("item-in")],attrs:{type:"button"},on:{click:function(n){return e.onClick(t)}}},[n("AfsText",{attrs:{type:"single line",inline:""}},[e._v("\n              "+e._s(t.text)+"\n            ")])],1)])})),0)]}}])}),e._v(" "),n("ContextMenu",e._b({attrs:{id:"more"}},"ContextMenu",e.hintConfig,!1),[e._v("More Options")])],1)};r._withStripped=!0;var i=n(22),o=n(3),a=n(10),s=n(39),u=n.n(s),c=n(21),l=n.n(c),f={name:"CommentContextMenu",directives:{dropdown:u.a,hint:l.a},components:{AfsButtonIcon:i.a,AfsText:o.a,ContextMenu:a.a},props:{hideCopyLink:{type:Boolean,default:!1},hideEdit:{type:Boolean,default:!1},hideDelete:{type:Boolean,default:!1},hideConvert:{type:Boolean,default:!1},changePosition:{type:Object,default:function(){return{}}}},data:function(e){return{id:"contextMenu-".concat(e._uid)}},computed:{contextMenu:function(){return[{text:"Convert to Task",event:"convert-to-task",isHide:this.hideConvert},{text:"Edit",event:"edit",isHide:this.hideEdit},{text:"Delete",event:"delete",isHide:this.hideDelete},{text:"Copy Link",event:"copy-link",isHide:this.hideCopyLink}]},hintConfig:function(){return{type:"hint",modifiers:{y:"bottom",x:"right"},offset:4}}},watch:{changePosition:{immediate:!0,deep:!0,handler:function(e){this.$refs.contextMenu&&this.$refs.contextMenu.close()}}},methods:{onClick:function(e){this.$emit(e.event),this.$refs.contextMenu&&this.$refs.contextMenu.close()}}},d=n(0),h=Object(d.a)(f,r,[],!1,null,null,null);h.options.__file="src/lib/commentPanel/components/CommentContextMenu.vue";t.a=h.exports},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.screenshotUrl?n("div",{staticClass:"snapshot"},[n("AfsText",{ref:"screenshotText",staticClass:"snapshot__text",class:{"none-events":e.isDropdownOpen},attrs:{inline:""},on:{click:e.openDropdown}},[e._v("\n    Original Snapshot\n  ")]),e._v(" "),n("ContextMenu",{ref:"screenshotDropdown",staticClass:"snapshot__dropdown",attrs:{type:"dropdown","init-width":240,"max-height-limit":200,modifiers:{y:"bottom",x:"start"}},on:{close:e.closeDropdown}},[n("div",{staticClass:"snapshot__figure"},[n("img",{staticClass:"snapshot__img",attrs:{src:e.screenshotUrl,alt:"screenshot"},on:{click:e.openModal}}),e._v(" "),n("Icon",{staticClass:"snapshot__open",attrs:{name:"open-16"},nativeOn:{click:function(t){return e.openModal(t)}}})],1)]),e._v(" "),n("Modal",{ref:"screenshotModal",attrs:{id:"screenshot-"+e._uid,"close-by-esc":!1,level:"4",size:"xxl",type:"gallery"},on:{close:e.closeModal}},[n("img",{staticClass:"snapshot__img details-modal-img",attrs:{src:e.screenshotUrl,alt:"screenshot"}})])],1):e._e()};r._withStripped=!0;var i=n(88),o=n(10),a=n(5),s=n(3),u=n(59),c={name:"Snapshot",components:{AfsText:s.a,Icon:a.a,ContextMenu:o.a,Modal:i.a},props:{screenshotUrl:{type:String,default:""}},data:function(){return{isDropdownOpen:!1,isModalOpen:!1}},watch:{isModalOpen:{immediate:!0,handler:function(e){e?(document.addEventListener("keyup",this.handleKeyUp,!0),u.a.add(this.$refs.screenshotModal)):(document.removeEventListener("keyup",this.handleKeyUp,!0),u.a.remove(this.$refs.screenshotModal))}}},methods:{openDropdown:function(){this.$refs.screenshotDropdown&&this.$refs.screenshotDropdown.open(this.$refs.screenshotText.$el),this.isDropdownOpen=!0},closeDropdown:function(e){this.isDropdownOpen=!1},openModal:function(){this.$refs.screenshotModal&&this.$refs.screenshotModal.open(),this.$refs.screenshotModal&&this.$emit("open-modal",this.$refs.screenshotModal),this.isModalOpen=!0},closeModal:function(){this.isModalOpen=!1,this.openDropdown(),this.$emit("close-modal",this.$refs.screenshotModal)},handleKeyUp:function(e){e.stopPropagation(),e.preventDefault(),27===e.keyCode&&u.a.isLast(this.$refs.screenshotModal)&&this.$refs.screenshotModal&&this.$refs.screenshotModal.close()}}},l=(n(414),n(0)),f=Object(l.a)(c,r,[],!1,null,null,null);f.options.__file="src/lib/commentPanel/components/Snapshot.vue";t.a=f.exports},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("th",{directives:[{name:"hint",rawName:"v-hint:[keyHintId]",arg:e.keyHintId}],staticClass:"fbom-column-head",class:{"fbom-column-head--sorted":e.sorted,active:e.active},style:{width:e.width,minWidth:e.minWidth+"px"},on:{mouseover:e.onMouseOver}},[e.hintVisible&&!e.resizing?n("ContextMenu",{attrs:{id:e.keyHintId,type:"hint",modifiers:{y:"bottom",x:"start"}}},[e._v("\n    "+e._s(e.text)+"\n  ")]):e._e(),e._v(" "),e.sorted?n("button",{staticClass:"fbom-column-head__content",attrs:{type:"button"},on:{click:e.onButtonClick}},[n("span",{ref:"text",staticClass:"fbom-column-head__text"},[e._v("\n      "+e._s(e.text)+"\n    ")]),e._v(" "),n("Icon",{staticClass:"fbom-column-head__icon",attrs:{name:e.sortIcon}})],1):n("div",{staticClass:"fbom-column-head__content"},[n("span",{ref:"text",staticClass:"fbom-column-head__text"},[e._v("\n      "+e._s(e.text)+"\n    ")])]),e._v(" "),e.resizer?n("div",{staticClass:"fbom-column-head__resizer",on:{mousedown:function(t){return t.stopPropagation(),e.$emit("resize")}}}):e._e()],1)};r._withStripped=!0;var i=n(5),o=n(10),a=n(39),s=n.n(a),u=n(21),c=n.n(u),l=n(8),f=n.n(l),d={name:"TableColumnHeader",components:{Icon:i.a,ContextMenu:o.a},directives:{dropdown:s.a,hint:c.a},props:{id:{type:String,required:!0},text:{type:String,default:null},sorted:{type:Boolean,default:!1},resizer:{type:Boolean,default:!1},resizing:{type:Boolean,default:!1},minWidth:{type:Number,default:48},baseWidth:{type:String,default:null},sortBy:{type:Object,default:function(){return{}}},guid:{type:String,default:f()()}},data:function(){return{width:this.baseWidth,hintVisible:null}},computed:{active:function(){var e;return(null===(e=this.sortBy)||void 0===e?void 0:e.col)===this.id},sortIcon:function(){var e;return this.active&&null!==(e=this.sortBy)&&void 0!==e&&e.isAsc?"chevron-up-s":"chevron-down-s"},keyHintId:function(){return"".concat(this.guid,"-heading-").concat(this.id)}},methods:{initWidth:function(){var e=this.$el.getBoundingClientRect().width;e&&(this.width="".concat(e,"px"))},onMouseOver:function(){this.hintVisible=this.isOverflowing(this.$refs.text)},isOverflowing:function(e){return e&&e.offsetWidth<e.scrollWidth},onButtonClick:function(){this.resizing||this.$emit("sort")},resize:function(e){var t=e-this.$el.getBoundingClientRect().left;this.width="".concat(Math.max(t,this.minWidth),"px")}}},h=(n(401),n(0)),p=Object(h.a)(d,r,[],!1,null,"739e52f5",null);p.options.__file="src/plugins/FBOM/view/components/TableColumnHeader.vue";t.a=p.exports},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-header"},[n("div",{staticClass:"comment-header__title",class:{"is-active":e.isActive}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.threadNumber,expression:"threadNumber"}],staticClass:"comment-header__counter"},[e._v("\n      #"+e._s(e.threadNumber)+"\n    ")]),e._v(" "),e.isResolved?n("div",{staticClass:"comment-header__resolved"},[n("Icon",{staticClass:"comment-header__resolved-icon",attrs:{name:"checkmark-circle"}}),e._v(" "),n("AfsText",{staticClass:"comment-header__resolved-label",attrs:{inline:""}},[e._v("\n        Resolved\n      ")])],1):e._e()])])};r._withStripped=!0;var i=n(5),o=n(3),a={name:"CommentHeaderTitle",components:{Icon:i.a,AfsText:o.a},props:{threadNumber:{type:[Number,String],default:""},isResolved:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1}}},s=(n(408),n(0)),u=Object(s.a)(a,r,[],!1,null,null,null);u.options.__file="src/lib/commentPanel/components/CommentHeaderTitle.vue";t.a=u.exports},function(e,t,n){"use strict";n.d(t,"a",(function(){return Ot}));var r=n(15),i=n(28),o=n(7);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createElement",value:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}},{key:"setAttribute",value:function(e,t){for(var n in t)e.setAttribute(n,t[n.toString()]);return e}},{key:"createLeftRoundedRectPath",value:function(e,t,n,r,i){return"M"+(e+i)+","+t+"h"+(n-i)+"v"+r+"h"+(i-n)+"a"+i+","+i+" 0 0 1 "+-i+","+-i+"v"+(2*i-r)+"a"+i+","+i+" 0 0 1 "+i+","+-i+"z"}},{key:"createRightRoundedRectPath",value:function(e,t,n,r,i){return"M"+e+","+t+"h"+(n-i)+"a"+i+","+i+" 0 0 1 "+i+","+i+"v"+(r-2*i)+"a"+i+","+i+" 0 0 1 "+-i+","+i+"h"+(i-n)+"z"}}],(n=null)&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={r:2,strokeWidth:2,color:"white"},h=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"labelStyle",void 0),f(this,"_labelXY",void 0),f(this,"_labelX",void 0),f(this,"_labelY",void 0),f(this,"overlay",void 0),f(this,"useLabelLine",!0),this.labelStyle=n,this.overlay=s.createElement("g"),s.setAttribute(this.overlay,{id:"measurements"}),t.appendChild(this.overlay)}var t,n,r;return t=e,r=[{key:"getXProjection",value:function(e,t){return{from:e,to:[t[0],e[1],t[2]]}}},{key:"getYProjection",value:function(e,t){return{from:[t[0],e[1],e[2]],to:t}}}],(n=[{key:"labelXY",get:function(){return this._labelXY}},{key:"labelX",get:function(){return this._labelX}},{key:"labelY",get:function(){return this._labelY}},{key:"setStyle",value:function(e){this.labelStyle=e}},{key:"getLabelTemplate",value:function(e,t,n){return this.getLabelInfoTemplate(e,t,n)}},{key:"getLabelInfoTemplate",value:function(e,t,n){var r=s.createElement("g"),i=s.createElement("rect"),o=s.createElement("rect"),a=s.createElement("text"),u=s.createElement("text");a.textContent=e;var c=a.getBoundingClientRect();s.setAttribute(a,{x:5,y:.75*c.height,fill:"white"}),s.setAttribute(i,{x:0,y:0,width:c.width+10,height:c.height,fill:"black"}),u.textContent="".concat(t.toFixed(2)).concat(n);var l=u.getBoundingClientRect();return s.setAttribute(u,{x:c.width+15,y:.75*l.height,fill:"black"}),s.setAttribute(o,{x:c.width+10,y:0,width:l.width+10,height:l.height,fill:"white"}),r.appendChild(i),r.appendChild(o),r.appendChild(a),r.appendChild(u),r}},{key:"moveLabelInfo",value:function(e,t){var n=u(Array.from(e.children),4),r=n[0],i=n[1],o=n[2],a=n[3],c=o.getBoundingClientRect();s.setAttribute(o,{y:.75*c.height}),s.setAttribute(r,{width:c.width+10,height:c.height,fill:"black"}),a.textContent="".concat(t.value.toFixed(2)).concat(t.units);var l=a.getBoundingClientRect();s.setAttribute(a,{x:c.width+15,y:.75*l.height}),s.setAttribute(i,{x:c.width+10,width:l.width+10,height:l.height})}},{key:"moveLabelXY",value:function(e,t,n,r){this._labelXY&&this.moveLabel(this._labelXY,{from:e,to:t,label:"XY",value:n,units:r})}},{key:"moveLabelY",value:function(t,n,r,i){if(this._labelY){var o=e.getYProjection(t,n);this.moveLabel(this._labelY,{from:o.from,to:o.to,label:"Y",value:r,units:i})}}},{key:"moveLabelX",value:function(t,n,r,i){if(this._labelX){var o=e.getXProjection(t,n);this.moveLabel(this._labelX,{from:o.from,to:o.to,label:"X",value:r,units:i})}}},{key:"createLabelXY",value:function(e,t,n,r){this._labelXY=this.getLabelTemplateXY(e,t,"XY",n,r),s.setAttribute(this._labelXY,{id:"labelXY"}),this._labelXY.style="cursor: pointer",this.overlay.appendChild(this._labelXY)}},{key:"createLabelX",value:function(t,n,r,i){var o=e.getXProjection(t,n);this._labelX=this.getLabelTemplateX(o.from,o.to,"X",r,i),s.setAttribute(this._labelX,{id:"labelX",style:"visibility: hidden"}),this.overlay.appendChild(this._labelX)}},{key:"createLabelY",value:function(t,n,r,i){var o=e.getYProjection(t,n);this._labelY=this.getLabelTemplateY(o.from,o.to,"Y",r,i),s.setAttribute(this._labelY,{id:"labelY",style:"visibility: hidden"}),this.overlay.appendChild(this._labelY)}},{key:"showLabel",value:function(){this._labelXY&&s.setAttribute(this._labelXY,{style:"visibility: visible"})}},{key:"hideLabel",value:function(){this._labelXY&&s.setAttribute(this._labelXY,{style:"visibility: hidden"})}},{key:"showProjections",value:function(){this._labelX&&(s.setAttribute(this._labelX,{style:"visibility: visible"}),s.setAttribute(this._labelY,{style:"visibility: visible"}))}},{key:"hideProjections",value:function(){this._labelX&&(s.setAttribute(this._labelX,{style:"visibility: hidden"}),s.setAttribute(this._labelY,{style:"visibility: hidden"}))}},{key:"dispose",value:function(){var e,t,n;null===(e=this._labelXY)||void 0===e||e.remove(),null===(t=this._labelX)||void 0===t||t.remove(),null===(n=this._labelY)||void 0===n||n.remove()}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(o,e);var t,n,r,i=b(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e,t)}return t=o,(n=[{key:"getLabelVec",value:function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=Math.sqrt(Math.pow(n,2)+Math.pow(r,2))||1,o=-r/i,a=n/i,s=Math.PI/2,u=Math.atan2(r,n),c=-Math.PI/6;u>0&&u<s&&(c+=Math.PI),u>=s&&u<Math.PI&&(c=Math.PI-c),u<0&&u>-Math.PI&&(c=-c),u<0&&u>-s&&(c+=Math.PI);var l=[e[0]+.5*n,e[1]+.5*r];return{from:l,to:[l[0]+30*(o*Math.cos(c)-a*Math.sin(c)),l[1]+30*(o*Math.sin(c)+a*Math.cos(c))]}}},{key:"moveLabelLine",value:function(e,t){s.setAttribute(e,{x1:t.from[0],y1:t.from[1],x2:t.to[0],y2:t.to[1]})}},{key:"moveLabel",value:function(e,t){var n=m(Array.from(e.children),2),r=n[0],i=n[1],o=this.getLabelVec(t.from,t.to),a=Math.round(o.to[0]-o.from[0]),u=Math.round(o.to[1]-o.from[1]);this.useLabelLine&&this.moveLabelLine(i,{from:[0,0],to:[a,u]}),this.moveLabelInfo(r,{label:t.label,value:t.value,units:t.units}),s.setAttribute(r,{transform:"translate(".concat(a,",").concat(u,")")}),s.setAttribute(e,{transform:"translate(".concat(Math.round(o.from[0]),",").concat(Math.round(o.from[1]),")")})}},{key:"getLabelTemplateXY",value:function(e,t,n,r,i){var o=s.createElement("g"),a=this.getLabelVec(e,t),u=a.to[0]-a.from[0],c=a.to[1]-a.from[1],l=this.getLabelTemplate(n,r,i);if(s.setAttribute(o,{transform:"translate(".concat(a.from[0],",").concat(a.from[1],")")}),o.appendChild(l),this.useLabelLine){var f=this.getLabelLineTemplate([0,0],[u,c]);o.appendChild(f)}return o}},{key:"getLabelTemplateX",value:function(e,t,n,r,i){return this.getLabelTemplateXY(e,t,n,r,i)}},{key:"getLabelTemplateY",value:function(e,t,n,r,i){return this.getLabelTemplateXY(e,t,n,r,i)}},{key:"getLabelLineTemplate",value:function(e,t){var n=s.createElement("line");return s.setAttribute(n,{x1:e[0],y1:e[1],x2:t[0],y2:t[1],stroke:d.color,"stroke-width":d.strokeWidth}),n}}])&&y(t.prototype,n),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(h);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var i=A(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(o,e);var t,n,r,i=T(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e,t)}return t=o,(n=[{key:"getLabelVec",value:function(e,t){return{from:e,to:t}}},{key:"moveLabel",value:function(e,t){var n=S(Array.from(e.children),1)[0],r=this.getLabelVec(t.from,t.to);this.moveLabelInfo(n,{label:t.label,value:t.value,units:t.units});var i=n.getBBox(),o=Math.round(r.to[0]-r.from[0])/2-i.width/2,a=Math.round(r.to[1]-r.from[1])/2-i.height/2;s.setAttribute(n,{transform:"translate(".concat(o,",").concat(a,")")}),s.setAttribute(e,{transform:"translate(".concat(Math.round(r.from[0]),",").concat(Math.round(r.from[1]),")")})}},{key:"getLabelTemplateXY",value:function(e,t,n,r,i){var o=s.createElement("g"),a=this.getLabelVec(e,t),u=(a.to[0],a.from[0],a.to[1],a.from[1],this.getLabelTemplate(n,r,i));return s.setAttribute(o,{transform:"translate(".concat(a.from[0],",").concat(a.from[1],")")}),o.appendChild(u),o}},{key:"getLabelTemplateX",value:function(e,t,n,r,i){return this.getLabelTemplateXY(e,t,n,r,i)}},{key:"getLabelTemplateY",value:function(e,t,n,r,i){return this.getLabelTemplateXY(e,t,n,r,i)}}])&&k(t.prototype,n),r&&k(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(h);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var i=U(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(o,e);var t,n,r,i=B(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e,t)}return t=o,(n=[{key:"moveLabel",value:function(e,t){var n=D(Array.from(e.children),2),r=n[0],i=n[1],o=this.getLabelVec(t.from,t.to),a=Math.round(o.to[0]-o.from[0]),u=Math.round(o.to[1]-o.from[1]);this.useLabelLine&&this.moveLabelLine(i,{from:[0,0],to:[a,u]}),this.moveLabelInfo(r,{label:t.label,value:t.value,units:t.units}),s.setAttribute(r,{transform:"translate(".concat(a,",").concat(u,")")}),s.setAttribute(e,{transform:"translate(".concat(Math.round(o.from[0]),",").concat(Math.round(o.from[1]),")")})}},{key:"getLabelTemplate",value:function(e,t,n){var r=s.createElement("g"),i=s.createElement("rect"),o=s.createElement("text");o.textContent="".concat(t.toFixed(2)).concat(n);var a=o.getBoundingClientRect();return s.setAttribute(o,{x:5,y:.9*a.height,fill:"black",font:"12px Helvetica Neue"}),s.setAttribute(i,{x:0,y:0,width:a.width+10,height:a.height+5,fill:"white",stroke:"black","stroke-width":1}),r.appendChild(i),r.appendChild(o),r}},{key:"moveLabelInfo",value:function(e,t){var n=D(Array.from(e.children),2),r=n[0],i=n[1];i.textContent="".concat(t.value.toFixed(2)).concat(t.units);var o=i.getBoundingClientRect();s.setAttribute(i,{x:5,y:.9*o.height}),s.setAttribute(r,{x:0,width:o.width+10,height:o.height+5})}},{key:"getLabelTemplateXY",value:function(e,t,n,r,i){var o=s.createElement("g"),a=this.getLabelVec(e,t),u=a.to[0]-a.from[0],c=a.to[1]-a.from[1],l=this.getLabelTemplate(n,r,i);if(s.setAttribute(o,{transform:"translate(".concat(a.from[0],",").concat(a.from[1],")")}),o.appendChild(l),this.useLabelLine){var f=this.getLabelLineTemplate([0,0],[u,c]);o.appendChild(f)}return o}},{key:"getLabelTemplateX",value:function(e,t,n,r,i){return this.getLabelTemplateXY(e,t,n,r,i)}},{key:"getLabelTemplateY",value:function(e,t,n,r,i){return this.getLabelTemplateXY(e,t,n,r,i)}}])&&R(t.prototype,n),r&&R(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(O);function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),V(this,"svg",void 0),V(this,"labelStyleBuilderMap",new Map),this.svg=t,this.labelStyleBuilderMap.set("pointer",(function(e){return new O(n.svg,e)})),this.labelStyleBuilderMap.set("simplepointer",(function(e){return new F(n.svg,e)})),this.labelStyleBuilderMap.set("simple",(function(e){return new M(n.svg,e)})),this.labelStyleBuilderMap.set("roundedRect",(function(e){return new J(n.svg,e)}))}var t,n,r;return t=e,(n=[{key:"getLabelBuilder",value:function(e){var t=this.labelStyleBuilderMap.get(e.viewKind);return t||(t=this.labelStyleBuilderMap.get("pointer")),t(e)}}])&&$(t.prototype,n),r&&$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=K(e);if(t){var i=K(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(e,t){if(t&&("object"===G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(o,e);var t,n,r,i=X(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).useLabelLine=!1,n}return t=o,(n=[{key:"moveLabelXY",value:function(e,t,n,r){if(this._labelXY){var i=this._labelXY,o=i.children.item(0),a=this.getLabelVec(e,t),u="rotate(0)";s.setAttribute(i,{transform:u});var c=Math.round(a.from[0]),l=Math.round(a.from[1]);this.moveLabelInfo(o,{label:"XY",value:n,units:r});var f=i.getBBox(),d=f.width/2,h=f.height/2,p=f.width,m=this.getMeterLength(e,t);m<2*p&&this.hideProjections(),m<1.5*p&&(h+=f.height);var v=this.getMeterDegrees(e,t);u="translate(".concat(c,",").concat(l,") rotate(").concat(v,") translate(").concat(-d,", ").concat(-h,")"),s.setAttribute(i,{transform:u})}}},{key:"getMeterLength",value:function(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}},{key:"moveLabelX",value:function(e,t,n,r){if(this._labelX){var i=h.getXProjection(e,t),o=this._labelX,a=o.children.item(0);this.moveLabelInfo(a,{label:"X",value:n,units:r});var u=this.getLabelVec(i.from,i.to),c=o.getBBox(),l=Math.round(u.from[0]-c.width/2),f=Math.round(u.from[1]-c.height/2),d=c.width;this.getMeterLength(i.from,i.to)<1.5*d&&(f=e[1]>t[1]?f+c.height:f-c.height);var p="translate(".concat(l,",").concat(f,")");s.setAttribute(o,{transform:p})}}},{key:"moveLabelY",value:function(e,t,n,r){if(this._labelY){var i=h.getYProjection(e,t),o=this._labelY,a=o.children.item(0),u="rotate(0)";s.setAttribute(o,{transform:u}),this.moveLabelInfo(a,{label:"Y",value:n,units:r});var c=this.getLabelVec(i.from,i.to),l=o.getBBox(),f=Math.round(c.from[0]),d=Math.round(c.from[1]),p=l.width/2,m=l.height/2,v=l.width;this.getMeterLength(i.from,i.to)<1.5*v&&(m=e[0]>t[0]?m+l.height:m-l.height),u="translate(".concat(f,",").concat(d,") rotate(-90) translate(").concat(-p,", ").concat(-m,")"),s.setAttribute(o,{transform:u})}}},{key:"getMeterDegrees",value:function(e,t){var n=t[1]-e[1],r=t[0]-e[0],i=180*Math.atan2(n,r)/Math.PI;return i>-90&&i<90?i:i>=90&&i<=180?i-180:i+180}},{key:"getLabelTemplate",value:function(e,t,n){var r=s.createElement("g"),i=s.createElement("rect"),o=s.createElement("text");o.textContent="".concat(t.toFixed(2)).concat(n);var a=o.getBoundingClientRect();return s.setAttribute(o,{x:5,y:.9*a.height,fill:"black"}),s.setAttribute(i,{x:0,y:0,rx:4,ry:4,width:a.width+10,height:a.height+5,fill:"white",stroke:"black","stroke-width":1}),r.appendChild(i),r.appendChild(o),r}},{key:"moveLabelInfo",value:function(e,t){var n=H(Array.from(e.children),2),r=n[0],i=n[1];i.textContent="".concat(t.value.toFixed(2)).concat(t.units);var o=i.getBoundingClientRect();s.setAttribute(i,{x:5,y:.9*o.height}),s.setAttribute(r,{x:0,width:o.width+10,height:o.height+5})}},{key:"getLabelTemplateXY",value:function(e,t,n,r,i){var o=s.createElement("g"),a=this.getLabelVec(e,t),u=this.getLabelTemplate(n,r,i);o.appendChild(u);var c=o.getBBox(),l=a.from[0]-c.width/2,f=a.from[1]-c.height/2,d="translate(".concat(l,",").concat(f,")");return s.setAttribute(o,{transform:d}),o}},{key:"getLabelTemplateX",value:function(e,t,n,r,i){var o=s.createElement("g"),a=this.getLabelVec(e,t),u=this.getLabelTemplate(n,r,i),c="translate(".concat(a.from[0],",").concat(a.from[1],")");return s.setAttribute(o,{transform:c}),o.appendChild(u),o}},{key:"getLabelTemplateY",value:function(e,t,n,r,i){var o=s.createElement("g"),a=this.getLabelVec(e,t),u=this.getLabelTemplate(n,r,i),c="translate(".concat(a.from[0],",").concat(a.from[1],")");return s.setAttribute(o,{transform:c}),o.appendChild(u),o}}])&&Y(t.prototype,n),r&&Y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(O),Q=n(34),ee=n(173);function te(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ie(this,"scene",void 0),ie(this,"meterStyle",void 0),ie(this,"primaryColor",void 0),ie(this,"secondaryColor",void 0),ie(this,"thirdColor",void 0),ie(this,"initialZoom",void 0),ie(this,"colorMaterialMap",new Map),ie(this,"nodeContainer",new o.NodeContainer),this.scene=t,this.setStyle(n)}var t,n,r;return t=e,(n=[{key:"build",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Q.b.Cross,o=this.getLineTemplate(t.from,t.to);(n=e.unis).push.apply(n,te(o));var a,s=this.getCapTemplate(t.from);e.add(s),a=r?this.getSnappingCursorTemplate(t.to,i):this.getCapTemplate(t.to),e.add(a)}},{key:"buildCursor",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Q.b.Circle;n?e.add(this.getSnappingCursorTemplate(t,r)):e.add(this.getCursorTemplate(t))}},{key:"setStyle",value:function(e){this.meterStyle=e,e.colors.length>0&&(this.primaryColor=this.initMaterial(e.colors[0])),e.colors.length>1&&(this.secondaryColor=this.initMaterial(e.colors[1])),e.colors.length>2&&(this.thirdColor=this.initMaterial(e.colors[2])),this.primaryColor||(this.primaryColor=this.initMaterial("#000000")),this.secondaryColor||(this.secondaryColor=this.initMaterial("#FFFFFF")),this.thirdColor||(this.thirdColor=this.initMaterial("rgba(255, 255, 255, 0.3)"))}},{key:"initMaterial",value:function(e){var t=this.colorMaterialMap.get(e);if(t)return t;var n=ee.a.toRgbaArray(e);return t=this.scene.addMaterial(new o.Material(n,void 0,void 0,!0,!1)),this.colorMaterialMap.set(e,t),t}},{key:"zoom",get:function(){return this.initialZoom||(this.initialZoom=25),this.scene instanceof o.Scene3D?Math.abs(this.scene.getEye()[2])/1.5:this.initialZoom/this.scene.viewport.GetZoom()}},{key:"getCapTemplate",value:function(e){var t=e[0],n=e[1],r=.3/this.zoom,i=.6*r,a=o.Arc.createCircleFill(t,n,i,this.secondaryColor),s=o.Arc.createCircleFill(t,n,r,this.primaryColor),u=o.Arc.createCircleFill(t,n,i,this.secondaryColor);return a.z=[e[2]+.02,e[2]+.02],s.z=[e[2],e[2]],u.z=[e[2]-.02,e[2]-.02],this.nodeContainer.clear(),this.nodeContainer.arcs.push(a,s,u),this.nodeContainer}},{key:"getLineTemplate",value:function(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],s=.2/this.zoom,u=.5*s,c=o.Uni.createLine(n,r,i,a,u,this.primaryColor),l=o.Uni.createLine(n,r,i,a,s,this.secondaryColor),f=o.Uni.createLine(n,r,i,a,u,this.primaryColor);return c.z=[e[2]+.02,t[2]+.02],l.z=[e[2],t[2]],f.z=[e[2]-.02,t[2]-.02],[c,l,f]}},{key:"getCursorTemplate",value:function(e){var t=e[0],n=e[1],r=this.scene.pixelsToUnits(1),i=[0,.5];this.nodeContainer.clear();var a=this.meterStyle.capOptions.width*r,s=this.meterStyle.capOptions.height*r,u=o.Uni.createRectangle(t,n,a,s,this.primaryColor);u.z=i;var c=o.Uni.createRectangle(t,n,s,a,this.primaryColor);return c.z=i,this.nodeContainer.unis.push(u,c),this.nodeContainer}},{key:"getSnappingCursorTemplate",value:function(e,t){switch(t){case Q.b.Box:return this.getBoxCursorTemplate(e);case Q.b.Triangle:return this.getTriangleCursorTemplate(e);default:return this.getCircleCursorTemplate(e)}}},{key:"getCircleCursorTemplate",value:function(e){var t,n,r=e[0],i=e[1],a=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var s=a*(null!==(t=this.meterStyle.capOptions.radius)&&void 0!==t?t:7),u=a*(null!==(n=this.meterStyle.capOptions.width)&&void 0!==n?n:1),c=o.Arc.createCircleStroke(r,i,s,this.primaryColor,u,[0,.5]);return this.nodeContainer.arcs.push(c),this.nodeContainer}},{key:"getBoxCursorTemplate",value:function(e){var t,n,r,i=e[0],a=e[1],s=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var u=2*s*(null!==(t=this.meterStyle.capOptions.radius)&&void 0!==t?t:7),c=s*(null!==(n=this.meterStyle.capOptions.width)&&void 0!==n?n:1),l=o.Uni.createStrokedRectangle(i-u/2,a+u/2,u,u,c,this.primaryColor);return(r=this.nodeContainer.unis).push.apply(r,te(l)),this.nodeContainer}},{key:"getTriangleCursorTemplate",value:function(e){var t,n,r=e[0],i=e[1],a=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var s=a*(null!==(t=this.meterStyle.capOptions.radius)&&void 0!==t?t:7),u=a*(null!==(n=this.meterStyle.capOptions.width)&&void 0!==n?n:1),c=4*s/Math.sqrt(3),l=r-c/2,f=r,d=r+c/2,h=o.Uni.createLine(l,i-s,f,i+s,u,this.primaryColor),p=o.Uni.createLine(f,i+s,d,i-s,u,this.primaryColor),m=o.Uni.createLine(l,i-s,d,i-s,u,this.primaryColor);return this.nodeContainer.unis.push(h,p,m),this.nodeContainer}},{key:"pixelsToUnitsX",value:function(e){var t=this.scene.viewportToWorld([0,0]);return this.scene.viewportToWorld([e,0])[0]-t[0]}},{key:"pixelsToUnitsY",value:function(e){var t=this.scene.viewportToWorld([0,0]);return this.scene.viewportToWorld([0,e])[1]-t[1]}}])&&re(t.prototype,n),r&&re(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ue=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),se(this,"scene",void 0),se(this,"meterStyleBuilderMap",new Map),this.scene=t,this.meterStyleBuilderMap.set("round",(function(e){return new me(n.scene,e)})),this.meterStyleBuilderMap.set("simplecross",(function(e){return new Ae(n.scene,e)})),this.meterStyleBuilderMap.set("cross",(function(e){return new Ce(n.scene,e)})),this.meterStyleBuilderMap.set("simplebox",(function(e){return new Ue(n.scene,e)}))}var t,n,r;return t=e,(n=[{key:"getMeterBuilder",value:function(e){var t=this.meterStyleBuilderMap.get(e.viewKind);return t||(t=this.meterStyleBuilderMap.get("round")),t(e)}}])&&ae(t.prototype,n),r&&ae(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pe(e);if(t){var i=pe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return he(this,n)}}function he(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}(o,e);var t,n,r,i=de(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e,t)}return t=o,n&&le(t.prototype,n),r&&le(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(oe);function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oe(e);if(t){var i=Oe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return we(this,n)}}function we(e,t){if(t&&("object"===ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _e(e)}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ge(e,t)}(a,e);var t,n,r,i=be(a);function a(e,t){var n,r,o,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,e,t),r=_e(n),s=void 0,(o="whiteTransparentColorId")in r?Object.defineProperty(r,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[o]=s,n}return t=a,r=[{key:"create",value:function(e){return new a(e,{viewKind:"cross",colors:["#000000","#FFFFFF","rgba(255, 255, 255, 0.3)"],capOptions:{width:2.4,height:8.8,lineWidth:.8},lineOptions:{lineCount:2,lineWidth:1}})}}],(n=[{key:"getCapTemplate",value:function(e){var t=e[0],n=e[1],r=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var i=this.meterStyle.capOptions.width*r,a=this.meterStyle.capOptions.height*r,s=o.Uni.createRectangle(t,n,i,a,this.secondaryColor),u=o.Uni.createRectangle(t,n,a,i,this.secondaryColor),c=o.Uni.createRectangle(t,n,i+2*r,a+2*r,this.primaryColor),l=o.Uni.createRectangle(t,n,a+2*r,i+2*r,this.primaryColor);return this.nodeContainer.unis.push(c,l,s,u),this.nodeContainer}},{key:"getLineTemplate",value:function(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],s=this.scene.pixelsToUnits(1),u=this.meterStyle.lineOptions.lineWidth*s,c=o.Uni.createLine(n,r,i,a,u,this.secondaryColor);return[o.Uni.createLine(n,r,i,a,u+2*s,this.primaryColor),c]}}])&&ye(t.prototype,n),r&&ye(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(oe);function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pe(e);if(t){var i=Pe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Te(this,n)}}function Te(e,t){if(t&&("object"===Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ke(e,t)}(a,e);var t,n,r,i=Ee(a);function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,t)}return t=a,r=[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:19,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FFFFFF",i={viewKind:"simplecross",colors:[r],capOptions:{width:t,height:n},lineOptions:{lineWidth:t}};return new a(e,i)}}],(n=[{key:"getCapTemplate",value:function(e){var t=e[0],n=e[1],r=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var i=this.meterStyle.capOptions.width*r,a=this.meterStyle.capOptions.height*r,s=o.Uni.createLine(t,n+a/2,t,n-a/2,i,this.primaryColor);this.nodeContainer.unis.push(s);var u=o.Uni.createLine(t-a/2,n,t+a/2,n,i,this.primaryColor);return this.nodeContainer.unis.push(u),this.nodeContainer}},{key:"getLineTemplate",value:function(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],s=this.scene.pixelsToUnits(1),u=this.meterStyle.lineOptions.lineWidth*s;return[o.Uni.createLine(n,r,i,a,u,this.primaryColor)]}},{key:"getCursorTemplate",value:function(e){return this.getCapTemplate(e)}}])&&xe(t.prototype,n),r&&xe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(oe);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e){return function(e){if(Array.isArray(e))return De(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return De(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return De(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ne(e);if(t){var i=Ne(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Be(this,n)}}function Be(e,t){if(t&&("object"===Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Re(e,t)}(a,e);var t,n,r,i=Le(a);function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,t)}return t=a,r=[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:19,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FFFFFF",i={viewKind:"simplebox",colors:[r],capOptions:{width:t,height:n},lineOptions:{lineWidth:t}};return new a(e,i)}}],(n=[{key:"build",value:function(e,t){arguments.length>3&&void 0!==arguments[3]||Q.b.Cross;var n,r=this.getLineTemplate(t.from,t.to);(n=e.unis).push.apply(n,je(r))}},{key:"getLineTemplate",value:function(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],s=this.scene.pixelsToUnits(1),u=this.meterStyle.lineOptions.lineWidth*s;return[o.Uni.createLine(n,r,i,a,u,this.primaryColor)]}},{key:"getCursorTemplate",value:function(e){return this.getBoxCursorTemplate(e)}}])&&Ie(t.prototype,n),r&&Ie(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(oe);function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $e=function(){function e(t){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=void 0,(r="workspace")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.workspace=t}var t,n,r;return t=e,(n=[{key:"setCursor",value:function(e){var t=this;setTimeout((function(){switch(e){case Q.b.None:t.workspace.style.cursor="none";break;case Q.b.Wait:t.workspace.style.cursor="wait";break;case Q.b.Cross:t.workspace.style.cursor=t.getCrossStyle();break;case Q.b.Box:t.workspace.style.cursor=t.getBoxStyle();break;case Q.b.Circle:t.workspace.style.cursor=t.getCircleStyle();break;default:t.workspace.style.cursor="default"}}),1)}},{key:"getCrossStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:19,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r="url('data:image/svg+xml;utf8,<svg width=\"".concat(e,'" height="').concat(e,'" viewBox="0 0 ').concat(e," ").concat(e,'" fill="none" xmlns="http://www.w3.org/2000/svg"> ')+'<line id="line1" x1="'.concat(e/2,'" y1="0" x2="').concat(e/2,'" y2="').concat(e,'" style="stroke-linecap:round;stroke:').concat(t,";stroke-width:").concat(n,'" /> ')+'<line id="line2" x1="0" y1="'.concat(e/2,'" x2="').concat(e,'" y2="').concat(e/2,'" style="stroke-linecap:round;stroke:').concat(t,";stroke-width:").concat(n,"\" /></svg>') ").concat(e/2," ").concat(e/2,", auto");return r}},{key:"getBoxStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:14,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.7,r="url('data:image/svg+xml;utf8,<svg width=\"".concat(e,'" height="').concat(e,'" viewBox="0 0 ').concat(e," ").concat(e,'" fill="none" xmlns="http://www.w3.org/2000/svg"> ')+'<rect x="1" y="1" width="'.concat(e-2,'" height="').concat(e-2,'" style="stroke:').concat(t,";stroke-width:").concat(n,"\" /></svg>') ").concat(e/2," ").concat(e/2,", auto");return r}},{key:"getCircleStyle",value:function(){return this.getBoxStyle()}}])&&Fe(t.prototype,n),r&&Fe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var We=Q.a.createLogger("MeterController"),Ye=function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),He(this,"scene",void 0),He(this,"canvasControl",void 0),He(this,"nodeMeter",null),He(this,"nodeCursor",null),He(this,"cx",void 0),He(this,"layerIndex",void 0),He(this,"overlay",void 0),He(this,"measurement",void 0),He(this,"meterBuilder",void 0),He(this,"meterProvider",void 0),He(this,"labelBuilder",void 0),He(this,"labelProvider",void 0),He(this,"container",new o.NodeContainer),He(this,"changeMode",(function(e){e&&i.setMeterBuilder(e.id)})),He(this,"invalidate",(function(){if(i.scene&&i.measurement&&"visible"===i.overlay.style.visibility)try{var e=i.scene.worldToViewport(i.measurement.from),t=i.scene.worldToViewport(i.measurement.to);i.labelBuilder.moveLabelXY(e,t,i.measurement.xy||0,i.measurement.unitName||"mm"),i.labelBuilder.moveLabelX(e,t,i.measurement.x||0,i.measurement.unitName||"mm"),i.labelBuilder.moveLabelY(e,t,i.measurement.y||0,i.measurement.unitName||"mm")}catch(e){var n;We.LogError("Try invalidate meter: ".concat(null!==(n=null==e?void 0:e.message)&&void 0!==n?n:e))}})),this.scene=n,this.canvasControl=r,this.nodeMeter=null,this.nodeCursor=null,this.layerIndex=n.layerMap.GetLayersCount()-1,this.meterProvider=new ue(n),this.setMeterBuilder(Q.c.Free),this.overlay=s.createElement("g"),this.labelProvider=new z(this.overlay),this.labelBuilder=this.labelProvider.getLabelBuilder({viewKind:"roundedRect"}),s.setAttribute(this.overlay,{id:"measurements"}),t.appendChild(this.overlay),Q.a.bus.on("LayerManager:changedLayers",(function(){i.drawMeter([i.measurement])})),Q.a.bus.on("Measurement:setStyle",(function(e){return i.setStyle(e)})),Q.a.bus.on("Measurement:changeMode",(function(e){return i.changeMode(e)})),this.canvasControl.on("invalidate",this.invalidate)}var t,n,r;return t=e,r=[{key:"getXProjection",value:function(e,t){return{from:e,to:[t[0],e[1],t[2]]}}},{key:"getYProjection",value:function(e,t){return{from:[t[0],e[1],e[2]],to:t}}}],(n=[{key:"dispose",value:function(){var e=this;this.canvasControl.off("invalidate",this.invalidate),Q.a.bus.off("Measurement:setStyle",(function(t){return e.setStyle(t)})),Q.a.bus.off("Measurement:changeMode",(function(t){return e.changeMode(t)}))}},{key:"activate",value:function(){s.setAttribute(this.overlay,{style:"visibility: visible"})}},{key:"deactivate",value:function(){s.setAttribute(this.overlay,{style:"visibility: hidden"}),this.hideMeter()}},{key:"setMeterBuilder",value:function(e){var t={viewKind:e===Q.c.ObjectToObject?"simplebox":"simplecross",colors:["#FFFFFF"],capOptions:{width:1,height:19,radius:7,lineWidth:2},lineOptions:{lineWidth:1}};this.meterBuilder=this.meterProvider.getMeterBuilder(t)}},{key:"setStyle",value:function(e){this.meterBuilder=this.meterProvider.getMeterBuilder(e.meterStyle),this.labelBuilder.hideProjections(),this.labelBuilder.dispose(),this.labelBuilder=this.labelProvider.getLabelBuilder(e.labelStyle),this.render()}},{key:"isSceneFlipped",get:function(){return this.scene instanceof o.Scene3D?Math.sign(this.scene.getEye()[2])>0:this.scene instanceof o.Scene2D&&this.scene.flipped}},{key:"createXY",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Q.b.Cross;this.clearCursor(),this.meterBuilder.build(e,{from:t,to:n},r,i)}},{key:"createX",value:function(t,n,r){this.meterBuilder.build(t,e.getXProjection(n,r))}},{key:"createY",value:function(t,n,r){this.meterBuilder.build(t,e.getYProjection(n,r))}},{key:"showProjections",value:function(){this.labelBuilder.labelX&&(this.labelBuilder.showProjections(),this.drawMeter([this.measurement]))}},{key:"hideProjections",value:function(){this.labelBuilder.labelX&&(this.labelBuilder.hideProjections(),this.drawMeter([this.measurement]))}},{key:"drawMeter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q.b.Cross;this.clearMeter(!1),this.container.clear(),this.measurement=e[0];try{if(this.measurement&&"visible"===this.overlay.style.visibility){var r,i,o,a=this.scene.worldToViewport(this.measurement.from),s=this.scene.worldToViewport(this.measurement.to);this.labelBuilder.labelXY||(this.labelBuilder.createLabelX(a,s,this.measurement.x||0,this.measurement.unitName||"mm"),this.labelBuilder.createLabelY(a,s,this.measurement.y||0,this.measurement.unitName||"mm"),this.labelBuilder.createLabelXY(a,s,this.measurement.xy||0,this.measurement.unitName||"mm")),this.createXY(this.container,this.measurement.from,this.measurement.to,t,n),this.container.isEmpty||this.labelBuilder.showLabel(),"visible"===(null===(r=this.labelBuilder)||void 0===r||null===(i=r.labelX)||void 0===i||null===(o=i.style)||void 0===o?void 0:o.visibility)&&(this.createX(this.container,this.measurement.from,this.measurement.to),this.createY(this.container,this.measurement.from,this.measurement.to)),this.nodeMeter=this.scene.addNode(this.layerIndex,this.container)}this.render()}catch(e){return We.LogError("Try draw meter. \nDetail: ".concat(e)),e}}},{key:"hideMeter",value:function(){this.hideProjections(),this.clearMeter(!1),this.labelBuilder.hideLabel()}},{key:"updateMeasurement",value:function(e){this.measurement=e}},{key:"drawCursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q.b.Circle;try{this.clearCursor(!1),this.container.clear();var r=this.scene.viewportToWorld(e);this.meterBuilder.buildCursor(this.container,r,t,n),this.nodeCursor=this.scene.addNode(this.layerIndex,this.container),this.render()}catch(e){We.LogError("Try draw cursor. \nDetail: ".concat(e))}}},{key:"clearCursor",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=null;try{this.nodeCursor&&(t=this.nodeCursor.GetId(),this.scene.removeItem(this.nodeCursor),this.nodeCursor=null,e&&this.render())}catch(e){var n;We.LogError("Try clear cursor for nodeId: ".concat(null!==(n=t)&&void 0!==n?n:" is empty",".\nDetail: ").concat(e))}}},{key:"drawMeterWithFitZoom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4;this.clearMeter(),this.container.clear(),this.measurement=e;try{var n,r,i,o,a;if(!this.measurement||"visible"!==this.overlay.style.visibility)return void this.render();null!==(n=this.measurement.fromObject)&&void 0!==n&&n.pcbId&&null!==(r=this.measurement.toObject)&&void 0!==r&&r.pcbId?this.zoomToFitBoundObjects(this.measurement.fromObject.pcbId,this.measurement.toObject.pcbId,t):this.zoomToFitBoundRects(this.measurement.from,this.measurement.to,t);var s=this.scene.worldToViewport(this.measurement.from),u=this.scene.worldToViewport(this.measurement.to);this.createXY(this.container,this.measurement.from,this.measurement.to),this.container.isEmpty||this.labelBuilder.showLabel(),"visible"===(null===(i=this.labelBuilder)||void 0===i||null===(o=i.labelX)||void 0===o||null===(a=o.style)||void 0===a?void 0:a.visibility)&&(this.createX(this.container,this.measurement.from,this.measurement.to),this.createY(this.container,this.measurement.from,this.measurement.to)),this.nodeMeter=this.scene.addNode(this.layerIndex,this.container),this.labelBuilder.labelXY||(this.labelBuilder.createLabelX(s,u,this.measurement.x||0,this.measurement.unitName||"mm"),this.labelBuilder.createLabelY(s,u,this.measurement.y||0,this.measurement.unitName||"mm"),this.labelBuilder.createLabelXY(s,u,this.measurement.xy||0,this.measurement.unitName||"mm")),this.render()}catch(e){We.LogError("Try draw meter with Fit To Zoom. \nDetail: ".concat(e))}}},{key:"zoomToFitBoundObjects",value:function(e,t,n){var r=this.scene.getNodeItemById(e),i=this.scene.getNodeItemById(t),o=this.scene.getBoundingBoxForItem(r),a=this.scene.getBoundingBoxForItem(i),s=this.getMinMaxBoundRects([o,a]),u=[s[0],s[1],s[2]],c=[s[3],s[4],s[5]];this.scene.zoomToFit(u,c,n)}},{key:"getMinMaxBoundRects",value:function(e){var t=Ve(e[0],6),n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5];if(e.forEach((function(e){n>e[0]&&(n=e[0]),r>e[1]&&(r=e[1]),i>e[2]&&(i=e[2]),o<e[3]&&(o=e[3]),a<e[4]&&(a=e[4]),s<e[5]&&(s=e[5])})),n>o){var u=[o,n];n=u[0],o=u[1]}if(r>a){var c=[a,r];r=c[0],a=c[1]}if(i>s){var l=[s,i];i=l[0],s=l[1]}return[n,r,i,o,a,s]}},{key:"zoomToFitBoundRects",value:function(e,t,n){var r=[Math.min(e[0],t[0]),Math.min(e[1],t[1]),0],i=[Math.max(e[0],t[0]),Math.max(e[1],t[1]),0];this.scene.zoomToFit(r,i,n)}},{key:"render",value:function(){var e=this;this.cx&&clearTimeout(this.cx),this.cx=setTimeout((function(){e.canvasControl.invalidate()}),0)}},{key:"clearMeter",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.clearCursor(!1);try{this.nodeMeter&&(this.scene.removeItem(this.nodeMeter),this.nodeMeter=null,e&&this.render())}catch(e){We.LogError("Try clear meter.\nDetail: ".concat(e))}}}])&&Ge(t.prototype,n),r&&Ge(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),qe=n(327);window.__CORE__.createLogger("$$$_PREFORMANCE_COUNTER_$$$");var Xe=function(e,t){var n;return function(r){var i=n;n=Date.now(),(void 0===i||n-i>t)&&e(r)}},Ze=n(42);function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Je,Qe={},et=function(e){return(e.composedPath&&e.composedPath()||[]).findIndex((function(e){return e.id&&"labelXY"===e.id}))>-1},tt=function(e){return!(null==e||!e.checkSnappingPoint)&&e.checkSnappingPoint([e.clientX,e.clientY])},nt=function(e){return(null==e?void 0:e.getMeasurementMode())===Q.c.ObjectToObject};Qe.IDLE=[{to:"CAPTURED",where:function(e){return["mousedown"===e.type]}},{to:"CAPTURED",where:function(e){return["touchstart"===e.type&&1==e.touches.length]}},{to:"2D/BOARD_ZOOMS",where:function(e){return["wheel"===e.type]}},{to:"2D/MOUSE_MOVES",where:function(e){return["mousemove"===e.type&&!tt(e)]}},{to:"2D/TOUCH_START",where:function(e){return["touchstart"===e.type&&e.touches.length>1]}}],Qe["2D/MOUSE_MOVES"]=[].concat(function(e){if(Array.isArray(e))return Ke(e)}(Je=Qe.IDLE)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(Je)||function(e,t){if(e){if("string"==typeof e)return Ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ke(e,t):void 0}}(Je)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{to:"2D/MOUSE_LEAVE",where:function(e){return["mouseleave"===e.type]}},{to:"SNAPPING_START",where:function(e){return["mousemove"===e.type&&tt(e)]}}]),Qe["2D/MOUSE_LEAVE"]=Qe.IDLE,Qe.SNAPPING_START=Qe["2D/MOUSE_MOVES"],Qe.CAPTURED=[{to:"WILL_MEASURE",where:function(e){return["click"===e.type,!et(e)]}},{to:"WILL_MEASURE",where:function(e){return["touchmove"===e.type&&1==e.touches.length]}},{to:"2D/TOUCH_START",where:function(e){return["touchstart"===e.type&&e.touches.length>1]}},{to:"TOGGLE",where:function(e){return["click"===e.type,et(e)]}},{to:"2D/BOARD_TRANSLATES",where:function(e){return["mousemove"===e.type]}}],Qe.WILL_MEASURE=[{to:"MEASURING",where:function(e){return["mousemove"===e.type&&!tt(e)&&e.buttons===Ze.b.None]}},{to:"MEASURING",where:function(e){return["touchmove"===e.type&&1==e.touches.length]}},{to:"2D/TOUCH_START",where:function(e){return["touchstart"===e.type&&e.touches.length>1]}},{to:"CANCELED",where:function(e){return["keydown"===e.type,27===e.keyCode]}},{to:"CANCELED",where:function(e){return["touchend"===e.type]}},{to:"CANCELED",where:function(e){return["Canceled"===e.type]}}],Qe.MEASURING=[{to:"MEASURING",where:function(e){return["mousemove"===e.type&&!tt(e)&&e.buttons===Ze.b.None]}},{to:"MEASURING",where:function(e){return["touchmove"===e.type&&1==e.touches.length]}},{to:"2D/TOUCH_START",where:function(e){return["touchstart"===e.type&&e.touches.length>1]}},{to:"MEASURING_ZOOMS",where:function(e){return["wheel"===e.type]}},{to:"SNAPPING_END",where:function(e){return["mousemove"===e.type&&tt(e)]}},{to:"DID_MEASURE",where:function(e){return["click"===e.type,e.button===Ze.a.Left,!nt(e)]}},{to:"DID_MEASURE",where:function(e){return["touchend"===e.type,!nt(e)]}},{to:"CALCULATE_MEASURE",where:function(e){return["click"===e.type,e.button===Ze.a.Left,nt(e)]}},{to:"CALCULATE_MEASURE",where:function(e){return["touchend"===e.type,nt(e)]}},{to:"CANCELED",where:function(e){return["mouseup"===e.type,e.button===Ze.a.Right]}},{to:"CANCELED",where:function(e){return["keydown"===e.type,27===e.keyCode]}},{to:"CANCELED",where:function(e){return["Canceled"===e.type]}},{to:"PAN_MEASURE",where:function(e){return["mousemove"===e.type&&(0!=(e.buttons&Ze.b.Left)||0!=(e.buttons&Ze.b.Right))]}},{to:"2D/MOUSE_LEAVE",where:function(e){return["mouseleave"===e.type&&nt(e)]}}],Qe.CALCULATE_MEASURE=[{to:"OTO_DID_MEASURE",where:function(e){return["OtoCalculated"===e.type]}},{to:"CANCELED",where:function(e){return["Canceled"===e.type]}}],Qe.PAN_MEASURE=[{to:"PAN_MEASURE",where:function(e){return["mousemove"===e.type&&(0!=(e.buttons&Ze.b.Left)||0!=(e.buttons&Ze.b.Right))]}},{to:"DID_PAN_MEASURE",where:function(e){return["mouseup"===e.type,e.button===Ze.a.Right||e.button===Ze.a.Left]}},{to:"DID_PAN_MEASURE",where:function(e){return["mouseleave"===e.type]}}],Qe.DID_PAN_MEASURE=[{to:"MEASURING",where:function(e){return["mousemove"===e.type&&!tt(e)&&e.buttons===Ze.b.None]}},{to:"MEASURING",where:function(e){return["touchmove"===e.type&&1==e.touches.length]}},{to:"MEASURING_ZOOMS",where:function(e){return["wheel"===e.type]}}],Qe.MEASURING_ZOOMS=[{to:"MEASURING_ZOOMS",where:function(e){return["wheel"===e.type]}},{to:"MEASURING",where:function(e){return["mousemove"===e.type&&!tt(e)]}},{to:"MEASURING",where:function(e){return["touchmove"===e.type&&1==e.touches.length]}},{to:"SNAPPING_END",where:function(e){return["mousemove"===e.type&&tt(e)]}},{to:"DID_MEASURE",where:function(e){return["click"===e.type,e.button===Ze.a.Left]}}],Qe.SNAPPING_END=Qe.MEASURING,Qe.DID_MEASURE=Qe.IDLE,Qe.OTO_DID_MEASURE=Qe.IDLE,Qe["2D/BOARD_TRANSLATES"]=[{to:"2D/BOARD_TRANSLATES",where:function(e){return["mousemove"===e.type]}},{to:"2D/BOARD_DID_TRANSLATE",where:function(e){return["mouseup"===e.type,e.button===Ze.a.Right||e.button===Ze.a.Left]}},{to:"2D/BOARD_DID_TRANSLATE",where:function(e){return["mouseleave"===e.type]}}],Qe["2D/BOARD_ZOOMS"]=Qe.IDLE,Qe["2D/BOARD_DID_TRANSLATE"]=Qe.IDLE,Qe.TOGGLE=Qe.IDLE,Qe.CANCELED=Qe.IDLE,Qe["2D/TOUCH_END"]=Qe.IDLE,Qe["2D/TOUCH_START"]=[{to:"2D/TOUCH_START",where:function(e){return["touchstart"===e.type]}},{to:"2D/TOUCH_MOVE",where:function(e){return["touchmove"===e.type&&e.touches.length>1]}},{to:"2D/TOUCH_END",where:function(e){return["touchend"===e.type]}}],Qe["2D/TOUCH_MOVE"]=[{to:"2D/TOUCH_START",where:function(e){return["touchstart"===e.type&&e.touches.length>1]}},{to:"2D/TOUCH_MOVE",where:function(e){return["touchmove"===e.type&&e.touches.length>1]}},{to:"2D/TOUCH_END",where:function(e){return["touchend"===e.type]}}];var rt=n(87);function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function st(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ht(e);if(t){var i=ht(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ft(this,n)}}function ft(e,t){if(t&&("object"===it(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dt(e)}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mt(e,t){var n;return{x:e-(null!==(n=window.__APP__.sidebarWidth)&&void 0!==n?n:0),y:t}}function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_t(e);if(t){var i=_t(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return wt(this,n)}}function wt(e,t){if(t&&("object"===vt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gt(e,t)}(o,e);var t,n,r,i=bt(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"IDLE",Qe)}return t=o,n&&yt(t.prototype,n),r&&yt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ct(e,t)}(s,e);var t,n,r,a=lt(s);function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"IDLE",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qe;return st(this,s),pt(dt(e=a.call(this,t,n)),"core",window.__CORE__),pt(dt(e),"logger",window.__CORE__.createLogger("MeterController")),pt(dt(e),"scene",void 0),pt(dt(e),"renderer",void 0),pt(dt(e),"measurements",void 0),pt(dt(e),"screenMeasurement",void 0),pt(dt(e),"currentID",void 0),pt(dt(e),"isSelected",void 0),pt(dt(e),"measurementUnit",Q.d.mm),pt(dt(e),"measurementMode",Q.c.Free),pt(dt(e),"clicked",void 0),pt(dt(e),"pcbView",void 0),pt(dt(e),"cursorStyle",void 0),pt(dt(e),"viewId",void 0),pt(dt(e),"engineId",void 0),pt(dt(e),"throttleMouseMove",void 0),pt(dt(e),"throttleMeasuring",void 0),pt(dt(e),"svgCursorBuilder",void 0),pt(dt(e),"emitEvent",(function(t){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];e.core&&(n=e.core.bus).emit.apply(n,[t].concat(i))})),pt(dt(e),"changeMode",(function(t){e.dispatch(new i.b("Canceled")),e.onCanceled(),t&&(e.measurementMode=t.id,e.setStateMachineData(),e.setDeafaultCursor())})),pt(dt(e),"changeUnit",(function(t){e.updateMeasurementUnitFromStorage(t);var n=e.measurements.values()[0];Object.assign(n,e.getMeasure(n.from,n.to)),e.renderer.updateMeasurement(n),e.emitChangeHistory()})),pt(dt(e),"showProjections",(function(){var t;null===(t=e.renderer)||void 0===t||t.hideProjections()})),pt(dt(e),"hideProjections",(function(){var t;null===(t=e.renderer)||void 0===t||t.showProjections()})),pt(dt(e),"activateMeasurement",(function(){if(e.renderer){e.renderer.activate(),e.setStateMachineData(),e.setDeafaultCursor();var t=e.measurements.getId(0);t&&setTimeout((function(n){return e.selectMeasurement(t,!1)}),100),e.emitChangeHistory()}else e.logger.LogWarn("Try activate measurement witn empty meterRenderer")})),pt(dt(e),"deactivateMeasurement",(function(){e.renderer?(e.renderer.deactivate(),e.clicked=!1,e.svgCursorBuilder.setCursor(Q.b.Default)):e.logger.LogWarn("Try deactivate measurement with empty meterRenderer")})),pt(dt(e),"onIdle",(function(){e.screenMeasurement.from=[0,0],e.screenMeasurement.to=[0,0]})),pt(dt(e),"selectMeasurement",(function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.getMeasureById(t);if(r){e.measurements.toTop(t);var i=e.measurements.values()[0];Object.assign(i,r),n?e.renderer.drawMeterWithFitZoom(i):e.renderer.drawMeter([i])}else e.logger.LogError("Measurement with id:".concat(t," is empty."))})),pt(dt(e),"onWillMeasure",(function(t){try{if(e.svgCursorBuilder.setCursor(Q.b.None),t instanceof MouseEvent){var n=mt(t.clientX,t.clientY),r=n.x,i=n.y;e.screenMeasurement.from=[r,i]}else{var a=mt(t.touches[0].clientX,t.touches[0].clientY),u=a.x,c=a.y;e.screenMeasurement.from=[u,c],e.touchStart(t)}var l=e.scene.viewportToWorld(e.screenMeasurement.from);if(e.scene instanceof o.Scene3D){var f=e.scene.getEye(),d=window.vec3.sub([],l,f);window.vec3.normalize(d,d),l=s.getXOYProjection(l,f,d)}var h=[l[0],l[1],0];"number"==typeof l[2]&&(h[2]=l[2]),e.currentID=e.measurements.set({from:h,to:h,withProjection:!1,mode:e.measurementMode}),e.renderer.drawMeter(e.measurements.values()),e.renderer.hideProjections(),e.emitEvent("".concat(e.engineId,":willMeasure"),e.currentID,{from:h,unit:e.unit,mode:e.measurementMode}),e.clicked=!1}catch(t){e.state="2D/MOUSE_MOVES",e.logger.LogWarn("MeterController could not go to the WillMeasure state.")}})),pt(dt(e),"onMeasuring",(function(t){var n=t instanceof MouseEvent?mt(t.clientX,t.clientY):mt(t.touches[0].clientX,t.touches[0].clientY);e.throttleMeasuring([n.x,n.y])})),pt(dt(e),"onDidMeasure",(function(){var t=e.measurements.get(e.currentID);e.emitEvent("".concat(e.engineId,":didMeasure"),e.currentID,{to:t.to,x:t.x,y:t.y,xy:null==t?void 0:t.xy,unit:e.unit,mode:e.measurementMode}),e.emitChangeHistory(),e.measurementMode===Q.c.Free?e.svgCursorBuilder.setCursor(Q.b.Cross):e.svgCursorBuilder.setCursor(Q.b.None),e.currentID=void 0})),pt(dt(e),"onCanceled",(function(t){e.setDeafaultCursor(),e.currentID&&e.clearMeter(e.currentID),e.renderer.hideMeter(),e.currentID=void 0,e.emitEvent("".concat(e.engineId,":cancelMeasure"),e.currentID,{from:[0,0],unit:e.unit}),e.renderer.render(),null!=t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())})),pt(dt(e),"onToggle",(function(t){var n,r;e.clicked?(null===(n=e.renderer)||void 0===n||n.hideProjections(),e.clicked=!1):(null===(r=e.renderer)||void 0===r||r.showProjections(),e.clicked=!0)})),pt(dt(e),"clearMeter",(function(t){e.measurements.delete(t),e.renderer.drawMeter(e.measurements.values())})),pt(dt(e),"clearAll",(function(){e.measurements.forEach((function(t){return e.measurements.delete(t.id)})),e.renderer.drawMeter(e.measurements.values())})),pt(dt(e),"render",(function(){try{var t;null===(t=e.renderer)||void 0===t||t.drawMeter(e.measurements.values())}catch(t){var n;e.logger.LogWarn("Try drawMeter for view: ".concat(e.viewId,". Detail: ").concat(null!==(n=null==t?void 0:t.message)&&void 0!==n?n:t))}})),pt(dt(e),"mouseMoves",(function(e){})),pt(dt(e),"moveState",{start:null}),pt(dt(e),"on2DMouseMoves",(function(t){var n=mt(t.clientX,t.clientY),r=n.x,i=n.y;e.throttleMouseMove([r,i])})),pt(dt(e),"onPanMeasure",(function(t){var n=mt(t.clientX,t.clientY),r=n.x,i=n.y;e.scene.cameraController.MouseDown(o.MouseButton.Right,r,i),e.scene.cameraController.MouseMove(r,i),e.renderer.render()})),pt(dt(e),"onDidPanMeasure",(function(t){var n=mt(t.clientX,t.clientY),r=n.x,i=n.y;e.scene.cameraController.MouseUp(o.MouseButton.Right,r,i),e.renderer.render()})),pt(dt(e),"on2DMouseLeave",(function(t){"MEASURING"===e.prevstate&&e.onCanceled(t),e.renderer.clearCursor()})),pt(dt(e),"onZoomMeasuring",(function(t){var n=mt(t.clientX,t.clientY),r=n.x,i=n.y,o=e.scene.cameraController;o.MouseMove(r,i),o.MouseWheel(Math.sign(-t.deltaY)),e.renderer.drawMeter(e.measurements.values())})),pt(dt(e),"onBoardZoom",(function(t){e.render()})),pt(dt(e),"touchStart",(function(t){t.touches&&(e.scene.cameraController.TouchStart(t.touches),e.renderer.render(),t.preventDefault(),t.stopPropagation())})),pt(dt(e),"touchMove",(function(t){e.scene.cameraController.TouchMove(t.touches),e.renderer.render(),t.preventDefault(),t.stopPropagation()})),pt(dt(e),"touchEnd",(function(t){e.scene.cameraController.TouchEnd(t.touches),e.renderer.render(),t.preventDefault(),t.stopPropagation()})),e.measurements=new qe.a(5),e.screenMeasurement={from:[0,0],to:[0,0]},e.throttleMouseMove=Xe(e.mouseMoves,10),e.throttleMeasuring=Xe((function(t){return e.measuring(t)}),10),e}return t=s,r=[{key:"getXOYProjection",value:function(e,t,n){var r=-t[2]/n[2];return[t[0]+r*n[0],t[1]+r*n[1],t[2]+r*n[2]]}}],(n=[{key:"subscribeListener",value:function(){return this.prependListener("#Transition",(function(e){})).on("IDLE",this.onIdle).on("WILL_MEASURE",this.onWillMeasure).on("MEASURING",this.onMeasuring).on("DID_MEASURE",this.onDidMeasure).on("CANCELED",this.onCanceled).on("TOGGLE",this.onToggle).on("2D/BOARD_DID_TRANSLATE",this.render).on("2D/BOARD_ZOOMS",this.onBoardZoom).on("2D/MOUSE_MOVES",this.on2DMouseMoves).on("2D/MOUSE_LEAVE",this.on2DMouseLeave).on("MEASURING_ZOOMS",this.onZoomMeasuring).on("PAN_MEASURE",this.onPanMeasure).on("DID_PAN_MEASURE",this.onDidPanMeasure).on("2D/TOUCH_START",this.touchStart).on("2D/TOUCH_MOVE",this.touchMove).on("2D/TOUCH_END",this.touchEnd).on("CAPTURED",this.touchStart),this}},{key:"unsubscribeListener",value:function(){return this.prependListener("#Transition",(function(e){})).off("IDLE",this.onIdle).off("WILL_MEASURE",this.onWillMeasure).off("MEASURING",this.onMeasuring).off("DID_MEASURE",this.onDidMeasure).off("CANCELED",this.onCanceled).off("TOGGLE",this.onToggle).off("2D/BOARD_DID_TRANSLATE",this.render).off("2D/BOARD_ZOOMS",this.onBoardZoom).off("2D/MOUSE_MOVES",this.on2DMouseMoves).off("2D/MOUSE_LEAVE",this.on2DMouseLeave).off("MEASURING_ZOOMS",this.onZoomMeasuring).off("PAN_MEASURE",this.onPanMeasure).off("DID_PAN_MEASURE",this.onDidPanMeasure).off("2D/TOUCH_START",this.touchStart).off("2D/TOUCH_MOVE",this.touchMove).off("2D/TOUCH_END",this.touchEnd).off("CAPTURED",this.touchStart),this}},{key:"subscribeEventBus",value:function(){this.core.bus.on("Measurement:clear",this.clearMeter),this.core.bus.on("Measurement:clearAll",this.clearAll),this.core.bus.on("Measurement:showProjection",this.showProjections),this.core.bus.on("Measurement:hideProjection",this.hideProjections),this.core.bus.on("Measurement:activate",this.activateMeasurement),this.core.bus.on("Measurement:deactivate",this.deactivateMeasurement),this.core.bus.on("Measurement:select",this.selectMeasurement),this.core.bus.on("HelpPanel:changeUnit",this.changeUnit),this.core.bus.on("Measurement:changeMode",this.changeMode)}},{key:"unsubscribeEventBus",value:function(){this.core.bus.off("Measurement:clear",this.clearMeter),this.core.bus.off("Measurement:clearAll",this.clearAll),this.core.bus.off("Measurement:showProjection",this.showProjections),this.core.bus.off("Measurement:hideProjection",this.hideProjections),this.core.bus.off("Measurement:activate",this.activateMeasurement),this.core.bus.off("Measurement:deactivate",this.deactivateMeasurement),this.core.bus.off("Measurement:select",this.selectMeasurement),this.core.bus.off("HelpPanel:changeUnit",this.changeUnit),this.core.bus.off("Measurement:changeMode",this.changeMode)}},{key:"dispose",value:function(){this.unsubscribeListener(),this.unsubscribeEventBus()}},{key:"enable",value:function(e,t,n,r){this.scene=n,this.renderer=new Ye(t,n,r),this.viewId=e,this.pcbView=document.querySelector('[data-view="'.concat(this.viewId,'"]')),this.svgCursorBuilder=new $e(this.pcbView),this.engineId=Q.e.get(e),this.clicked=!1,this.isSelected=!1,this.updateMeasurementUnitFromStorage(),this.subscribeListener(),this.subscribeEventBus(),this.setStateMachineData()}},{key:"disable",value:function(){this.dispatch(new i.b("Canceled")),this.renderer&&(this.renderer.deactivate(),this.renderer.dispose(),this.renderer=null),this.state="IDLE",this.unsubscribeEventBus(),this.unsubscribeListener()}},{key:"setStateMachineData",value:function(){var e=this;this.setDataTransfer({getMeasurementMode:function(){return e.measurementMode}})}},{key:"setDeafaultCursor",value:function(){switch(this.measurementMode){case Q.c.Free:this.svgCursorBuilder.setCursor(Q.b.Cross);break;case Q.c.ObjectToObject:this.svgCursorBuilder.setCursor(Q.b.Box);break;default:this.svgCursorBuilder.setCursor(Q.b.None)}}},{key:"unitFactor",get:function(){return 100}},{key:"unit",get:function(){switch(this.measurementUnit){case 0:return{k:2.54/this.unitFactor,name:"mm"};case 1:return{k:100/this.unitFactor,name:"mil"};default:return{k:1,name:""}}}},{key:"updateMeasurementUnitFromStorage",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t||(t=null!==(e=rt.a.get())&&void 0!==e?e:"mm"),this.measurementUnit="mil"===t?Q.d.mil:Q.d.mm}},{key:"measuring",value:function(e){this.renderer.clearCursor(),this.screenMeasurement.to=e;var t=this.scene.viewportToWorld(this.screenMeasurement.to);if(this.scene instanceof o.Scene3D){var n=this.scene.getEye(),r=window.vec3.sub([],t,n);window.vec3.normalize(r,r),t=s.getXOYProjection(t,n,r)}var i=[t[0],t[1],0];if("number"==typeof t[2]&&(i[2]=t[2]),this.currentID){var a=this.measurements.get(this.currentID);a.to=i,Object.assign(a,this.getMeasureById(this.currentID)),this.renderer.drawMeter(this.measurements.values()),this.emitEvent("".concat(this.engineId,":measuring"),this.currentID,{to:i,x:null==a?void 0:a.x,y:null==a?void 0:a.y,xy:null==a?void 0:a.xy})}}},{key:"emitChangeHistory",value:function(){var e=this,t=this.unit.k,n={measurements:this.measurements?this.measurements.values().map((function(n){var r=e.getMeasure(n.from,n.to);return at(at({},n),{},{x:r.x,y:r.y,xy:r.xy,unitName:r.unitName,from:[t*n.from[0],t*n.from[1],0],to:[t*n.to[0],t*n.to[1],0]})})):[],unit:this.unit,mode:this.measurementMode};this.emitEvent("Measurement:changeHistory",n)}},{key:"getMeasureById",value:function(e){var t=this.measurements.get(e);if(!t)return null;var n=t.from,r=t.to;return this.getMeasure(n,r)}},{key:"getMeasure",value:function(e,t){var n,r,i=this.unit,o=i.k,a=i.name,s=null!==(n=e[2])&&void 0!==n?n:0,u=null!==(r=t[2])&&void 0!==r?r:0;return{x:Math.abs(e[0]-t[0])*o,y:Math.abs(e[1]-t[1])*o,xy:o*Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(s-u,2)),unitName:a}}}])&&ut(t.prototype,n),r&&ut(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(r.a))},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==n(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"encodeHtml",(function(){return r})),n.d(t,"decodeHtml",(function(){return i}));var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[<>"']/g,(function(e){return t[e]}))},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#039;":"'"};return e.replace(/&amp;|&lt;|&gt;|&quot;|&#039;/g,(function(e){return t[e]}))}}])},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(7),i=n(20);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"metadata",void 0),a(this,"netsMap",new Map),a(this,"primitivesMap",new Map),a(this,"emptyNet",{name:"no net",primitives:[],layersUsed:[],boundRects:[]});var n=i.a.response;this.metadata=n.metadata,setTimeout((function(){var e,n;return null===(e=t.metadata)||void 0===e||null===(n=e.nets)||void 0===n?void 0:n.forEach((function(e){return t.netsMap.set(e.name,e)}))})),setTimeout((function(){var e,n;return null===(e=t.metadata)||void 0===e||null===(n=e.primitives)||void 0===n?void 0:n.forEach((function(e){return t.primitivesMap.set(e.pcbId,e)}))}))}var t,n,s;return t=e,s=[{key:"instance",get:function(){return e.metadataRepository_||(e.metadataRepository_=new e),e.metadataRepository_}}],(n=[{key:"components",get:function(){return this.metadata.components}},{key:"primitives",get:function(){return this.metadata.primitives}},{key:"nets",get:function(){return this.metadata.nets}},{key:"layers",get:function(){return this.metadata.layers}},{key:"getNetByName",value:function(e){var t;return null!==(t=this.netsMap.get(e))&&void 0!==t?t:this.emptyNet}},{key:"getPrimitiveById",value:function(e){var t=this.primitivesMap.get(e);return null!=t?t:null}},{key:"getComponentById",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.metadata.components.find((function(t){return t.pcbId===e}));if(!r&&n){var i=null==n?void 0:n.graphiteMapping[e];i&&(r=this.metadata.components.find((function(e){return e.pcbId===i})))}return null!==(t=r)&&void 0!==t?t:null}},{key:"getComponentByPrimitiveId",value:function(e){for(var t=0,n=this.components.length;t<n;t++)for(var r=this.components[t],i=0,o=r.primitives.length;i<o;i++){var a=this.metadata.primitivesMap.get(r.primitives[i]);if((null==a?void 0:a.pcbId)===e)return{component:r,primitive:a}}return null}},{key:"getComponentsByPos",value:function(e,t){var n=this;return this.metadata.components.filter((function(r){return r.boundRect&&n.pointInRectangle(e,t,r.boundRect)}))}},{key:"getNetsByPrimitiveId",value:function(e){for(var t=[],n=0,r=this.nets.length;n<r;n++)for(var i=this.nets[n],o=0,a=i.primitives.length;o<a;o++){var s=this.metadata.primitivesMap.get(i.primitives[o]);(null==s?void 0:s.pcbId)===e&&t.push({net:i,primitive:s})}return t}},{key:"getComponentPrimitiveStat",value:function(){var e=this,t=new Map;this.components.forEach((function(n){n.primitives.forEach((function(n){var r=e.metadata.primitivesMap.get(n);if(r){var i=e.getObjectId(r),o=t.get(i);t.set(i,null!=o?o:1)}}))}));var n=[];return t.forEach((function(e,t){n.push({objectId:t,objectIdName:Object(r.getObjectIdName)(t),count:e})})),n}},{key:"getChildPrimitives",value:function(e){var t,n=this;return null!=e&&null!==(t=e.primitives)&&void 0!==t&&t.length?e.primitives.map((function(e){return n.metadata.primitivesMap.get(e)})).filter((function(e){return!!e})):null}},{key:"getChildPads",value:function(e){var t,n=this;return null!=e&&null!==(t=e.primitives)&&void 0!==t&&t.length?e.primitives.map((function(e){return n.metadata.primitivesMap.get(e)})).filter((function(e){return n.getObjectId(e)===r.ObjectId.Pad})):null}},{key:"pointInRectangle",value:function(e,t,n){return e>=n[0]/1e6&&e<=n[2]/1e6&&t>=n[1]/1e6&&t<=n[3]/1e6}},{key:"getObjectId",value:function(e){return null!=e&&e.kind?255&e.kind:r.ObjectId.None}}])&&o(t.prototype,n),s&&o(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();a(s,"metadataRepository_",void 0)},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var s=i((function e(t,n,r,i){o(this,e),a(this,"grayscale",void 0),a(this,"grayscale_factor",void 0),a(this,"transparency",void 0),a(this,"transparency_factor",void 0),this.grayscale=t||!1,this.grayscale_factor=n||0,this.transparency=r||!1,this.transparency_factor=i||0})),u=function(){function e(t,n,r,i,u,c){o(this,e),a(this,"layer",void 0),a(this,"layerName",void 0),a(this,"filter",void 0),this.layer=t,this.layerName=n||"layer".concat(t),this.filter=new s(r,i,u,c)}return i(e,null,[{key:"createRenderOptions",value:function(t){return t.map((function(t){return new e(t.index,t.name)}))}}]),e}()},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.None=0]="None",e[e.Vertical=1]="Vertical",e[e.Horizontal=2]="Horizontal",e[e.DiagMain=3]="DiagMain",e[e.DiagSecond=4]="DiagSecond",e[e.Cross=5]="Cross",e[e.Last=6]="Last"}(r||(r={}))},function(e,t,n){"use strict";function r(e){return e.startsWith("Manufacturer Lifecycle")?"ManufacturerLifecycle":e.startsWith("Manufacturer Part Number")?"ManufacturerPartNumber":e.startsWith("Supplier Part Number")?"SupplierPartNumber":e.replace(/\s/g,"")}n.d(t,"a",(function(){return r}))},function(e,t,n){var r=n(77),i=n(53),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(211)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(129),i=n(67),o=n(213);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(160);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(64)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(55);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(248),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";n(460);var r=n(109),i=n(128),o=n(54),a=n(161),s=n(64),u=n(390),c=s("species"),l=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),f=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var d=s(e),h=!o((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),p=h?!o((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[d](""),!t})):void 0;if(!h||!p||"replace"===e&&!l||"split"===e&&!f){var m=/./[d],v=n(a,d,""[e],(function(e,t,n,r,i){return t.exec===u?h&&!i?{done:!0,value:m.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),y=v[0],g=v[1];r(String.prototype,e,y),i(RegExp.prototype,d,2==t?function(e,t){return g.call(e,this,t)}:function(e){return g.call(e,this)})}}},function(e,t,n){var r=n(145),i=n(455),o=n(385),a=n(55),s=n(67),u=n(387),c={},l={};(t=e.exports=function(e,t,n,f,d){var h,p,m,v,y=d?function(){return e}:u(e),g=r(n,f,t?2:1),b=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>b;b++)if((v=t?g(a(p=e[b])[0],p[1]):g(e[b]))===c||v===l)return v}else for(m=y.call(e);!(p=m.next()).done;)if((v=i(m,g,p.value,t))===c||v===l)return v}).BREAK=c,t.RETURN=l},function(e,t,n){var r=n(53).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var r=n(53),i=n(11),o=n(109),a=n(239),s=n(177),u=n(318),c=n(238),l=n(56),f=n(54),d=n(314),h=n(234),p=n(376);e.exports=function(e,t,n,m,v,y){var g=r[e],b=g,w=v?"set":"add",_=b&&b.prototype,O={},C=function(e){var t=_[e];o(_,e,"delete"==e||"has"==e?function(e){return!(y&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(y||_.forEach&&!f((function(){(new b).entries().next()})))){var S=new b,x=S[w](y?{}:-0,1)!=S,k=f((function(){S.has(1)})),E=d((function(e){new b(e)})),T=!y&&f((function(){for(var e=new b,t=5;t--;)e[w](t,t);return!e.has(-0)}));E||((b=t((function(t,n){c(t,b,e);var r=p(new g,t,b);return null!=n&&u(n,v,r[w],r),r}))).prototype=_,_.constructor=b),(k||T)&&(C("delete"),C("has"),v&&C("get")),(T||x)&&C(w),y&&_.clear&&delete _.clear}else b=m.getConstructor(t,e,v,w),a(b.prototype,n),s.NEED=!0;return h(b,e),O[e]=b,i(i.G+i.W+i.F*(b!=g),O),y||m.setStrong(b,e,v),b}},function(e,t,n){for(var r,i=n(53),o=n(128),a=n(210),s=a("typed_array"),u=a("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,f=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(r=i[d[f++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):l=!1;e.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},function(e,t,n){"use strict";n(227)},function(e,t,n){"use strict";n(228)},function(e,t,n){"use strict";n(229)},function(e,t,n){"use strict";var r=function(){var e=this.$createElement;return(this._self._c||e)(this.tag,{tag:"component",staticClass:"afs-box",class:this.classes,attrs:{"data-locator":this.dataLocator}},[this._t("default")],2)};r._withStripped=!0;var i=n(1),o=n(2),a=n(4);var s={name:"AfsBox",props:{tag:{type:String,default:"div"},type:{type:String,default:"",validator:function(e){return!e.length||["group"].includes(e)}},hasShadow:{type:Boolean,default:!1},hasBorder:{type:Boolean,default:!1},radius:{type:String,default:"".concat(i.d.tl," ").concat(i.d.tr," ").concat(i.d.bl," ").concat(i.d.br)},dataLocator:{type:String,default:"box"}},computed:{classes:function(){return[(e={"afs-box_shadow":this.hasShadow,"afs-box_border":this.hasBorder},t="afs-box_".concat(this.type),n=!!this.type.length,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e),Object(o.b)("afs-box",this.radius),this.themeClass];var e,t,n},themeClass:function(){var e=Object(a.a)(this.$root);return Object(o.c)(e.theme)}}},u=(n(397),n(0)),c=Object(u.a)(s,r,[],!1,null,null,null);c.options.__file="WebUI/VueJsComponentLibrary/src/components/Box/App.vue";var l=c.exports;t.a=l},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"afs-accordion",class:e.classes,attrs:{"data-locator":e.dataLocator}},[n("GridSection",{staticClass:"afs-accordion__header",class:[{"afs-accordion__header_is-disabled":e.disabled},e.customHeaderClasses]},[e.hasCheckbox?n("Checkbox",{staticClass:"afs-accordion__checkbox",attrs:{"data-locator":e.dataLocator+"-checkbox"},on:{click:function(t){return e.handleChangeCheckbox(t,!e.isChecked)}},scopedSlots:e._u([{key:"default",fn:function(){return[e._t("checkbox")]},proxy:!0}],null,!0),model:{value:e.isChecked,callback:function(t){e.isChecked=t},expression:"isChecked"}}):e._e(),e._v(" "),n("div",{staticClass:"afs-accordion__main-header-container"},[n("div",{staticClass:"afs-accordion__main-header",class:e.headerClasses,attrs:{"data-locator":e.dataLocator+"-header"},on:{click:e.handleClick}},[e._t("header",[n("AfsText",{attrs:{type:"title"}},[e._v(e._s(e.title))])])],2)]),e._v(" "),e.hasHeaderAddon?n("div",{staticClass:"afs-accordion__additional-header",attrs:{"data-locator":e.dataLocator+"-additional-header"}},[e._t("additional-menu")],2):e._e()],1),e._v(" "),e.disabled?e._e():[n("transition",{attrs:{name:"fade","enter-class":"afs-accordion_enter","leave-to-class":"afs-accordion_leave-to","enter-active-class":"afs-accordion_enter-active","leave-active-class":"afs-accordion_leave-active"},on:{enter:e.enter,"after-enter":e.afterEnter,leave:e.leave}},[n("GridSection",{directives:[{name:"show",rawName:"v-show",value:e.isOpened,expression:"isOpened"}],ref:"body",staticClass:"afs-accordion__body",class:e.customBodyClasses,attrs:{"data-locator":e.dataLocator+"-body"}},[e._t("body")],2)],1)]],2)};r._withStripped=!0;var i=n(2),o=n(4),a=n(69),s=n(73),u=n(3);var c={default:"",simple:"simple"},l={name:"AfsAccordion",components:{GridSection:a.c,AfsText:u.a,Checkbox:s.a},props:{title:{type:String,default:""},opened:{type:Boolean,default:!1},hasHeaderAddon:{type:Boolean,default:!1},type:{type:String,default:c.default,validator:function(e){return Object.values(c).includes(e)}},disabled:{type:Boolean,default:!1},customHeaderClasses:{type:[String,Array,Object],default:""},customBodyClasses:{type:[String,Array,Object],default:""},hasCheckbox:{type:Boolean,default:!1},dataLocator:{type:String,default:"accordion"}},data:function(e){return{isOpened:e.opened,isChecked:!1}},computed:{themeClass:function(){var e=Object(o.a)(this.$root);return Object(i.c)(e.theme)},modClass:function(){return this.type?(e={},t="afs-accordion_".concat(this.type),n=!!this.type,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e):{};var e,t,n},headerClasses:function(){return{"afs-accordion__main-header_is-opened":this.isOpened,"afs-accordion__main-header_is-disabled":this.disabled}},checkboxClasses:function(){return{"afs-accordion_checkbox":this.hasCheckbox}},classes:function(){return[this.themeClass,this.modClass,this.checkboxClasses]}},methods:{getBEMClass:function(e){return Object(i.a)("afs-accordion",e)},handleClick:function(e){this.isOpened=!this.isOpened,this.$emit("click",{isOpened:this.isOpened,originalEvent:e})},open:function(e){this.isOpened=!0,this.$emit("click",{isOpened:this.isOpened,originalEvent:e})},close:function(e){this.isOpened=!1,this.$emit("click",{isOpened:this.isOpened,originalEvent:e})},enter:function(e){var t=window.getComputedStyle(e).width;e.style.width=t,e.style.position="absolute",e.style.visibility="hidden",e.style.height="auto";var n=window.getComputedStyle(e).height;e.style.width=null,e.style.position=null,e.style.visibility=null,e.style.height=0,this.$nextTick((function(){return e.style.height=n}))},afterEnter:function(e){e.style.height="auto",this.$nextTick((function(){return e.removeAttribute("style")}))},leave:function(e){var t=window.getComputedStyle(e).height;e.style.height=t,this.$nextTick((function(){return e.style.height=0}))},handleChangeCheckbox:function(e,t){this.$emit("checkbox-change",t)}}},f=(n(427),n(0)),d=Object(f.a)(l,r,[],!1,null,null,null);d.options.__file="WebUI/VueJsComponentLibrary/src/components/Accordion/App.vue";var h=d.exports;t.a=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return u}));var s="abcdefghijklmopqrstuvwxyz0123456789",u=function(){function e(t){r(this,e),a(this,"length",void 0),a(this,"history",void 0),this.length="number"==typeof t?t:e.DEFAULT_LENGTH,this.history=[]}return o(e,[{key:"set",value:function(e){this.history.length==this.length&&this.history.pop();var t=c.create(e);return this.history.unshift(t),t.id}},{key:"get",value:function(e){var t=this.history.find((function(t){return t.id==e}));return t&&t.value}},{key:"delete",value:function(e){this.history=this.history.filter((function(t){return t.id!==e}))}},{key:"forEach",value:function(e){this.history.forEach(e)}},{key:"toTop",value:function(e){if(this.get.call(this,e)){var t=this.history.findIndex((function(t){return t.id===e}));t>0&&this.history.unshift(this.history.splice(t,1)[0])}}},{key:"values",value:function(){return this.history.map((function(e){return e.value}))}},{key:"getId",value:function(e){return e<this.history.length?this.history[e].id:null}}]),e}();a(u,"DEFAULT_LENGTH",1/0);var c=function(){function e(t,n){r(this,e),this.id=t,this.value=n}return o(e,null,[{key:"create",value:function(t){var n=function(e){for(var t,n,r="",i=0;i<e;i++){var o=(n=s.length,(t=0)+Math.floor(Math.random()*(n-t)));r+=s.substring(o,o+1)}return r}(10);return t.id=n,new e(n,t)}}]),e}()},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==n(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"classes",(function(){return r})),n.d(t,"vueInstanceName",(function(){return i})),n.d(t,"MULTIBOARD_PROJECT_TYPE",(function(){return o})),n.d(t,"isTouch",(function(){return a})),n.d(t,"getBody",(function(){return s})),n.d(t,"isRequiredFunction",(function(){return u})),n.d(t,"radius",(function(){return c})),n.d(t,"componentsRepository",(function(){return l})),n.d(t,"commentLineLimit",(function(){return f}));var r={isNotouch:"is-notouch",isTouch:"is-touch",isOpened:"is-opened",isActive:"is-active",isSelected:"is-selected",isError:"is-error"},i="__afsComponentInstance",o="SystemDesign",a="ontouchstart"in window,s=function(){return document.querySelector("body")},u=function(e){return"function"==typeof e},c={tl:"top-left",tr:"top-right",bl:"bottom-left",br:"bottom-right"},l={set:function(e){var t=e.id,n=e.component;window.__afsComponents||(window.__afsComponents={}),window.__afsComponents[t]=n},get:function(e){return window.__afsComponents&&window.__afsComponents[e]},delete:function(e){!window.__afsComponents||window.__afsComponents&&!window.__afsComponents[e]||delete window.__afsComponents[e]}},f=32}])},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==n(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){(function(t){var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,u="object"==n(t)&&t&&t.Object===Object&&t,c="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,l=u||c||Function("return this")(),f=Object.prototype.toString,d=Math.max,h=Math.min,p=function(){return l.Date.now()};function m(e){var t=n(e);return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==n(e)||function(e){return!!e&&"object"==n(e)}(e)&&"[object Symbol]"==f.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var u=o.test(e);return u||a.test(e)?s(e.slice(2),u?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,u,c=0,l=!1,f=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function b(e){return c=e,s=setTimeout(_,t),l?g(e):a}function w(e){var n=e-u;return void 0===u||n>=t||n<0||f&&e-c>=o}function _(){var e=p();if(w(e))return O(e);s=setTimeout(_,function(e){var n=t-(e-u);return f?h(n,o-(e-c)):n}(e))}function O(e){return s=void 0,y&&r?g(e):(r=i=void 0,a)}function C(){var e=p(),n=w(e);if(r=arguments,i=this,u=e,n){if(void 0===s)return b(u);if(f)return s=setTimeout(_,t),g(u)}return void 0===s&&(s=setTimeout(_,t)),a}return t=v(t)||0,m(n)&&(l=!!n.leading,o=(f="maxWait"in n)?d(v(n.maxWait)||0,t):o,y="trailing"in n?!!n.trailing:y),C.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=i=s=void 0},C.flush=function(){return void 0===s?a:O(p())},C}}).call(this,r(2))},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n(0),i=n.n(r);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2?arguments[2]:void 0;return i()(e,t,{leading:n})}n.d(t,"debounce",(function(){return i.a}))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==("undefined"==typeof window?"undefined":n(window))&&(r=window)}e.exports=r}])},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(123),i=n(281),o=n(9);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=f(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(g,e);var t,n,i,a,f,p=h(g);function g(){var e;u(this,g);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(m(e=p.call.apply(p,[this].concat(n))),"sourceId",null),y(m(e),"targetId",null),y(m(e),"projectId",null),y(m(e),"pageUrl",null),e}return t=g,(n=[{key:"setup",value:function(e){this.sourceId=Object(o.c)("data-comparison-source-id",null),this.targetId=Object(o.c)("data-comparison-target-id",null),this.projectId=Object(o.c)("data-project-src",null),this.pageUrl=Object(o.c)("data-page-url",null),l(v(g.prototype),"setup",this).call(this,e)}},{key:"getUrl",value:function(){return this.pageUrl+"/designs/api/compare/bom/"+[this.projectId,this.sourceId,this.targetId].join("/")}},{key:"loadBomData",value:(a=regeneratorRuntime.mark((function e(){var t,n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(r.a)((function(){return fetch(i.getUrl(),{method:"GET"})}));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Loading error. [".concat(t.statusText,"]"));case 6:if(204!==t.status){e.next=9;break}return this.retryLoad(),e.abrupt("return");case 9:return e.next=11,t.json();case 11:n=e.sent,this.dispatch({type:"Run",data:this.getBomData(n)}),e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",Promise.reject("Loading error. [".concat(e.t0.message,"]")));case 18:return e.abrupt("return",Promise.resolve());case 19:case"end":return e.stop()}}),e,this,[[0,15]])})),f=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=a.apply(e,t);function o(e){s(i,n,r,o,u,"next",e)}function u(e){s(i,n,r,o,u,"throw",e)}o(void 0)}))},function(){return f.apply(this,arguments)})},{key:"retryLoad",value:function(){var e=this;setTimeout((function(){e.loadBomData().catch((function(t){e.dispatch({type:"Error",error:t})}))}),1e4)}}])&&c(t.prototype,n),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),g}(i.a)},function(e,t,n){"use strict";var r=n(32),i=["OES_vertex_array_object","ANGLE_instanced_arrays","OES_element_index_uint","OES_texture_float","OES_texture_half_float"],o=function(e){var t=[];if(i.forEach((function(n){!e.getExtension(n)&&t.push(n)})),t.length)throw new r.f("Some of WebGL extensions are not supported by your browser / graphics card driver: ".concat(t.join(", ")),t)};t.a=function(){var e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");if(t&&t instanceof WebGLRenderingContext)return o(t);throw new r.e}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return tt})),function(e){e.SET_COLUMNS="BOM_COMPARE_SET_COLUMNS",e.SET_ITEMS="BOM_COMPARE_SET_ITEMS",e.SET_CURRENCY="BOM_COMPARE_SET_CURRENCY",e.SET_FILTER="BOM_COMPARE_SET_FILTER",e.TAB_ACTIVATED="BOM_COMPARE_TAB_ACTIVATED",e.SET_SEARCH="BOM_COMPARE_SET_SEARCH",e.SET_SORT="BOM_COMPARE_SET_SORT",e.SET_VARIANT="BOM_COMPARE_SET_VARIANT",e.SEARCH_ACTIVATED="BOM_COMPARE_SEARCH_ACTIVATED"}(r||(r={}));var i=r;var o,a,s,u,c=new(0,window.__APP__.library.Vuex.Store)({state:{isSearchActive:!1},mutations:(o={},a=i.SEARCH_ACTIVATED,s=function(e,t){e.isSearchActive=t},a in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,o)}),l=RegExp(["^(#","%CATALOGID%","%ID%","%PARENTID%","%REVISION_STATE_COLOR%","Fitted","supplier","mpn","url","lifecycleStatus","Price@.*","Quantity@.*","part)$","Diff.*"].join("|")),f=function(e){return!l.test(e)},d=n(282),h=n(103);function p(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b={namespaced:!0,state:function(){return{search:"",searchTrim:"",variant:"",sortBy:null,items:[],columns:[],currency:null,isActive:!1,expanded:[],selectedItemId:null,diffFilter:0}},getters:{hasVariantItems:function(e){return function(t){return t===e.variant&&e.items.length>0}},trimmedSearch:function(e){return e.searchTrim},visibleColumns:function(e){return e.columns.filter((function(e){return e.visible}))},sortedItems:function(e){return null!==e.sortBy?e.items.sort(Object(d.a)(e.sortBy.col,e.sortBy.isAsc)):e.items},body:function(e,t){return t.sortedItems.reduce((function(n,r){var i,o,a,s,u=null!==e.diffFilter,c=e.diffFilter>0;if(u&&null===r.diff||c&&r.diff!==e.diffFilter)return n;var l=r.parameters;return l.id=l["%CATALOGID%"].firstValue(),l.isFocused=l["%ID%"].has(e.selectedItemId),l.alternateParts=r.alternateParts&&Object.values(r.alternateParts).map((function(t,n){var r=t.parameters;return y(y({},r),{},{id:"".concat(l.id,".").concat(n),isFocused:r["%ID%"].has(e.selectedItemId)})})),e.searchTrim.length>0&&!t.visibleColumns.some((function(t){var n,r,i;return null===(n=l[t.id])||void 0===n||null===(r=n.toString())||void 0===r||null===(i=r.toLowerCase())||void 0===i?void 0:i.includes(e.searchTrim.toLowerCase())}))||(n.rows.push(l),n.totalNames++,n.totalQuantity+=Number(l.Quantity),n.totalPrice+=l.Price>0?Number(l.Price):0,n.pricePerBoard+=(Number(null===(i=r.manufacturers)||void 0===i||null===(o=i[0])||void 0===o||null===(a=o.suppliers)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.unitPrice)||0)*Number(l.Quantity)),n}),{rows:[],totalNames:0,totalQuantity:0,totalPrice:0,pricePerBoard:0})},items:function(e,t){return t.body.rows},totalNames:function(e,t){return t.body.totalNames},totalPrice:function(e,t){return t.body.totalPrice},pricePerBoard:function(e,t){return t.body.pricePerBoard},totalQuantity:function(e,t){return Math.ceil(t.body.totalQuantity)}},mutations:(g(u={},i.SET_VARIANT,(function(e,t){e.variant=t})),g(u,i.SET_FILTER,(function(e,t){e.diffFilter=t})),g(u,i.SET_ITEMS,(function(e,t){e.items=t})),g(u,i.TAB_ACTIVATED,(function(e,t){e.isActive=t})),g(u,i.SET_SORT,(function(e,t){var n,r;e.sortBy={col:t.id,isAsc:t.id===(null===(n=e.sortBy)||void 0===n?void 0:n.col)&&!(null!==(r=e.sortBy)&&void 0!==r&&r.isAsc)}})),g(u,i.SET_SEARCH,(function(e,t){e.search=t,e.searchTrim=t.trim().toLowerCase()})),g(u,i.SET_CURRENCY,(function(e,t){e.currency=t})),g(u,i.SET_COLUMNS,(function(e,t){var n,r=t.items,i=t.columnAliases,o=t.visibleColumns;t.filter||(e.diffFilter=null);var a=r.reduce((function(e,t){return Object.assign(e,Object.keys(t.parameters))}),{}),s=(null==o||null===(n=o.find((function(e){return"Base"===e.viewMode})))||void 0===n?void 0:n.columns.filter((function(e){return f(e.name)})).map((function(e){return Object(h.c)(e,!0)})))||h.a;e.columns=Object.values(a).sort((function(e,t){return e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})})).reduce((function(e,t){return f(t)&&function(e){return function(t){return!e.some((function(e){return e.id.toLowerCase()===t.toLowerCase()}))}}(s)(t)?e.concat(Object(h.c)({name:t,width:120})):e}),[h.b].concat(p(s))).map((function(e){return y(y({},e),{},{text:i[e.id]||e.text})}))})),u)},w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fbom"},[e.pluginName===e.TABLE_TYPE.DIFF?n("BaseContent",e._b({directives:[{name:"show",rawName:"v-show",value:e.isActive(e.TABLE_TYPE.DIFF),expression:"isActive(TABLE_TYPE.DIFF)"}],ref:e.pluginName,staticClass:"fbom__content",on:{sort:function(t){return e.sort(e.TABLE_TYPE.DIFF,t)},search:function(t){return e.search(e.TABLE_TYPE.DIFF,t)}}},"BaseContent",e.createContent(e.TABLE_TYPE.DIFF),!1)):e._e(),e._v(" "),e.pluginName===e.TABLE_TYPE.LEFT?n("BaseContent",e._b({directives:[{name:"show",rawName:"v-show",value:e.isActive(e.TABLE_TYPE.LEFT),expression:"isActive(TABLE_TYPE.LEFT)"}],ref:e.pluginName,staticClass:"fbom__content",on:{sort:function(t){return e.sort(e.TABLE_TYPE.LEFT,t)},search:function(t){return e.search(e.TABLE_TYPE.LEFT,t)}}},"BaseContent",e.createContent(e.TABLE_TYPE.LEFT),!1)):e._e(),e._v(" "),e.pluginName===e.TABLE_TYPE.RIGHT?n("BaseContent",e._b({directives:[{name:"show",rawName:"v-show",value:e.isActive(e.TABLE_TYPE.RIGHT),expression:"isActive(TABLE_TYPE.RIGHT)"}],ref:e.pluginName,staticClass:"fbom__content",on:{sort:function(t){return e.sort(e.TABLE_TYPE.RIGHT,t)},search:function(t){return e.search(e.TABLE_TYPE.RIGHT,t)}}},"BaseContent",e.createContent(e.TABLE_TYPE.RIGHT),!1)):e._e(),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isEmpty,expression:"isEmpty"}],staticClass:"fbom__empty"},[e._v("BOM Compare data is empty")])],1)};w._withStripped=!0;var _=n(362),O=n(61),C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("Search",{ref:"search",attrs:{"is-active":e.isSearchActive,search:e.searchText},on:{search:function(t){return e.$emit("search",t)}}}),e._v(" "),n("Table",{directives:[{name:"show",rawName:"v-show",value:e.items.length,expression:"items.length"}],ref:"table",staticClass:"content__table bomcmp",class:{"content__table_with-banner":e.isBannerActive,"content__table_with-search":e.isSearchActive},attrs:{"trimmed-search":e.trimmedSearch,"table-type":e.tableType,"is-compare":e.isCompare,columns:e.columns,items:e.items,"sort-by":e.sortBy,currency:e.currency},on:{sort:function(t){return e.$emit("sort",t)}},scopedSlots:e._u([{key:"body__num",fn:function(t){var r=t.data;return[n("div",{staticClass:"cell-container"},[r.row.alternateParts?n("AlternatePartsExpander",{attrs:{expanded:e.expanded.includes(r.row.id)},on:{click:function(t){return e.onToggleExpander(r.row.id)}}}):e._e(),e._v(" "),n("div",{staticClass:"content__id"},[e._v(e._s(r.index+1))])],1)]}},{key:"body__name",fn:function(t){var r=t.data;return[n("div",{staticClass:"cell-container"},[n("div",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:e.trimmedSearch,value:r.row.name},expression:"{\n            query: trimmedSearch,\n            value: data.row.name\n          }"}],staticClass:"content__clip",attrs:{title:r.row.name}})])]}},{key:"body__description",fn:function(t){var r=t.data;return[n("div",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:e.trimmedSearch,value:r.row.description},expression:"{\n          query: trimmedSearch,\n          value: data.row.description\n        }"}],staticClass:"content__clip",attrs:{title:r.row.description}})]}},{key:"body__part",fn:function(t){var r=t.data;return[n("ValuePartNumber",{attrs:{search:e.trimmedSearch,value:r.row.part&&r.row.part.toString(),url:r.row.part&&r.row.part.url,"status-name":r.row.part&&r.row.part.statusName}})]}},{key:"body__Designator",fn:function(t){var r=t.data;return[n("div",{staticClass:"content__clip"},[[n("div",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:e.trimmedSearch,value:r.row.Designator.toString()},expression:"{\n              query: trimmedSearch,\n              value: data.row.Designator.toString()\n            }"}],staticClass:"content__clip",attrs:{title:r.row.Designator.toString()}})]],2)]}},{key:"body__SupplierPartNumber",fn:function(t){var r=t.data;return[n("ValuePartNumber",{staticClass:"cell-container",attrs:{search:e.trimmedSearch,value:r.row[r.col.id]&&r.row[r.col.id].toString(),url:r.row[r.col.id]&&r.row[r.col.id].url,"status-name":r.row[r.col.id]&&r.row[r.col.id].statusName}})]}},{key:"body__ManufacturerPartNumber",fn:function(t){var r=t.data;return[n("ValuePartNumber",{staticClass:"cell-container",attrs:{search:e.trimmedSearch,value:r.row[r.col.id]&&r.row[r.col.id].toString(),url:r.row[r.col.id]&&r.row[r.col.id].url,"status-name":r.row[r.col.id]&&r.row[r.col.id].statusName}})]}},{key:"body__ManufacturerLifecycle",fn:function(t){var r=t.data;return[n("ValueColoredText",{staticClass:"content__clip",attrs:{search:e.trimmedSearch,value:r.row[r.col.id]&&r.row[r.col.id].toString(),color:r.row[r.col.id]&&r.row[r.col.id].color,col:{data:r}}})]}},{key:"body__RevisionStatus",fn:function(t){var r=t.data;return[n("ValueColoredText",{staticClass:"content__clip",attrs:{search:e.trimmedSearch,value:r.row[r.col.id]&&r.row[r.col.id].toString(),color:r.row[r.col.id]&&r.row[r.col.id].color,col:{data:r}}})]}},{key:"body__RevisionState",fn:function(t){var r=t.data;return[n("ValueRevisionState",{staticClass:"content__clip",attrs:{search:e.trimmedSearch,value:r.row[r.col.id]&&r.row[r.col.id].toString(),color:r.row[r.col.id]&&r.row[r.col.id].color}})]}},{key:"body__menu",fn:function(t){var r=t.data;return[n("div",{staticClass:"status-icon",attrs:{title:e.getStatusHint(r)}},[""!==e.getStatus(r)&&"Unknown"!==e.getStatus(r)?n("StatusIcon",{attrs:{status:e.getStatus(r)}}):e._e()],1)]}},{key:"footer",fn:function(){return[e.isCompare?e._e():n("FooterText",{attrs:{currency:e.currency,"total-names":e.totalNames,"total-price":e.totalPrice,"price-per-board":e.pricePerBoard,"total-quantity":e.totalQuantity}})]},proxy:!0}])}),e._v(" "),e.items.length?e._e():n("div",{staticClass:"content__not-found"},[n("div",{staticClass:"content__not-found-container"},[e.trimmedSearch.length?n("NotFound"):n("NoData")],1)])],1)};C._withStripped=!0;var S=n(75),x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fbom-root"},[n("div",{staticClass:"fbom-overflow-container"},[n("table",{ref:"table",staticClass:"fbom-table bomcmp"},[n("thead",{ref:"header",staticClass:"fbom-table__header"},[n("tr",{staticClass:"fbom-table__row"},[e._l(e.computedColumns.list,(function(t){return n("TableColumnHeader",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"col.visible"}],key:t.id,ref:"headerColumns",refInFor:!0,staticClass:"fbom-table__col",attrs:{id:t.id,text:t.data.text,sorted:t.data.sorted,"sort-by":e.sortBy,resizer:t.prev>0,resizing:!!e.resizeColumn,"min-width":t.data.minWidth,"base-width":t.baseWidth},on:{sort:function(n){return e.onSorting(t)},resize:function(n){return e.onResizeStart(t.prev)}}})})),e._v(" "),n("TableColumnHeader",{staticClass:"fbom-table__col",attrs:{id:"last",resizer:""},on:{resize:function(t){return e.onResizeStart(e.computedColumns.last)}}}),e._v(" "),n("th",{staticClass:"fbom-table__col fbom-table__col_more"},[n("button",{directives:[{name:"dropdown",rawName:"v-dropdown:[dropdownMenuId]",arg:e.dropdownMenuId}],staticClass:"fbom-table__col-content column-more",attrs:{type:"button",title:"Column Settings"}},[n("Icon",{attrs:{name:"slider",transparent:!0}})],1),e._v(" "),n("ColumnsMenu",{attrs:{"menu-id":e.dropdownMenuId,columns:e.computedColumns.menu}})],1)],2)]),e._v(" "),n("tbody",{ref:"body",staticClass:"fbom-table__body",on:{click:function(t){return e.$emit("body:click",t)}}},[e._l(e.items,(function(t,r){return[n("tr",{key:t.ViewKey,staticClass:"fbom-table__row",class:{"is-focused":t.isFocused},on:{click:function(n){return e.$emit("select",{row:t})}}},[e._l(e.computedColumns.list,(function(i){return n("td",{directives:[{name:"show",rawName:"v-show",value:i.visible,expression:"col.visible"}],key:i.id,ref:"rowColumn",refInFor:!0,staticClass:"fbom-table__col"},[n("div",{staticClass:"fbom-table__col-data",style:e.isCompare?{color:e.getDiffColor(i,t)}:void 0},[e._t(i.slotBody,[n("div",{staticClass:"fbom-table__col-data-default"},[i.data.money?[t[i.id]&&""!==t[i.id].toString()?n("Money",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:e.trimmedSearch},expression:"{\n                          query: trimmedSearch\n                        }"}],key:e.trimmedSearch+"-"+t[i.id].toString(),attrs:{code:e.currency,value:t[i.id].toString()}}):e._e()]:[n("span",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:e.trimmedSearch,value:e.formattedColumn(t,i.id)},expression:"{\n                          query: trimmedSearch,\n                          value: formattedColumn(row, col.id)\n                        }"}]},[e._v(e._s(e.formattedColumn(t,i.id)))])]],2)],{data:{index:r,row:t,col:i}})],2)])})),e._v(" "),n("td",{staticClass:"fbom-table__col"}),e._v(" "),n("td",{staticClass:"fbom-table__col column-more"},[n("div",{staticClass:"fbom-table__col-data"},[e._t("body__menu",null,{data:t})],2)])],2),e._v(" "),t.alternateParts&&e.expanded.includes(t.id)?e._l(t.alternateParts,(function(r){return n("tr",{key:r.ViewKey,staticClass:"fbom-table__row",class:{"is-focused":r.isFocused},on:{click:function(n){return e.$emit("select",{row:r,parentRow:t})}}},[e._l(e.computedColumns.list,(function(i){return n("td",{directives:[{name:"show",rawName:"v-show",value:i.visible,expression:"col.visible"}],key:i.id,ref:"rowColumn",refInFor:!0,staticClass:"fbom-table__col"},["num"!==i.id?[n("div",{staticClass:"fbom-table__col-data"},[e._t(i.slotBody,[n("div",{staticClass:"fbom-table__col-data-default"},[i.data.money?[r[i.id]&&""!==r[i.id].toString()?n("Money",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:e.trimmedSearch},expression:"{\n                              query: trimmedSearch\n                            }"}],key:e.trimmedSearch+"-"+r[i.id].toString(),attrs:{code:e.currency,value:r[i.id].toString()}}):e._e()]:[n("span",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:e.trimmedSearch,value:e.formattedColumn(r,i.id)},expression:"{\n                              query: trimmedSearch,\n                              value: formattedColumn(alternateRow, col.id)\n                            }"}]},[e._v(e._s(e.formattedColumn(r,i.id)))])]],2)],{data:{row:r,parentRow:t,col:i}})],2)]:e._e()],2)})),e._v(" "),n("td",{staticClass:"fbom-table__col"}),e._v(" "),n("td",{staticClass:"fbom-table__col column-more"},[n("div",{staticClass:"fbom-table__col-data"},[e._t("body__menu",null,{data:r})],2)])],2)})):e._e()]}))],2)])]),e._v(" "),e.isCompare?e._e():n("div",{ref:"footer",staticClass:"fbom-footer-row"},[n("div",{staticClass:"fbom-footer-row__content"},[e._t("footer")],2)])])};x._withStripped=!0;var k=n(5),E=n(142),T=n(39),P=n.n(T),A=n(21),M=n.n(A),j=n(309),D=n(287),I=n(302),R=n(19),L=n(85),B=["#DDDDDD","#FF453A","#30D158","#FFD60A"],N={name:"BOMCompareTable",components:{TableColumnHeader:I.a,Icon:k.a,ColumnsMenu:D.a,Money:E.a},directives:{dropdown:P.a,hint:M.a,highlight:L.a},props:{tableType:{type:String,default:O.b.FBOM},isCompare:{type:Boolean,default:!1},trimmedSearch:{type:String,default:""},sortBy:{type:Object,default:function(){return{}},validator:function(e){return Object(R.hasOwnProperty)(e,"col")}},columns:{type:Array,default:function(){return[]},validator:function(e){return!e.length||e.every((function(e){var t=!Object(R.hasOwnProperty)(e,"width")||isFinite(+e.width)||Object(R.percentage)({exact:!0}).test(e.width),n=!Object(R.hasOwnProperty)(e,"minWidth")||isFinite(+e.minWidth);return Object(R.hasOwnProperty)(e,"id")&&t&&n}))}},items:{type:Array,default:function(){return[]},validator:function(e){return!e.length||e.every((function(e){return Object(R.hasOwnProperty)(e,"id")}))}},expanded:{type:Array,default:function(){return[]}},contextMenuWidth:{type:Number,default:200},maxHeightMenu:{type:Number,default:395},currency:{type:String,default:"USD"}},data:function(){return{resizeColumn:null}},computed:{dropdownMenuId:function(){return"menu-"+this.tableType},colorizeCell:function(e){return this.isCompare?{color:B[e]}:{}},computedColumns:function(){return this.columns.reduce((function(e,t,n){return e.list.push({id:null==t?void 0:t.id,prev:e.last,visible:t.visible,slotBody:"body__".concat(Object(j.a)(t.id)),data:t,baseWidth:Object(R.percentage)({exact:!0}).test(t.width)?t.width:"".concat(t.width,"px")}),t.visible&&(e.last=n),n&&e.menu.push(t),e}),{list:[],menu:[],last:0})}},mounted:function(){var e=this;setTimeout((function(){e.initializeTableWidth()}),0)},methods:{getDiffColor:function(e,t){return void 0===t.DiffUpdates?B[t.Diff]:t.DiffTableSlots.indexOf(e.slotBody)>=0?B[S.a.changed]:B[S.a.none]},formattedColumn:function(e,t){return void 0===e[t]?"":e[t].toString()},getHeaderColumns:function(){return Array.isArray(this.$refs.headerColumns)?this.$refs.headerColumns:[this.$refs.headerColumns]},initializeTableWidth:function(){this.$refs.table.style.width="fit-content",this.getHeaderColumns().forEach((function(e){return e.initWidth()}))},onResizeStart:function(e){this.resizeColumn=this.getHeaderColumns()[e],this.resizeColumn&&(document.addEventListener("mousemove",this.onResizing),document.addEventListener("mouseup",this.onResizeEnd))},onResizing:function(e){this.resizeColumn&&this.resizeColumn.resize(e.pageX)},onResizeEnd:function(){this.resizeColumn=null,document.removeEventListener("mousemove",this.onResizing),document.removeEventListener("mouseup",this.onResizeEnd)},onSorting:function(e){this.$emit("sort",e)}}},U=(n(473),n(0)),F=Object(U.a)(N,x,[],!1,null,"cc337426",null);F.options.__file="src/plugins/BOMCompareTab/view/components/TableDiff.vue";var $=F.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"fbom-search"},[n("AfsSearch",{ref:"afs-search",attrs:{icon:"search-thin-16"},on:{keydown:function(e){e.stopPropagation()},keyup:function(e){e.stopPropagation()}},model:{value:e.localValue,callback:function(t){e.localValue=t},expression:"localValue"}})],1)};V._withStripped=!0;var z={name:"Search",components:{AfsSearch:n(66).a},props:{isActive:{type:Boolean,default:!1,required:!0},search:{type:String,default:"",required:!0}},data:function(e){return{localValue:e.search}},watch:{search:function(e){this.localValue=e},localValue:function(e){this.$emit("search",e)}}},G=(n(474),Object(U.a)(z,V,[],!1,null,null,null));G.options.__file="src/plugins/BOMCompareTab/view/components/Search.vue";var H=G.exports,W=function(){var e=this.$createElement;return(this._self._c||e)("Icon",{class:["status-icon",this.iconClassName],attrs:{name:this.iconName}})};function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}W._withStripped=!0;var q,X=["Fatal error","Error","Warning","Clear"].concat(function(e){if(Array.isArray(e))return Y(e)}(q=S.b)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(q)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(q)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),Z={name:"StatusIcon",components:{Icon:k.a},props:{status:{type:String,required:!0,validator:function(e){return X.includes(e)}}},computed:{iconClassName:function(){switch(this.status){case"Fatal error":return"status-icon_fatal-error";case"Error":return"status-icon_error";case"Warning":return"status-icon_warning";case"Removed":return"status-icon_removed";case"Added":return"status-icon_added";case"Modified":return"status-icon_modified";case"Clear":default:return"status-icon_ok"}},iconName:function(){switch(this.status){case"Fatal error":case"Error":return"exclamation";case"Warning":return"exclamation-circle";case"Removed":return"deleted";case"Added":return"added";case"Modified":return"modified";case"Clear":default:return"checkmark-circle"}}}},K=(n(475),Object(U.a)(Z,W,[],!1,null,"09420901",null));K.options.__file="src/plugins/BOMCompareTab/view/components/StatusIcon.vue";var J=K.exports,Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fbom-footer"},[n("div",{staticClass:"fbom-footer__item-list"},[n("dl",{staticClass:"fbom-footer__item fbox-footer-definitions"},[n("dt",{staticClass:"fbox-footer-definitions__title"},[e._v("Total")]),e._v(" "),n("dd",{staticClass:"fbox-footer-definitions__details"},[e._v("\n        "+e._s(e.totalNames)+" lines, "+e._s(e.totalQuantity)+" components\n      ")])]),e._v(" "),e.totalPrice?n("dl",{staticClass:"fbom-footer__item fbox-footer-definitions"},[n("dt",{staticClass:"fbox-footer-definitions__title"},[e._v("Price")]),e._v(" "),n("dd",{staticClass:"fbox-footer-definitions__details"},[n("Money",{attrs:{code:e.currency,value:e.totalPrice}})],1),e._v(" "),n("dd",{staticClass:"fbox-footer-definitions__details"},[n("Icon",{directives:[{name:"hint",rawName:"v-hint:[`${componentId}-totals`]",arg:e.componentId+"-totals"}],staticClass:"fbox-footer-icon",attrs:{name:"info-2-16"}}),e._v(" "),n("ContextMenu",{attrs:{id:e.componentId+"-totals",type:"hint",modifiers:{y:"bottom",x:"start"}}},[e._v("\n          Price per board: "),n("Money",{attrs:{code:e.currency,value:e.pricePerBoard}}),e._v(" "),n("br"),e._v("\n          Order price: "),n("Money",{attrs:{code:e.currency,value:e.totalPrice}})],1)],1)]):e._e()])])};Q._withStripped=!0;var ee=n(10),te={directives:{hint:M.a},components:{Icon:k.a,ContextMenu:ee.a,Money:E.a},props:{currency:{type:String,default:""},totalNames:{type:Number,default:0},totalPrice:{type:Number,default:0},pricePerBoard:{type:Number,default:0},totalQuantity:{type:Number,default:0}}},ne=(n(476),Object(U.a)(te,Q,[],!1,null,"6b74c45e",null));ne.options.__file="src/plugins/BOMCompareTab/view/components/FooterText.vue";var re=ne.exports,ie=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fbom-no-results"},[t("AfsText",{staticClass:"fbom-no-results__title",attrs:{type:"large title"}},[this._v("No BOM differences detected")])],1)};ie._withStripped=!0;var oe={name:"NoData",components:{AfsText:n(3).a}},ae=(n(477),Object(U.a)(oe,ie,[],!1,null,null,null));ae.options.__file="src/plugins/BOMCompareTab/view/components/NoData.vue";var se=ae.exports,ue=n(293),ce=n(294),le=n(295),fe=n(296),de=n(297),he=window.__APP__.utils.directives.highlight,pe={name:"BomCompareBaseContent",components:{ValuePartNumber:ue.a,ValueColoredText:ce.a,ValueRevisionState:le.a,Table:$,StatusIcon:J,FooterText:re,NotFound:fe.a,NoData:se,Search:H,AlternatePartsExpander:de.a},directives:{highlight:he},props:{tableType:{type:String,default:O.b.LEFT},sortBy:{type:String,default:""},searchText:{type:String,default:""},columns:{type:Array,default:function(){return[]}},trimmedSearch:{type:String,default:""},items:{type:Array,default:function(){return[]}},currency:{type:Number,default:0},totalPrice:{type:Number,default:0},totalQuantity:{type:Number,default:0},totalNames:{type:Number,default:0},pricePerBoard:{type:Number,default:0},setColVisible:{type:Function,default:function(){return 0}},isSearchActive:{type:Boolean,default:!1}},data:function(){return{isBannerActive:!1}},computed:{isCompare:function(){return this.tableType===O.b.DIFF}},methods:{getStatus:function(e){return e.Diff&&S.b[e.Diff]||""},getStatusHint:function(e){if(!e.Diff)return"";var t=S.b[e.Diff];return Array.isArray(e.DiffUpdates)&&(t+=":\n"+e.DiffUpdates.slice(0,4).map((function(e){return e.property})).join("\n")+(e.DiffUpdates.length>4?"\n...":"")),t}}},me=(n(478),Object(U.a)(pe,C,[],!1,null,"3332f1f2",null));me.options.__file="src/plugins/BOMCompareTab/view/components/BaseContentDiff.vue";var ve=me.exports,ye=n(12),ge=window.__APP__.utils.debounce,be=window.__CORE__,we={name:"BOMCompareTab",components:{BaseContent:ve},data:function(){return{TABLE_TYPE:O.b,pluginName:O.b.LEFT}},computed:{isEmpty:function(){var e,t,n,r=[O.b.LEFT,O.b.RIGHT,O.b.DIFF];return!(Boolean(null===(e=this.$store.state[r[0]])||void 0===e?void 0:e.isActive)||Boolean(null===(t=this.$store.state[r[1]])||void 0===t?void 0:t.isActive)||Boolean(null===(n=this.$store.state[r[2]])||void 0===n?void 0:n.isActive))}},created:function(){var e=this,t=this.$root.$el.parentElement.dataset.view;this.pluginName=t,ye.a.on("bomcompare:onDiffRadioChanged",(function(t){var n=t.data;e.$store.commit(O.b.DIFF+"/"+i.SET_FILTER,n.filterBy)})),ye.a.on("bomcompare:changeVariant",(function(){var e=_.componentsRepository.get("menu-"+t);e&&e.close()}))},mounted:function(){var e=this;be.bus.on("SearchButton:activate",(function(){e.$store.commit(i.SEARCH_ACTIVATED,!0)})),be.bus.on("SearchButton:deactivate",(function(){var t,n;e.$store.commit(i.SEARCH_ACTIVATED,!1),e.$store.commit(e.pluginName+"/"+i.SET_SEARCH,"");var r=null===(t=e.$refs[e.pluginName])||void 0===t||null===(n=t.$refs.search)||void 0===n?void 0:n.$refs["afs-search"];r&&r.handleClearSearch()}))},methods:{createContent:function(e){var t=this.$store;return{tableType:e,items:t.getters[e+"/items"],columns:t.state[e].columns,sortBy:t.state[e].sortBy,trimmedSearch:t.getters[e+"/trimmedSearch"],currency:t.state[e].currency,totalPrice:t.getters[e+"/totalPrice"],totalQuantity:t.getters[e+"/totalQuantity"],totalNames:t.getters[e+"/totalNames"],pricePerBoard:t.getters[e+"/pricePerBoard"],isSearchActive:t.state.isSearchActive}},isActive:function(e){var t;return Boolean(null===(t=this.$store.state[e])||void 0===t?void 0:t.isActive)},sort:function(e,t){var n=this;ge("sort",(function(){return n.$store.commit(e+"/"+i.SET_SORT,t)}),20)},search:function(e,t){var n=this;ge("search",(function(){return n.$store.commit(e+"/"+i.SET_SEARCH,t)}),1e3,{trailing:!0})}}},_e=(n(479),n(480),Object(U.a)(we,w,[],!1,null,"52695b7e",null));_e.options.__file="src/plugins/BOMCompareTab/view/App.vue";var Oe=_e.exports,Ce=window.__APP__,Se=n(57),xe=n(196),ke=n(197),Ee=n(154),Te=n(198),Pe=n(283),Ae=n(62);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(){return(De="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Ie(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function Ie(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ue(e)););return e}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ue(e);if(t){var i=Ue(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Be(this,n)}}function Be(e,t){if(t&&("object"===Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ne(e)}function Ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $e=window.__CORE__,Ve=["Price","Quantity","ViewKey","Diff","DiffUpdates","DiffTableSlots"],ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Re(e,t)}(o,e);var t,n,r,i=Le(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Fe(Ne(n=i.call(this,t,"BOMCompareViewManager",e)),"bus",void 0),Fe(Ne(n),"bomData",void 0),Fe(Ne(n),"activeVariant",O.a),Fe(Ne(n),"diffMode",void 0),n.diffMode=e===O.b.DIFF,n}return t=o,(n=[{key:"initHandlers",value:function(){var e=this;this.$on("setup",(function(t){return De(Ue(o.prototype),"setup",e).call(e,t)})),this.$on("activate",(function(t){return De(Ue(o.prototype),"activate",e).call(e)})),this.$on("deactivate",(function(t){return De(Ue(o.prototype),"deactivate",e).call(e)})),ye.a.on("bomcompare:changeVariant",(function(t){return e.updateVariant(t)}))}},{key:"updateVariant",value:function(e){var t=e.data.variant,n=this.pluginName;e.data.plugin===n&&t!==this.activeVariant&&(this.activeVariant=t,this.toActive(!0))}},{key:"$on",value:function(e,t){var n=e.indexOf(":")<0?"".concat(this.pluginName,":").concat(e):e;$e.bus.on(n,t)}},{key:"events",get:function(){var e=this;return["setup","activate","deactivate","select","checkSelection","didStateChange","loaded"].map((function(t){return"".concat(e.pluginName,":").concat(t)}))}},{key:"emitDidStateChange",value:function(e,t){this.bus.emit("".concat(this.pluginName,":didStateChange"),{state:e,message:t})}},{key:"toActive",value:function(){var e,t,n,r=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.dispatch({type:"Activate",transformData:function(){return r.transformData(r.bomData)},currency:null===(e=this.bomData)||void 0===e?void 0:e.currency,columnAliases:null===(t=this.bomData)||void 0===t?void 0:t.columnAliases,visibleColumns:null===(n=this.bomData)||void 0===n?void 0:n.visibleColumns,diffMode:i,variant:this.activeVariant})}},{key:"prefetchData",value:function(){var e=this;this.dispatch({type:"Ready"}),this.engine.load(!0).catch((function(){e.dispatch({type:"Error"})}))}},{key:"transformData",value:function(e){var t=this,n=this.getVariant();e.items.forEach((function(e){var n,r=null===(n=e.diffVariant)||void 0===n?void 0:n.get(t.activeVariant);r?(e.diff=r.Action,e.diffUpdates=r.Updates,e.diffTableSlots=r.TableSlots):e.diff=null}));var r=e.items.reduce((function(e,r){if(r.parentId)e.alternateParts.push(r);else if(!t.shouldSkipRow(r,n)){var i=r.parameters["%CATALOGID%"]+r.diff,o=r.id+r.diff,a=e.viewRows[i];if(a&&a.diff===r.diff)e.viewItems[o]=t.mergeParameters(a,r,n);else{var s=t.asViewItem(r,n);e.viewItems[o]=s,e.viewRows[i]=s}}return e}),{alternateParts:[],viewItems:{},viewRows:{}}),i=r.alternateParts,o=r.viewItems,a=r.viewRows;return i.forEach((function(e){var r=o[e.parentId+null]||o[e.parentId+S.a.added]||o[e.parentId+S.a.removed]||o[e.parentId+S.a.changed];if(r){r.alternateParts||(r.alternateParts={});var i=e.parameters["%CATALOGID%"],a=r.alternateParts[i];a?t.mergeParameters(a,e,n):r.alternateParts[i]=t.asViewItem(e,n)}})),Object.values(a)}},{key:"asViewItem",value:function(e,t){for(var n,r=Object.assign({},e.parameters),i=0,o=Object.keys(r);i<o.length;i++)n=o[i],Ve.indexOf(n)<0&&(r[n]=this.valuePresenterFactory(n,e));return r.Price=this.valuePresenterFactory(this.createVariantKey("Price",t),e),r.Quantity=parseInt(this.getVariantData(e,"Quantity",t)),r.Description=e.description,r.Diff=e.diff,r.DiffUpdates=e.diffUpdates,r.DiffTableSlots=e.diffTableSlots,r.part=this.partNumber(e.manufacturers[0]),r.ViewKey=e.id+":"+e.diff,Object.assign({},e,{parameters:r})}},{key:"partNumber",value:function(e){var t=new Ae.a;return e?(t.push("".concat(e.name," ").concat(e.mpn)),this.diffMode?t:t.setUrl(e.manufacturerUrl).setStatusName(e.lifecycleStatus)):t}},{key:"valuePresenterFactory",value:function(e,t){switch(e){case"Revision State":return(new xe.a).setColor(t.parameters["%REVISION_STATE_COLOR%"]).push(t.parameters[e]);case"Revision Status":return(new ke.a).push(t.parameters[e]);case"Designator":return(new Ee.a).setDefaultSort().push(t)}if(e.startsWith("Manufacturer Lifecycle"))return(new Te.a).push(t.parameters[e]);if(e.startsWith("Supplier Part Number")){var n=t.parameters[e];if(n){var r=Number(e.replace("Supplier Part Number ","")),i=t.parameters["Supplier ".concat(r)],o=t.manufacturers.flatMap((function(e){return e.suppliers})).find((function(e){return e.name===i&&e.spn===n}));if(o)return this.diffMode?(new Ae.a).push(t.parameters[e]):(new Ae.a).setUrl(o.supplierUrl).push(t.parameters[e])}return new Ae.a}if(e.startsWith("Manufacturer Part Number")){var a=t.parameters[e];if(a){var s=Number(e.replace("Manufacturer Part Number ","")),u=t.parameters["Manufacturer ".concat(s)],c=t.manufacturers.find((function(e){return e.name===u&&e.mpn===a}));if(c)return this.diffMode?(new Ae.a).setStatusName(c.lifecycleStatus).push(t.parameters[e]):(new Ae.a).setUrl(c.manufacturerUrl).setStatusName(c.lifecycleStatus).push(t.parameters[e])}return new Ae.a}return(new Se.a).push(t.parameters[e])}},{key:"getVariant",value:function(){return this.activeVariant}}])&&je(t.prototype,n),r&&je(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(Pe.a),Ge=n(32),He=n(26);function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Je(e);if(t){var i=Je(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ke(this,n)}}function Ke(e,t){if(t&&("object"===We(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qe=window.__CORE__,et={message:"BOM Compare initialization",meta:"It will take a few moments"};function tt(e,t,n,r){var o=n||"BOMCompareTab",a=r||"Compare";return new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xe(e,t)}(h,e);var r,s,u,l,f,d=Ze(h);function h(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(e=d.call(this,{name:o,displayName:a,order:6})).isActive=!1,e.isHidden=!0,e.hasLicenses=!1,e.logger=Qe.createLogger(o),e.viewManager=new ze(n,t),e.registerHandlers(),c.registerModule(o,b),e}return r=h,(s=[{key:"commit",value:function(e,t){c.commit(o+"/"+e,t)}},{key:"registerHandlers",value:function(){var e=this;this.$on("didStateChange",(function(t){return e.onEngineStateChanged(t)}))}},{key:"events",get:function(){return["Variants:changed"]}},{key:"hidden",get:function(){return this.isHidden||!this.hasLicenses}},{key:"$emit",value:function(e,t){var n=e.indexOf(":")<0?"".concat(o,":").concat(e):e;Qe.bus.emit(n,t)}},{key:"$on",value:function(e,t){var n=e.indexOf(":")<0?"".concat(o,":").concat(e):e;Qe.bus.on(n,t)}},{key:"setup",value:(l=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=[He.a.names.compareBom,He.a.names.killSwitchCompareBomView],this.hasLicenses=He.a.getLicenseDetails(n[0]).isEnabled&&He.a.getLicenseDetails(n[1]).isEnabled,this.$emit("setup",t),e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),this.logger.LogError("Setup error. "+e.t0.message),new Error(o+" view setup error.");case 10:case"end":return e.stop()}}),e,this,[[0,6]])})),f=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=l.apply(e,t);function o(e){Ye(i,n,r,o,a,"next",e)}function a(e){Ye(i,n,r,o,a,"throw",e)}o(void 0)}))},function(e){return f.apply(this,arguments)})},{key:"activate",value:function(e){this.div=e,this.$emit("Search:updateInterface",{hidden:!0}),this.$emit("SearchButton:updateInterface",{hidden:!1}),this.commit(i.TAB_ACTIVATED,!0);try{this.isActive=!0,this.activateEngine(),this.$on("Variants:changed",this.activateEngine),this.$emit("Logo:hide")}catch(e){this.logger.LogError("Activate error. "+e.message),e.innerError&&e.innerError.code===Ge.a.StoreExpired?this.updateLoader("error",e.message,"info-16","small"):this.updateLoader("error","Something went wrong. Please try again later.")}}},{key:"deactivate",value:function(){this.$emit("Search:updateInterface",{hidden:!1}),this.$emit("SearchButton:updateInterface",{hidden:!0}),this.commit(i.TAB_ACTIVATED,!1),Qe.bus.off("Variants:changed",this.activateEngine);try{this.isActive=!1,this.$emit("deactivate"),this.$emit("Logo:show")}catch(e){this.logger.LogError("Deactivate error. "+e.message)}}},{key:"activateEngine",value:function(){this.$emit("activate")}},{key:"initView",value:function(e){e&&!this.hasView&&(this.hasView=!0,this.view=function(e){var t=document.createElement("div");return e.appendChild(t),new Ce.library.Vue({store:c,data:{afsConfig:window.__APP__.afsConfig},render:function(e){return e(Oe)}}).$mount(t)}(e))}},{key:"setStoreState",value:function(e){if(!c.getters[o+"/hasVariantItems"](e.variant)){var t=c.state[o].columns.length>0,n=e.transformData();t||(this.commit(i.SET_COLUMNS,{items:n,columnAliases:e.columnAliases,visibleColumns:e.visibleColumns,filter:e.diffMode}),this.commit(i.SET_CURRENCY,e.currency)),this.commit(i.SET_ITEMS,n),this.commit(i.SET_VARIANT,e.variant)}}},{key:"onEngineStateChanged",value:function(e){switch(e.state){case"HIDDEN":this.isHidden=!0,this.$emit("updateInterface",{hidden:!0});break;case"READY":this.$emit("updateInterface",{hidden:!1}),this.isHidden=!1;break;case"ACTIVE":this.initView(this.div),e.message&&(this.setStoreState(e.message),this.updateLoader()),ye.a.emit("bomcompare:tabChanged",{plugin:o,variant:c.state[o].variant});break;case"LOAD":this.updateLoader("large",et);break;case"CRASHED":this.updateLoader("error","Something went wrong. Please try again later.");break;case"NONACTIVE":this.commit(i.TAB_ACTIVATED,!1),this.updateLoader()}}},{key:"updateLoader",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"large",i=t&&(null==t?void 0:t.message)||t,o=null!=t&&void 0!==t&&t.meta?t.meta:"";this.isActive&&e&&i?(this.logger.LogDebug("Loader: ".concat(e,", message: ").concat(i)),this.loader?this.loader.update({message:i,meta:o,type:e,icon:n,size:r}):this.div&&(this.loader=window.__APP__.loader(this.div,{message:i,meta:o,type:e,icon:n,size:r}))):this.loader&&(this.loader.destroy(),this.loader=null)}}])&&qe(r.prototype,s),u&&qe(r,u),Object.defineProperty(r,"prototype",{writable:!1}),h}(e))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r="UNIT_MM",i="UNIT_MIL"},function(e,t,n){"use strict";n.d(t,"a",(function(){return _n})),n.d(t,"b",(function(){return On})),n.d(t,"c",(function(){return Sn}));var r=n(7),i=n(76);function o(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,u,"next",e)}function u(e){o(a,r,i,s,u,"throw",e)}s(void 0)}))}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"canvasControl",void 0),u(this,"renderMode",r.RenderMode.Render2D),u(this,"selectionIds",new Map),u(this,"cachedPrimitives",[]),u(this,"selectionManager",void 0),u(this,"selectionManager2d",void 0),u(this,"selectionManager3d",void 0),this.canvasControl=t,this.selectionManager2d=n,this.selectionManager3d=i,this.selectionManager=this.selectionManager2d}var t,n,i,o,c;return t=e,(n=[{key:"isSelected",get:function(){return this.selectionManager2d.isSelected||this.selectionManager3d.isSelected},set:function(e){this.selectionManager2d.isSelected=e,this.selectionManager3d.isSelected=e}},{key:"setRenderMode",value:function(e){this.renderMode=e,this.activateRenderMode()}},{key:"addSelection",value:(c=a(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectionManager.addSelection(t,(function(e){r.selectionIds.set(e.pcbId,e),r.canvasControl.invalidate()}),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"updateMaterialMap",value:function(e){this.selectionManager.updateMaterialMap(e)}},{key:"clearSelection",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e&&(this.cachedPrimitives.length=0),this.selectionIds.clear(),this.selectionManager2d.clearSelection(n),this.selectionManager3d.clearSelection(n),this.updateMaterialMap(t),this.canvasControl.invalidate()}},{key:"isHighlight",value:function(e){return this.selectionManager.isHighlight(e)}},{key:"addHighlight",value:function(e){this.is2D&&(this.selectionManager.addHighlight(e),this.canvasControl.invalidate())}},{key:"clearHighlight",value:function(){this.is2D&&(this.selectionManager.clearHighlight(),this.canvasControl.invalidate())}},{key:"activateRenderMode",value:(o=a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.selectionManager=this.is2D?this.selectionManager2d:this.selectionManager3d,this.updateMaterialMap(!0),this.canvasControl.invalidate();case 3:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"is2D",get:function(){return this.renderMode==r.RenderMode.Render2D}}])&&s(t.prototype,n),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),l=n(202),f=n(15),d=n(37),h=n(433),p=n(432),m=n(42),v={};v["3D/IDLE"]=[{to:"3D/R_BUTTON_IS_PRESSED",where:function(e){return["mousedown"===e.type,e.button===m.a.Right]}},{to:"3D/L_BUTTON_IS_PRESSED",where:function(e){return["mousedown"===e.type,e.button===m.a.Left]}},{to:"3D/BOARD_ZOOMS",where:function(e){return["wheel"===e.type]}},{to:"3D/TOUCH_START",where:function(e){return["touchstart"===e.type]}}],v["3D/R_BUTTON_IS_PRESSED"]=[{to:"3D/BOARD_TRANSLATES",where:function(e){return["mousemove"===e.type]}},{to:"3D/IDLE",where:function(e){return["mouseup"===e.type,e.button===m.a.Right]}}],v["3D/L_BUTTON_IS_PRESSED"]=[{to:"3D/COMPONENT_LAUNCH_SELECTION",where:function(e){return["mouseup"===e.type,e.button===m.a.Left,e.clickPos.x===e.clientX,e.clickPos.y===e.clientY]}},{to:"3D/BOARD_ROTATES",where:function(e){return["mousemove"===e.type,e.clickPos.x!==e.clientX||e.clickPos.y!==e.clientY]}}],v["3D/BOARD_ZOOMS"]=v["3D/IDLE"],v["3D/BOARD_TRANSLATES"]=[{to:"3D/BOARD_TRANSLATES",where:function(e){return["mousemove"===e.type]}},{to:"3D/BOARD_DID_TRANSLATE",where:function(e){return["mouseup"===e.type,e.button===m.a.Right]}},{to:"3D/BOARD_DID_TRANSLATE",where:function(e){return["mouseleave"===e.type]}}],v["3D/COMPONENT_LAUNCH_SELECTION"]=v["3D/IDLE"],v["3D/BOARD_ROTATES"]=[{to:"3D/BOARD_ROTATES",where:function(e){return["mousemove"===e.type]}},{to:"3D/BOARD_DID_ROTATE",where:function(e){return["mouseup"===e.type,e.button===m.a.Left]}},{to:"3D/BOARD_DID_ROTATE",where:function(e){return["mouseleave"===e.type]}}],v["3D/BOARD_DID_TRANSLATE"]=v["3D/IDLE"],v["3D/BOARD_DID_ROTATE"]=v["3D/IDLE"],v["3D/TOUCH_END"]=v["3D/IDLE"],v["3D/TOUCH_START"]=[{to:"3D/TOUCH_START",where:function(e){return["touchstart"===e.type]}},{to:"3D/TOUCH_MOVE",where:function(e){return["touchmove"===e.type]}},{to:"3D/TOUCH_END",where:function(e){return["touchend"===e.type]}}],v["3D/TOUCH_MOVE"]=[{to:"3D/TOUCH_START",where:function(e){return["touchstart"===e.type]}},{to:"3D/TOUCH_MOVE",where:function(e){return["touchmove"===e.type]}},{to:"3D/TOUCH_END",where:function(e){return["touchend"===e.type]}}];n(511);var y=n(434),g=n(20);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createElement",value:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}},{key:"setAttribute",value:function(e,t){for(var n in t)e.setAttribute(n,t[n.toString()]);return e}},{key:"createLeftRoundedRectPath",value:function(e,t,n,r,i){return"M"+(e+i)+","+t+"h"+(n-i)+"v"+r+"h"+(i-n)+"a"+i+","+i+" 0 0 1 "+-i+","+-i+"v"+(2*i-r)+"a"+i+","+i+" 0 0 1 "+i+","+-i+"z"}},{key:"createRightRoundedRectPath",value:function(e,t,n,r,i){return"M"+e+","+t+"h"+(n-i)+"a"+i+","+i+" 0 0 1 "+i+","+i+"v"+(r-2*i)+"a"+i+","+i+" 0 0 1 "+-i+","+i+"h"+(i-n)+"z"}}],(n=null)&&b(t.prototype,n),r&&b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x={r:2,strokeWidth:2,color:"white"},k=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),S(this,"labelStyle",void 0),S(this,"_labelXY",void 0),S(this,"_labelX",void 0),S(this,"_labelY",void 0),S(this,"overlay",void 0),S(this,"useLabelLine",!0),this.labelStyle=n,this.overlay=w.createElement("g"),w.setAttribute(this.overlay,{id:"measurements"}),t.appendChild(this.overlay)}var t,n,r;return t=e,r=[{key:"getXProjection",value:function(e,t){return{from:e,to:[t[0],e[1],t[2]]}}},{key:"getYProjection",value:function(e,t){return{from:[t[0],e[1],e[2]],to:t}}}],(n=[{key:"labelXY",get:function(){return this._labelXY}},{key:"labelX",get:function(){return this._labelX}},{key:"labelY",get:function(){return this._labelY}},{key:"setStyle",value:function(e){this.labelStyle=e}},{key:"getLabelTemplate",value:function(e,t,n){return this.getLabelInfoTemplate(e,t,n)}},{key:"getLabelInfoTemplate",value:function(e,t,n){var r=w.createElement("g"),i=w.createElement("rect"),o=w.createElement("rect"),a=w.createElement("text"),s=w.createElement("text");a.textContent=e;var u=a.getBoundingClientRect();w.setAttribute(a,{x:5,y:.75*u.height,fill:"white"}),w.setAttribute(i,{x:0,y:0,width:u.width+10,height:u.height,fill:"black"}),s.textContent="".concat(t.toFixed(2)).concat(n);var c=s.getBoundingClientRect();return w.setAttribute(s,{x:u.width+15,y:.75*c.height,fill:"black"}),w.setAttribute(o,{x:u.width+10,y:0,width:c.width+10,height:c.height,fill:"white"}),r.appendChild(i),r.appendChild(o),r.appendChild(a),r.appendChild(s),r}},{key:"moveLabelInfo",value:function(e,t){var n=_(Array.from(e.children),4),r=n[0],i=n[1],o=n[2],a=n[3],s=o.getBoundingClientRect();w.setAttribute(o,{y:.75*s.height}),w.setAttribute(r,{width:s.width+10,height:s.height,fill:"black"}),a.textContent="".concat(t.value.toFixed(2)).concat(t.units);var u=a.getBoundingClientRect();w.setAttribute(a,{x:s.width+15,y:.75*u.height}),w.setAttribute(i,{x:s.width+10,width:u.width+10,height:u.height})}},{key:"moveLabelXY",value:function(e,t,n,r){this._labelXY&&this.moveLabel(this._labelXY,{from:e,to:t,label:"XY",value:n,units:r})}},{key:"moveLabelY",value:function(t,n,r,i){if(this._labelY){var o=e.getYProjection(t,n);this.moveLabel(this._labelY,{from:o.from,to:o.to,label:"Y",value:r,units:i})}}},{key:"moveLabelX",value:function(t,n,r,i){if(this._labelX){var o=e.getXProjection(t,n);this.moveLabel(this._labelX,{from:o.from,to:o.to,label:"X",value:r,units:i})}}},{key:"createLabelXY",value:function(e,t,n,r){this._labelXY=this.getLabelTemplateXY(e,t,"XY",n,r),w.setAttribute(this._labelXY,{id:"labelXY"}),this._labelXY.style="cursor: pointer",this.overlay.appendChild(this._labelXY)}},{key:"createLabelX",value:function(t,n,r,i){var o=e.getXProjection(t,n);this._labelX=this.getLabelTemplateX(o.from,o.to,"X",r,i),w.setAttribute(this._labelX,{id:"labelX",style:"visibility: hidden"}),this.overlay.appendChild(this._labelX)}},{key:"createLabelY",value:function(t,n,r,i){var o=e.getYProjection(t,n);this._labelY=this.getLabelTemplateY(o.from,o.to,"Y",r,i),w.setAttribute(this._labelY,{id:"labelY",style:"visibility: hidden"}),this.overlay.appendChild(this._labelY)}},{key:"showLabel",value:function(){this._labelXY&&w.setAttribute(this._labelXY,{style:"visibility: visible"})}},{key:"hideLabel",value:function(){this._labelXY&&w.setAttribute(this._labelXY,{style:"visibility: hidden"})}},{key:"showProjections",value:function(){this._labelX&&(w.setAttribute(this._labelX,{style:"visibility: visible"}),w.setAttribute(this._labelY,{style:"visibility: visible"}))}},{key:"hideProjections",value:function(){this._labelX&&(w.setAttribute(this._labelX,{style:"visibility: hidden"}),w.setAttribute(this._labelY,{style:"visibility: hidden"}))}},{key:"dispose",value:function(){var e,t,n;null===(e=this._labelXY)||void 0===e||e.remove(),null===(t=this._labelX)||void 0===t||t.remove(),null===(n=this._labelY)||void 0===n||n.remove()}}])&&C(t.prototype,n),r&&C(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D(this,n)}}function D(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(o,e);var t,n,r,i=j(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e,t)}return t=o,(n=[{key:"getLabelVec",value:function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=Math.sqrt(Math.pow(n,2)+Math.pow(r,2))||1,o=-r/i,a=n/i,s=Math.PI/2,u=Math.atan2(r,n),c=-Math.PI/6;u>0&&u<s&&(c+=Math.PI),u>=s&&u<Math.PI&&(c=Math.PI-c),u<0&&u>-Math.PI&&(c=-c),u<0&&u>-s&&(c+=Math.PI);var l=[e[0]+.5*n,e[1]+.5*r];return{from:l,to:[l[0]+30*(o*Math.cos(c)-a*Math.sin(c)),l[1]+30*(o*Math.sin(c)+a*Math.cos(c))]}}},{key:"moveLabelLine",value:function(e,t){w.setAttribute(e,{x1:t.from[0],y1:t.from[1],x2:t.to[0],y2:t.to[1]})}},{key:"moveLabel",value:function(e,t){var n=T(Array.from(e.children),2),r=n[0],i=n[1],o=this.getLabelVec(t.from,t.to),a=Math.round(o.to[0]-o.from[0]),s=Math.round(o.to[1]-o.from[1]);this.useLabelLine&&this.moveLabelLine(i,{from:[0,0],to:[a,s]}),this.moveLabelInfo(r,{label:t.label,value:t.value,units:t.units}),w.setAttribute(r,{transform:"translate(".concat(a,",").concat(s,")")}),w.setAttribute(e,{transform:"translate(".concat(Math.round(o.from[0]),",").concat(Math.round(o.from[1]),")")})}},{key:"getLabelTemplateXY",value:function(e,t,n,r,i){var o=w.createElement("g"),a=this.getLabelVec(e,t),s=a.to[0]-a.from[0],u=a.to[1]-a.from[1],c=this.getLabelTemplate(n,r,i);if(w.setAttribute(o,{transform:"translate(".concat(a.from[0],",").concat(a.from[1],")")}),o.appendChild(c),this.useLabelLine){var l=this.getLabelLineTemplate([0,0],[s,u]);o.appendChild(l)}return o}},{key:"getLabelTemplateX",value:function(e,t,n,r,i){return this.getLabelTemplateXY(e,t,n,r,i)}},{key:"getLabelTemplateY",value:function(e,t,n,r,i){return this.getLabelTemplateXY(e,t,n,r,i)}},{key:"getLabelLineTemplate",value:function(e,t){var n=w.createElement("line");return w.setAttribute(n,{x1:e[0],y1:e[1],x2:t[0],y2:t[1],stroke:x.color,"stroke-width":x.strokeWidth}),n}}])&&A(t.prototype,n),r&&A(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(k);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=z(e);if(t){var i=z(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return V(this,n)}}function V(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(o,e);var t,n,r,i=$(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e,t)}return t=o,(n=[{key:"getLabelVec",value:function(e,t){return{from:e,to:t}}},{key:"moveLabel",value:function(e,t){var n=B(Array.from(e.children),1)[0],r=this.getLabelVec(t.from,t.to);this.moveLabelInfo(n,{label:t.label,value:t.value,units:t.units});var i=n.getBBox(),o=Math.round(r.to[0]-r.from[0])/2-i.width/2,a=Math.round(r.to[1]-r.from[1])/2-i.height/2;w.setAttribute(n,{transform:"translate(".concat(o,",").concat(a,")")}),w.setAttribute(e,{transform:"translate(".concat(Math.round(r.from[0]),",").concat(Math.round(r.from[1]),")")})}},{key:"getLabelTemplateXY",value:function(e,t,n,r,i){var o=w.createElement("g"),a=this.getLabelVec(e,t),s=(a.to[0],a.from[0],a.to[1],a.from[1],this.getLabelTemplate(n,r,i));return w.setAttribute(o,{transform:"translate(".concat(a.from[0],",").concat(a.from[1],")")}),o.appendChild(s),o}},{key:"getLabelTemplateX",value:function(e,t,n,r,i){return this.getLabelTemplateXY(e,t,n,r,i)}},{key:"getLabelTemplateY",value:function(e,t,n,r,i){return this.getLabelTemplateXY(e,t,n,r,i)}}])&&U(t.prototype,n),r&&U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(k);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var i=J(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return K(this,n)}}function K(e,t){if(t&&("object"===H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(o,e);var t,n,r,i=Z(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e,t)}return t=o,(n=[{key:"moveLabel",value:function(e,t){var n=W(Array.from(e.children),2),r=n[0],i=n[1],o=this.getLabelVec(t.from,t.to),a=Math.round(o.to[0]-o.from[0]),s=Math.round(o.to[1]-o.from[1]);this.useLabelLine&&this.moveLabelLine(i,{from:[0,0],to:[a,s]}),this.moveLabelInfo(r,{label:t.label,value:t.value,units:t.units}),w.setAttribute(r,{transform:"translate(".concat(a,",").concat(s,")")}),w.setAttribute(e,{transform:"translate(".concat(Math.round(o.from[0]),",").concat(Math.round(o.from[1]),")")})}},{key:"getLabelTemplate",value:function(e,t,n){var r=w.createElement("g"),i=w.createElement("rect"),o=w.createElement("text");o.textContent="".concat(t.toFixed(2)).concat(n);var a=o.getBoundingClientRect();return w.setAttribute(o,{x:5,y:.9*a.height,fill:"black",font:"12px Helvetica Neue"}),w.setAttribute(i,{x:0,y:0,width:a.width+10,height:a.height+5,fill:"white",stroke:"black","stroke-width":1}),r.appendChild(i),r.appendChild(o),r}},{key:"moveLabelInfo",value:function(e,t){var n=W(Array.from(e.children),2),r=n[0],i=n[1];i.textContent="".concat(t.value.toFixed(2)).concat(t.units);var o=i.getBoundingClientRect();w.setAttribute(i,{x:5,y:.9*o.height}),w.setAttribute(r,{x:0,width:o.width+10,height:o.height+5})}},{key:"getLabelTemplateXY",value:function(e,t,n,r,i){var o=w.createElement("g"),a=this.getLabelVec(e,t),s=a.to[0]-a.from[0],u=a.to[1]-a.from[1],c=this.getLabelTemplate(n,r,i);if(w.setAttribute(o,{transform:"translate(".concat(a.from[0],",").concat(a.from[1],")")}),o.appendChild(c),this.useLabelLine){var l=this.getLabelLineTemplate([0,0],[s,u]);o.appendChild(l)}return o}},{key:"getLabelTemplateX",value:function(e,t,n,r,i){return this.getLabelTemplateXY(e,t,n,r,i)}},{key:"getLabelTemplateY",value:function(e,t,n,r,i){return this.getLabelTemplateXY(e,t,n,r,i)}}])&&q(t.prototype,n),r&&q(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(R);function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),te(this,"svg",void 0),te(this,"labelStyleBuilderMap",new Map),this.svg=t,this.labelStyleBuilderMap.set("pointer",(function(e){return new R(n.svg,e)})),this.labelStyleBuilderMap.set("simplepointer",(function(e){return new Q(n.svg,e)})),this.labelStyleBuilderMap.set("simple",(function(e){return new G(n.svg,e)})),this.labelStyleBuilderMap.set("roundedRect",(function(e){return new fe(n.svg,e)}))}var t,n,r;return t=e,(n=[{key:"getLabelBuilder",value:function(e){var t=this.labelStyleBuilderMap.get(e.viewKind);return t||(t=this.labelStyleBuilderMap.get("pointer")),t(e)}}])&&ee(t.prototype,n),r&&ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=le(e);if(t){var i=le(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ce(this,n)}}function ce(e,t){if(t&&("object"===re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}(o,e);var t,n,r,i=ue(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).useLabelLine=!1,n}return t=o,(n=[{key:"moveLabelXY",value:function(e,t,n,r){if(this._labelXY){var i=this._labelXY,o=i.children.item(0),a=this.getLabelVec(e,t),s="rotate(0)";w.setAttribute(i,{transform:s});var u=Math.round(a.from[0]),c=Math.round(a.from[1]);this.moveLabelInfo(o,{label:"XY",value:n,units:r});var l=i.getBBox(),f=l.width/2,d=l.height/2,h=l.width,p=this.getMeterLength(e,t);p<2*h&&this.hideProjections(),p<1.5*h&&(d+=l.height);var m=this.getMeterDegrees(e,t);s="translate(".concat(u,",").concat(c,") rotate(").concat(m,") translate(").concat(-f,", ").concat(-d,")"),w.setAttribute(i,{transform:s})}}},{key:"getMeterLength",value:function(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}},{key:"moveLabelX",value:function(e,t,n,r){if(this._labelX){var i=k.getXProjection(e,t),o=this._labelX,a=o.children.item(0);this.moveLabelInfo(a,{label:"X",value:n,units:r});var s=this.getLabelVec(i.from,i.to),u=o.getBBox(),c=Math.round(s.from[0]-u.width/2),l=Math.round(s.from[1]-u.height/2),f=u.width;this.getMeterLength(i.from,i.to)<1.5*f&&(l=e[1]>t[1]?l+u.height:l-u.height);var d="translate(".concat(c,",").concat(l,")");w.setAttribute(o,{transform:d})}}},{key:"moveLabelY",value:function(e,t,n,r){if(this._labelY){var i=k.getYProjection(e,t),o=this._labelY,a=o.children.item(0),s="rotate(0)";w.setAttribute(o,{transform:s}),this.moveLabelInfo(a,{label:"Y",value:n,units:r});var u=this.getLabelVec(i.from,i.to),c=o.getBBox(),l=Math.round(u.from[0]),f=Math.round(u.from[1]),d=c.width/2,h=c.height/2,p=c.width;this.getMeterLength(i.from,i.to)<1.5*p&&(h=e[0]>t[0]?h+c.height:h-c.height),s="translate(".concat(l,",").concat(f,") rotate(-90) translate(").concat(-d,", ").concat(-h,")"),w.setAttribute(o,{transform:s})}}},{key:"getMeterDegrees",value:function(e,t){var n=t[1]-e[1],r=t[0]-e[0],i=180*Math.atan2(n,r)/Math.PI;return i>-90&&i<90?i:i>=90&&i<=180?i-180:i+180}},{key:"getLabelTemplate",value:function(e,t,n){var r=w.createElement("g"),i=w.createElement("rect"),o=w.createElement("text");o.textContent="".concat(t.toFixed(2)).concat(n);var a=o.getBoundingClientRect();return w.setAttribute(o,{x:5,y:.9*a.height,fill:"black"}),w.setAttribute(i,{x:0,y:0,rx:4,ry:4,width:a.width+10,height:a.height+5,fill:"white",stroke:"black","stroke-width":1}),r.appendChild(i),r.appendChild(o),r}},{key:"moveLabelInfo",value:function(e,t){var n=ie(Array.from(e.children),2),r=n[0],i=n[1];i.textContent="".concat(t.value.toFixed(2)).concat(t.units);var o=i.getBoundingClientRect();w.setAttribute(i,{x:5,y:.9*o.height}),w.setAttribute(r,{x:0,width:o.width+10,height:o.height+5})}},{key:"getLabelTemplateXY",value:function(e,t,n,r,i){var o=w.createElement("g"),a=this.getLabelVec(e,t),s=this.getLabelTemplate(n,r,i);o.appendChild(s);var u=o.getBBox(),c=a.from[0]-u.width/2,l=a.from[1]-u.height/2,f="translate(".concat(c,",").concat(l,")");return w.setAttribute(o,{transform:f}),o}},{key:"getLabelTemplateX",value:function(e,t,n,r,i){var o=w.createElement("g"),a=this.getLabelVec(e,t),s=this.getLabelTemplate(n,r,i),u="translate(".concat(a.from[0],",").concat(a.from[1],")");return w.setAttribute(o,{transform:u}),o.appendChild(s),o}},{key:"getLabelTemplateY",value:function(e,t,n,r,i){var o=w.createElement("g"),a=this.getLabelVec(e,t),s=this.getLabelTemplate(n,r,i),u="translate(".concat(a.from[0],",").concat(a.from[1],")");return w.setAttribute(o,{transform:u}),o.appendChild(s),o}}])&&ae(t.prototype,n),r&&ae(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(R),de=n(44),he=n(173);function pe(e){return function(e){if(Array.isArray(e))return me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return me(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ye(this,"scene",void 0),ye(this,"meterStyle",void 0),ye(this,"primaryColor",void 0),ye(this,"secondaryColor",void 0),ye(this,"thirdColor",void 0),ye(this,"initialZoom",void 0),ye(this,"colorMaterialMap",new Map),ye(this,"nodeContainer",new r.NodeContainer),this.scene=t,this.setStyle(n)}var t,n,i;return t=e,(n=[{key:"build",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:de.b.Cross,o=this.getLineTemplate(t.from,t.to);(n=e.unis).push.apply(n,pe(o));var a,s=this.getCapTemplate(t.from);e.add(s),a=r?this.getSnappingCursorTemplate(t.to,i):this.getCapTemplate(t.to),e.add(a)}},{key:"buildCursor",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:de.b.Circle;n?e.add(this.getSnappingCursorTemplate(t,r)):e.add(this.getCursorTemplate(t))}},{key:"setStyle",value:function(e){this.meterStyle=e,this.primaryColor=this.initMaterial(e.colors.length>0?e.colors[0]:"#000000"),this.secondaryColor=this.initMaterial(e.colors.length>1?e.colors[1]:"#FFFFFF"),this.thirdColor=this.initMaterial(e.colors.length>2?e.colors[2]:"rgba(255, 255, 255, 0.3)")}},{key:"initMaterial",value:function(e){var t=this.colorMaterialMap.get(e);if(t)return t;var n=he.a.toRgbaArray(e);return t=this.scene.addMaterial(new r.Material(n,void 0,void 0,!0,!1)),this.colorMaterialMap.set(e,t),t}},{key:"zoom",get:function(){return this.initialZoom||(this.initialZoom=25),this.scene instanceof r.Scene3D?Math.abs(this.scene.getEye()[2])/1.5:this.initialZoom/this.scene.viewport.GetZoom()}},{key:"getCapTemplate",value:function(e){var t=e[0],n=e[1],i=.3/this.zoom,o=.6*i,a=r.Arc.createCircleFill(t,n,o,this.secondaryColor),s=r.Arc.createCircleFill(t,n,i,this.primaryColor),u=r.Arc.createCircleFill(t,n,o,this.secondaryColor);return a.z=[e[2]+.02,e[2]+.02],s.z=[e[2],e[2]],u.z=[e[2]-.02,e[2]-.02],this.nodeContainer.clear(),this.nodeContainer.arcs.push(a,s,u),this.nodeContainer}},{key:"getLineTemplate",value:function(e,t){var n=e[0],i=e[1],o=t[0],a=t[1],s=.2/this.zoom,u=.5*s,c=r.Uni.createLine(n,i,o,a,u,this.primaryColor),l=r.Uni.createLine(n,i,o,a,s,this.secondaryColor),f=r.Uni.createLine(n,i,o,a,u,this.primaryColor);return c.z=[e[2]+.02,t[2]+.02],l.z=[e[2],t[2]],f.z=[e[2]-.02,t[2]-.02],[c,l,f]}},{key:"getCursorTemplate",value:function(e){var t=e[0],n=e[1],i=this.scene.pixelsToUnits(1),o=[0,.5];this.nodeContainer.clear();var a=this.meterStyle.capOptions.width*i,s=this.meterStyle.capOptions.height*i,u=r.Uni.createRectangle(t,n,a,s,this.primaryColor);u.z=o;var c=r.Uni.createRectangle(t,n,s,a,this.primaryColor);return c.z=o,this.nodeContainer.unis.push(u,c),this.nodeContainer}},{key:"getSnappingCursorTemplate",value:function(e,t){switch(t){case de.b.Box:return this.getBoxCursorTemplate(e);case de.b.Triangle:return this.getTriangleCursorTemplate(e);default:return this.getCircleCursorTemplate(e)}}},{key:"getCircleCursorTemplate",value:function(e){var t,n,i=e[0],o=e[1],a=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var s=a*(null!==(t=this.meterStyle.capOptions.radius)&&void 0!==t?t:7),u=a*(null!==(n=this.meterStyle.capOptions.width)&&void 0!==n?n:1),c=r.Arc.createCircleStroke(i,o,s,this.primaryColor,u,[0,.5]);return this.nodeContainer.arcs.push(c),this.nodeContainer}},{key:"getBoxCursorTemplate",value:function(e){var t,n,i,o=e[0],a=e[1],s=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var u=2*s*(null!==(t=this.meterStyle.capOptions.radius)&&void 0!==t?t:7),c=s*(null!==(n=this.meterStyle.capOptions.width)&&void 0!==n?n:1),l=r.Uni.createStrokedRectangle(o-u/2,a+u/2,u,u,c,this.primaryColor);return(i=this.nodeContainer.unis).push.apply(i,pe(l)),this.nodeContainer}},{key:"getTriangleCursorTemplate",value:function(e){var t,n,i=e[0],o=e[1],a=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var s=a*(null!==(t=this.meterStyle.capOptions.radius)&&void 0!==t?t:7),u=a*(null!==(n=this.meterStyle.capOptions.width)&&void 0!==n?n:1),c=4*s/Math.sqrt(3),l=i-c/2,f=i,d=i+c/2,h=r.Uni.createLine(l,o-s,f,o+s,u,this.primaryColor),p=r.Uni.createLine(f,o+s,d,o-s,u,this.primaryColor),m=r.Uni.createLine(l,o-s,d,o-s,u,this.primaryColor);return this.nodeContainer.unis.push(h,p,m),this.nodeContainer}},{key:"pixelsToUnitsX",value:function(e){var t=this.scene.viewportToWorld([0,0]);return this.scene.viewportToWorld([e,0])[0]-t[0]}},{key:"pixelsToUnitsY",value:function(e){var t=this.scene.viewportToWorld([0,0]);return this.scene.viewportToWorld([0,e])[1]-t[1]}}])&&ve(t.prototype,n),i&&ve(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),we(this,"scene",void 0),we(this,"meterStyleBuilderMap",new Map),this.scene=t,this.meterStyleBuilderMap.set("round",(function(e){return new Te(n.scene,e)})),this.meterStyleBuilderMap.set("simplecross",(function(e){return new ze(n.scene,e)})),this.meterStyleBuilderMap.set("cross",(function(e){return new Le(n.scene,e)})),this.meterStyleBuilderMap.set("simplebox",(function(e){return new Je(n.scene,e)}))}var t,n,r;return t=e,(n=[{key:"getMeterBuilder",value:function(e){var t=this.meterStyleBuilderMap.get(e.viewKind);return t||(t=this.meterStyleBuilderMap.get("round")),t(e)}}])&&be(t.prototype,n),r&&be(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ee(e);if(t){var i=Ee(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ke(this,n)}}function ke(e,t){if(t&&("object"===Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Se(e,t)}(o,e);var t,n,r,i=xe(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e,t)}return t=o,n&&Ce(t.prototype,n),r&&Ce(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(ge);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Re(e);if(t){var i=Re(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return De(this,n)}}function De(e,t){if(t&&("object"===Pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ie(e)}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Me(e,t)}(a,e);var t,n,i,o=je(a);function a(e,t){var n,r,i,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=o.call(this,e,t),r=Ie(n),s=void 0,(i="whiteTransparentColorId")in r?Object.defineProperty(r,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[i]=s,n}return t=a,i=[{key:"create",value:function(e){return new a(e,{viewKind:"cross",colors:["#000000","#FFFFFF","rgba(255, 255, 255, 0.3)"],capOptions:{width:2.4,height:8.8,lineWidth:.8},lineOptions:{lineCount:2,lineWidth:1}})}}],(n=[{key:"getCapTemplate",value:function(e){var t=e[0],n=e[1],i=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var o=this.meterStyle.capOptions.width*i,a=this.meterStyle.capOptions.height*i,s=r.Uni.createRectangle(t,n,o,a,this.secondaryColor),u=r.Uni.createRectangle(t,n,a,o,this.secondaryColor),c=r.Uni.createRectangle(t,n,o+2*i,a+2*i,this.primaryColor),l=r.Uni.createRectangle(t,n,a+2*i,o+2*i,this.primaryColor);return this.nodeContainer.unis.push(c,l,s,u),this.nodeContainer}},{key:"getLineTemplate",value:function(e,t){var n=e[0],i=e[1],o=t[0],a=t[1],s=this.scene.pixelsToUnits(1),u=this.meterStyle.lineOptions.lineWidth*s,c=r.Uni.createLine(n,i,o,a,u,this.secondaryColor);return[r.Uni.createLine(n,i,o,a,u+2*s,this.primaryColor),c]}}])&&Ae(t.prototype,n),i&&Ae(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(ge);function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ve(e);if(t){var i=Ve(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(e,t){if(t&&("object"===Be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(a,e);var t,n,i,o=Fe(a);function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e,t)}return t=a,i=[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:19,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FFFFFF",i={viewKind:"simplecross",colors:[r],capOptions:{width:t,height:n},lineOptions:{lineWidth:t}};return new a(e,i)}}],(n=[{key:"getCapTemplate",value:function(e){var t=e[0],n=e[1],i=this.scene.pixelsToUnits(1);this.nodeContainer.clear();var o=this.meterStyle.capOptions.width*i,a=this.meterStyle.capOptions.height*i,s=r.Uni.createRectangle(t,n,o,a,this.primaryColor);this.nodeContainer.unis.push(s);var u=r.Uni.createRectangle(t,n,a,o,this.primaryColor);return this.nodeContainer.unis.push(u),this.nodeContainer}},{key:"getLineTemplate",value:function(e,t){var n=e[0],i=e[1],o=t[0],a=t[1],s=this.scene.pixelsToUnits(1),u=this.meterStyle.lineOptions.lineWidth*s;return[r.Uni.createLine(n,i,o,a,u,this.primaryColor)]}},{key:"getCursorTemplate",value:function(e){return this.getCapTemplate(e)}}])&&Ne(t.prototype,n),i&&Ne(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(ge);function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e){return function(e){if(Array.isArray(e))return We(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return We(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ke(e);if(t){var i=Ke(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ze(this,n)}}function Ze(e,t){if(t&&("object"===Ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qe(e,t)}(a,e);var t,n,i,o=Xe(a);function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e,t)}return t=a,i=[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:19,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FFFFFF",i={viewKind:"simplebox",colors:[r],capOptions:{width:t,height:n},lineOptions:{lineWidth:t}};return new a(e,i)}}],(n=[{key:"build",value:function(e,t){arguments.length>3&&void 0!==arguments[3]||de.b.Cross;var n,r=this.getLineTemplate(t.from,t.to);(n=e.unis).push.apply(n,He(r))}},{key:"getLineTemplate",value:function(e,t){var n=e[0],i=e[1],o=t[0],a=t[1],s=this.scene.pixelsToUnits(1),u=this.meterStyle.lineOptions.lineWidth*s;return[r.Uni.createLine(n,i,o,a,u,this.primaryColor)]}},{key:"getCursorTemplate",value:function(e){return this.getBoxCursorTemplate(e)}}])&&Ye(t.prototype,n),i&&Ye(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(ge);function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var et=function(){function e(t){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=void 0,(r="workspace")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.workspace=t}var t,n,r;return t=e,(n=[{key:"setCursor",value:function(e){var t=this;setTimeout((function(){switch(e){case de.b.None:t.workspace.style.cursor="none";break;case de.b.Wait:t.workspace.style.cursor="wait";break;case de.b.Cross:t.workspace.style.cursor=t.getCrossStyle();break;case de.b.Box:t.workspace.style.cursor=t.getBoxStyle();break;case de.b.Circle:t.workspace.style.cursor=t.getCircleStyle();break;default:t.workspace.style.cursor="default"}}),1)}},{key:"getCrossStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:19,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r="url('data:image/svg+xml;utf8,<svg width=\"".concat(e,'" height="').concat(e,'" viewBox="0 0 ').concat(e," ").concat(e,'" fill="none" xmlns="http://www.w3.org/2000/svg"> ')+'<line id="line1" x1="'.concat(e/2,'" y1="0" x2="').concat(e/2,'" y2="').concat(e,'" style="stroke-linecap:round;stroke:').concat(t,";stroke-width:").concat(n,'" /> ')+'<line id="line2" x1="0" y1="'.concat(e/2,'" x2="').concat(e,'" y2="').concat(e/2,'" style="stroke-linecap:round;stroke:').concat(t,";stroke-width:").concat(n,"\" /></svg>') ").concat(e/2," ").concat(e/2,", auto");return r}},{key:"getBoxStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:14,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.7,r="url('data:image/svg+xml;utf8,<svg width=\"".concat(e,'" height="').concat(e,'" viewBox="0 0 ').concat(e," ").concat(e,'" fill="none" xmlns="http://www.w3.org/2000/svg"> ')+'<rect x="1" y="1" width="'.concat(e-2,'" height="').concat(e-2,'" style="stroke:').concat(t,";stroke-width:").concat(n,"\" /></svg>') ").concat(e/2," ").concat(e/2,", auto");return r}},{key:"getCircleStyle",value:function(){return this.getBoxStyle()}}])&&Qe(t.prototype,n),r&&Qe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function it(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ot=de.a.createLogger("MeterController"),at=function(){function e(t,n,i){var o,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),it(this,"scene",void 0),it(this,"parentScene",void 0),it(this,"canvasControl",void 0),it(this,"nodeMeter",null),it(this,"nodeCursor",null),it(this,"cx",void 0),it(this,"layerIndex",void 0),it(this,"overlay",void 0),it(this,"measurement",void 0),it(this,"meterBuilder",void 0),it(this,"meterProvider",void 0),it(this,"labelBuilder",void 0),it(this,"labelProvider",void 0),it(this,"container",new r.NodeContainer),this.scene=n,this.parentScene=null!==(o=n.parentScene)&&void 0!==o?o:n,this.canvasControl=i,this.nodeMeter=null,this.nodeCursor=null,n instanceof r.Scene2D&&(this.layerIndex=n.layerMap.GetLayersCount()-1),this.meterProvider=new _e(n),this.setMeterBuilder(de.c.Free),this.overlay=w.createElement("g"),this.labelProvider=new ne(this.overlay),this.labelBuilder=this.labelProvider.getLabelBuilder({viewKind:"roundedRect"}),w.setAttribute(this.overlay,{id:"measurements"}),t.appendChild(this.overlay),de.a.bus.on("LayerManager:changedLayers",(function(){a.drawMeter([a.measurement])})),de.a.bus.on("Measurement:setStyle",(function(e){return a.setStyle(e)})),de.a.bus.on("Measurement:changeMode",(function(e){e&&a.setMeterBuilder(e.id)})),this.canvasControl.on("invalidate",(function(){if(a.measurement&&"visible"===a.overlay.style.visibility){var e=a.scene.worldToViewport(a.measurement.from),t=a.scene.worldToViewport(a.measurement.to);a.labelBuilder.moveLabelXY(e,t,a.measurement.xy||0,a.measurement.unitName||"mm"),a.labelBuilder.moveLabelX(e,t,a.measurement.x||0,a.measurement.unitName||"mm"),a.labelBuilder.moveLabelY(e,t,a.measurement.y||0,a.measurement.unitName||"mm")}}))}var t,n,i;return t=e,i=[{key:"getXProjection",value:function(e,t){return{from:e,to:[t[0],e[1],t[2]]}}},{key:"getYProjection",value:function(e,t){return{from:[t[0],e[1],e[2]],to:t}}}],(n=[{key:"activate",value:function(){w.setAttribute(this.overlay,{style:"visibility: visible"})}},{key:"deactivate",value:function(){w.setAttribute(this.overlay,{style:"visibility: hidden"}),this.hideMeter()}},{key:"setMeterBuilder",value:function(e){var t={viewKind:e===de.c.ObjectToObject?"simplebox":"simplecross",colors:["#FFFFFF"],capOptions:{width:1,height:19,radius:7,lineWidth:1},lineOptions:{lineWidth:1}};this.meterBuilder=this.meterProvider.getMeterBuilder(t)}},{key:"setStyle",value:function(e){this.meterBuilder=this.meterProvider.getMeterBuilder(e.meterStyle),this.labelBuilder.hideProjections(),this.labelBuilder.dispose(),this.labelBuilder=this.labelProvider.getLabelBuilder(e.labelStyle),this.render()}},{key:"isSceneFlipped",get:function(){return this.scene instanceof r.Scene3D?Math.sign(this.scene.getEye()[2])>0:this.scene instanceof r.Scene2D&&this.scene.flipped}},{key:"createXY",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:de.b.Cross;this.clearCursor(),this.meterBuilder.build(e,{from:t,to:n},r,i)}},{key:"createX",value:function(t,n,r){this.meterBuilder.build(t,e.getXProjection(n,r))}},{key:"createY",value:function(t,n,r){this.meterBuilder.build(t,e.getYProjection(n,r))}},{key:"showProjections",value:function(){this.labelBuilder.labelX&&(this.labelBuilder.showProjections(),this.drawMeter([this.measurement]))}},{key:"hideProjections",value:function(){this.labelBuilder.labelX&&(this.labelBuilder.hideProjections(),this.drawMeter([this.measurement]))}},{key:"drawMeter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:de.b.Cross;this.clearMeter(!1),this.container.clear(),this.measurement=e[0];try{if(this.measurement&&"visible"===this.overlay.style.visibility){var r=this.scene.worldToViewport(this.measurement.from),i=this.scene.worldToViewport(this.measurement.to);this.labelBuilder.labelXY||(this.labelBuilder.createLabelX(r,i,this.measurement.x||0,this.measurement.unitName||"mm"),this.labelBuilder.createLabelY(r,i,this.measurement.y||0,this.measurement.unitName||"mm"),this.labelBuilder.createLabelXY(r,i,this.measurement.xy||0,this.measurement.unitName||"mm")),this.createXY(this.container,this.measurement.from,this.measurement.to,t,n),this.container.isEmpty||this.labelBuilder.showLabel(),"visible"===this.labelBuilder.labelX.style.visibility&&(this.createX(this.container,this.measurement.from,this.measurement.to),this.createY(this.container,this.measurement.from,this.measurement.to)),this.nodeMeter=this.scene.addNode(this.layerIndex,this.container)}this.render()}catch(e){return ot.LogError("Try draw meter. \nDetail: ".concat(e)),e}}},{key:"hideMeter",value:function(){this.hideProjections(),this.clearMeter(!1),this.labelBuilder.hideLabel()}},{key:"updateMeasurement",value:function(e){this.measurement=e}},{key:"drawCursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:de.b.Circle;try{this.clearCursor(!1),this.container.clear();var r=this.scene.viewportToWorld(e);this.meterBuilder.buildCursor(this.container,r,t,n),this.nodeCursor=this.scene.addNode(this.layerIndex,this.container),this.render()}catch(e){ot.LogError("Try draw cursor. \nDetail: ".concat(e))}}},{key:"clearCursor",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=null;try{this.nodeCursor&&(t=this.nodeCursor.GetId(),this.scene.removeItem(this.nodeCursor),this.nodeCursor=null,e&&this.render())}catch(e){var n;ot.LogError("Try clear cursor for nodeId: ".concat(null!==(n=t)&&void 0!==n?n:" is empty",".\nDetail: ").concat(e))}}},{key:"drawMeterWithFitZoom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4;this.clearMeter(),this.container.clear(),this.measurement=e;try{var n,r;if(!this.measurement||"visible"!==this.overlay.style.visibility)return void this.render();null!==(n=this.measurement.fromObject)&&void 0!==n&&n.pcbId&&null!==(r=this.measurement.toObject)&&void 0!==r&&r.pcbId?this.zoomToFitBoundObjects(this.measurement.fromObject.pcbId,this.measurement.toObject.pcbId,t):this.zoomToFitBoundRects(this.measurement.from,this.measurement.to,t);var i=this.scene.worldToViewport(this.measurement.from),o=this.scene.worldToViewport(this.measurement.to);this.createXY(this.container,this.measurement.from,this.measurement.to),this.container.isEmpty||this.labelBuilder.showLabel(),"visible"===this.labelBuilder.labelX.style.visibility&&(this.createX(this.container,this.measurement.from,this.measurement.to),this.createY(this.container,this.measurement.from,this.measurement.to)),this.nodeMeter=this.scene.addNode(this.layerIndex,this.container),this.labelBuilder.labelXY||(this.labelBuilder.createLabelX(i,o,this.measurement.x||0,this.measurement.unitName||"mm"),this.labelBuilder.createLabelY(i,o,this.measurement.y||0,this.measurement.unitName||"mm"),this.labelBuilder.createLabelXY(i,o,this.measurement.xy||0,this.measurement.unitName||"mm")),this.render()}catch(e){ot.LogError("Try draw meter with Fit To Zoom. \nDetail: ".concat(e))}}},{key:"zoomToFitBoundObjects",value:function(e,t,n){var r=this.parentScene.getNodeItemById(e),i=this.parentScene.getNodeItemById(t),o=this.parentScene.getBoundingBoxForItem(r),a=this.parentScene.getBoundingBoxForItem(i),s=this.getMinMaxBoundRects([o,a]),u=[s[0],s[1],s[2]],c=[s[3],s[4],s[5]];this.parentScene.zoomToFit(u,c,n)}},{key:"getMinMaxBoundRects",value:function(e){var t=tt(e[0],6),n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5];if(e.forEach((function(e){n>e[0]&&(n=e[0]),r>e[1]&&(r=e[1]),i>e[2]&&(i=e[2]),o<e[3]&&(o=e[3]),a<e[4]&&(a=e[4]),s<e[5]&&(s=e[5])})),n>o){var u=[o,n];n=u[0],o=u[1]}if(r>a){var c=[a,r];r=c[0],a=c[1]}if(i>s){var l=[s,i];i=l[0],s=l[1]}return[n,r,i,o,a,s]}},{key:"zoomToFitBoundRects",value:function(e,t,n){var r=[Math.min(e[0],t[0]),Math.min(e[1],t[1]),0],i=[Math.max(e[0],t[0]),Math.max(e[1],t[1]),0];this.parentScene.zoomToFit(r,i,n)}},{key:"render",value:function(){this.canvasControl.invalidate()}},{key:"clearMeter",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.clearCursor(!1);try{this.nodeMeter&&(this.scene.removeItem(this.nodeMeter),this.nodeMeter=null,e&&this.render())}catch(e){ot.LogError("Try clear meter.\nDetail: ".concat(e))}}}])&&rt(t.prototype,n),i&&rt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ct=window.__CORE__.createLogger("MeterController"),lt=[255,255,190,190],ft=[255,255,255,110],dt=function(){function e(t){var n,r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ut(this,"highlightNodeItem",null),ut(this,"highlightAdd",null),ut(this,"highlightRemove",null),ut(this,"highlightId",null),ut(this,"selectionIds",new Map),ut(this,"selectionNodeItems",[]),ut(this,"scene",void 0),ut(this,"parentScene",void 0),ut(this,"cx",void 0),ut(this,"layerIndex",void 0),ut(this,"selectionMaterial",void 0),ut(this,"highlightMaterial",void 0),this.scene=t,this.parentScene=null!==(n=t.parentScene)&&void 0!==n?n:t,this.initSelectionOptions(),this.scene.beforeRender.on((function(e){return r.handleHighlight(e)}))}var t,n,i;return t=e,(n=[{key:"initSelectionOptions",value:function(){this.layerIndex=this.scene.layerMap.GetLayersCount()-1,this.selectionMaterial=this.scene.addMaterial(new r.Material(lt)),this.highlightMaterial=this.scene.addMaterial(new r.Material(ft))}},{key:"handleHighlight",value:function(e){try{if(this.highlightRemove&&(e.removeItem(this.highlightRemove),this.highlightNodeItem=null,this.highlightRemove=null),this.highlightAdd&&!this.selectionIds.has(this.highlightAdd.pcbId)){var t=this.createHighlightNode(this.highlightAdd.pcbId);t&&(this.highlightNodeItem=t,this.highlightId=this.highlightAdd.pcbId),this.highlightAdd=null}}catch(e){ct.LogError("Try handle highlight. \nDetail: ".concat(e))}}},{key:"addSelection",value:function(e){if(!e)return ct.LogWarn("Try add empty selected object"),null;try{var t=this.parentScene.getNodeItemById(e.pcbId);if(!t)return null;var n=this.parentScene.cloneNodeItemToLayer(t,this.layerIndex,this.selectionMaterial,0,this.scene);return this.selectionNodeItems.push(n),this.selectionIds.set(e.pcbId,e),this.selectionNodeItems.push(n),n}catch(t){var r=JSON.stringify(e);return ct.LogError("Try add selected object: ".concat(r,". \nDetail: ").concat(t)),null}}},{key:"clear",value:function(){var e=this;try{this.clearHighlight(),this.selectionNodeItems.forEach((function(t){t&&e.scene.removeItem(t)})),this.selectionIds.clear(),this.selectionNodeItems.length=0}catch(e){ct.LogError("Try clear selected objects.")}}},{key:"createHighlightNode",value:function(e){try{var t=this.parentScene.getNodeItemById(e);return t?this.parentScene.cloneNodeItemToLayer(t,this.layerIndex,this.highlightMaterial,0,this.scene):null}catch(t){return ct.LogError("Try create highlight node for pcbId = ".concat(e,".")),null}}},{key:"addHighlight",value:function(e){this.highlightId!==e.pcbId&&(this.selectionIds.has(e.pcbId)||(this.highlightAdd=e))}},{key:"clearHighlight",value:function(){this.highlightId=null,this.highlightRemove=this.highlightNodeItem}}])&&st(t.prototype,n),i&&st(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ht=n(28);function pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vt(e,t,n){return t&&mt(e.prototype,t),n&&mt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gt="abcdefghijklmopqrstuvwxyz0123456789",bt=function(){function e(t){pt(this,e),yt(this,"length",void 0),yt(this,"history",void 0),this.length="number"==typeof t?t:e.DEFAULT_LENGTH,this.history=[]}return vt(e,[{key:"set",value:function(e){this.history.length==this.length&&this.history.pop();var t=wt.create(e);return this.history.unshift(t),t.id}},{key:"get",value:function(e){var t=this.history.find((function(t){return t.id==e}));return t&&t.value}},{key:"delete",value:function(e){this.history=this.history.filter((function(t){return t.id!==e}))}},{key:"forEach",value:function(e){this.history.forEach(e)}},{key:"toTop",value:function(e){if(this.get.call(this,e)){var t=this.history.findIndex((function(t){return t.id===e}));t>0&&this.history.unshift(this.history.splice(t,1)[0])}}},{key:"values",value:function(){return this.history.map((function(e){return e.value}))}},{key:"getId",value:function(e){return e<this.history.length?this.history[e].id:null}}]),e}();yt(bt,"DEFAULT_LENGTH",1/0);var wt=function(){function e(t,n){pt(this,e),this.id=t,this.value=n}return vt(e,null,[{key:"create",value:function(t){return new e(function(e){for(var t,n,r="",i=0;i<e;i++){var o=(n=gt.length,(t=0)+Math.floor(Math.random()*(n-t)));r+=gt.substring(o,o+1)}return r}(10),t)}}]),e}();function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ot,Ct={},St=function(e){return(e.composedPath&&e.composedPath()||[]).findIndex((function(e){return e.id&&"labelXY"===e.id}))>-1},xt=function(e){return e.checkSnappingPoint([e.clientX,e.clientY])},kt=function(e){return(null==e?void 0:e.getMeasurementMode())===de.c.ObjectToObject};Ct.IDLE=[{to:"CAPTURED",where:function(e){return["mousedown"===e.type]}},{to:"CAPTURED",where:function(e){return["touchstart"===e.type&&1==e.touches.length]}},{to:"2D/BOARD_ZOOMS",where:function(e){return["wheel"===e.type]}},{to:"2D/MOUSE_MOVES",where:function(e){return["mousemove"===e.type&&!xt(e)]}},{to:"2D/TOUCH_START",where:function(e){return["touchstart"===e.type&&e.touches.length>1]}}],Ct["2D/MOUSE_MOVES"]=[].concat(function(e){if(Array.isArray(e))return _t(e)}(Ot=Ct.IDLE)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(Ot)||function(e,t){if(e){if("string"==typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(e,t):void 0}}(Ot)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[{to:"2D/MOUSE_LEAVE",where:function(e){return["mouseleave"===e.type]}},{to:"SNAPPING_START",where:function(e){return["mousemove"===e.type&&xt(e)]}}]),Ct["2D/MOUSE_LEAVE"]=Ct.IDLE,Ct.SNAPPING_START=Ct["2D/MOUSE_MOVES"],Ct.CAPTURED=[{to:"WILL_MEASURE",where:function(e){return["click"===e.type,!St(e)]}},{to:"WILL_MEASURE",where:function(e){return["touchmove"===e.type&&1==e.touches.length]}},{to:"2D/TOUCH_START",where:function(e){return["touchstart"===e.type&&e.touches.length>1]}},{to:"TOGGLE",where:function(e){return["click"===e.type,St(e)]}},{to:"2D/BOARD_TRANSLATES",where:function(e){return["mousemove"===e.type]}}],Ct.WILL_MEASURE=[{to:"MEASURING",where:function(e){return["mousemove"===e.type&&!xt(e)&&e.buttons===m.b.None]}},{to:"MEASURING",where:function(e){return["touchmove"===e.type&&1==e.touches.length]}},{to:"2D/TOUCH_START",where:function(e){return["touchstart"===e.type&&e.touches.length>1]}},{to:"CANCELED",where:function(e){return["keydown"===e.type,27===e.keyCode]}},{to:"CANCELED",where:function(e){return["touchend"===e.type]}},{to:"CANCELED",where:function(e){return["Canceled"===e.type]}}],Ct.MEASURING=[{to:"MEASURING",where:function(e){return["mousemove"===e.type&&!xt(e)&&e.buttons===m.b.None]}},{to:"MEASURING",where:function(e){return["touchmove"===e.type&&1==e.touches.length]}},{to:"2D/TOUCH_START",where:function(e){return["touchstart"===e.type&&e.touches.length>1]}},{to:"MEASURING_ZOOMS",where:function(e){return["wheel"===e.type]}},{to:"SNAPPING_END",where:function(e){return["mousemove"===e.type&&xt(e)]}},{to:"DID_MEASURE",where:function(e){return["click"===e.type,e.button===m.a.Left,!kt(e)]}},{to:"DID_MEASURE",where:function(e){return["touchend"===e.type,!kt(e)]}},{to:"CALCULATE_MEASURE",where:function(e){return["click"===e.type,e.button===m.a.Left,kt(e)]}},{to:"CALCULATE_MEASURE",where:function(e){return["touchend"===e.type,kt(e)]}},{to:"CANCELED",where:function(e){return["mouseup"===e.type,e.button===m.a.Right]}},{to:"CANCELED",where:function(e){return["keydown"===e.type,27===e.keyCode]}},{to:"CANCELED",where:function(e){return["Canceled"===e.type]}},{to:"PAN_MEASURE",where:function(e){return["mousemove"===e.type&&(0!=(e.buttons&m.b.Left)||0!=(e.buttons&m.b.Right))]}},{to:"2D/MOUSE_LEAVE",where:function(e){return["mouseleave"===e.type&&kt(e)]}}],Ct.CALCULATE_MEASURE=[{to:"OTO_DID_MEASURE",where:function(e){return["OtoCalculated"===e.type]}},{to:"CANCELED",where:function(e){return["Canceled"===e.type]}}],Ct.PAN_MEASURE=[{to:"PAN_MEASURE",where:function(e){return["mousemove"===e.type&&(0!=(e.buttons&m.b.Left)||0!=(e.buttons&m.b.Right))]}},{to:"DID_PAN_MEASURE",where:function(e){return["mouseup"===e.type,e.button===m.a.Right||e.button===m.a.Left]}},{to:"DID_PAN_MEASURE",where:function(e){return["mouseleave"===e.type]}}],Ct.DID_PAN_MEASURE=[{to:"MEASURING",where:function(e){return["mousemove"===e.type&&!xt(e)&&e.buttons===m.b.None]}},{to:"MEASURING",where:function(e){return["touchmove"===e.type&&1==e.touches.length]}},{to:"MEASURING_ZOOMS",where:function(e){return["wheel"===e.type]}}],Ct.MEASURING_ZOOMS=[{to:"MEASURING_ZOOMS",where:function(e){return["wheel"===e.type]}},{to:"MEASURING",where:function(e){return["mousemove"===e.type&&!xt(e)]}},{to:"MEASURING",where:function(e){return["touchmove"===e.type&&1==e.touches.length]}},{to:"SNAPPING_END",where:function(e){return["mousemove"===e.type&&xt(e)]}},{to:"DID_MEASURE",where:function(e){return["click"===e.type,e.button===m.a.Left]}}],Ct.SNAPPING_END=Ct.MEASURING,Ct.DID_MEASURE=Ct.IDLE,Ct.OTO_DID_MEASURE=Ct.IDLE,Ct["2D/BOARD_TRANSLATES"]=[{to:"2D/BOARD_TRANSLATES",where:function(e){return["mousemove"===e.type]}},{to:"2D/BOARD_DID_TRANSLATE",where:function(e){return["mouseup"===e.type,e.button===m.a.Right||e.button===m.a.Left]}},{to:"2D/BOARD_DID_TRANSLATE",where:function(e){return["mouseleave"===e.type]}}],Ct["2D/BOARD_ZOOMS"]=Ct.IDLE,Ct["2D/BOARD_DID_TRANSLATE"]=Ct.IDLE,Ct.TOGGLE=Ct.IDLE,Ct.CANCELED=Ct.IDLE,Ct["2D/TOUCH_END"]=Ct.IDLE,Ct["2D/TOUCH_START"]=[{to:"2D/TOUCH_START",where:function(e){return["touchstart"===e.type]}},{to:"2D/TOUCH_MOVE",where:function(e){return["touchmove"===e.type&&e.touches.length>1]}},{to:"2D/TOUCH_END",where:function(e){return["touchend"===e.type]}}],Ct["2D/TOUCH_MOVE"]=[{to:"2D/TOUCH_START",where:function(e){return["touchstart"===e.type&&e.touches.length>1]}},{to:"2D/TOUCH_MOVE",where:function(e){return["touchmove"===e.type&&e.touches.length>1]}},{to:"2D/TOUCH_END",where:function(e){return["touchend"===e.type]}}];var Et=n(87);function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function At(e,t){return(At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=It(e);if(t){var i=It(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return jt(this,n)}}function jt(e,t){if(t&&("object"===Tt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Dt(e)}function Dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function It(e){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lt=window.__CORE__,Bt=Lt.createLogger("MeterController"),Nt=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Lt&&(t=Lt.bus).emit.apply(t,[e].concat(r))},Ut=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&At(e,t)}(a,e);var t,n,i,o=Mt(a);function a(e,t,n,i){var s,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Rt(Dt(u=o.call(this,"IDLE",Ct)),"scene",void 0),Rt(Dt(u),"renderer",void 0),Rt(Dt(u),"measurements",void 0),Rt(Dt(u),"screenMeasurement",void 0),Rt(Dt(u),"currentID",void 0),Rt(Dt(u),"isSelected",void 0),Rt(Dt(u),"measurementUnit",de.d.mm),Rt(Dt(u),"measurementMode",de.c.Free),Rt(Dt(u),"clicked",void 0),Rt(Dt(u),"pcbView",void 0),Rt(Dt(u),"cursorStyle",void 0),Rt(Dt(u),"snappingPoint",{point:null,cursor:de.b.Cross}),Rt(Dt(u),"viewId",void 0),Rt(Dt(u),"engineId",void 0),Rt(Dt(u),"otoController",void 0),Rt(Dt(u),"otoRenderer",void 0),Rt(Dt(u),"svgCursorBuilder",void 0),Rt(Dt(u),"onIdle",(function(){u.screenMeasurement.from=[0,0],u.screenMeasurement.to=[0,0]})),Rt(Dt(u),"selectMeasurement",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=u.getMeasureById(e);if(n){u.measurements.toTop(e);var r=u.measurements.values()[0];Object.assign(r,n),u.otoRenderer.clear(),r.mode===de.c.ObjectToObject&&(r.fromObject&&u.otoRenderer.addSelection(r.fromObject),r.toObject&&u.otoRenderer.addSelection(r.toObject));var i=function(){t?u.renderer.drawMeterWithFitZoom(r):u.renderer.drawMeter([r])};if(u.measurementMode===r.mode)u.renderer.setMeterBuilder(u.measurementMode),i();else{var o=u.measurementMode;u.renderer.setMeterBuilder(r.mode),i(),u.renderer.setMeterBuilder(o),u.measurementMode=o}}else Bt.LogError("Measurement with id:".concat(e," is empty."))})),Rt(Dt(u),"onWillMeasure",(function(e){switch(u.measurementMode){case de.c.Free:u.freeWillMeasure(e);break;case de.c.PointToPoint:u.ptpWillMeasure(e);break;case de.c.ObjectToObject:u.otoWillMeasure(e)}})),Rt(Dt(u),"freeWillMeasure",(function(e){try{u.svgCursorBuilder.setCursor(de.b.None),e instanceof MouseEvent?u.screenMeasurement.from=[e.clientX,e.clientY]:(u.screenMeasurement.from=[e.touches[0].clientX,e.touches[0].clientY],u.touchStart(e));var t=u.scene.viewportToWorld(u.screenMeasurement.from);if(u.scene instanceof r.Scene3D){var n=u.scene.getEye(),i=window.vec3.sub([],t,n);window.vec3.normalize(i,i),t=a.getXOYProjection(t,n,i)}var o=[t[0],t[1],0];"number"==typeof t[2]&&(o[2]=t[2]),u.currentID=u.measurements.set({from:o,to:o,withProjection:!1,mode:u.measurementMode}),u.renderer.drawMeter(u.measurements.values()),u.renderer.hideProjections(),Nt("".concat(u.engineId,":willMeasure"),u.currentID,{from:o,unit:u.unit,mode:u.measurementMode}),u.clicked=!1}catch(e){u.state="2D/MOUSE_MOVES",Bt.LogWarn("MeterController could not go to the WillMeasure state.")}})),Rt(Dt(u),"ptpWillMeasure",(function(e){try{u.cursorStyle=u.pcbView.style.cursor,u.svgCursorBuilder.setCursor(de.b.None),u.renderer.clearCursor(),u.otoRenderer.clear(),u.snappingPoint.point?u.screenMeasurement.from=u.snappingPoint.point:e instanceof MouseEvent?u.screenMeasurement.from=[e.clientX,e.clientY]:(u.screenMeasurement.from=[e.touches[0].clientX,e.touches[0].clientY],u.touchStart(e));var t=u.scene.viewportToWorld(u.screenMeasurement.from);if(u.scene instanceof r.Scene3D){var n=u.scene.getEye(),i=window.vec3.sub([],t,n);window.vec3.normalize(i,i),t=a.getXOYProjection(t,n,i)}var o=[t[0],t[1],0];"number"==typeof t[2]&&(o[2]=t[2]),u.currentID=u.measurements.set({from:o,to:o,withProjection:!1,mode:u.measurementMode}),u.renderer.drawMeter(u.measurements.values()),u.renderer.hideProjections(),Nt("".concat(u.engineId,":willMeasure"),u.currentID,{from:o,unit:u.unit,mode:u.measurementMode}),u.clicked=!1}catch(e){u.state="2D/MOUSE_MOVES",Bt.LogWarn("MeterController could not go to the WillMeasure state.")}})),Rt(Dt(u),"otoWillMeasure",(function(e){try{u.otoRenderer.clear(),e instanceof MouseEvent?u.screenMeasurement.from=[e.clientX,e.clientY]:(u.screenMeasurement.from=[e.touches[0].clientX,e.touches[0].clientY],u.touchStart(e));var t=u.scene.viewportToWorld(u.screenMeasurement.from),n=[t[0],t[1],0];"number"==typeof t[2]&&(n[2]=t[2]),u.renderer.hideMeter();var r=u.otoController.getPrimitiveByPos(n);if(r)if(u.currentID=u.measurements.set({from:n,fromObject:r,to:n,withProjection:!1,mode:u.measurementMode}),u.otoRenderer.addSelection(r))return u.renderer.render(),Nt("".concat(u.engineId,":willMeasure"),u.currentID,{from:n,fromObject:r,unit:u.unit,mode:u.measurementMode}),void(u.clicked=!1);u.state="2D/MOUSE_MOVES"}catch(e){u.state="2D/MOUSE_MOVES",Bt.LogWarn("MeterController could not go to the WillMeasure state.")}})),Rt(Dt(u),"onMeasuring",(function(e){var t=e instanceof MouseEvent?[e.clientX,e.clientY]:[e.touches[0].clientX,e.touches[0].clientY];u.isOtoMode?u.otoMeasuring(t):u.measuring(t)})),Rt(Dt(u),"onCalculateMeasurement",(function(){var e=u.measurements.get(u.currentID);if(!e)return Bt.LogWarn("onCalculateMeasurement: Not found measurement."),void u.dispatch(new ht.b("Canceled"));var t=null,n=null;try{var r;if((t=u.otoController.getPrimitiveByPos(e.to))&&t.pcbId!==(null===(r=e.fromObject)||void 0===r?void 0:r.pcbId)){if(u.svgCursorBuilder.setCursor(de.b.Wait),e.toObject=t,u.renderer.hideMeter(),u.otoRenderer.addSelection(t),u.renderer.render(),"Failed"===(n=u.getOtoDistance(e)).state){var i=JSON.stringify(t),o=JSON.stringify(e.fromObject);Bt.LogWarn("Calculate distance is failed.\nObject 1: ".concat(i,".\nObject 2: ").concat(o)),u.dispatch(new ht.b("Canceled"))}}else{u.state="MEASURING";var a=t?"It is not allowed to select the same object: ".concat(JSON.stringify(t)):"ToObject is empty";Bt.LogWarn("MeterController could not go to the DidMeasure state. \n".concat(a))}}catch(r){var s;e.toObject=void 0,u.state="MEASURING";var c=t?JSON.stringify(t):"is empty",l=n?JSON.stringify(n):"is empty",f="An attempt to switch to the DidMeasure state caused an error: ".concat(null!==(s=null==r?void 0:r.message)&&void 0!==s?s:"")+"\nToObject: ".concat(c,"; \nDistance Info: ").concat(l);Bt.LogError(f)}})),Rt(Dt(u),"onDidMeasure",(function(){var e=u.measurements.get(u.currentID);Nt("".concat(u.engineId,":didMeasure"),u.currentID,{to:e.to,x:e.x,y:e.y,xy:null==e?void 0:e.xy,unit:u.unit,mode:u.measurementMode}),u.measurementMode===de.c.Free?u.svgCursorBuilder.setCursor(de.b.Cross):u.svgCursorBuilder.setCursor(de.b.None),u.currentID=void 0})),Rt(Dt(u),"onOtoDidMeasure",(function(){try{var e=u.measurements.get(u.currentID);u.renderer.drawMeter(u.measurements.values()),Nt("".concat(u.engineId,":didMeasure"),u.currentID,{to:e.to,toObject:e.toObject,x:e.x,y:e.y,xy:null==e?void 0:e.xy,unit:u.unit,mode:u.measurementMode})}catch(e){Bt.LogError("onOtoDidMeasure error: ".concat(e.message))}finally{u.setDeafaultCursor(),u.currentID=void 0}})),Rt(Dt(u),"onCanceled",(function(e){u.setDeafaultCursor(),u.currentID&&u.clearMeter(u.currentID),u.otoRenderer.clear(),u.renderer.hideMeter(),u.currentID=void 0,Nt("".concat(u.engineId,":cancelMeasure"),u.currentID,{from:[0,0],unit:u.unit}),u.renderer.render(),null!=e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation())})),Rt(Dt(u),"mouseMoves",(function(e){if(u.isOtoMode){u.otoRenderer.clearHighlight(),u.screenMeasurement.to=e;var t=u.scene.viewportToWorld(u.screenMeasurement.to),n=[t[0],t[1],0],r=u.otoController.getPrimitiveByPos(n);r&&u.otoRenderer.addHighlight(r)}u.measurementMode===de.c.PointToPoint&&u.renderer.drawCursor(e)})),Rt(Dt(u),"on2DMouseMoves",(function(e){u.mouseMoves([e.clientX,e.clientY])})),Rt(Dt(u),"onPanMeasure",(function(e){u.scene.cameraController.MouseDown(r.MouseButton.Right,e.clientX,e.clientY),u.scene.cameraController.MouseMove(e.clientX,e.clientY),u.renderer.render()})),Rt(Dt(u),"onDidPanMeasure",(function(e){u.scene.cameraController.MouseUp(r.MouseButton.Right,e.clientX,e.clientY),u.renderer.render()})),Rt(Dt(u),"on2DMouseLeave",(function(e){"MEASURING"===u.prevstate&&u.onCanceled(e),u.renderer.clearCursor()})),Rt(Dt(u),"onSnappingStart",(function(e){u.snappingPoint.point?u.renderer.drawCursor(u.snappingPoint.point,!0,u.snappingPoint.cursor):u.renderer.drawCursor([e.clientX,e.clientY])})),Rt(Dt(u),"onSnappingEnd",(function(e){u.snappingPoint.point&&(u.measuring(u.snappingPoint.point,!0),u.renderer.drawCursor(u.snappingPoint.point,!0,u.snappingPoint.cursor))})),Rt(Dt(u),"onZoomMeasuring",(function(e){var t=u.scene.cameraController;t.MouseMove(e.clientX,e.clientY),t.MouseWheel(Math.sign(-e.deltaY)),u.isOtoMode||u.renderer.drawMeter(u.measurements.values())})),Rt(Dt(u),"onBoardZoom",(function(e){u.isOtoMode||u.render(),u.measurementMode===de.c.PointToPoint&&u.renderer.drawCursor([e.clientX,e.clientY],!1)})),Rt(Dt(u),"touchStart",(function(e){e.touches&&(u.scene.cameraController.TouchStart(e.touches),u.renderer.render(),e.preventDefault(),e.stopPropagation())})),Rt(Dt(u),"touchMove",(function(e){u.scene.cameraController.TouchMove(e.touches),u.renderer.render(),e.preventDefault(),e.stopPropagation()})),Rt(Dt(u),"touchEnd",(function(e){u.scene.cameraController.TouchEnd(e.touches),u.renderer.render(),e.preventDefault(),e.stopPropagation()})),u.viewId=i,u.engineId=null!==(s=de.e.get(i))&&void 0!==s?s:"PcbEngine",u.scene=e,u.renderer=t,u.otoController=n,u.measurements=new bt,u.screenMeasurement={from:[0,0],to:[0,0]},u.clicked=!1,u.otoRenderer=new dt(e),u.isSelected=!1,u.updateMeasurementUnitFromStorage(),u.pcbView=document.querySelector('[data-view="'.concat(u.viewId,'"]')),u.svgCursorBuilder=new et(u.pcbView),u.prependListener("#Transition",(function(e){})).on("IDLE",u.onIdle).on("WILL_MEASURE",u.onWillMeasure).on("MEASURING",u.onMeasuring).on("DID_MEASURE",u.onDidMeasure).on("CALCULATE_MEASURE",u.onCalculateMeasurement).on("OTO_DID_MEASURE",u.onOtoDidMeasure).on("CANCELED",u.onCanceled).on("TOGGLE",(function(){u.clicked?(u.renderer.hideProjections(),u.clicked=!1):(u.renderer.showProjections(),u.clicked=!0)})).on("2D/BOARD_DID_TRANSLATE",(function(){return u.render()})).on("2D/BOARD_ZOOMS",u.onBoardZoom).on("2D/MOUSE_MOVES",u.on2DMouseMoves).on("2D/MOUSE_LEAVE",u.on2DMouseLeave).on("SNAPPING_START",u.onSnappingStart).on("SNAPPING_END",u.onSnappingEnd).on("MEASURING_ZOOMS",u.onZoomMeasuring).on("PAN_MEASURE",u.onPanMeasure).on("DID_PAN_MEASURE",u.onDidPanMeasure).on("2D/TOUCH_START",u.touchStart).on("2D/TOUCH_MOVE",u.touchMove).on("2D/TOUCH_END",u.touchEnd).on("CAPTURED",u.touchStart),Lt.bus.on("Measurement:clear",(function(e){return u.clearMeter(e)})),Lt.bus.on("Measurement:clearAll",(function(){return u.clearAll()})),Lt.bus.on("Measurement:showProjection",(function(){return u.renderer.hideProjections()})),Lt.bus.on("Measurement:hideProjection",(function(){return u.renderer.showProjections()})),Lt.bus.on("Measurement:activate",(function(){u.renderer.activate(),u.setStateMachineData(),u.setDeafaultCursor();var e=u.measurements.getId(0);e&&u.selectMeasurement(e,!1)})),Lt.bus.on("Measurement:deactivate",(function(){u.renderer.deactivate(),u.otoRenderer.clear(),u.clicked=!1,u.svgCursorBuilder.setCursor(de.b.Default)})),Lt.bus.on("Measurement:select",(function(e){return u.selectMeasurement(e)})),Lt.bus.on("HelpPanel:changeUnit",(function(e){u.updateMeasurementUnitFromStorage(e);var t=u.measurements.values()[0];t&&(Object.assign(t,u.getMeasure(t.from,t.to)),u.renderer.updateMeasurement(t))})),Lt.bus.on("Measurement:changeMode",(function(e){u.dispatch(new ht.b("Canceled")),u.onCanceled(),e&&(u.measurementMode=e.id,u.setStateMachineData(),u.setDeafaultCursor())})),Lt.bus.on("SupportLibrary:getOtoDistanceResult",(function(e){return u.handleOtoDistanceResult(e)})),u.setStateMachineData(),u}return t=a,i=[{key:"getXOYProjection",value:function(e,t,n){var r=-t[2]/n[2];return[t[0]+r*n[0],t[1]+r*n[1],t[2]+r*n[2]]}}],(n=[{key:"setStateMachineData",value:function(){var e=this;this.setDataTransfer({getMeasurementMode:function(){return e.measurementMode},checkSnappingPoint:function(t){return e.checkSnappingPoint(t)}})}},{key:"setDeafaultCursor",value:function(){switch(this.measurementMode){case de.c.Free:this.svgCursorBuilder.setCursor(de.b.Cross);break;case de.c.ObjectToObject:this.svgCursorBuilder.setCursor(de.b.Box);break;default:this.svgCursorBuilder.setCursor(de.b.None)}}},{key:"isOtoMode",get:function(){return this.measurementMode===de.c.ObjectToObject}},{key:"unit",get:function(){var e="GerberView"===this.viewId?100:1;switch(this.measurementUnit){case 0:return{k:2.54/e,name:"mm"};case 1:return{k:100/e,name:"mil"};default:return{k:1,name:""}}}},{key:"updateMeasurementUnitFromStorage",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t||(t=null!==(e=Et.a.get())&&void 0!==e?e:"mm"),this.measurementUnit="mil"===t?de.d.mil:de.d.mm}},{key:"checkSnappingPoint",value:function(e){if(this.measurementMode!==de.c.PointToPoint)return!1;var t={point:this.scene.viewportToWorld(e),result:{},snapped:!1};return Nt("Snapping:checkPoint",t),t.snapped?(this.snappingPoint.point=this.scene.worldToViewport(t.result.point),this.snappingPoint.cursor=t.result.cursor):(this.snappingPoint.point=null,this.snappingPoint.cursor=de.b.Cross),t.snapped}},{key:"measuring",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.renderer.clearCursor(),this.screenMeasurement.to=e;var n=this.scene.viewportToWorld(this.screenMeasurement.to);if(this.scene instanceof r.Scene3D){var i=this.scene.getEye(),o=window.vec3.sub([],n,i);window.vec3.normalize(o,o),n=a.getXOYProjection(n,i,o)}var s=[n[0],n[1],0];if("number"==typeof n[2]&&(s[2]=n[2]),this.currentID){var u=this.measurements.get(this.currentID);u.to=s,Object.assign(u,this.getMeasureById(this.currentID)),this.renderer.drawMeter(this.measurements.values(),t,this.snappingPoint.cursor),Nt("".concat(this.engineId,":measuring"),this.currentID,{to:s,x:null==u?void 0:u.x,y:null==u?void 0:u.y,xy:null==u?void 0:u.xy})}}},{key:"otoMeasuring",value:function(e){var t;if(this.currentID){this.renderer.clearCursor(),this.screenMeasurement.to=e;var n=this.scene.viewportToWorld(this.screenMeasurement.to),r=[n[0],n[1],0],i=this.measurements.get(this.currentID);i.to=r;var o=this.otoController.getPrimitiveByPos(r);o&&o.pcbId!==(null==i||null===(t=i.fromObject)||void 0===t?void 0:t.pcbId)?(Object.assign(i,this.getMeasureById(this.currentID)),this.otoRenderer.clearHighlight(),this.otoRenderer.addHighlight(o),Nt("".concat(this.engineId,":measuring"),this.currentID,{to:r,x:null==i?void 0:i.x,y:null==i?void 0:i.y,xy:null==i?void 0:i.xy})):this.otoRenderer.clearHighlight()}}},{key:"getOtoDistance",value:function(e){var t={id1:e.fromObject.pcbId,id2:e.toObject.pcbId,units:this.measurementUnit};return Lt.bus.emit("SupportLibrary:getOtoDistance",t),t.result}},{key:"handleOtoDistanceResult",value:function(e){try{"Completed"!==e.state&&(Bt.LogError("getOtoDistance failed"),this.dispatch(new ht.b("Canceled")));var t=this.measurements.get(this.currentID);t.from=e.point1,t.to=e.point2,Object.assign(t,this.getMeasure(t.from,t.to)),this.dispatch({type:"OtoCalculated"})}catch(e){Bt.LogError("Handle OtoDistanceResult error: ".concat(e.message)),this.dispatch(new ht.b("Canceled"))}finally{this.pcbView.style.cursor=this.cursorStyle}}},{key:"getMeasureById",value:function(e){var t=this.measurements.get(e);if(!t)return null;var n=t.from,r=t.to;return this.getMeasure(n,r)}},{key:"getMeasure",value:function(e,t){var n,r,i=this.unit,o=i.k,a=i.name,s=null!==(n=e[2])&&void 0!==n?n:0,u=null!==(r=t[2])&&void 0!==r?r:0;return{x:Math.abs(e[0]-t[0])*o,y:Math.abs(e[1]-t[1])*o,xy:o*Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(s-u,2)),unitName:a}}},{key:"clearMeter",value:function(e){this.measurements.delete(e),this.isOtoMode?this.renderer.clearMeter():this.renderer.drawMeter(this.measurements.values()),this.otoRenderer.clear()}},{key:"clearAll",value:function(){var e=this;this.measurements.forEach((function(t){return e.measurements.delete(t.id)})),this.isOtoMode?(this.otoRenderer.clear(),this.renderer.hideMeter(),this.renderer.render()):this.renderer.drawMeter(this.measurements.values())}},{key:"render",value:function(){this.isOtoMode||this.renderer.drawMeter(this.measurements.values())}}])&&Pt(t.prototype,n),i&&Pt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(f.a),Ft=n(439);function $t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.__CORE__;var zt=function(){function e(t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Vt(this,"scene",void 0),Vt(this,"metadataRepository",Ft.a.instance),this.scene=null!==(n=t.parentScene)&&void 0!==n?n:t}var t,n,i;return t=e,(n=[{key:"getPrimitiveByPos",value:function(e){var t=this,n=this.scene.getNodeItemsAtPoint(e,this.scene.renderOptions).map((function(e){return t.metadataRepository.getPrimitiveById(e.GetId())})).filter((function(e){return e&&de.f.has(Object(r.getObjectId)(e.kind))}));return null!=n&&n.length?(1===n.length||n.sort((function(e,n){var i=Object(r.getObjectId)(e.kind),o=Object(r.getObjectId)(n.kind);return t.getSortValue(i)-t.getSortValue(o)})),n[0]):null}},{key:"getSortValue",value:function(e){var t=1e4;switch(e){case r.ObjectId.Via:t=100;break;case r.ObjectId.Pad:t=200;break;case r.ObjectId.Track:t=300;break;case r.ObjectId.Arc:t=400;break;case r.ObjectId.Fill:t=500;break;case r.ObjectId.Region:t=600;break;case r.ObjectId.Poly:t=700;break;default:t=999}return t}}])&&$t(t.prototype,n),i&&$t(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ht=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"create",value:function(){return new e}}],(n=[{key:"cretateMeterController",value:function(e,t,n,r){var i=this.createOverlayScene(t),o=new at(e,i,n),a=new zt(i);return new Ut(i,o,a,r)}},{key:"createOverlayScene",value:function(e){var t=[new r.Layer("Default",0,[-1,1],!1,!1,!1,!1,!1)],n=r.RenderOption.createRenderOptions(t),i=new r.Scene2D(null,t,[],n,void 0,e,"PCB_2D_Measurment_Scene");return e.rendered.on((function(e){return i.render(!1)})),i}}])&&Gt(t.prototype,n),i&&Gt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qt=window.__CORE__;var Xt=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Yt(this,"zoomPrecision",100),Yt(this,"workspace",void 0),Yt(this,"renderer",void 0),Yt(this,"scene2d",void 0),Yt(this,"renderDocumentData",null),Yt(this,"logger",void 0),Yt(this,"onTransformUpdate",void 0),this.renderer=t,this.workspace=n,this.logger=qt.createLogger("PcbSvgOverlay"),this.onSetScenes=this.onSetScenes.bind(this),t.on("setScenes",this.onSetScenes),this.onSceneSizeChanged=this.onSceneSizeChanged.bind(this),this.onRenderModeChanged=this.onRenderModeChanged.bind(this),this.onSceneTransformed=this.onSceneTransformed.bind(this),qt.bus.registerEvent("PcbEngine:renderDocumentData"),qt.bus.on("PcbEngine:renderDocumentData",(function(e){e.renderDocumentData=r.renderDocumentData}))}var t,n,i;return t=e,(n=[{key:"onSetScenes",value:function(e){e.scene2d?(this.scene2d=e.scene2d,this.renderer.on("modeChanged",this.onRenderModeChanged),this.renderer.on("transformScene",this.onSceneTransformed),this.addOverlay(),this.renderDocumentData.svg.style.display="none",this.renderDocumentData.scene2d=e.scene2d,e.mode===r.RenderMode.Render2D&&(this.renderDocumentData.svg.style.display="",this.onSceneSizeChanged(this.scene2d.getSize()),this.scene2d.resized.on(this.onSceneSizeChanged))):this.logger.LogWarn("2D scene has not defined")}},{key:"onRenderModeChanged",value:function(e){switch(e){case r.RenderMode.Render2D:return this.renderDocumentData.svg.style.display="",this.onSceneSizeChanged(this.scene2d.getSize()),void this.scene2d.resized.on(this.onSceneSizeChanged);case r.RenderMode.Render3D:return this.renderDocumentData.svg.style.display="none",void this.scene2d.resized.off(this.onSceneSizeChanged)}}},{key:"onSceneSizeChanged",value:function(e){this.renderDocumentData.svg.setAttribute("width","".concat(e.width)),this.renderDocumentData.svg.setAttribute("height","".concat(e.height))}},{key:"onSceneTransformed",value:function(e){if(e.mode===r.RenderMode.Render2D){var t=this.scene2d.viewportToWorld([0,0]),n=this.scene2d.viewportToWorld([0,this.zoomPrecision]),i=this.scene2d.viewportToWorld([this.zoomPrecision,0]),o=1/Math.abs(t[0]-i[0]),a=1/Math.abs(t[1]-n[1]),s=this.scene2d.worldToViewport([0,0]);this.renderer.flipped?this.renderDocumentData.overlay.setAttribute("transform","matrix(".concat(-o," 0 0 ").concat(a," ").concat(s[0]," ").concat(s[1],")")):this.renderDocumentData.overlay.setAttribute("transform","matrix(".concat(o," 0 0 ").concat(a," ").concat(s[0]," ").concat(s[1],")")),this.onTransformUpdate&&this.onTransformUpdate()}}},{key:"addOverlay",value:function(){this.renderDocumentData={workspace:this.workspace,renderer:this.renderer};var e=document.getElementById("aov365_pcb_graphic_document_viewer_2D_svg_overlay");this.renderDocumentData.svg=e,this.workspace.appendChild(e);var t=document.createElementNS("http://www.w3.org/2000/svg","style");this.renderDocumentData.styles=t,e.appendChild(t);var n=document.createElementNS("http://www.w3.org/2000/svg","g");this.renderDocumentData.overlay=n;var r=new CustomEvent("didTransformChange",{detail:n.transform});n.didTransformChangeEvent=r,this.onTransformUpdate=function(){return n.dispatchEvent(r)},e.appendChild(n)}}])&&Wt(t.prototype,n),i&&Wt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Kt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createElement",value:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}},{key:"setAttribute",value:function(e,t){for(var n in t)e.setAttribute(n,t[n.toString()]);return e}}],(n=null)&&Zt(t.prototype,n),r&&Zt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Jt(e){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return en(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tn(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){fn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function an(e,t){return(an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ln(e);if(t){var i=ln(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return un(this,n)}}function un(e,t){if(t&&("object"===Jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cn(e)}function cn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ln(e){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&an(e,t)}(d,e);var t,n,o,a,s,u=sn(d);function d(e,t,n,o){var a,s,c;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(a=u.call(this)).simulationManager=o,fn(cn(a),"renderModeChanged",new r.TypedEvent),fn(cn(a),"selectionChanged",new r.TypedEvent),fn(cn(a),"highlightChanged",new r.TypedEvent),fn(cn(a),"boardMoved3d",new r.TypedEvent),fn(cn(a),"canvasControl",void 0),fn(cn(a),"scene2d",void 0),fn(cn(a),"scene3d",void 0),fn(cn(a),"measurementScene",void 0),fn(cn(a),"sceneCurrent",void 0),fn(cn(a),"overlayRenderer",void 0),fn(cn(a),"selectionFactory",void 0),fn(cn(a),"renderOptions",void 0),fn(cn(a),"cameraController2d",void 0),fn(cn(a),"cameraController3d",void 0),fn(cn(a),"zoomSensitivity",.1),fn(cn(a),"zoomstep",10),fn(cn(a),"isBoardMoving",!1),fn(cn(a),"rotationEnabled",!0),fn(cn(a),"branches",void 0),fn(cn(a),"fsm",void 0),fn(cn(a),"svg",void 0),fn(cn(a),"viewId",void 0),fn(cn(a),"onInit",(function(){a.branches={"2D":new f.a("2D/IDLE",p.a),"3D":new f.a("3D/IDLE",v),"2D/MEASUREMENT":Ht.create().cretateMeterController(a.svg,a.scene2d,a.canvasControl,a.viewId)},a.fsm=new y.a(a.canvasControl.canvas,"IDLE",h.a,a.branches),a.fsm.prependListener(f.a.TRANSITION_EVENT,(function(){})),a.fsm.on("2D",a.on2DIdle).on("3D",a.on3DIdle),a.branches["2D"].prependListener(f.a.TRANSITION_EVENT,(function(){})).on("2D/IDLE",a.on2DIdle).on("2D/L_BUTTON_IS_PRESSED",a.on2DLeftButtonIsPressed).on("2D/COMPONENT_LAUNCH_SELECTION",(function(e){return setTimeout((function(){return a.on2DComponentLaunchSelection(e)}),0)})).on("2D/MOUSE_MOVES",a.on2DMouseMoves).on("2D/R_BUTTON_IS_PRESSED",a.on2DRightButtonIsPressed).on("2D/BOARD_TRANSLATES",a.on2DBoardTranslates).on("2D/BOARD_DID_TRANSLATE",a.on2DBoardDidTranslate).on("2D/BOARD_ZOOMS",a.on2DBoardZooms).on("2D/TOUCH_START",a.touchStart).on("2D/TOUCH_MOVE",a.touchMove).on("2D/TOUCH_END",a.touchEnd).on(f.a.TRANSITION_EVENT,(function(e){a.canvasControl.invalidate()})),a.branches["3D"].prependListener(f.a.TRANSITION_EVENT,(function(){})).on("3D/IDLE",a.on3DIdle).on("3D/L_BUTTON_IS_PRESSED",a.on3DLeftButtonIsPressed).on("3D/COMPONENT_LAUNCH_SELECTION",(function(e){return setTimeout((function(){return a.on3DComponentLaunchSelection(e)}),0)})).on("3D/BOARD_ROTATES",a.on3DBoardRotates).on("3D/BOARD_DID_ROTATE",a.on3DBoardDidRotate).on("3D/R_BUTTON_IS_PRESSED",a.on3DRightButtonIsPressed).on("3D/BOARD_TRANSLATES",a.on3DBoardsTranslates).on("3D/BOARD_DID_TRANSLATE",a.on3DBoardDidTranslate).on("3D/BOARD_ZOOMS",a.on3DBoardZooms).on("3D/TOUCH_START",a.touchStart).on("3D/TOUCH_MOVE",a.touchMove).on("3D/TOUCH_END",a.touchEnd).on(f.a.TRANSITION_EVENT,(function(e){a.canvasControl.invalidate()})),a.branches["2D/MEASUREMENT"].on("2D/BOARD_TRANSLATES",(function(e){a.on2DRightButtonIsPressed(e),a.on2DBoardTranslates(e)})).on("2D/BOARD_DID_TRANSLATE",a.on2DBoardDidTranslate).on("2D/BOARD_ZOOMS",a.on2DBoardZooms).on("2D/TOUCH_START",a.touchStart).on("2D/TOUCH_MOVE",a.touchMove).on("2D/TOUCH_END",a.touchEnd).on(f.a.TRANSITION_EVENT,(function(e){a.canvasControl.invalidate()})),a.fsm.on(f.a.TRANSITION_EVENT,(function(e){a.canvasControl.invalidate()}))})),fn(cn(a),"on2DIdle",(function(e){var t;g.a.bus.emit("Measurement:disable"),a.sceneCurrent=a.scene2d,a.overlayRenderer.setRenderMode(i.a.Render2D),a.canvasFocus(),"mouseup"===e.type&&a.cameraController2d.MouseUp(e.button,e.clientX,e.clientY),"mousemove"===e.type&&a.cameraController2d.MouseMove(e.clientX,e.clientY),a.renderModeChanged.emit(cn(a)),a.emit("modeChanged",i.a.Render2D),g.a.bus.emit("PcbEngine:changedRenderMode",i.a.Render2D),null===(t=a.simulationManager)||void 0===t||t.changeRenderMode(i.a.Render2D)})),fn(cn(a),"on2DLeftButtonIsPressed",(function(e){a.cameraController2d.MouseDown(r.MouseButton.Right,e.clientX,e.clientY);var t={x:e.clientX,y:e.clientY},n=[e.clientX,e.clientY],i=a.simulationManager;if(null!=i&&i.simulationEnabled&&null!=i&&i.probeEnabled){var o=i.getSimulationValue2d(n);g.a.bus.emit("PcbEngine:simulationMouseData",rn(rn({},o),{},{isClick:!0}))}a.fsm.HEAD.setDataTransfer({clickPos:t}),g.a.bus.emit("PcbEngine:documentClick",rn(rn({},t),{},{type:"click"}))})),fn(cn(a),"on2DComponentLaunchSelection",(function(e){a.cameraController2d.MouseUp(e.button,e.clientX,e.clientY);var t=a.scene2d.viewportToWorld([e.clientX,e.clientY]),n=a.scene2d.getNodeItemsAtPoint(t,a.scene2d.renderOptions);if(n&&n.length&&t){a.branches["2D/MEASUREMENT"].isSelected=!0;var r=n.map((function(e){return new l.a(e.GetId())})),i=new l.b(r,t[0],t[1],e.clientX,e.clientY);a.emitSelection(i)}else{a.branches["2D/MEASUREMENT"].isSelected=!1;var o=new l.b(null);a.emitSelection(o)}})),fn(cn(a),"on2DMouseMoves",(function(e){a.cameraController2d.MouseMove(e.clientX,e.clientY);var t=[e.clientX,e.clientY],n=a.scene2d.viewportToWorld(t),r=a.simulationManager;if(null!=r&&r.simulationEnabled&&null!=r&&r.probeEnabled){var i=r.getSimulationValue2d(t);g.a.bus.emit("PcbEngine:simulationMouseData",i)}else{var o=a.scene2d.getNodeItemsAtPoint(n,a.scene2d.renderOptions),s=o.length>0;if(!0===s){var u=o.map((function(e){return new l.a(e.GetId())})),c=new l.b([u[0]],n[0],n[1],e.clientX,e.clientY);a.emitHighlight(c)}!0===e.hasNodeAtPoint&&!1===s&&a.clearHighlight(),a.fsm.HEAD.setDataTransfer({hasNodeAtPoint:s})}})),fn(cn(a),"on2DRightButtonIsPressed",(function(e){a.cameraController2d.MouseDown(r.MouseButton.Right,e.clientX,e.clientY)})),fn(cn(a),"on2DBoardTranslates",(function(e){a.cameraController2d.MouseMove(e.clientX,e.clientY),g.a.bus.emit("PcbEngine:documentMove",{type:"move",x:e.clientX,y:e.clientY})})),fn(cn(a),"on2DBoardDidTranslate",(function(e){a.cameraController2d.MouseUp(r.MouseButton.Right,e.clientX,e.clientY)})),fn(cn(a),"on2DBoardZooms",(function(e){a.cameraController2d.MouseMove(e.clientX,e.clientY),a.cameraController2d.MouseWheel(Math.sign(-e.deltaY)),g.a.bus.emit("PcbEngine:documentZoom",{type:"zoom",x:e.clientX,y:e.clientY,scale:a.scene2d.getZoom()})})),fn(cn(a),"on3DIdle",(function(e){var t;g.a.bus.emit("Measurement:disable"),a.sceneCurrent=a.scene3d,a.overlayRenderer.setRenderMode(i.a.Render3D),a.canvasFocus(),"mouseup"===e.type&&a.cameraController3d.MouseUp(e.button,e.clientX,e.clientY),a.renderModeChanged.emit(cn(a)),a.emit("modeChanged",i.a.Render3D),g.a.bus.emit("PcbEngine:changedRenderMode",i.a.Render3D),a.fsm.HEAD.setDataTransfer({hasNodeAtRay:!1}),null===(t=a.simulationManager)||void 0===t||t.changeRenderMode(i.a.Render3D)})),fn(cn(a),"on3DLeftButtonIsPressed",(function(e){a.cameraController3d.MouseDown(e.button,e.clientX,e.clientY);var t={x:e.clientX,y:e.clientY};a.fsm.HEAD.setDataTransfer({clickPos:t})})),fn(cn(a),"on3DComponentLaunchSelection",(function(e){a.cameraController3d.MouseUp(e.button,e.clientX,e.clientY);var t=a.scene3d.unproject([e.clientX,e.clientY]);if(t){var n=window.vec3,r=a.scene3d.getEye(),i=n.sub([],t,r);n.normalize(i,i);var o=a.scene3d.getNodeItemsAtRay(r,i);if(o&&o.length){var s=o.map((function(e){return new l.a(e.GetId())})),u=new l.b([s[0]],t[0],t[1],e.clientX,e.clientY);return a.emitSelection(u),a.branches["2D/MEASUREMENT"].isSelected=!0,void a.cameraController3d.MouseUp(e.button,e.clientX,e.clientY)}var c=new l.b(null);a.emitSelection(c),a.branches["2D/MEASUREMENT"].isSelected=!1,a.cameraController3d.MouseUp(e.button,e.clientX,e.clientY)}})),fn(cn(a),"on3DBoardRotates",(function(e){a.rotationEnabled&&a.cameraController3d.MouseMove(e.clientX,e.clientY)})),fn(cn(a),"on3DBoardDidRotate",(function(e){a.cameraController3d.MouseUp(r.MouseButton.Left,e.clientX,e.clientY)})),fn(cn(a),"on3DRightButtonIsPressed",(function(e){a.cameraController3d.MouseDown(e.button,e.clientX,e.clientY)})),fn(cn(a),"on3DBoardsTranslates",(function(e){a.cameraController3d.MouseMove(e.clientX,e.clientY),a.boardMoved3d.emit(a.scene3d.getView()),g.a.bus.emit("PcbEngine:documentMove",{type:"move",x:e.clientX,y:e.clientY})})),fn(cn(a),"on3DBoardDidTranslate",(function(e){a.cameraController3d.MouseUp(r.MouseButton.Right,e.clientX,e.clientY)})),fn(cn(a),"on3DBoardZooms",(function(e){a.cameraController3d.MouseMove(e.clientX,e.clientY),a.cameraController3d.MouseWheel(Math.sign(-e.deltaY)),g.a.bus.emit("PcbEngine:documentZoom",{type:"zoom",x:e.clientX,y:e.clientY,scale:a.scene3d.getZoom()})})),fn(cn(a),"canvasFocus",(function(){a.canvasControl.canvas&&a.canvasControl.canvas.focus()})),fn(cn(a),"initedEvents",!1),fn(cn(a),"touchStart",(function(e){a.cameraController.TouchStart(e.touches),a.canvasControl.invalidate(),a.isBoardMoving=e.touches.length>1,e.preventDefault(),e.stopPropagation()})),fn(cn(a),"touchMove",(function(e){a.cameraController.TouchMove(e.touches),a.canvasControl.invalidate(),a.isBoardMoving=!0,a.onBoardMoved3d(),e.preventDefault(),e.stopPropagation()})),fn(cn(a),"touchEnd",(function(e){a.cameraController.TouchEnd(e.touches),a.canvasControl.invalidate(),0!=e.touches.length||a.isBoardMoving||(a.launchSelection(e.changedTouches[0].clientX,e.changedTouches[0].clientY),a.isBoardMoving=!1),e.preventDefault(),e.stopPropagation()})),!e)throw new ReferenceError("Parameter canvasControl is null or undefined.");return a.canvasControl=e,a.selectionFactory=t,a.viewId=n,a.rotationEnabled=a.has3dRotationEnabled,a.initSvgOverlay(a.canvasControl),g.a.bus.on("Measurement:activate",(function(){a.fsm.dispatch({type:"Measurement:activate"})})),g.a.bus.on("Measurement:deactivate",(function(){a.fsm.dispatch({type:"Measurement:deactivate"})})),a.canvasControl.on("invalidate",(function(){a.emit("transformScene",{mode:a.renderMode})})),s=cn(a),c=a.canvasControl.canvas.parentNode,new Xt(s,c),a}return t=d,(n=[{key:"is2D",get:function(){return this.renderMode==i.a.Render2D}},{key:"is3D",get:function(){return this.renderMode==i.a.Render3D}},{key:"getSceneCurrent",value:function(){return this.sceneCurrent}},{key:"invalidate",value:function(){this.canvasControl.invalidate()}},{key:"initSvgOverlay",value:function(e){var t;this.svg||(this.svg=Kt.createElement("svg"),Kt.setAttribute(this.svg,{id:"aov365_pcb_graphic_document_viewer_2D_svg_overlay",width:"100%",height:"100%",style:"position: absolute"}),this.svg.addEventListener("mouseenter",this.canvasFocus),null===(t=e.canvas.parentNode)||void 0===t||t.appendChild(this.svg))}},{key:"emitSelection",value:function(e){g.a.bus.emit("PcbEngine:selectNodes",e),this.selectionChanged.emit(e)}},{key:"emitHighlight",value:function(e){g.a.bus.emit("PcbEngine:highlightNodes",e),this.highlightChanged.emit(e)}},{key:"renderMode",get:function(){return null==this.sceneCurrent?i.a.Render2D:this.sceneCurrent==this.scene3d?i.a.Render3D:i.a.Render2D},set:function(e){this.fsm.dispatch({type:"rendermodechange",mode:e})}},{key:"needRender",get:function(){return!!this.sceneCurrent&&(this.sceneCurrent==this.scene3d?this.scene3d.needRender:this.scene2d.needRender)}},{key:"flipped",get:function(){return this.scene2d.flipped},set:function(e){this.scene2d.flipped!=e&&(this.scene2d.flipped=e,this.canvasControl.invalidate())}},{key:"initScenes",value:function(e){var t,n,r,o,a=this;this.scene2d=e.scene2d,this.scene3d=e.scene3d,this.measurementScene=e.measurementScene3d,this.scene2d.resized.on((function(e){a.branches["2D/MEASUREMENT"].render()})),null===(t=this.scene2d)||void 0===t||t.zoomToFitChanged.on((function(e){var t;return null===(t=a.canvasControl)||void 0===t?void 0:t.invalidate()})),null===(n=this.scene3d)||void 0===n||n.zoomToFitChanged.on((function(e){var t;return null===(t=a.canvasControl)||void 0===t?void 0:t.invalidate()})),this.onInit();var s=this.selectionFactory.cretateSelectionManager2d(this.scene2d),u=this.selectionFactory.cretateSelectionManager3d(this.scene3d);this.overlayRenderer=new c(this.canvasControl,s,u),this.renderOptions=e.renderOptions,this.renderMode=i.a.Render2D,this.cameraController3d=this.scene3d.cameraController,this.cameraController3d.SetOrbitingType(0),this.cameraController2d=this.scene2d.cameraController,null===(r=this.simulationManager)||void 0===r||r.createSimulationScene2d(this.scene2d,s),null===(o=this.simulationManager)||void 0===o||o.createSimulationScene3d(this.scene3d,u),this.initEvents(),this.allZoomToFit(),this.emit("setScenes",{scene2d:this.scene2d,scene3d:this.scene3d,mode:this.renderMode}),g.a.bus.emit("PcbEngine:initScenes",this.scene2d,this.scene3d,this.renderMode)}},{key:"allZoomToFit",value:function(){var e=this,t=setInterval((function(){0!=e.canvasControl.canvas.width&&0!=e.canvasControl.canvas.height&&(e.updateClientRectangle(),e.overlayRenderer.isSelected||(e.scene2d.zoomToFit(),e.scene3d.zoomToFit()),clearInterval(t),e.canvasControl.invalidate())}),50)}},{key:"setBackground",value:function(e){this.scene2d.background=e,this.scene3d.background=e,this.canvasControl.setBackground([255*e[0],255*e[1],255*e[2],255*e[3]])}},{key:"render",value:function(){this.sceneCurrent&&this.sceneCurrent.render()}},{key:"setSelected",value:function(e){this.overlayRenderer.isSelected=e}},{key:"addSelection",value:(a=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.overlayRenderer.addSelection(t,n);case 3:return e.abrupt("return",e.sent);case 4:return e.prev=4,this.canvasControl.invalidate(),e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[0,,4,7]])})),s=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=a.apply(e,t);function o(e){tn(i,n,r,o,s,"next",e)}function s(e){tn(i,n,r,o,s,"throw",e)}o(void 0)}))},function(e,t){return s.apply(this,arguments)})},{key:"clearSelection",value:function(e){this.overlayRenderer.clearSelection(!0,!0,e)}},{key:"isHighlight",value:function(e){return this.overlayRenderer.isHighlight(e)}},{key:"addHighlight",value:function(e){this.overlayRenderer.addHighlight(e)}},{key:"clearHighlight",value:function(){this.overlayRenderer.clearHighlight()}},{key:"setRenderOptions",value:function(e){this.scene2d.renderOptions=e,this.canvasControl.invalidate()}},{key:"getZoom",value:function(){return this.sceneCurrent.getZoom()}},{key:"zoomStep",get:function(){return this.zoomstep},set:function(e){this.zoomstep=e,this.zoomSensitivity=1/this.zoomStep}},{key:"zoomToFit",value:function(){var e=this;this.sceneCurrent.zoomToFit(),this.canvasControl.invalidate(),setTimeout((function(){e.branches["2D/MEASUREMENT"].render()}),50)}},{key:"zoomToFitTargets",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t?(t.fit2d&&this.zoomToFitNodes(e,this.scene2d),t.fit3d&&this.zoomToFitNodes(e,this.scene3d)):this.zoomToFitNodes(e,this.sceneCurrent)}},{key:"zoomToFitNodes",value:function(e,t){if(e&&0!=e.length){var n=[];e.forEach((function(e){var r=t.getBoundingBoxForItem(e);r&&n.push(r)})),n.length>0&&this.zoomToFitBoundRects(n,t)}}},{key:"zoomToFitBoundRects",value:function(e,t){var n=this.getMinMaxBoundRects(e),r=[n[0],n[1],n[2]],o=[n[3],n[4],n[5]];this.zoomToFitParams?"fit-animate"===this.zoomToFitParams.mode&&this.renderMode===i.a.Render3D?this.startAnimationFit(500,r,o,this.zoomToFitParams.factor):t.zoomToFit(r,o,this.zoomToFitParams.factor):t.zoomToFit(r,o,.7)}},{key:"getMinMaxBoundRects",value:function(e){var t=Qt(e[0],6),n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5];if(e.forEach((function(e){n>e[0]&&(n=e[0]),r>e[1]&&(r=e[1]),i>e[2]&&(i=e[2]),o<e[3]&&(o=e[3]),a<e[4]&&(a=e[4]),s<e[5]&&(s=e[5])})),n>o){var u=[o,n];n=u[0],o=u[1]}if(r>a){var c=[a,r];r=c[0],a=c[1]}if(i>s){var l=[s,i];i=l[0],s=l[1]}return[n,r,i,o,a,s]}},{key:"updateZoom",value:function(e){this.sceneCurrent&&(this.cameraController.MouseWheel(Math.sign(e)),this.canvasControl.invalidate())}},{key:"has3dRotationEnabled",get:function(){var e={value:null};return!g.a.tryGetAttributeValue("data-disable-3d-rotation",e)||!0===e.value}},{key:"zoomToFitParams",get:function(){var e={value:""};if(g.a.tryGetAttributeValue("data-zoom-to-fit-params",e)){if(!e.value)return;try{return JSON.parse(e.value)}catch(e){return}}}},{key:"cameraController",get:function(){return this.isRender2D?this.cameraController2d:this.cameraController3d}},{key:"isRender2D",get:function(){return this.renderMode==i.a.Render2D}},{key:"initEvents",value:function(){var e=this;this.initedEvents||(this.canvasControl.resized.on((function(){return e.onResize()})),this.initedEvents=!0)}},{key:"onResize",value:function(){this.updateClientRectangle(),this.canvasControl.invalidate()}},{key:"launchSelection",value:function(e,t){this.isBoardMoving||(this.isRender2D?this.launchSelection2d(e,t):this.launchSelection3d(e,t))}},{key:"launchSelection2d",value:function(e,t){var n=this.scene2d.viewportToWorld([e,t]),r=this.scene2d.getNodeItemsAtPoint(n,this.scene2d.renderOptions).map((function(e){return new l.a(e.GetId())})),i=new l.b(r,n[0],n[1],e,t);this.emitSelection(i)}},{key:"launchSelection3d",value:function(e,t){var n=window.vec3,r=this.scene3d.unproject([e,t]),i=this.scene3d.getEye(),o=n.sub([],r,i);n.normalize(o,o);var a=this.scene3d.getNodeItemsAtRay(i,o).map((function(e){return new l.a(e.GetId())})),s=new l.b(a,r[0],r[1],e,t);this.emitSelection(s)}},{key:"onBoardMoved3d",value:function(){this.isRender2D||this.boardMoved3d.emit(this.scene3d.getView())}},{key:"updateClientRectangle",value:function(){var e=this.canvasControl.canvas.width,t=this.canvasControl.canvas.height;this.scene2d.resize(e,t),this.scene3d.resize(e,t)}},{key:"startAnimationOrigin",value:function(e){var t=this;this.sceneCurrent.cameraController.StartAnimationOrigin(e);var n=setInterval((function(){t.canvasControl.invalidate(),setTimeout((function(){return clearInterval(n)}),e)}),1)}},{key:"startAnimationFocus",value:function(e){var t=this;this.sceneCurrent.cameraController.StartAnimationFocus(e);var n=setInterval((function(){t.canvasControl.invalidate(),setTimeout((function(){return clearInterval(n)}),e)}),1)}},{key:"startAnimationFit",value:function(e,t,n,r){var i=this;this.sceneCurrent.cameraController.StartAnimationFit(e,t,n,r);var o=setInterval((function(){i.canvasControl.invalidate(),setTimeout((function(){return clearInterval(o)}),e)}),1)}}])&&on(t.prototype,n),o&&on(t,o),Object.defineProperty(t,"prototype",{writable:!1}),d}(d.a);function hn(e){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bn(e);if(t){var i=bn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return yn(this,n)}}function yn(e,t){if(t&&("object"===hn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gn(e)}function gn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bn(e){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _n=[200/255,200/255,200/255,1],On=[40/255,40/255,40/255,1],Cn=[200/255,200/255,200/255,1],Sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mn(e,t)}(a,e);var t,n,i,o=vn(a);function a(e,t,n,i,s,u){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),wn(gn(c=o.call(this,e,t.module,i)),"renderer",void 0),wn(gn(c),"pcbLoader",void 0),wn(gn(c),"pcbBackgroundColor",_n),wn(gn(c),"viewId",void 0),wn(gn(c),"documentFileSize",void 0),c.renderer=new dn(gn(c),n,s,u),c.viewId=s,c.pcbLoader=new r.PcbLoader(t),c.pcbLoader.afterLoad.on((function(e){return c.onAfterLoad(e)})),null==u||u.useCanvasControl(gn(c)),c}return t=a,(n=[{key:"getContainerId",value:function(){return this.containerId}},{key:"loadData",value:function(e,t){this.documentFileSize=e.byteLength,this.isDarkTheme()?this.pcbBackgroundColor=Cn:this.pcbBackgroundColor="Eagle"==t||"KiCad"==t?On:_n,"string"==typeof e?this.pcbLoader.load(e,r.LoadType.Json):this.pcbLoader.load(e,r.LoadType.BinaryZip)}},{key:"getRenderer",value:function(){return this.renderer}},{key:"onPaint",value:function(){this.renderer&&this.renderer.render()}},{key:"isDarkTheme",value:function(){var e={value:null};return!(!g.a.tryGetAttributeValue("data-theme",e)||"dark"!==e.value)}},{key:"initControl",value:function(e){var t,n;if(e instanceof HTMLDivElement?(n=e,t="aov365_pcb"):(n=document.getElementById(e),t=e),null==n)throw new Error("Parent with id ".concat(t," did not found at DOM."));var r=document.createElement("div");this.containerId=t+"_document_viewer",r.id=this.containerId,r.style.width="100%",r.style.height="100%",r.style.position="relative",r.style.backgroundColor=this.backgroundColor;var i=document.createElement("div");i.id=t+"_graphic_document_viewer",i.style.width="100%",i.style.height="100%",r.style.backgroundColor=this.backgroundColor;var o=this.canvas;o.id=t+"_graphic_document_viewer_canvas",o.tabIndex=0,o.style.backgroundColor=this.backgroundColor,o.oncontextmenu=function(){return!1},o.style.opacity="1",i.appendChild(this.canvas),r.appendChild(i),n.appendChild(r)}},{key:"initEvents",value:function(){var e=this;window.addEventListener("resize",(function(){return e.onResize()}))}},{key:"onResize",value:function(){0===document.body.clientWidth&&0===document.body.clientHeight||(this.canvas.hidden=!0,this.canvas.width=document.body.clientWidth,this.canvas.height=document.body.clientHeight,this.canvas.hidden=!1,this.resized.emit(this))}},{key:"needRender",get:function(){return this.renderer.needRender}},{key:"onAfterLoad",value:function(e){this.renderer.initScenes(e),this.renderer.setBackground(this.pcbBackgroundColor),g.a.bus.emit("".concat(de.e.get(this.viewId),":afterImportPCB"),this.renderer),g.a.bus.emit("PcbEngine:rendererCreated",this.renderer,e),this.canvas.focus(),this.invalidate()}}])&&pn(t.prototype,n),i&&pn(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.CanvasControl)},function(e,t,n){var r=n(56),i=n(53).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){t.f=n(64)},function(e,t,n){var r=n(310)("keys"),i=n(210);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(53).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(56),i=n(55),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(145)(Function.call,n(148).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r=n(56),i=n(374).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){"use strict";var r=n(147),i=n(161);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var r=n(147),i=n(161);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(211),i=n(11),o=n(109),a=n(128),s=n(236),u=n(454),c=n(234),l=n(216),f=n(64)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,p,m,v,y){u(n,t,p);var g,b,w,_=function(e){if(!d&&e in x)return x[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},O=t+" Iterator",C="values"==m,S=!1,x=e.prototype,k=x[f]||x["@@iterator"]||m&&x[m],E=k||_(m),T=m?C?_("entries"):E:void 0,P="Array"==t&&x.entries||k;if(P&&(w=l(P.call(new e)))!==Object.prototype&&w.next&&(c(w,O,!0),r||"function"==typeof w[f]||a(w,f,h)),C&&k&&"values"!==k.name&&(S=!0,E=function(){return k.call(this)}),r&&!y||!d&&!S&&x[f]||a(x,f,E),s[t]=E,s[O]=h,m)if(g={values:C?E:_("values"),keys:v?E:_("keys"),entries:T},y)for(b in g)b in x||o(x,b,g[b]);else i(i.P+i.F*(d||S),t,g);return g}},function(e,t,n){var r=n(383),i=n(161);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(56),i=n(160),o=n(64)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(64)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(236),i=n(64)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(82),i=n(209);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(248),i=n(64)("iterator"),o=n(236);e.exports=n(77).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){"use strict";var r=n(104),i=n(213),o=n(67);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(217),i=n(459),o=n(236),a=n(129);e.exports=n(381)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var r,i,o=n(315),a=RegExp.prototype.exec,s=String.prototype.replace,u=a,c=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=void 0!==/()??/.exec("")[1];(c||l)&&(u=function(e){var t,n,r,i,u=this;return l&&(n=new RegExp("^"+u.source+"$(?!\\s)",o.call(u))),c&&(t=u.lastIndex),r=a.call(u,e),c&&r&&(u.lastIndex=u.global?r.index+r[0].length:t),l&&r&&r.length>1&&s.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),e.exports=u},function(e,t,n){"use strict";var r=n(380)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r,i,o,a=n(145),s=n(448),u=n(373),c=n(369),l=n(53),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,m=l.Dispatch,v=0,y={},g=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},b=function(e){g.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},h=function(e){delete y[e]},"process"==n(160)(f)?r=function(e){f.nextTick(a(g,e,1))}:m&&m.now?r=function(e){m.now(a(g,e,1))}:p?(o=(i=new p).port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),e.exports={set:d,clear:h}},function(e,t,n){"use strict";var r=n(53),i=n(81),o=n(211),a=n(321),s=n(128),u=n(239),c=n(54),l=n(238),f=n(147),d=n(67),h=n(467),p=n(215).f,m=n(82).f,v=n(388),y=n(234),g=r.ArrayBuffer,b=r.DataView,w=r.Math,_=r.RangeError,O=r.Infinity,C=g,S=w.abs,x=w.pow,k=w.floor,E=w.log,T=w.LN2,P=i?"_b":"buffer",A=i?"_l":"byteLength",M=i?"_o":"byteOffset";function j(e,t,n){var r,i,o,a=new Array(n),s=8*n-t-1,u=(1<<s)-1,c=u>>1,l=23===t?x(2,-24)-x(2,-77):0,f=0,d=e<0||0===e&&1/e<0?1:0;for((e=S(e))!=e||e===O?(i=e!=e?1:0,r=u):(r=k(E(e)/T),e*(o=x(2,-r))<1&&(r--,o*=2),(e+=r+c>=1?l/o:l*x(2,1-c))*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(e*o-1)*x(2,t),r+=c):(i=e*x(2,c-1)*x(2,t),r=0));t>=8;a[f++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;a[f++]=255&r,r/=256,s-=8);return a[--f]|=128*d,a}function D(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,c=e[u--],l=127&c;for(c>>=7;s>0;l=256*l+e[u],u--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=t;s>0;r=256*r+e[u],u--,s-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:c?-O:O;r+=x(2,t),l-=a}return(c?-1:1)*r*x(2,l-t)}function I(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function R(e){return[255&e]}function L(e){return[255&e,e>>8&255]}function B(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function N(e){return j(e,52,8)}function U(e){return j(e,23,4)}function F(e,t,n){m(e.prototype,t,{get:function(){return this[n]}})}function $(e,t,n,r){var i=h(+n);if(i+t>e[A])throw _("Wrong index!");var o=e[P]._b,a=i+e[M],s=o.slice(a,a+t);return r?s:s.reverse()}function V(e,t,n,r,i,o){var a=h(+n);if(a+t>e[A])throw _("Wrong index!");for(var s=e[P]._b,u=a+e[M],c=r(+i),l=0;l<t;l++)s[u+l]=c[o?l:t-l-1]}if(a.ABV){if(!c((function(){g(1)}))||!c((function(){new g(-1)}))||c((function(){return new g,new g(1.5),new g(NaN),"ArrayBuffer"!=g.name}))){for(var z,G=(g=function(e){return l(this,g),new C(h(e))}).prototype=C.prototype,H=p(C),W=0;H.length>W;)(z=H[W++])in g||s(g,z,C[z]);o||(G.constructor=g)}var Y=new b(new g(2)),q=b.prototype.setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||u(b.prototype,{setInt8:function(e,t){q.call(this,e,t<<24>>24)},setUint8:function(e,t){q.call(this,e,t<<24>>24)}},!0)}else g=function(e){l(this,g,"ArrayBuffer");var t=h(e);this._b=v.call(new Array(t),0),this[A]=t},b=function(e,t,n){l(this,b,"DataView"),l(e,g,"DataView");var r=e[A],i=f(t);if(i<0||i>r)throw _("Wrong offset!");if(i+(n=void 0===n?r-i:d(n))>r)throw _("Wrong length!");this[P]=e,this[M]=i,this[A]=n},i&&(F(g,"byteLength","_l"),F(b,"buffer","_b"),F(b,"byteLength","_l"),F(b,"byteOffset","_o")),u(b.prototype,{getInt8:function(e){return $(this,1,e)[0]<<24>>24},getUint8:function(e){return $(this,1,e)[0]},getInt16:function(e){var t=$(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=$(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return I($(this,4,e,arguments[1]))},getUint32:function(e){return I($(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return D($(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return D($(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){V(this,1,e,R,t)},setUint8:function(e,t){V(this,1,e,R,t)},setInt16:function(e,t){V(this,2,e,L,t,arguments[2])},setUint16:function(e,t){V(this,2,e,L,t,arguments[2])},setInt32:function(e,t){V(this,4,e,B,t,arguments[2])},setUint32:function(e,t){V(this,4,e,B,t,arguments[2])},setFloat32:function(e,t){V(this,4,e,U,t,arguments[2])},setFloat64:function(e,t){V(this,8,e,N,t,arguments[2])}});y(g,"ArrayBuffer"),y(b,"DataView"),s(b.prototype,a.VIEW,!0),t.ArrayBuffer=g,t.DataView=b},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(472)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";n(250)},function(e,t,n){"use strict";n.r(t);var r=n(205);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=window.__CORE__;e=(0,window.__APP__.createModule)({type:"Plugin",description:"SearchButton",create:function(e){return new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(p,e);var t,n,i,c,f,h=u(p);function p(){var e,t,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),e=h.call(this,{name:"SearchButton",displayIcon:Object(r.a)("viewer-search-16","search-thin-16"),comment:"Search",description:"Search",order:2,hint:"Search",view:{type:"",config:{type:"aside-right",fullHeight:!1}}}),t=l(e),i=!0,(n="hidden")in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,e.logger=d.createLogger("Search Button Plugin"),e}return t=p,(n=[{key:"events",get:function(){return[]}},{key:"setup",value:(c=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})),f=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=c.apply(e,t);function a(e){o(i,n,r,a,s,"next",e)}function s(e){o(i,n,r,a,s,"throw",e)}a(void 0)}))},function(){return f.apply(this,arguments)})},{key:"initView",value:function(){this.hasView=!1}},{key:"activate",value:function(){this.logger.LogDebug("Search button ACTIVATED")}},{key:"deactivate",value:function(){this.logger.LogDebug("Search button DEACTIVATED")}}])&&a(t.prototype,n),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),p}(e))}});d.addModule(e)},function(e,t,n){"use strict";n(251)},function(e,t,n){"use strict";n(252)},function(e,t,n){"use strict";n(253)},function(e,t,n){"use strict";n(254)},function(e,t,n){"use strict";n(255)},function(e,t,n){"use strict";n(256)},function(e,t,n){"use strict";n(257)},function(e,t,n){"use strict";n(258)},function(e,t,n){"use strict";n(259)},function(e,t,n){"use strict";n(260)},function(e,t,n){"use strict";n(261)},function(e,t,n){"use strict";n(262)},function(e,t,n){"use strict";n(263)},function(e,t,n){"use strict";n(264)},function(e,t,n){"use strict";n(265)},function(e,t,n){"use strict";n(266)},function(e,t,n){"use strict";n(267)},function(e,t,n){"use strict";n(268)},function(e,t,n){"use strict";n(269)},function(e,t,n){"use strict";n(270)},function(e,t,n){"use strict";n(271)},function(e,t,n){"use strict";n(272)},function(e,t,n){"use strict";n(273)},function(e,t,n){"use strict";n(274)},function(e,t,n){"use strict";n(275)},function(e,t,n){"use strict";n(276)},function(e,t,n){"use strict";n(277)},function(e,t,n){"use strict";n(278)},function(e,t,n){"use strict";n(279)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return c}));var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(u,e);var t,n,r,s=a(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),s.call(this)}return t=u,(n=[{key:"unitFactor",get:function(){return.1}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(n(304).a)},function(e,t,n){"use strict";var r,i;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),function(e){e[e.ThruVia=0]="ThruVia",e[e.BlindVia=1]="BlindVia",e[e.BuriedVia=2]="BuriedVia",e[e.StackedMicroVia=3]="StackedMicroVia",e[e.SkipMicroVia=4]="SkipMicroVia"}(r||(r={})),function(e){e[e.Standard=0]="Standard",e[e.Printed=1]="Printed"}(i||(i={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(15),i=n(79);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={where:function(e){return["Ready"===e.type]},to:"READY"},p={where:function(e){return["Load"===e.type]},to:"LOAD"},m={IDLE:[h,{where:function(e){return["Hidden"===e.type]},to:"HIDDEN"}],READY:[p],HIDDEN:[h],LOAD:[{where:function(e){return["Run"===e.type]},to:"RUN"},{where:function(e){return["Error"===e.type]},to:"CRASHED",error:!0}],CRASHED:[p]},v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(c,e);var t,n,r,o=u(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),d(l(e=o.call(this,"IDLE",m)),"logger",void 0),d(l(e),"domain",""),d(l(e),"designId",""),d(l(e),"metadata",null),d(l(e),"apiHeaders",void 0),e}return t=c,(n=[{key:"setup",value:function(e){var t=this;this.logger=e.createLogger("BOMEngine"),this.domain=e.domain,this.apiHeaders=e.apiHeaders;var n=e.response;if(n&&n.storage&&n.storage.files){this.metadata=n.metadata;var r=n.storage.files.findIndex((function(e){return"Bom"===e.fileType}));this.designId=n.designId,r>=0?this.dispatch({type:"Ready"}):(e.bus.on("storageResolveComplete",(function(e){e.files.findIndex((function(e){return"Bom"===e.fileType}))>=0&&t.dispatch({type:"Ready"})})),this.dispatch({type:"Hidden"}))}else this.dispatch({type:"Hidden"})}},{key:"load",value:function(){var e=this;return new Promise((function(t,n){var r=function t(r){e.off("CRASHED",t),n(r)};e.dispatch({type:"Load"})?e.loadBomData(!1).then((function(e){e&&t()})).catch((function(t){e.logger.LogError("Get BOM data error. ".concat(t.message,".")),e.dispatch({type:"Error",error:t}),n(t)})):"LOAD"===e.state?(e.on("CRASHED",r),e.on("RUN",(function(n){e.off("RUN",r),t()}))):t()}))}},{key:"getSelectData",value:function(e){if(!this.metadata)return null;if(!this.metadata.components)return null;var t=this.metadata.components.find((function(t){return t.designator===e}));return t?Object(i.a)("component",t,"BOMEngine"):null}},{key:"toViewItems",value:function(e){var t="",n=new Map;return e&&e.Variants&&e.Variants.length>0&&(t=e.Variants[0].Id,e.Variants.forEach((function(e){var t=[];n.set(e.Id,t),e.Items.forEach((function(e,n){var r,i;t.push({id:n,name:null!==(r=null!==(i=e.Name)&&void 0!==i?i:e.Comment)&&void 0!==r?r:"Unknown",url:e.OctopartUrl,price:e.Price,description:e.Description,designator:e.Designator.split(","),quantity:e.Quantity})}))}))),{variants:n,defaultId:t}}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.a)},function(e,t,n){"use strict";var r=n(1);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a={inserted:function(e,t){var n=t.value;if("object"===i(n)&&null!==n&&!Array.isArray(n)){var o=null,a=n.id||"app-trimmed-text-hint",s=function(){var t=r.b.get(a);if(t){var i=function(){return t.setText(n.hint)};t.on&&t.on("open",i),t.open&&t.open(e),t.off&&t.off("open",i)}};e.addEventListener("mouseenter",(function(t){e.offsetWidth>=e.scrollWidth||(n.noDelay?s():o=setTimeout(s,n.delay||1e3))}),!1),e.addEventListener("mouseleave",(function(t){o&&clearTimeout(o);var n=r.b.get(a);if(n){var i=function(){return n.setText(null)};n.on&&n.on("close",i),n.close&&n.close(e),n.off&&n.off("close",i)}}),!1)}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(42),i={};i["2D/IDLE"]=[{to:"2D/MOUSE_MOVES",where:function(e){return["mousemove"===e.type]}},{to:"2D/BOARD_ZOOMS",where:function(e){return["wheel"===e.type]}},{to:"2D/R_BUTTON_IS_PRESSED",where:function(e){return["mousedown"===e.type,e.button===r.a.Right]}},{to:"2D/L_BUTTON_IS_PRESSED",where:function(e){return["mousedown"===e.type,e.button===r.a.Left]}},{to:"2D/TOUCH_START",where:function(e){return["touchstart"===e.type]}}],i["2D/MOUSE_MOVES"]=i["2D/IDLE"],i["2D/R_BUTTON_IS_PRESSED"]=[{to:"2D/BOARD_TRANSLATES",where:function(e){return["mousemove"===e.type,e.button===r.a.Left]}},{to:"2D/IDLE",where:function(e){return["mousemove"!==e.type,e.button===r.a.Right]}}],i["2D/L_BUTTON_IS_PRESSED"]=[{to:"2D/BOARD_TRANSLATES",where:function(e){return["mousemove"===e.type,e.button===r.a.Left,e.clickPos.x!==e.clientX||e.clickPos.y!==e.clientY]}},{to:"2D/COMPONENT_LAUNCH_SELECTION",where:function(e){return["mouseup"===e.type,e.button===r.a.Left,e.clickPos.x===e.clientX,e.clickPos.y===e.clientY]}}],i["2D/BOARD_TRANSLATES"]=[{to:"2D/BOARD_TRANSLATES",where:function(e){return["mousemove"===e.type]}},{to:"2D/BOARD_DID_TRANSLATE",where:function(e){return["mouseup"===e.type,e.button===r.a.Right||e.button===r.a.Left]}},{to:"2D/BOARD_DID_TRANSLATE",where:function(e){return["mouseleave"===e.type]}}],i["2D/COMPONENT_LAUNCH_SELECTION"]=i["2D/IDLE"],i["2D/BOARD_ZOOMS"]=i["2D/IDLE"],i["2D/BOARD_DID_TRANSLATE"]=i["2D/IDLE"],i["2D/TOUCH_END"]=i["2D/IDLE"],i["2D/TOUCH_START"]=[{to:"2D/TOUCH_START",where:function(e){return["touchstart"===e.type]}},{to:"2D/TOUCH_MOVE",where:function(e){return["touchmove"===e.type]}},{to:"2D/TOUCH_END",where:function(e){return["touchend"===e.type]}}],i["2D/TOUCH_MOVE"]=[{to:"2D/TOUCH_START",where:function(e){return["touchstart"===e.type]}},{to:"2D/TOUCH_MOVE",where:function(e){return["touchmove"===e.type]}},{to:"2D/TOUCH_END",where:function(e){return["touchend"===e.type]}}]},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(76),i={};i.IDLE=[{to:"2D",where:function(e){return["rendermodechange"===e.type,e.mode===r.a.Render2D]}},{to:"3D",where:function(e){return["rendermodechange"===e.type,e.mode===r.a.Render3D]}}],i["2D"]=[{to:"2D/MEASUREMENT",where:function(e){return["Measurement:activate"===e.type]}},{to:"3D",where:function(e){return["rendermodechange"===e.type,e.mode===r.a.Render3D]}}],i["2D/MEASUREMENT"]=[{to:"2D",where:function(e){return["Measurement:deactivate"===e.type]}},{to:"3D",where:function(e){return["rendermodechange"===e.type,e.mode===r.a.Render3D]}}],i["3D"]=[{to:"2D",where:function(e){return["rendermodechange"===e.type,e.mode===r.a.Render2D]}}]},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(511),i=n(173);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=u(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function u(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(u,e);var t,n,r,o=l(u);function u(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),p(d(i=o.call(this,t,n,r)),"canvas",void 0),i.canvas=e,i.dispatch=i.dispatch.bind(d(i)),i.bindUIEvents(),i}return t=u,(n=[{key:"destroy",value:function(){this.unbindUIEvents()}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}},{key:"background",set:function(e){this.canvas.style.background=i.a.rgbaToHex(e)}},{key:"bindUIEvents",value:function(){var e=this,t=this.canvas.parentElement;u.OWN_UI_EVENTS_TO_LISTEN.forEach((function(n){return t.addEventListener(n,e.dispatch)})),u.PARENT_UI_EVENTS_TO_LISTEN.forEach((function(n){return t.addEventListener(n,e.dispatch)})),u.GLOBAL_UI_EVENTS_TO_LISTEN.forEach((function(t){return document.addEventListener(t,e.dispatch)}))}},{key:"unbindUIEvents",value:function(){var e=this,t=this.canvas.parentElement;u.OWN_UI_EVENTS_TO_LISTEN.forEach((function(n){return t.removeEventListener(n,e.dispatch)})),u.PARENT_UI_EVENTS_TO_LISTEN.forEach((function(n){return t.removeEventListener(n,e.dispatch)})),u.GLOBAL_UI_EVENTS_TO_LISTEN.forEach((function(t){return document.removeEventListener(t,e.dispatch)}))}},{key:"dispatch",value:function(e){return e instanceof Event&&!(e instanceof KeyboardEvent)&&e.preventDefault(),s(h(u.prototype),"dispatch",this).call(this,e)}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(r.a);p(m,"OWN_UI_EVENTS_TO_LISTEN",["mousedown","mouseup","mousemove","wheel","touchstart","touchmove","touchend","mouseleave","click"]),p(m,"PARENT_UI_EVENTS_TO_LISTEN",["resize"]),p(m,"GLOBAL_UI_EVENTS_TO_LISTEN",["keydown","keyup"])},function(e,t,n){"use strict";n.d(t,"a",(function(){return Lr}));var r=n(16),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-panel",attrs:{id:"comments-panel"}},[n("AppHeader"),e._v(" "),e.hasThreads?n("div",{staticClass:"comment-panel__btns"},[e.isAnonym?n("RegisterA365",{attrs:{link:e.saveTo,vertical:""}}):n("AfsButton",{attrs:{icon:"plus-16-2",wide:"","is-selected":e.isActiveAddComment,url:e.registerUrl},on:{click:e.onAddPlaceComment}},[e._v("\n      Place a Comment\n    ")])],1):e._e(),e._v(" "),e.filters&&e.hasThreads&&!e.isAnonym?n("AppFilters",{staticClass:"comment-panel__filters",attrs:{filters:e.filters},on:{"change-radio":e.onChangeFilters,"change-checkbox":e.onChangeFilters,"open-notifications":e.onOpenNotificationsSettings,"visibility-change":e.onVisibilityChange}}):e._e(),e._v(" "),n("ThreadList",{attrs:{"is-active-add-comment":e.isActiveAddComment},on:{"add-comment":e.onAddPlaceComment}}),e._v(" "),n("ModalAddComments",{ref:"modalAddComment",attrs:{"edit-modes":e.editModes,"active-comment-position":e.activeCommentPosition,"is-drawing":e.isDrawing,"update-posted-thread":e.updatePostedThread,"is-loading":e.isLoading,"has-comment-text":e.threadCommentHasText},on:{close:e.onClosePlaceComment,"close-all-modal":e.closeAllModal,"check-exist-text":e.hasCommentText,"set-open-modal":e.setOpenModal,"remove-open-modal":e.removeOpenModal,confirm:e.onConfirmCreateThread},scopedSlots:e._u([{key:"content",fn:function(){return[n("UserInfo",{attrs:{img:e.currentUser.avatarUrl,title:e.currentUser.name,ellipsis:""}}),e._v(" "),n("CommentForm",{ref:"commentForm",attrs:{"first-comment":!0},on:{submit:e.onCreateNewThread,cancel:e.onCloseModalAddComment}})]},proxy:!0}])}),e._v(" "),n("ModalEditComments",{ref:"modalEditComments",attrs:{"edit-modes":e.editModes}}),e._v(" "),n("ModalNotifications",{ref:"modalNotificationsSettings",attrs:{"user-settings":e.userSettings,"is-updating":e.isUpdatingNotifications},on:{update:e.onUpdateNotificationsSettings}}),e._v(" "),n("AddCommentToast",{ref:"addCommentToast",attrs:{"active-tab":e.activeViewTabs},on:{"close:esc":e.onClosePlaceComment}}),e._v(" "),n("div",{staticClass:"comment-panel__feedback"},[n("AfsLink",{attrs:{href:e.commentsSurveyUrl,target:"_blank"}},[e._v("\n      Leave Feedback\n    ")])],1)],1)};i._withStripped=!0;var o=n(25),a=n(30),s=n(86),u=n(29),c=n(6),l=n(126),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"threads",staticClass:"thread-list",class:{"thread-align":!e.groupedThreads.length}},[e._l(e.groupedThreads,(function(t,r){return n("ThreadGroup",{key:t.id+"-"+r,attrs:{title:t.name,icon:t.icon,"icon-filled":t.iconFilled,count:t.threads.length},scopedSlots:e._u([{key:"default",fn:function(){return e._l(t.threads,(function(e){return n("ThreadItem",{key:e.id,attrs:{thread:e}})}))},proxy:!0}],null,!0)})})),e._v(" "),e.showPlaceholder?[n("ThreadPlaceholder",{attrs:{"is-anonymous":e.showAnonymousPlaceholder,"register-link":e.registerUrl,"is-active-add-comment":e.isActiveAddComment},on:{"add-comment":e.onAddComment}})]:e._e(),e._v(" "),e.showNoResultsPlaceholder?n("Placeholder",{scopedSlots:e._u([{key:"icon",fn:function(){return[n("Icon",{staticClass:"placeholder__icon",attrs:{name:e.placeholderIcon}})]},proxy:!0},{key:"default",fn:function(){return[e._v("\n      "+e._s(e.placeholderMessage)+"\n    ")]},proxy:!0}],null,!1,3446532985)}):e._e(),e._v(" "),e.isLoading?n("Loader",{attrs:{"has-text":"",type:"overlay"}}):e._e()],2)};f._withStripped=!0;var d=n(43),h=n(5);function p(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=function(){var e=r.b.state,t=p(r.b.getters.threads);return r.b.getters.activeFilters.forEach((function(n){"my"===n.id&&(t=t.filter((function(e){return e.comments.some((function(e){return!![c.u,c.j].includes(e.author.id)||(e.mentions?e.mentions.some((function(e){return e&&[c.u,c.j].includes(e.MentionGuid)})):void 0)}))}))),"from"===n.id&&n.user&&(t=t.filter((function(e){return e.comments.some((function(e){return e.author.id===n.user.id}))}))),"unresolved"===n.id&&(t=t.filter((function(e){return!e.resolved}))),"current"===n.id&&(t=t.filter((function(t){var n=t.docId;return n===r.b.getters.currentDocId||c.o&&n===e.docIdGerber})))})),t},y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"thread-item"},[n("CommentItem",{attrs:{author:e.mainComment.author,"comment-data":e.mainComment.date,text:e.mainComment.text,counter:e.commentsCount,"is-active":e.isThreadActive,"has-drawing":e.hasDrawing,"is-resolved":e.isThreadResolved,"assigned-to":e.assignedTo,"thread-number":e.threadNumber,"replay-data":e.replayData,"release-guid":e.releaseGuid,label:e.threadLabel,"label-hint":e.threadLabelHint,thread:e.thread},on:{click:e.onThreadClick}})],1)};y._withStripped=!0;var g=n(74),b=n.n(g),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-item",class:e.classes,on:{click:e.onCommentItemClick,mouseover:function(t){return e.onHover(!0)},mouseleave:function(t){return e.onHover(!1)}}},[n("div",{staticClass:"comment-item__header"},[e.assignedToData?n("CommentHeaderAssignedTitle",{attrs:{"assigned-to":e.assignedToData,label:e.label,"label-hint":e.labelHint,"thread-number":e.threadNumber,"task-hrid":e.thread.properties.LwTaskHrid||"","task-priority":e.thread.properties.LwTaskPriority||"","task-link":e.taskLink,"is-active":e.isActive,"is-hover":e.isHover}}):n("CommentHeaderTitle",{attrs:{"thread-number":e.threadNumber,"is-resolved":e.isResolved,"is-active":e.isActive}}),e._v(" "),e.author.name?n("div",{staticClass:"comment-item__owner"},[n("UserInfo",{attrs:{"title-class":"comment-item__owner-name","meta-class":"comment-item__owner-data",img:e.author.avatarUrl,title:e.author.name,meta:e.commentData,ellipsis:""}})],1):e._e()],1),e._v(" "),n("div",{staticClass:"comment-item__body"},[e.releaseGuid?n("ReleaseLink",{staticClass:"comment-item__release-link",attrs:{"page-url":e.dataPageUrl,"project-src":e.dataProjectSrc,"analytics-subject":e.analyticsSubject,"release-guid":e.releaseGuid,release:e.currentReleases}}):e._e(),e._v(" "),n("AfsText",{staticClass:"comment-item__text",domProps:{innerHTML:e._s(e.formatText)}}),e._v(" "),e.hasDrawing?n("AfsText",{staticClass:"comment-item__drawing",attrs:{inline:""}},[n("Icon",{staticClass:"comment-item__icon-drawing",attrs:{name:"img-16"}}),e._v("\n      includes a drawing\n    ")],1):e._e(),e._v(" "),e.repliesText?n("AfsText",{staticClass:"comment-item__replay",attrs:{type:"single line"}},[e._v("\n      "+e._s(e.repliesText)+"\n    ")]):e._e()],1)])};w._withStripped=!0;var _=n(3),O=n(136),C=function(e,t){return"/designs/".concat(e,"#tasks_").concat(t)},S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isFromRelease?n("AfsText",{attrs:{type:"single"}},[e._v("\n  From\n  "),e.releasesName?n("AfsLink",{directives:[{name:"hint",rawName:"v-hint",value:{id:"release-hint",delay:1},expression:"{ id: 'release-hint', delay: 1 }"}],staticClass:"release__link",attrs:{href:e.releaseLink,target:"_blank"}},[e._v("\n    "+e._s(e.releasesName)+"\n    "),n("Icon",{staticClass:"release__icon",attrs:{name:"open-16"}})],1):[e._v("release")],e._v(" "),e.releasesTooltip?n("ContextMenu",e._b({ref:"release-hint",attrs:{id:"release-hint"}},"ContextMenu",e.hintConfig,!1),[e._v("\n    "+e._s(e.releasesTooltip)+"\n  ")]):e._e()],2):e._e()};S._withStripped=!0;var x=n(10),k=n(21),E=n.n(k),T={name:"ReleaseLink",directives:{hint:E.a},components:{AfsText:_.a,Icon:h.a,AfsLink:o.a,ContextMenu:x.a},props:{pageUrl:{type:String,default:""},projectSrc:{type:String,default:""},analyticsSubject:{type:String,default:""},releaseGuid:{type:String,default:""},release:{type:[String,Object],default:null}},computed:{releasesPackages:function(){var e;return this.release&&(null===(e=this.release)||void 0===e?void 0:e.PackageItems)||""},currentPackage:function(){var e=this;return!!this.releasesPackages.length&&this.releasesPackages.find((function(t){return t.RevisionId===e.releaseGuid}))},releasesName:function(){var e;return this.currentPackage&&(null===(e=this.currentPackage)||void 0===e?void 0:e.Version)||""},releasesTooltip:function(){var e;return this.currentPackage&&(null===(e=this.currentPackage)||void 0===e?void 0:e.Name)||""},isFromRelease:function(){return"Project"===this.analyticsSubject&&this.releaseGuid},releaseLink:function(){return this.isFromRelease?(e={url:this.pageUrl,projectId:this.projectSrc,releaseGuid:this.releaseGuid},t=e.url,n=e.projectId,r=e.releaseGuid,"".concat(t,"/designs/Manufacturing-Portal-").concat(n,"/?projectSourceGuid=").concat(r,"#files")):"";var e,t,n,r},hintConfig:function(){return{type:"hint",modifiers:{y:"bottom",x:"center"},offset:4}}},beforeDestroy:function(){this.$refs["release-hint"]&&this.$refs["release-hint"].close()}},P=(n(485),n(0)),A=Object(P.a)(T,S,[],!1,null,"4a6fb71f",null);A.options.__file="src/lib/commentPanel/components/ReleaseLink.vue";var M=A.exports,j=n(303),D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-header",class:{"is-active":e.isActive,"is-hover":e.isHover}},[n("div",{staticClass:"comment-header__title"},[e.label?n("div",{directives:[{name:"hint",rawName:"v-hint",value:e.labelHint&&{id:e.hintId,delay:100},expression:"\n        labelHint && {\n          id: hintId,\n          delay: 100\n        }\n      "}],staticClass:"comment-header__label"},[e._v("\n      "+e._s(e.label)+"\n    ")]):e._e(),e._v(" "),n("div",{staticClass:"comment-header__assigned"},[n("UserAvatar",{staticClass:"comment-header__user-avatar",attrs:{img:e.assignedTo.avatarUrl,title:e.assignedTo.name,size:"sm"}}),e._v(" "),e.taskLink?n("a",{staticClass:"comment-header__task-link",attrs:{href:e.taskLink,target:"_parent"}},[e._v("\n        "+e._s(e.taskHrid)+"\n      ")]):e.threadNumber?n("div",{staticClass:"comment-header__counter"},[e._v("\n        #"+e._s(e.threadNumber)+"\n      ")]):e._e(),e._v(" "),e.taskPriority?n("TaskPriority",{attrs:{value:e.taskPriority}}):e._e()],1),e._v(" "),e.labelHint?n("AfsContextMenu",e._b({},"AfsContextMenu",e.hintConfig,!1),[e._v("\n      "+e._s(e.labelHint)+"\n    ")]):e._e()],1)])};D._withStripped=!0;var I=n(84),R=n(8),L=n.n(R),B=n(200),N={name:"CommentHeaderAssignedTitle",components:{AfsContextMenu:x.a,UserAvatar:I.a,TaskPriority:B.a},directives:{hint:E.a},props:{assignedTo:{type:Object,default:function(){return{}}},label:{type:String,default:""},labelHint:{type:String,default:""},threadNumber:{type:String,default:""},taskHrid:{type:String,default:""},taskPriority:{type:String,default:""},taskLink:{type:String,default:""},isActive:{type:Boolean,default:!1},isHover:{type:Boolean,default:!1}},computed:{repliesText:function(){var e=this.counter-1;if(e<=0)return!1;var t="".concat(e," ").concat(e>1?"replies":"reply");return this.replayData?"".concat(t,", ").concat(this.replayData):t},hintId:function(){return L()()},hintConfig:function(){return{type:"hint",id:this.hintId,modifiers:{y:"bottom",x:"start"},offset:12,viewboxOffset:0}}}},U=(n(486),Object(P.a)(N,D,[],!1,null,null,null));U.options.__file="src/lib/commentPanel/components/CommentHeaderAssignedTitle.vue";var F=U.exports,$=function(e,t){return t&&(null==e?void 0:e.find((function(e){return e.ProjectSourceGuid===t})))||""};function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H=window.__APP__.library.Vuex,W=H.mapGetters,Y=H.mapState,q={name:"CommentItem",components:{AfsText:_.a,Icon:h.a,ReleaseLink:M,UserInfo:s.a,CommentHeaderTitle:j.a,CommentHeaderAssignedTitle:F},props:{thread:{type:Object,default:function(){return{}}},author:{type:Object,default:function(){return{}}},commentData:{type:String,default:""},text:{type:String,default:""},replayData:{type:String,default:""},assignedTo:{type:String,default:""},hasDrawing:{type:Boolean,default:!1},threadNumber:{type:[Number,String],default:"#"},counter:{type:Number,default:null},isActive:{type:Boolean,default:!1},isResolved:{type:Boolean,default:!1},releaseGuid:{type:String,default:""},label:{type:String,default:""},labelHint:{type:String,default:""}},data:function(){return{localUserId:c.u,globalUserId:c.j,dataPageUrl:c.f,dataProjectSrc:c.g,analyticsSubject:c.c,isHover:!1}},computed:z(z(z({},Y(["releases"])),W(["users","usersDictionary","groupsDictionary"])),{},{currentReleases:function(){return Array.isArray(this.releases)?$(this.releases,this.releaseGuid):""},classes:function(){return{"is-active":this.isActive,"is-resolved":this.isResolved}},taskLink:function(){var e,t;return null!==(e=this.thread)&&void 0!==e&&null!==(t=e.properties)&&void 0!==t&&t.LwTaskId?C(this.thread.packageId,this.thread.properties.LwTaskId):""},currentUser:function(){return{name:c.D,localId:this.localUserId,avatarUrl:c.B}},formatText:function(){return Object(O.textToPreviewHtml)(this.text,this.usersDictionary,this.groupsDictionary)},assignedToYou:function(){return this.assignedTo&&(this.assignedTo===this.localUserId||this.assignedTo===this.globalUserId)},assignedToData:function(){var e=this;return this.assignedToYou?this.currentUser:this.assignedTo&&this.users.find((function(t){return t.id===e.assignedTo}))||!1},repliesText:function(){var e=this.counter-1;if(e<=0)return!1;var t="".concat(e," ").concat(e>1?"replies":"reply");return this.replayData?"".concat(t,", ").concat(this.replayData):t}}),methods:{onCommentItemClick:function(){this.$emit("click")},onHover:function(e){this.isHover=!this.isResolved&&e}}},X=(n(487),Object(P.a)(q,w,[],!1,null,null,null));X.options.__file="src/plugins/CommentPanel/view/components/CommentItem.vue";var Z=X.exports,K=n(12);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=window.__APP__.library.Vuex,ne=te.mapActions,re=te.mapGetters,ie=c.m||!c.z,oe=window.__CORE__,ae={PCB3D:"3D"},se={PCB3D:"Comment left in 3D mode"},ue={name:"ThreadItem",components:{CommentItem:Z},props:{thread:{type:Object,default:function(){return{}}}},computed:Q(Q({},re(["activeThreadId","createNewThread","documents","otherDocuments"])),{},{mainComment:function(){var e=Q({},this.thread.comments[0]);return e.date=e.date?b()(e.date,{timeZoneOffset:ie?null:0}):"no timestamp",e.date=e.isEdited?"".concat(e.date,", edited"):e.date,e.author||(e.author={id:"",name:"User",proficePicture:""}),e},commentsCount:function(){return this.thread.comments.length},subComments:function(){return this.thread.comments.slice(1).map((function(e){var t=Q({},e);return t.date=t.date?b()(t.date,{timeZoneOffset:ie?null:0}):"no timestamp",t.author||(t.author={id:"",name:"User",proficePicture:""}),t}))},replayData:function(){var e="";if(Array.isArray(this.subComments)&&this.subComments.length){var t=this.subComments.length-1;e=this.subComments[t].date||""}return e},isThreadActive:function(){return this.thread.id===this.activeThreadId},isThreadResolved:function(){return this.thread.resolved},threadNumber:function(){return this.thread.threadNumber},assignedTo:function(){return this.thread.assignedTo||""},hasDrawing:function(){var e,t;return!!(this.thread.drawing&&null!==(e=this.thread.drawing)&&void 0!==e&&null!==(t=e.Items)&&void 0!==t&&t.length||"REDLINE"===this.thread.threadType)},releaseGuid:function(){var e;return(null===(e=this.thread.properties)||void 0===e?void 0:e.releaseGuid)||""},threadLabel:function(){var e;return(null==ae?void 0:ae[null===(e=this.thread.properties)||void 0===e?void 0:e.documentType])||""},threadLabelHint:function(){var e;return(null==se?void 0:se[null===(e=this.thread.properties)||void 0===e?void 0:e.documentType])||""}}),watch:{activeThreadId:{immediate:!0,handler:function(e){var t=this;setTimeout((function(){if(e){var n={id:e};if(oe.bus.emit("CommentsDrawingEngine:find",n),n.graphics){var r=n.graphics.viewEngine.createUiThreadEditOptions();t.$root.$emit("open-modal-edit",r)}}}),0)}}},methods:Q(Q({},ne(["setActiveThreadId"])),{},{onThreadClick:function(){var e=this;this.$root.$emit("close-modal-add"),this.isThreadActive||this.$root.$emit("close-modal-edit"),setTimeout((function(){if(e.otherDocuments.find((function(t){return t.id===e.thread.docId})))return e.onActiveThreadId(null,(function(e){})),e.$root.$emit("close-modal-edit"),void K.a.emit("CommentPanel:sendActiveThread",e.thread.id);e.isThreadActive||e.thread.id===e.activeThreadId?e.$root.$emit("close-modal-edit"):e.onActiveThreadId(e.thread.id,(function(t){if(t){var n=t.viewEngine.createUiThreadEditOptions();e.$root.$emit("open-modal-edit",n)}else e.$root.$emit("close-modal-edit")}))}),0)},onActiveThreadId:function(e,t){var n=this;window.__CORE__.bus.emit("CommentsDrawingEngine:activate",{id:e,zoomToFit:!0,callback:function(r){n.setActiveThreadId(e),t(r)}})}})},ce=(n(488),Object(P.a)(ue,y,[],!1,null,null,null));ce.options.__file="src/plugins/CommentPanel/view/components/ThreadItem.vue";var le=ce.exports,fe=n(155),de=n(298),he=n(170),pe=n(299),me=n(26);function ve(e){return function(e){if(Array.isArray(e))return ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ye(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){we(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=window.__APP__.library.Vuex,Oe=_e.mapState,Ce=_e.mapGetters,Se=_e.mapMutations,xe={name:"ThreadList",components:{ThreadGroup:de.a,ThreadItem:le,Loader:d.a,Placeholder:he.a,Icon:h.a,ThreadPlaceholder:pe.a},props:{isActiveAddComment:{type:Boolean,default:!1},filters:{type:Object,default:null}},data:function(){return{showResolvedComments:!1,registerUrl:c.x}},computed:be(be(be({},Oe(["isLoading","docIdGerber","updateViewTabs"])),Ce(["threads","users","currentDocId","documents","otherDocuments","createNewThread","activeThreadId"])),{},{showPlaceholder:function(){return 0===this.groupedThreads.length&&0===this.threads.length&&!this.createNewThread&&!this.isLoading},showNoResultsPlaceholder:function(){return 0===this.groupedThreads.length&&this.threads.length>0&&!this.createNewThread&&!this.isLoading},groupedThreads:function(){var e=this,t=v(),n=this.getGroupedThreads(t)||[];return n.forEach((function(t){return t.threads=e.sortedThreads(t.threads)})),n.length?n.sort((function(e,t){return e.order-t.order})):n},showAnonymousPlaceholder:function(){return c.m||!c.z},isCurrentDocumentOptionSelected:function(){if(!this.filters)return!1;var e=this.filters.checkboxes.find((function(e){return"current"===e.id}));return null==e?void 0:e.isSelected},placeholderIcon:function(){return this.isCurrentDocumentOptionSelected?"slider-16":"filter-empty-16"},placeholderMessage:function(){return this.isCurrentDocumentOptionSelected?"There are no comments on this document. You can add the first one or customize the display above.":"No comments are matching. You can customize the filters above."},isPcbDwfEnabled:function(){return me.a.getLicenseDetails(me.a.names.killSwitchDraftsmanComment).isEnabled},isBomEnabled:function(){return me.a.getLicenseDetails(me.a.names.killSwitchBomComment).isEnabled}}),watch:{activeThreadId:function(e){var t=this;e&&this.$nextTick((function(){t.scrollToThread(e)}))}},methods:be(be({},Se(["setSortedThreads"])),{},{getGroupedThreads:function(e){var t=this,n=[],r=[].concat(ve(this.documents),ve(this.otherDocuments));return e.filter((function(e){var t;return!["PCBDWF","FBOM"].includes(null===(t=e.properties)||void 0===t?void 0:t.documentType)})).forEach((function(e){var i=r.find((function(n){return n.id===e.docId&&n.id!==t.docIdGerber})),o=e.docId===t.docIdGerber,a=-1;if(i&&(a=n.findIndex((function(e){return e.id===i.id}))),i&&-1!==a)n[a].threads.push(e);else if(i&&-1===a){var s=null!=i&&i.name.toLowerCase().includes(".schdoc")?"schematic-16":null!=i&&i.name.toLowerCase().includes("stackup")?"stackup-16":"pcb",u={id:i.id,order:i.order,icon:s,iconFilled:"stackup-16"!==s,name:t.cutFileExtension(i.name),threads:[e]};n.push(u)}else if(!i&&o){if(c.k)return;var l=n.findIndex((function(e){return e.id===fe.a})),f=n.findIndex((function(e){return e.id===fe.b}));if(-1!==l)n[l].threads.push(e);else if(-1!==f)n[f].threads.push(e);else{var d={id:fe.a,icon:"fabrication-16",iconFilled:!0,name:"Fabrication"};n.push(be(be({id:fe.b},1===t.updateViewTabs.length&&t.updateViewTabs.includes("Gerber")?{}:d),{},{threads:[e]}))}}else if(!i){var h=n.findIndex((function(e){return"defaultId"===e.id}));if(-1!==h)n[h].threads.push(e);else if(c.b){var p={id:"defaultId",name:"Project comments",threads:[e]};n.push(p)}}})),this.getDwfThreadGroups(e).forEach((function(e){return n.push(e)})),this.getFBOMThreadGroups(e).forEach((function(e){return n.push(e)})),this.setSortedThreadsIds(n),n.sort(this.sortByName)},cutFileExtension:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e?e.split(".").slice(0,-1).join("."):"";return t||e},sortByName:function(e,t){var n,r,i=null==e||null===(n=e.name)||void 0===n?void 0:n.toUpperCase(),o=null==t||null===(r=t.name)||void 0===r?void 0:r.toUpperCase();return i<o?-1:i>o?1:0},sortedThreads:function(e){var t=ve(e);return this.showResolvedComments?t=[].concat(ve(t.filter((function(e){return!e.resolved})).sort(this.sortByCreationDateDesc)),ve(t.filter((function(e){return e.resolved})).sort(this.sortByCreationDateDesc))):t.sort(this.sortByCreationDateDesc),t},sortByCreationDateDesc:function(e,t){return void 0===e||void 0===t?-1:e.comments.length&&t.comments.length?e.comments[0].date>t.comments[0].date?-1:e.comments[0].date<t.comments[0].date?1:0:-1},scrollToThread:function(e){var t=this.$refs.threads.querySelector('[data-thread-id="'.concat(e,'"]'));this.showThreadInView(t)},showThreadInView:function(e){var t=this;e&&setTimeout((function(){var n=t.$refs.threads,r=t.$refs.threads.getBoundingClientRect(),i=e.getBoundingClientRect(),o=0;if(i.height>r.height||i.bottom>r.bottom){var a=n.scrollTop;o=i.bottom-r.bottom,n.scrollTo(0,a+o+40)}else if(i.top<r.top){var s=n.scrollTop;o=r.top-i.top,n.scrollTo(0,s-o-40)}}),0)},setSortedThreadsIds:function(e){var t={};e.forEach((function(e){return e.threads.forEach((function(e){return t[e.threadNumber]=e.id}))})),this.setSortedThreads(Object.values(t))},getDwfThreadGroups:function(e){var t=this,n={};return e.filter((function(e){var n;return t.isPcbDwfEnabled&&"PCBDWF"===(null===(n=e.properties)||void 0===n?void 0:n.documentType)})).forEach((function(e){n[e.docId]=n[e.docId]||{id:e.docId,name:t.cutFileExtension(e.docId),icon:"draftsman-document-template",iconFilled:!0,threads:[]},n[e.docId].threads.push(e)})),Object.values(n)},getFBOMThreadGroups:function(e){var t=this,n={};return e.filter((function(e){var n;return t.isBomEnabled&&"FBOM"===(null===(n=e.properties)||void 0===n?void 0:n.documentType)})).forEach((function(e){n[e.docId]=n[e.docId]||{id:e.docId,name:"BOM",icon:"bom-16",iconFilled:!0,threads:[]},n[e.docId].threads.push(e)})),Object.values(n)},onAddComment:function(){this.$emit("add-comment")}})},ke=(n(489),Object(P.a)(xe,f,[],!1,null,"247196ae",null));ke.options.__file="src/plugins/CommentPanel/view/components/ThreadList.vue";var Ee=ke.exports,Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{ref:"modalEditComment",attrs:{id:"modalEditComment",y:e.modalCoords.y,x:e.modalCoords.x,"close-on-view-click":!e.isPaintMode},on:{close:e.onClose,"close-all-modal":e.closeAllModal}},[n("div",[e.isCommentTools?n("CommentsTools",{attrs:{"edit-modes":e.editModes,"has-text":e.threadCommentTextChange,"is-loading":e.isLoading,"is-drawing":e.isDrawing,thread:e.updatePostedThread},on:{"mode-text":e.setModeText,confirm:e.onPostThread,close:e.onCloseThreadEdit,"paint-mode":function(t){e.isPaintMode=t}}}):e._e(),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.modeText,expression:"modeText"}],staticClass:"edit-comment"},[n("ModalDraggerTitle",{on:{drag:e.moveModal},scopedSlots:e._u([{key:"default",fn:function(){return[n("CommentEditHeaderPanel",{attrs:{"active-thread-id":e.activeThreadId,"active-thread":e.activeThread,"sorted-threads":e.sortedThreads,"task-link":e.taskLink,"is-anonymous":e.isAnonym},on:{"change-status":e.onTaskStatusChange,"handle-resolve":e.onHandleResolve,"set-active-thread":e.setActiveThreadId},scopedSlots:e._u([{key:"header",fn:function(){return[e.assignedTo?n("ModalEditCommentsSelectAssignee",{attrs:{"assigned-to":e.assignedTo,"thread-guid":e.activeThreadId,"active-thread":e.activeThread},on:{input:e.onCommentAssigneeChange}}):e._e()]},proxy:!0}])})]},proxy:!0}])}),e._v(" "),n("div",{staticClass:"edit-comment__body-wrapper"},[n("div",{ref:"modalBody",staticClass:"edit-comment__body"},[e._l(e.listActiveThreadComments,(function(t,r){return["separator"===t.type?n("div",{key:t.type,staticClass:"edit-comment__separator",on:{click:e.clickShowAllComments}},[n("div",{staticClass:"edit-comment__separator-text"},[e._v("\n                Show All "+e._s(e.countHideComments)+" Replies\n              ")])]):n("CommentReplyItem",{key:t.id,ref:"commentReplyItem",refInFor:!0,attrs:{comment:t,"is-assigned-to":e.isAssignedTo,"is-resolved":e.isResolved,"screenshot-url":e.screenshotUrl,"release-guid":e.releaseGuid,"is-main-comment":0===r},on:{"show-tools":e.showToggleCommentTools,"hide-tools":e.hideToggleCommentTools,edit:function(t){e.isEditing=t}}})]})),e._v(" "),e.shouldShowReply?n("div",{staticClass:"edit-comment__reply-block"},[e.isAnonym?n("RegisterA365",{staticClass:"edit-comment__register",attrs:{link:e.saveTo}}):n("CommentForm",{key:e.formTmpKey,attrs:{"is-disabled":e.isLoading,"hide-assigned-to":e.hideAssignedTo,"is-assigned-to":e.isAssignedTo,"has-buttons":!1,autofocusable:!1,placeholder:"Reply or add others with @"},on:{submit:e.onReplySubmit,cancel:e.close},scopedSlots:e._u([{key:"accept",fn:function(){return[e._v(" Reply ")]},proxy:!0}],null,!1,939945935)})],1):e._e()],2)])],1)],1)])};Te._withStripped=!0;var Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reply-item"},[n("div",{staticClass:"reply-item__header"},[n("UserInfo",{attrs:{"title-class":"reply-item__user-name","meta-class":"reply-item__user-time",img:e.author.avatarUrl,title:e.author.name,meta:e.author.time,ellipsis:""}}),e._v(" "),n("CommentContextMenu",e._b({staticClass:"reply-item__context-menu",attrs:{"change-position":e.activeCommentPosition},on:{"copy-link":e.copyLink,edit:e.editComment,delete:e.confirmDelete,"convert-to-task":e.convertToTask}},"CommentContextMenu",e.contextMenuParams,!1))],1),e._v(" "),e.isMainComment&&e.releaseGuid?n("ReleaseLink",{staticClass:"reply-item__release-link",attrs:{"page-url":e.dataPageUrl,"project-src":e.dataProjectSrc,"analytics-subject":e.analyticsSubject,"release-guid":e.releaseGuid,release:e.currentReleases}}):e._e(),e._v(" "),e.isEdited?n("CommentForm",{ref:"commentForm",attrs:{text:e.commentText,"is-assigned-to":e.isAssignedTo,"initial-mentions":e.mentions,"hide-assigned-to":e.hideAssignedTo},on:{submit:e.onUpdateSubmit,cancel:e.closeEdit},scopedSlots:e._u([{key:"accept",fn:function(){return[e._v(" Update ")]},proxy:!0}],null,!1,2058383244)}):n("AfsText",{ref:"replyItemText",staticClass:"reply-item__text",class:{"is-short":e.isShort},attrs:{type:"text"},domProps:{innerHTML:e._s(e.formatText)}}),e._v(" "),!e.isEdited&&e.isTruncated?n("div",{staticClass:"reply-item__more",on:{click:e.clickShowMore}},[n("div",{staticClass:"reply-item__more-text"},[e._v("\n      "+e._s(e.isShort?"Show More":"Show less")+"\n    ")])]):e._e(),e._v(" "),e.hasScreenshot?n("Snapshot",{ref:"screenshotDropdown",attrs:{"screenshot-url":e.screenshotUrl},on:{"open-modal":e.setOpenModal,"close-modal":e.removeOpenModal}}):e._e(),e._v(" "),n("ModalConfirmation",{ref:"threadModal",attrs:{id:"modalConfirmation_"+e._uid},on:{accept:e.onConfirmThreadDelete,reject:e.onConfirmThreadCancel},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.getBEMClass;return[n("div",{class:r("content")},[n("Icon",{class:r("icon"),attrs:{name:"attention-32",filled:""}}),e._v(" "),e.isMainComment?n("AfsText",[e._v("\n          Are you sure you want to delete this comment?"),n("br"),e._v("\n          This will delete all of its replies as well.\n        ")]):n("AfsText",[e._v("\n          Are you sure you want to delete this comment?\n        ")])],1)]}},{key:"accept",fn:function(){return[e._v(" Delete ")]},proxy:!0},{key:"reject",fn:function(){return[e._v(" Cancel ")]},proxy:!0}])})],1)};Pe._withStripped=!0;var Ae=n(288),Me=n(39),je=n.n(Me),De=function(){var e=this,t=e.$createElement;return(e._self._c||t)("CommentFormField",e._g(e._b({ref:"commentFormField",scopedSlots:e._u([e._l(e.$scopedSlots,(function(t,n){return{key:n,fn:function(t){return[e._t(n,null,null,t)]}}}))],null,!0)},"CommentFormField",[e.$attrs,e.commentBindProps],!1),e.$listeners))};De._withStripped=!0;var Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-form"},[n("Mention",{key:e.mentionCounter,ref:"mentionsRef",attrs:{suggestions:e.deps.teamUsers,"map-insert":e.mapInsertMention,"text-to-html":e.textToHtml,placeholder:e.placeholder,"custom-mention-reg-exp":e.customMentionRegExp,disabled:e.isDisabled,autofocusable:e.autofocusable},on:{"model-changed":e.withDebounce.onCommentUpdate,apply:e.updateMentions,search:e.onSearch,applyAll:e.onApplyAll,focusStateChange:function(t){e.isFocused=t},suggestionsClose:e.onSuggestionsClose,suggestionsOpen:e.onSuggestionsOpen,shortcut:e.onShortcut},scopedSlots:e._u([{key:"suggestion",fn:function(e){var t=e.suggestion,r=e.applyMention;return[n("button",{staticClass:"afs-context-menu__item-clickable afs-context-menu__item-in",attrs:{type:"button"},on:{click:function(e){return r(e,t)}}},[n("UserInfo",{attrs:{img:t.avatarUrl,title:t.name,meta:t.email}})],1)]}}]),model:{value:e.commentText,callback:function(t){e.commentText=t},expression:"commentText"}}),e._v(" "),e.hideAssignedTo?e._e():[e.showTaskAssignment?n("div",{ref:"assignedToBlock",staticClass:"comment-form__assigned",on:{mouseover:function(t){e.mouseOverBtn=!0},mouseleave:function(t){e.mouseOverBtn=!1}}},[n("Checkbox",{attrs:{disabled:e.isBusy||e.deps.isLoading},model:{value:e.assignCheckbox,callback:function(t){e.assignCheckbox=t},expression:"assignCheckbox"}},[n("AfsText",{staticClass:"comment-form__assigned-text",attrs:{type:"single line"}},[e.areTasksEnabled?[e._v("\n            "+e._s(e.isAssignedTo?"Reassign":"Assign")+" a task to\n          ")]:[e._v("\n            "+e._s(e.isAssignedTo?"Reassign":"Assign")+" to\n          ")]],2)],1),e._v(" "),n("span",{staticClass:"comment-form__assigned-user",on:{click:e.onClickOpenDropdown}},[n("span",{staticClass:"comment-form__assigned-user-name"},[e.areTasksEnabled?[e._v("\n            "+e._s(e.assignedToYou?"Me":e.userAssignedTo)+"\n          ")]:[e._v("\n            "+e._s(e.assignedToYou?"You":e.userAssignedTo)+"\n          ")]],2),e._v(" "),n("AfsButtonIcon",{attrs:{transparent:"",icon:"chevron-down-8"}})],1)],1):e._e(),e._v(" "),n("ContextMenu",{ref:"assignedToDropdown",staticClass:"comment-form__assignee-context-menu",attrs:{type:"dropdown","full-width":"",modifiers:{y:"bottom",x:"start"}},on:{close:e.onClickCloseDropdown},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.getBEMClass;return[n("div",{class:r("section")},[n("div",{class:r("item")},[n("div",{class:r("item-in")},[n("AfsSearch",{ref:"assigneeSearch",staticClass:"comment-form__assignee-search",attrs:{placeholder:"Search people","has-remove-btn":!1},on:{keydown:function(t){return t.stopPropagation(),e.findUsersOrGroup(e.assigneeSearch,"assignee")},keyup:function(e){e.stopPropagation()}},model:{value:e.assigneeSearch,callback:function(t){e.assigneeSearch=t},expression:"assigneeSearch"}})],1)])]),e._v(" "),e.assignableMentions.length?n("UserList",e._l(e.assignableMentions,(function(t){return n("UserListItem",{key:t.id,attrs:{"avatar-url":t.avatarUrl,email:t.username||t.email,name:t.name},on:{click:function(n){return e.onClickAssignedTo(t)}}})})),1):e._e()]}}],null,!1,1184776470)})],e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.statusButtons,expression:"statusButtons"}],staticClass:"comment-form__buttons"},[n("div",[n("AfsButton",{attrs:{disabled:!e.canConfirm,"is-busy":e.isBusy||e.deps.isLoading,primary:""},on:{click:e.onConfirm}},[e._t("accept",[e._v("Post")])],2),e._v(" "),n("AfsButton",{attrs:{disabled:e.isBusy||e.deps.isLoading},on:{click:e.cancel}},[e._t("reject",[e._v("Cancel")])],2)],1)])],2)};Ie._withStripped=!0;var Re=function(){var e=this.$createElement;return(this._self._c||e)("ul",{class:[this.getBEMClass("section"),this.getBEMClass("scrollbar")]},[this._t("default")],2)};Re._withStripped=!0;var Le=n(2),Be={name:"UserList",methods:{getBEMClass:function(e){return Object(Le.a)("afs-context-menu",e)}}},Ne=Object(P.a)(Be,Re,[],!1,null,null,null);Ne.options.__file="WebUI/VueJsComponentLibrary/src/components/UserListContextMenu/App.vue";var Ue=Ne.exports,Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{class:e.rootClass},[n("button",{class:[e.getBEMClass("item-clickable"),e.getBEMClass("item-in")],attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$emit("click")}}},[n("UserInfo",{attrs:{img:e.avatarUrl,title:e.name,meta:e.email,"avatar-size":e.size}})],1)])};function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Fe._withStripped=!0;var Ve={name:"UserListItem",components:{UserInfo:s.a},props:{isSelected:{type:Boolean,required:!0,default:!1},avatarUrl:{type:String,required:!0,default:""},name:{type:String,required:!0,default:""},email:{type:String,default:""},size:{type:String,default:"lg",validator:function(e){return["lg","sm"].includes(e)}}},computed:{rootClass:function(){var e;return $e(e={},this.getBEMClass("item"),!0),$e(e,"usercard",!0),$e(e,"usercard_".concat(this.size),!0),$e(e,"is-selected",this.isSelected),e}},methods:{getBEMClass:function(e){return Object(Le.a)("afs-context-menu",e)}}},ze=(n(490),Object(P.a)(Ve,Fe,[],!1,null,null,null));ze.options.__file="WebUI/VueJsComponentLibrary/src/components/UserListItemContextMenu/App.vue";var Ge=ze.exports,He=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"afs-mention",attrs:{disabled:e.disabled}},[n("ContextMenu",{ref:"dropdown",attrs:{type:"dropdown","full-width":"",modifiers:{y:"bottom",x:"start"},"max-height-limit":200},on:{open:function(t){return e.$emit("suggestionsOpen")},close:e.onDropdownClose}},[[e.suggestions.length?n("ul",{ref:"suggestionsRef",staticClass:"afs-context-menu__section"},e._l(e.suggestions,(function(t,r){return n("li",{key:t.id,staticClass:"afs-context-menu__item",class:{"is-selected":r===e.selectedSuggestionIndex}},[e._t("suggestion",null,{suggestion:t,applyMention:e.withDebounce.applyMention})],2)})),0):e._e()]],2),e._v(" "),n("div",{ref:"editable",staticClass:"afs-mention__input",attrs:{contenteditable:!e.disabled},domProps:{innerHTML:e._s(e.value)},on:{focus:function(t){e.isActive=!0},blur:function(t){e.isActive=!1},input:e.onInput,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.moveSuggestionFocus(t,1)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.moveSuggestionFocus(t,-1)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.withDebounce.applyMention(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.withDebounce.applyMention(t)},function(t){return t.stopPropagation(),e.onKeydown(t)}],keyup:[function(e){e.stopPropagation()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:(t.stopPropagation(),t.preventDefault(),e.closeSuggestions(t))}],paste:function(t){return t.preventDefault(),e.onPaste(t)},drop:function(e){e.preventDefault()}}}),e._v(" "),e.modelValue?e._e():n("div",{staticClass:"afs-mention__placeholder"},[e._v("\n    "+e._s(e.placeholder)+"\n  ")])],1)};He._withStripped=!0;var We=n(159);function Ye(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function qe(e){return function(e){if(Array.isArray(e))return Ze(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){if(e){if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ze(e,t):void 0}}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ke={childList:!0,characterData:!0,subtree:!0},Je={name:"Mention",components:{ContextMenu:x.a},model:{event:"model-changed",prop:"modelValue"},props:{placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},customMentionRegExp:{type:RegExp,default:null},symbol:{type:String,default:"@"},suggestions:{type:Array,default:function(){return[]}},mapInsert:{type:Function,default:function(e){return e.value}},textToHtml:{type:Function,default:function(e){return e}},modelValue:{type:String,default:""},autofocusable:{type:Boolean,default:!0}},data:function(){return{isActive:!1,isInput:!1,value:this.textToHtml(this.modelValue),searchText:null,selectedSuggestionIndex:0}},computed:{selection:function(){return window.getSelection()},withDebounce:function(){return{applyMention:Object(We.b)(this.applyMention,1e3,!0)}}},watch:{isActive:function(e){this.$emit("focusStateChange",e)},suggestions:function(e){this.symbol&&e&&e.length&&this.$refs.dropdown.open(this.$el)}},mounted:function(){var e=this;this.input=this.$refs.editable,this.observer=new MutationObserver(this.onNodeChange),this.addNodesWatcher(),this.$emit("model-changed",this.input.textContent),document.addEventListener("selectionchange",this.onSelectionChange),this.autofocusable&&this.$nextTick((function(){e.focusCommentField()}))},beforeDestroy:function(){document.removeEventListener("selectionchange",this.onSelectionChange),this.observer.disconnect(),this.observer=null},methods:{addNodesWatcher:function(e){var t=this;(e||this.input.querySelectorAll(".".concat("full-match"))).forEach((function(e){t.observer.observe(e,Ke)}))},onNodeChange:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Xe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;"characterData"===r.type?this.onMentionTextChange(r):"childList"===r.type&&this.onMentionStructureChange(r)}}catch(e){n.e(e)}finally{n.f()}},onInput:function(e){if(("div"===this.selection.anchorNode.localName&&"deleteContentBackward"!==e.inputType||"insertParagraph"===e.inputType)&&this.addNewLine(),"insertLineBreak"===e.inputType&&this.isInsideElement()){var t=this.selection,n=t.anchorNode,r=t.anchorOffset;this.unwrapElement(n),this.selection.setPosition(n,r)}this.fontTagRemove(),this.isInput=!0,this.checkKey(),this.$emit("model-changed",this.input.textContent),window.requestAnimationFrame(this.checkCustomMentions)},onPaste:function(e){var t=e.clipboardData.getData("text/plain"),n=this.selection.getRangeAt(0),r=document.createTextNode(t);n.insertNode(r),this.selection.setPosition(r,t.length),this.$emit("model-changed",this.input.textContent),window.requestAnimationFrame(this.checkCustomMentions)},onKeydown:function(e){var t=e.ctrlKey?"Ctrl":"",n=e.altKey?"Alt":"",r=e.shiftKey?"Shift":"";13===e.which&&this.$emit("shortcut","".concat(t).concat(n).concat(r,"Enter"))},moveSuggestionFocus:function(e,t){if(this.$refs.suggestionsRef){e.preventDefault();var n=this.$refs.suggestionsRef.childNodes,r=this.selectedSuggestionIndex+t,i=n.length-1;this.selectedSuggestionIndex=r<0?i:r>i?0:r;var o=n[this.selectedSuggestionIndex];o.offsetTop<this.$refs.dropdown.$el.scrollTop?o.scrollIntoView():o.offsetTop>this.$refs.dropdown.$el.scrollTop+this.$refs.dropdown.$el.offsetHeight-o.offsetHeight&&o.scrollIntoView(!1)}},onDropdownClose:function(){this.$emit("suggestionsClose")},closeSuggestions:function(){this.$refs.dropdown&&this.$refs.dropdown.close()},onSelectionChange:function(){this.isInput?this.isInput=!1:this.closeSuggestions()},checkKey:function(){var e=this.selection.anchorOffset;if(e>=0){var t=this.getSearchText(e);if(null!=t)return this.selectedSuggestionIndex=0,this.searchText=t,this.$emit("search",{key:this.symbol,searchText:t}),!0}return this.closeSuggestions(),!1},appendMention:function(e){var t=e;if(t){var n="".concat(this.symbol).concat(this.mapInsert(t,this.symbol));this.input.contains(this.selection.anchorNode)||this.input.focus();try{var r=this.moveCursorToTheInputEnd();this.insertSpace(r),r.insertNode(document.createTextNode(n));var i=this.wrapFullMatch(r,n);r.setStartAfter(i),this.insertSpace(r),this.moveCursorToTheInputEnd(),this.$emit("model-changed",this.input.textContent),this.$emit("apply",t,n)}catch(e){console.log(e)}}},moveCursorToTheInputEnd:function(){var e=document.createRange(),t=window.getSelection();return e.selectNodeContents(this.input),e.collapse(!1),t.removeAllRanges(),t.addRange(e),e},applyMention:function(e,t){var n=t||this.suggestions[this.selectedSuggestionIndex];if(n){e.preventDefault();var r="".concat(this.symbol).concat(this.mapInsert(n,this.symbol));this.input.contains(this.selection.anchorNode)||this.input.focus();try{var i=this.selection.getRangeAt(0),o=i.startOffset-this.symbol.length-(this.searchText?this.searchText.length:0);i.setStart(i.startContainer,o>0?o:0),i.deleteContents(),i.insertNode(document.createTextNode(r));var a=this.wrapFullMatch(i,r);i.setStartAfter(a),this.insertSpace(i),this.input.focus(),this.$emit("model-changed",this.input.textContent),this.$emit("apply",n,r)}catch(e){console.log(e)}}},appendCharacter:function(e){var t=document.createTextNode(e);this.input.appendChild(t),this.selection.setPosition(t,e.length),this.checkKey(),this.$emit("model-changed",this.input.textContent),this.isInput=!0},handleMentionEdit:function(e){var t=e.parentElement.dataset.mention;t&&e.textContent&&e.parentElement.textContent!==t&&this.unwrapElement(e)},handleInsertBefore:function(e,t){var n=this.selection.anchorNode,r=e.textContent.slice(0,this.selection.anchorOffset);n.textContent=t;var i=document.createTextNode(r);n.parentElement.before(i),this.selection.setPosition(i,r.length)},handleInsertAfter:function(e,t){var n=this.selection.anchorNode,r=e.textContent.slice(t.length);n.textContent=t;var i=document.createTextNode(r);n.parentElement.after(i),this.selection.setPosition(i,r.length)},wrapFullMatch:function(e,t){var n=document.createElement("span");return n.classList.add("full-match"),n.dataset.mention=t,e.surroundContents(n),this.observer.observe(n,Ke),n},unwrapElement:function(e){var t=e.parentElement;t.before.apply(t,qe(t.childNodes)),t.remove()},isInsideElement:function(){return!!this.getMentionContent(this.selection.anchorNode.parentElement)},getMentionContent:function(e){return e.dataset&&e.dataset.mention},insertSpace:function(e){var t=document.createTextNode(" ");e.insertNode(t),this.selection.setPosition(t,t.textContent.length)},onMentionTextChange:function(e){var t=e.target.parentElement.dataset.mention;if(t!==e.target.textContent){var n=e.target.textContent.indexOf(t);if(n<0){var r=this.selection,i=r.anchorNode,o=r.anchorOffset;return this.handleMentionEdit(e.target),void this.selection.setPosition(i,o)}n>0?this.handleInsertBefore(e.target,t):this.handleInsertAfter(e.target,t)}},onMentionStructureChange:function(e){var t=this.selection,n=t.anchorNode,r=t.anchorOffset;e.target.firstChild&&this.handleMentionEdit(e.target.firstChild),e.addedNodes.forEach(this.handleMentionEdit),this.selection.setPosition(n,r)},getSearchText:function(e){var t=this.getValue().substring(0,e).split(/(^|\s|\W)@/).slice(1).pop();return null==t&&/(\s{2}|\n|\r)/.test(t)?null:t},checkCustomMentions:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n,r,i,o,a,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.getValue(),(r=t.customMentionRegExp&&n.match(t.customMentionRegExp))&&(t.$emit("applyAll",r),i=t.selection.anchorNode,o=t.selection.anchorOffset,a=t.textToHtml(n.slice(0,o)),s=document.createTextNode(" "+n.slice(o)),u=document.createRange().createContextualFragment(a.replace(/[\s\uFEFF\xA0]+$/g,"")),t.addNodesWatcher(u.querySelectorAll(".".concat("full-match"))),i.before.apply(i,qe(u.childNodes).concat([s])),i.remove(),t.selection.setPosition(s,1));case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ye(o,r,i,a,s,"next",e)}function s(e){Ye(o,r,i,a,s,"throw",e)}a(void 0)}))})()},fontTagRemove:function(){var e=this,t=function t(n){return e.input.contains(n)?n.tagName&&"font"===n.tagName.toLowerCase()?n:t(n.parentElement):null}(this.selection.anchorNode);if(t){var n=t.textContent,r=document.createTextNode(n);t.parentElement.replaceChild(r,t),this.selection.setPosition(r,n.length)}},getValue:function(){return this.selection.anchorNode.textContent},cancelEvent:function(e){this.cancelKeyUp=e.key},addNewLine:function(){var e=document.createTextNode("\n"),t=this.selection.getRangeAt(0);t.deleteContents(),t.insertNode(e),t.setStartAfter(e)},focusCommentField:function(){this.input&&this.input.focus()}}},Qe=(n(491),Object(P.a)(Je,He,[],!1,null,"420fbf76",null));Qe.options.__file="WebUI/VueJsComponentLibrary/src/components/Mention/index.vue";var et=Qe.exports,tt=n(22),nt=n(73),rt=n(66),it=n(24),ot=n(143),at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[<>"']/g,(function(e){return t[e]}))},st={user:1,group:2,system:3},ut=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/gim,ct=/@(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))\s/gim,lt=function(e){return e.match(ut)||[]},ft=function(e){var t=e.name;return"@".concat(void 0===t?"":t)},dt=function(e){return e.mentionType===st.user?"@".concat(e.email):e.mentionType===st.system?e.email:"{@".concat(e.name,"}")},ht=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.reduce((function(e,n){if(void 0!==n.email&&""===n.email)return e;var r=t?ft(n):dt(n),i=t?dt(n):ft(n);return e.map.set(r.toLowerCase(),i),e.keys.push(r.replace(/\./g,"\\.").replace(/\+/g,"\\+")),e}),{map:new Map,keys:[]}),r=n.map,i=n.keys;return r.size?{map:r,regex:new RegExp("(".concat(i.join("|"),")"),"gmi")}:null},pt=function(e,t){if(!t)return e;return e.replace(t.regex,(function(e){if(e){var n=t.map.get(e.toLowerCase());return'<span class="full-match" data-mention="'.concat(n,'">').concat(n,"</span>")}}))};window.__viewerOpenedComponents=[];var mt=function(e){window.__viewerOpenedComponents.push(e)},vt=function(e){window.__viewerOpenedComponents=window.__viewerOpenedComponents.filter((function(t){return t!==e}))};function yt(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function gt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){yt(o,r,i,a,s,"next",e)}function s(e){yt(o,r,i,a,s,"throw",e)}a(void 0)}))}}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||St(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){Ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e){return function(e){if(Array.isArray(e))return xt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||St(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){if(e){if("string"==typeof e)return xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xt(e,t):void 0}}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kt={name:"CommentFormField",directives:{hint:it.a,dropdown:ot.a},components:{UserList:Ue,UserListItem:Ge,UserInfo:s.a,AfsButton:a.a,AfsButtonIcon:tt.a,AfsText:_.a,AfsSearch:rt.a,Checkbox:nt.a,Mention:et,ContextMenu:x.a},props:{text:{type:String,default:""},hideAssignedTo:{type:Boolean,default:!1},isAssignedTo:{type:String,default:""},isDisabled:{type:Boolean,default:!1},placeholder:{type:String,default:"Comment or add others with @"},initialMentions:{type:Array,default:function(){return[]}},hasButtons:{type:Boolean,default:!0},autofocusable:{type:Boolean,default:!0},deps:{type:Object,default:function(){}},activeCommentPosition:{type:Object,default:function(){}},firstComment:{type:Boolean,default:!1}},data:function(e){return{commentText:e.text,isBusy:!1,isClickConfirm:!1,assignCheckbox:!e.areTasksEnabled,initialAssignCheckbox:!e.areTasksEnabled,isAssignedDropdownOpen:!1,cancelableRequest:{},assignedToUserId:e.isAssignedTo?e.isAssignedTo:e.areTasksEnabled?e.deps.localUserId:null,mentions:{},customEmails:{},initialMentionsMap:{},cancelSharing:!1,isFocused:!1,mouseOverBtn:!1,mentionCounter:0,assigneeSearch:"",assigneeUserList:[]}},computed:{customMentionRegExp:function(){return ct},mentionTypes:function(){return st},assignableMentions:function(){var e=this;return[].concat(Ct(this.mentionsList.filter((function(t){return t.mentionType!==e.mentionTypes.group}))),Ct(this.assigneeUserList.filter((function(t){return!e.mentionsList.some((function(e){return e.id===t.id}))}))))},mentionsList:function(){return Object.values(this.mentions)},statusButtons:function(){return this.hasButtons||this.commentText||this.isFocused||this.mouseOverBtn||this.assignCheckboxChanged||this.isAssignedDropdownOpen},showTaskAssignment:function(){return this.areTasksEnabled?this.isAssignedTo?this.hasUsersInMentions&&this.statusButtons:this.statusButtons:this.hasUsersInMentions},assignCheckboxChanged:function(){return this.areTasksEnabled&&this.assignCheckbox!==this.initialAssignCheckbox},assignedToYou:function(){return this.assignedToUserId===this.deps.localUserId||this.assignedToUserId===this.deps.globalUserId},userAssignedTo:function(){return this.assignedToUserId?this.assignedToYou?this.deps.userName:(this.mentions[this.assignedToUserId]||{}).name||"":""},hasUsersInMentions:function(){return this.mentionsList.some((function(e){return e.mentionType===st.user}))},canConfirm:function(){return(this.areTasksEnabled?this.assignCheckbox&&!this.firstComment:this.assignCheckbox!==!!this.isAssignedTo)||this.commentText&&this.commentText!==this.text||this.deps.updatePostedThread.length},hintConfig:function(){return{type:"hint",modifiers:{y:"bottom",x:"right"},offset:4}},hasMentions:function(){return this.mentionsList.length>1},isReleasePage:function(){return"Release"===this.deps.analyticsSubject},isUpload:function(){return"Upload"===this.deps.analyticsSubject},hasWorkspaceContext:function(){return"Upload"!==this.deps.analyticsSubject&&"MfgPackage"!==this.deps.analyticsSubject},withDebounce:function(){return{handleSearch:Object(We.b)(this.handleSearch,300),onCommentUpdate:Object(We.b)(this.onCommentUpdate,500)}},isResharingEnabled:function(){return this.deps.LicenseService.getLicenseDetails(this.deps.LicenseService.names.resharing).isEnabled},areTasksEnabled:function(){return this.deps.LicenseService.getLicenseDetails(this.deps.LicenseService.names.lightWeightTasks).isEnabled},hasCommentText:function(){return!!this.commentText},hasTextChange:function(){return this.canConfirm}},watch:{activeCommentPosition:{deep:!0,handler:function(e){this.$refs.mentionsRef&&this.$refs.mentionsRef.closeSuggestions(),this.onClickCloseDropdown()}},assignableMentions:{immediate:!0,handler:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.areTasksEnabled&&!e.length&&(this.assignedToUserId=this.deps.localUserId,e.sort().toString()!==t.sort().toString()&&(this.assignCheckbox=this.initialAssignCheckbox=!1))}}},created:function(){var e=this.getInitialMentions();this.initialMentionsMap=_t({},e),this.mentions=e,this.assignCheckbox=this.initialAssignCheckbox=!1},beforeDestroy:function(){this.isClickConfirm&&this.setDefaultParams()},methods:{getInitialMentions:function(){var e,t=(Ot(e={},st.group,this.deps.groups),Ot(e,st.user,this.deps.users),e);return this.initialMentions.reduce((function(e,n){var r=n.MentionGuid,i=n.MentionType,o=t[i].find((function(e){return e.id===r}));return e[o.id]=_t(_t({},o),{},{viewKey:ft(o)}),e}),{})},onCommentUpdate:function(){var e=this;this.removeUnusedMentions();var t=this.mentionsList.reduce((function(t,n){return n.mentionType===st.user&&t.userMentionList.push(n),n.id===e.assignedToUserId&&(t.isAssigned=!0),t}),{userMentionList:[]}),n=t.isAssigned,r=void 0!==n&&n,i=t.userMentionList;!r&&i.length&&(this.assignedToUserId=i[0].id,this.assignCheckbox=!1)},onApplyAll:function(e){var t=this;e.forEach((function(e){if(e=e.replace(/^@|[\s\uFEFF\xA0]+$/g,""),!t.mentions[e]&&!t.mentionsList.find((function(t){return t.email===e}))){var n={email:e,id:e,name:e,username:e,mentionType:st.user};n.viewKey=ft(n),t.$set(t.customEmails,n.email,n)}}))},textToHtml:function(e){return function(e,t){var n=ht(t);return pt(e,n)}(e,[].concat(Ct(this.mentionsList),Ct(Object.values(this.customEmails))))},cancel:function(){this.$emit("cancel")},onSearch:function(e){var t=e.key,n=e.searchText;t&&this.findUsersOrGroup(n)},onSuggestionsClose:function(){vt(this),this.deps.setTeamUsers([])},onSuggestionsOpen:function(){mt(this)},mapInsertMention:function(e){return[st.user,st.group].includes(e.mentionType)?e.name:""},commentToText:function(e){return function(e,t){var n=ht(t,!0);if(!n)return e;return e.replace(n.regex,(function(e){return n.map.get(e.toLowerCase())}))}(e,this.mentionsList).trim()},updateMentions:function(e,t){this.$set(this.mentions,e.id,_t(_t({},e),{},{viewKey:t}))},removeUnusedMentions:function(){var e=this;this.mentions=this.mentionsList.reduce((function(t,n){return e.commentText.includes(n.viewKey)&&(t[n.id]=n),t}),{})},filterByPayload:function(e,t){var n=e.toLowerCase();return t.filter((function(e){return e.name.toLowerCase().includes(n)}))},findUsersOrGroup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this.withDebounce.handleSearch(e,t)},handleSearch:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"deps",r=[];this.deps.analytics&&this.deps.analytics.dispatchMetricEventStart("Performance.Place.Comment.LoadSuggestions");var i={query:e,getWorkspaceUsersSuggestions:this.hasWorkspaceContext,getWorkspaceGroupsSuggestions:"deps"===n&&this.hasWorkspaceContext};this.deps.isWipSharingMode||this.isUpload?i.subjectGuid=this.deps.suggestionsContextGuid:i.projectGuid=this.deps.suggestionsContextGuid,this.deps.generateRequest?(r=this.deps.generateRequest(this.cancelableRequest,[this.deps.requestUserSuggestions],i),Promise.all(r).then((function(e){var r=bt(e,1)[0];t.processUsers(null==r?void 0:r.data,n)})).catch((function(e){console.log(e)}))):this.deps.requestUserSuggestions(i).then((function(e){var r=e.data;t.processUsers(r,n)})).catch((function(){}))},processUsers:function(e,t){var n=function(e){return Array.isArray(e)&&e.length?e.map((function(e){return{id:e.id,username:e.name,name:e.fullName||e.name,email:e.email,mentionType:1===e.suggestionType?st.group:st.user,avatarUrl:e.ProfilePicture?(t=e.ProfilePicture,t?"".replace("{name}",t).replace("{size}","px48x48"):""):""};var t})):[]}(e||[]);"deps"===t?this.deps.setTeamUsers(n):this.assigneeUserList=n,this.deps.analytics&&this.deps.analytics.dispatchMetricEventEnd("Performance.Place.Comment.LoadSuggestions")},onShortcut:function(e){"CtrlEnter"===e&&this.canConfirm&&this.onConfirm()},onConfirm:function(){var e=this;return gt(regeneratorRuntime.mark((function t(){var n,r,i,o,a,s,u,c,l,f,d,h,p,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isBusy=!0,e.isClickConfirm=!0,e.removeUnusedMentions(),n=lt(e.commentText).filter((function(t){return!e.mentions[t]})).map((function(e){return{email:e}})),r={Text:at(e.commentToText(e.commentText)),AssignedTo:!e.hideAssignedTo&&e.assignCheckbox?e.assignedToUserId:null,Mentions:[]},i=[],e.mentionsList.forEach((function(t){e.initialMentionsMap[t.id]||(r.Mentions.push({OperationType:"add",MentionGuid:t.id,MentionType:t.mentionType}),i.push(t))})),e.initialMentions.forEach((function(t){e.mentions[t.MentionGuid]||r.Mentions.push({OperationType:"remove",MentionGuid:t.MentionGuid,MentionType:t.MentionType})})),e.deps.requestUsers&&e.deps.requestUsers([e.assignedToUserId].concat(Ct(r.Mentions.map((function(e){return e.MentionGuid}))))),o=i.length||n.length,!e.deps.isCcvViewer||!o){t.next=30;break}return t.prev=11,a=i.reduce((function(e,t){return t.mentionType===st.user&&(e.ids.push(t.id),e.names.push(t.username)),e}),{ids:[],names:[]}),t.next=15,e.deps.checkProjectUsersPermission({ProjectGuid:e.isReleasePage?e.deps.packageId:e.deps.dataProjectSrc,Level:1,UsersIds:a.ids,UsersNames:Ct(new Set([].concat(Ct(a.names),Ct(n.map((function(e){return e.email}))))))});case 15:if(s=t.sent,(u=s.data)&&Array.isArray(u.UsersHavePermissions)&&u.UsersHavePermissions.forEach((function(t){t.UserId&&!e.mentions[t.UserId]&&r.Mentions.push({OperationType:"add",MentionGuid:t.UserId,MentionType:1})})),!u||!(u.CurrentUserCanShare||!u.CurrentUserCanShare&&e.isResharingEnabled)){t.next=24;break}for(f in c=[],l=(u.UsersHavePermissions||[]).reduce((function(e,t){return e[t.UserName]?e[t.UserName].push(t):e[t.UserName]=[t],e}),{}))(d=l[f]).find((function(e){return e.HasPermission}))||c.push({id:d[0].UserId,email:d[0].UserName});return t.next=24,e.handleSharing(c);case 24:t.next=30;break;case 26:t.prev=26,t.t0=t.catch(11),console.log(t.t0),"cancelSharing"===t.t0.message&&(e.cancelSharing=!0);case 30:if(!e.deps.isKernelViewer||!o){t.next=43;break}if(t.prev=31,p=null===(h=e.deps.projectDetails)||void 0===h?void 0:h.CanShare,m=i.reduce((function(t,n){return e.deps.accessListUsersMap.has((n.id||"").toLowerCase())||e.deps.accessListUsersMap.has((n.username||"").toLowerCase())||e.deps.accessListUsersMap.has((n.name||"").toLowerCase())||t.push({email:n.email}),t}),n.filter((function(t){return!e.deps.accessListUsersMap.has((t.email||"").toLowerCase())}))),!(p||!p&&e.isResharingEnabled)){t.next=37;break}return t.next=37,e.handleSharing(m);case 37:t.next=43;break;case 39:t.prev=39,t.t1=t.catch(31),console.log(t.t1),"cancelSharing"===t.t1.message&&(e.cancelSharing=!0);case 43:e.cancelSharing?e.setDefaultParams():e.$emit("submit",r);case 44:case"end":return t.stop()}}),t,null,[[11,26],[31,39]])})))()},setDefaultParams:function(){this.isBusy=!1,this.isClickConfirm=!1,this.cancelSharing=!1,this.assignCheckbox=this.initialAssignCheckbox=!this.areTasksEnabled,this.isAssignedDropdownOpen=!1,this.assignedToUserId=this.areTasksEnabled?this.deps.localUserId:null,this.clear()},handleSharing:function(e){var t=this;return gt(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.deps.enabledSharing&&e.length){n.next=2;break}return n.abrupt("return");case 2:return r=Symbol("modalPlaceholder"),mt(r),n.abrupt("return",new Promise((function(n,i){var o=function(){vt(r),n()};t.deps.parentEvents.emit.call(t,"modal-share-project:open",e);t.deps.parentEvents.on.call(t,"modal-share-project:close",(function e(){t.deps.parentEvents.off.call(t,"modal-share-project:close",e),t.deps.isKernelViewer&&t.deps.requestGetAccessListUser(),o()}))})));case 5:case"end":return n.stop()}}),n)})))()},onClickOpenDropdown:function(){var e=this;this.$refs.assignedToDropdown&&this.$refs.assignedToDropdown.open(this.$refs.assignedToBlock),this.isAssignedDropdownOpen=!0,this.$nextTick((function(){return e.$refs.assigneeSearch.focus()})),this.handleSearch("","assignee")},onClickCloseDropdown:function(){this.$refs.assignedToDropdown&&this.$refs.assignedToDropdown.close(),this.isAssignedDropdownOpen=!1,this.assigneeUserList=[],this.assigneeSearch=""},onClickAssignedTo:function(e){this.$refs.mentionsRef.appendMention(e),this.assignedToUserId=e.id,this.assignCheckbox=!0,this.onClickCloseDropdown()},clear:function(){this.commentText="",this.mentionCounter++}}},Et=(n(492),n(493),Object(P.a)(kt,Ie,[],!1,null,"612a1620",null));Et.options.__file="WebUI/VueJsComponentLibrary/src/components/CommentFormField/App.vue";var Tt=Et.exports,Pt=function(e,t,n){if(e||t)return t.map((function(t){var r,i;return i=t,null!=(r=e)&&Object.prototype.hasOwnProperty.call(r,i)&&(e[t].cancel(),delete e[t]),e[t]=t(n),e[t].call()}))};function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){jt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dt=window.__APP__.library.Vuex,It=Dt.mapState,Rt=Dt.mapGetters,Lt=Dt.mapMutations,Bt=Dt.mapActions,Nt=window.__APP__.analytics,Ut={name:"CommentForm",components:{CommentFormField:Tt},computed:Mt(Mt(Mt({},It(["isLoading","groups","activeCommentPosition","updatePostedThread"])),Rt(["teamUsers","users","accessListUsersMap","projectDetails"])),{},{commentBindProps:function(){return{activeCommentPosition:this.activeCommentPosition,deps:{accessListUsersMap:this.accessListUsersMap,analytics:Nt,analyticsSubject:c.c,checkProjectUsersPermission:u.c,dataProjectSrc:c.g,enabledSharing:c.i,generateRequest:Pt,globalUserId:c.j,groups:this.groups,isCcvViewer:c.n,isKernelViewer:c.q,isLoading:this.isLoading,isWipSharingMode:c.s,LicenseService:me.a,localUserId:c.u,packageId:c.v,parentEvents:K.a,projectDetails:this.projectDetails,requestGetAccessListUser:this.requestGetAccessListUser,requestUsers:this.requestUsers,requestUserSuggestions:u.l,setTeamUsers:this.setTeamUsers,suggestionsContextGuid:c.A,teamUsers:this.teamUsers,updatePostedThread:this.updatePostedThread,userName:c.D,users:this.users}}},hasCommentText:function(){return this.$refs.commentFormField.hasCommentText},hasTextChange:function(){return this.$refs.commentFormField.hasTextChange}}),methods:Mt(Mt(Mt({},Lt(["setTeamUsers"])),Bt(["requestUsers","requestGetAccessListUser"])),{},{onConfirm:function(){return this.$refs.commentFormField.onConfirm()}})},Ft=Object(P.a)(Ut,De,[],!1,null,null,null);Ft.options.__file="src/plugins/CommentPanel/view/components/CommentForm.vue";var $t=Ft.exports,Vt=function(e){var t=document.createElement("span");return t.innerHTML=e,t.innerText},zt=n(300),Gt=n(301);function Ht(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function Wt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ht(o,r,i,a,s,"next",e)}function s(e){Ht(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){Xt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zt=c.m||!c.z,Kt=window.__APP__.library.Vuex,Jt=Kt.mapState,Qt=Kt.mapGetters,en=Kt.mapMutations,tn=Kt.mapActions,nn={name:"CommentReplyItem",directives:{dropdown:je.a},components:{AfsText:_.a,UserInfo:s.a,Icon:h.a,CommentContextMenu:zt.a,ModalConfirmation:Ae.a,CommentForm:$t,ReleaseLink:M,Snapshot:Gt.a},props:{comment:{type:Object,required:!0},isResolved:{type:Boolean,default:!1},isMainComment:{type:Boolean,default:!1},isAssignedTo:{type:String,default:""},screenshotUrl:{type:String,default:""},releaseGuid:{type:String,default:""}},data:function(){return{isEdited:!1,isShort:!0,isTruncated:!1,hideAssignedTo:!1,dataPageUrl:c.f,dataProjectSrc:c.g,analyticsSubject:c.c}},computed:qt(qt(qt({},Jt(["activeCommentPosition","updatePostedThread","releases"])),Qt(["activeThreadId","groupsDictionary","usersDictionary"])),{},{currentReleases:function(){return Array.isArray(this.releases)?$(this.releases,this.releaseGuid):""},hasScreenshot:function(){return this.isMainComment&&this.screenshotUrl},mentions:function(){return this.comment.mentions||[]},contextMenuParams:function(){return{"hide-copy-link":!this.isMainComment,"hide-edit":!this.isCurrentUser||this.isResolved,"hide-delete":!(this.isCurrentUser||this.isAdministrator),"hide-convert":!me.a.getLicenseDetails(me.a.names.lightWeightTasks).isEnabled||!(this.isMainComment&&!this.isAssignedTo)}},isAdministrator:function(){return c.r},author:function(){var e,t,n,r,i={avatarUrl:(null===(e=this.comment)||void 0===e||null===(t=e.author)||void 0===t?void 0:t.avatarUrl)||"",name:(null===(n=this.comment)||void 0===n||null===(r=n.author)||void 0===r?void 0:r.name)||"",time:this.comment.date?b()(this.comment.date,{timeZoneOffset:Zt?null:0}):"no timestamp"};return i.time=this.comment.isEdited?"".concat(i.time,", edited"):i.time,i},isCurrentUser:function(){var e,t,n,r;return c.D&&(c.u&&c.u===(null===(e=this.comment)||void 0===e||null===(t=e.author)||void 0===t?void 0:t.id)||c.j&&c.j===(null===(n=this.comment)||void 0===n||null===(r=n.author)||void 0===r?void 0:r.id))},commentText:function(){var e;return(null===(e=this.comment)||void 0===e?void 0:e.text)||""},formatText:function(){return Object(O.textToPreviewHtml)(this.commentText,this.groupsDictionary,this.usersDictionary)}}),watch:{activeCommentPosition:{immediate:!0,deep:!0,handler:function(e){this.$refs.screenshotDropdown&&this.$refs.screenshotDropdown.closeDropdown()}},commentText:function(){this.checkIfTruncated()}},mounted:function(){this.checkIfTruncated()},methods:qt(qt(qt({},en(["setLoading","setUpdatePostedThread","setOpenModal","removeOpenModal"])),tn(["requestModifyThread","requestThreadRemove","requestRemoveComment","requestModifyComment"])),{},{checkIfTruncated:function(){var e=this;this.$nextTick((function(){e.isTruncated=!e.isEdited&&(e.$refs.replyItemText.$el&&e.$refs.replyItemText.$el.scrollHeight>e.$refs.replyItemText.$el.offsetHeight)}))},confirmDelete:function(){this.$refs.threadModal&&this.$refs.threadModal.open(),this.$refs.threadModal&&this.setOpenModal(this.$refs.threadModal)},onConfirmThreadCancel:function(){this.$refs.threadModal&&this.$refs.threadModal.close()},onConfirmThreadDelete:function(){this.isMainComment?this.onThreadDelete():this.onCommentRemove(),this.onConfirmThreadCancel()},onThreadDelete:function(){this.requestThreadRemove({threadId:this.activeThreadId})},onCommentRemove:function(){var e=this;this.setLoading(!0),this.requestRemoveComment({threadId:this.activeThreadId,commentId:this.comment.id}).finally((function(){e.setLoading(!1)}))},editComment:function(){this.isEdited=!0,this.$emit("edit",this.isEdited),this.isMainComment&&this.$emit("show-tools")},convertToTask:function(){var e=this;return Wt(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={threadId:e.activeThreadId,commentId:e.comment.id,value:{Text:"",AssignedTo:c.u,Mentions:[]}},t.prev=1,e.setLoading(!0),t.next=5,e.requestModifyThread(qt(qt({},n),{},{updateThread:e.updatePostedThread}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0);case 10:return t.prev=10,e.setLoading(!1),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[1,7,10,13]])})))()},closeEdit:function(){this.isEdited=!1,this.$emit("edit",this.isEdited),this.isMainComment&&this.$emit("hide-tools"),this.setUpdatePostedThread()},onConfirm:function(){return this.$refs.commentForm&&this.$refs.commentForm.onConfirm()},onUpdateSubmit:function(e){var t=this;return Wt(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.Text=Vt(e.Text),r={threadId:t.activeThreadId,commentId:t.comment.id,value:e},t.setLoading(!0),!(t.isMainComment||!t.isMainComment&&r.value.AssignedTo&&t.isAssignedTo!==r.value.AssignedTo)){n.next=6;break}return n.next=6,t.requestModifyThread(qt(qt({},r),{},{updateThread:t.updatePostedThread}));case 6:t.requestModifyComment(r).finally((function(){t.setLoading(!1),t.closeEdit()}));case 7:case"end":return n.stop()}}),n)})))()},hasTextChange:function(){return this.$refs.commentForm&&this.$refs.commentForm.hasTextChange},clickShowMore:function(){this.isShort=!this.isShort},copyLink:function(){K.a.emit("copy-link-to-thread",this.activeThreadId)}})},rn=(n(494),Object(P.a)(nn,Pe,[],!1,null,null,null));rn.options.__file="src/plugins/CommentPanel/view/components/CommentReplyItem.vue";var on=rn.exports,an=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.assignedTo?n("UserAvatar",{directives:[{name:"hint",rawName:"v-hint",value:{id:"assignedTo_"+e.id,delay:400},expression:"{ id: `assignedTo_${id}`, delay: 400 }"}],ref:"avatar",staticClass:"edit-comment__user-avatar",attrs:{img:e.assignedTo.avatarUrl,title:e.assignedTo.name,size:"sm",tag:"button"},on:{click:e.openUserSelect}}):e._e(),e._v(" "),n("ContextMenu",{attrs:{id:"assignedTo_"+e.id,modifiers:e.menuPosition,type:"hint"},scopedSlots:e._u([{key:"default",fn:function(){return[e._v("\n      "+e._s(e.assignedTo.name)+"\n    ")]},proxy:!0}])}),e._v(" "),n("ContextMenu",{ref:"dropdown",attrs:{type:"dropdown","max-height-limit":e.maxHeight,"init-width":e.initWidth,modifiers:e.menuPosition},on:{close:e.closeUserSelect},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.getBEMClass;return[n("div",{class:r("section")},[n("div",{class:r("item")},[n("div",{class:r("item-in")},[n("AfsSearch",{class:{"edit-comment__user-query_with-result":e.users.length},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}})],1)])]),e._v(" "),e.users.length?n("UserList",e._l(e.users,(function(t){return n("UserListItem",{key:t.id,attrs:{"avatar-url":t.avatarUrl,name:t.name,email:t.email},on:{click:function(n){return e.handleAssigneeSelect(t)}}})})),1):e._e(),e._v(" "),e.showEmptyText?n("div",{class:r("section")},[n("div",{class:r("item")},[n("div",{class:r("item-in")},[n("AfsText",{staticClass:"edit-comment__user-query-empty",attrs:{type:"single line"}},[e._v("\n              No results for your search\n            ")])],1)])]):e._e()]}}])})],1)};an._withStripped=!0;var sn=n(363),un=n.n(sn);function cn(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}var ln={name:"ModalEditCommentsSelectAssignee",components:{ContextMenu:x.a,UserList:Ue,UserListItem:Ge,AfsSearch:rt.a,AfsText:_.a,UserAvatar:I.a},directives:{hint:E.a},props:{assignedTo:{type:Object,required:!0,default:function(){}},threadGuid:{type:String,required:!0,default:""},activeThread:{type:Object,default:function(){return{}}}},data:function(){return{users:[],query:"",isLoading:!1,id:L()()}},computed:{maxHeight:function(){return 464},initWidth:function(){return 288},menuPosition:function(){return{y:"bottom",x:"start"}},withDebounce:function(){return{handleSearch:un()(this.handleSearch,1e3,!0)}},showEmptyText:function(){return!this.isLoading&&this.query.length>0&&this.users.length<=0},taskHrid:function(){var e,t;return(null===(e=this.activeThread)||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.LwTaskHrid)||""}},watch:{query:function(e){this.withDebounce.handleSearch(e)}},created:function(){this.taskHrid&&this.handleSearch("")},methods:{openUserSelect:function(){this.taskHrid&&this.$refs.dropdown.open(this.$refs.avatar)},closeUserSelect:function(){this.$refs.dropdown.close()},handleSearch:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var r,i,o,a,s,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,"function"==typeof n.$_previousRequestCancel&&n.$_previousRequestCancel(),r=Object(u.j)(e),i=r.call,o=r.cancel,n.$_previousRequestCancel=o,n.isLoading=!0,t.next=7,i();case 7:a=t.sent,s=a.data,c=void 0===s?[]:s,n.users=Object(l.c)(c),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),n.users=[],console.error("User fetch failed: ".concat(t.t0.message));case 17:return t.prev=17,n.isLoading=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,13,17,20]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){cn(o,r,i,a,s,"next",e)}function s(e){cn(o,r,i,a,s,"throw",e)}a(void 0)}))})()},handleAssigneeSelect:function(e){var t=this;Object(u.a)({threadId:this.threadGuid,userGuid:e.id}).then((function(){t.$emit("input",e)}))}}},fn=(n(495),Object(P.a)(ln,an,[],!1,null,null,null));fn.options.__file="src/plugins/CommentPanel/view/components/ModalEditCommentsSelectAssignee.vue";var dn=fn.exports,hn=n(286),pn=n(166),mn=n(171),vn=n(169),yn=n(172),gn=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"register",class:this.classList},[t("AfsText",{staticClass:"register__wrap"},[t("LibIcon",{staticClass:"register__logo",attrs:{name:"icon-logo",filled:""}}),this._v("\n    Register for Altium 365 to comment on the design\n  ")],1),this._v(" "),t("SignupButton",{staticClass:"register__btn",attrs:{"btn-props":{primary:!0,wide:this.vertical},url:this.link}},[this._v("\n    Register\n  ")])],1)};gn._withStripped=!0;var bn=n(222),wn=n(165),_n={name:"RegisterA365",components:{LibIcon:bn.default,SignupButton:wn.default,AfsText:_.a},props:{vertical:{type:Boolean,default:!1},hideBg:{type:Boolean,default:!1},link:{type:String,default:""}},computed:{classList:function(){return{"is-vertical":this.vertical,"is-bg-hide":this.hideBg}}}},On=(n(496),Object(P.a)(_n,gn,[],!1,null,"a148df34",null));On.options.__file="src/lib/commentPanel/components/RegisterA365.vue";var Cn=On.exports;function Sn(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(n),!0).forEach((function(t){En(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function En(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tn=window.__CORE__,Pn=window.__APP__.library.Vuex,An=Pn.mapState,Mn=Pn.mapGetters,jn=Pn.mapMutations,Dn=Pn.mapActions,In={name:"ModalEditComments",components:{CommentEditHeaderPanel:hn.a,Modal:yn.a,CommentReplyItem:on,CommentsTools:vn.a,CommentForm:$t,ModalDraggerTitle:mn.a,ModalEditCommentsSelectAssignee:dn,RegisterA365:Cn},props:{editModes:{type:Array,default:function(){return["area"]}}},data:function(){return{isOpened:!1,isEditing:!1,isCommentTools:!1,threadCommentTextChange:!1,modeText:!0,isBusy:!1,showAllComments:!1,isMovePosition:!1,moveModalPosition:{x:0,y:0},localUserId:c.u,globalUserId:c.j,menuStartHeight:200,threadEditOptions:null,hideAssignedTo:!1,isPaintMode:!1,formTmpKey:(new Date).getTime(),isAnonymous:c.m,sessionId:c.z,saveTo:c.y}},computed:kn(kn(kn({},An(["sortedThreads","activeCommentPosition","isLoading","updatePostedThread","isDrawing"])),Mn(["activeThreadId","activeThread","threads","users"])),{},{currentUser:function(){return{name:c.D,localId:this.localUserId,avatarUrl:c.B}},packageId:function(){var e;return(null===(e=this.activeThread)||void 0===e?void 0:e.packageId)||""},activeThreadComments:function(){var e;return(null===(e=this.activeThread)||void 0===e?void 0:e.comments)||[]},taskLink:function(){return C(this.packageId,this.taskId)},firstComment:function(){return!!this.activeThreadComments.length&&this.activeThreadComments[0]},lastComment:function(){return!!(this.activeThreadComments.length&&this.activeThreadComments.length>2)&&this.activeThreadComments[this.activeThreadComments.length-1]},shortListThreadComments:function(){var e=[];return this.activeThreadComments.length&&(e.push(this.firstComment),this.lastComment&&(e.push({type:"separator"}),e.push(this.lastComment))),e},listActiveThreadComments:function(){return this.activeThreadComments.length<3||this.showAllComments?this.activeThreadComments:this.shortListThreadComments},countHideComments:function(){return this.activeThreadComments.length-2},screenshotUrl:function(){var e;return(null===(e=this.activeThread)||void 0===e?void 0:e.screenshotUrl)||null},hasThreadComments:function(){return this.activeThreadComments.length},isAssignedTo:function(){var e;return(null===(e=this.activeThread)||void 0===e?void 0:e.assignedTo)||""},assignedToYou:function(){return this.isAssignedTo&&(this.isAssignedTo===this.localUserId||this.isAssignedTo===this.globalUserId)},assignedTo:function(){if(this.assignedToYou)return this.currentUser;var e=this.isAssignedTo||!1;return e&&this.users.find((function(t){return t.id===e}))||!1},isResolved:function(){var e;return(null===(e=this.activeThread)||void 0===e?void 0:e.resolved)||!1},modalCoords:function(){var e;return this.isMovePosition?this.moveModalPosition:Object(pn.a)({data:null===(e=this.activeCommentPosition)||void 0===e?void 0:e.iconRect,isTools:this.isCommentTools,menuStartHeight:this.menuStartHeight})},releaseGuid:function(){var e,t;return(null===(e=this.activeThread)||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.releaseGuid)||""},shouldShowReply:function(){return!this.isResolved&&!this.isEditing},taskId:function(){var e,t;return(null===(e=this.activeThread)||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.LwTaskId)||""},taskAvatarUrl:function(){return this.assignedTo.avatarUrl},taskAvatarName:function(){return this.assignedTo.name},isAnonym:function(){return this.isAnonymous||!this.sessionId}}),watch:{hasThreadComments:{immediate:!0,handler:function(e){e||this.close()}},activeCommentPosition:{immediate:!0,deep:!0,handler:function(e){this.isMovePosition=!1}}},methods:kn(kn(kn({},jn(["setLoading","setUpdatePostedThread","setIsDrawing","setOpenModal","removeOpenModal","closeAllModal"])),Dn(["requestModifyThread","requestAddComment","setActiveThreadId","requestResolveThread","setActiveThreadTaskStatus","setActiveThreadAssignee"])),{},{open:function(){this.isOpened||(this.isOpened=!0,this.modeText=!0,this.showAllComments=!1,this.isCommentTools=!1,this.isMovePosition=!1,this.moveModalPosition={x:0,y:0},this.$refs.modalEditComment&&this.$refs.modalEditComment.open(),this.setOpenModal(this),this.setStartMenuHeight())},close:function(){var e=this;this.isOpened?(this.isOpened=!1,this.$refs.commentReplyItem&&this.$refs.commentReplyItem.forEach((function(e){return e.onConfirmThreadCancel()})),this.$nextTick((function(){e.$refs.modalEditComment&&e.$refs.modalEditComment.close()})),this.removeOpenModal(this),this.isEditing=!1):this.activeThreadId&&this.onActiveThreadId(null)},onClose:function(){this.onActiveThreadId(null),this.setIsDrawing(!1)},onActiveThreadId:function(e){this.setActiveThreadId(e),window.__CORE__.bus.emit("CommentsDrawingEngine:activate",{id:e,zoomToFit:!0})},onReplySubmit:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.Text=Vt(e.Text),r={threadId:n.activeThreadId,value:e},n.setLoading(!0),!r.value.AssignedTo||n.isAssignedTo===r.value.AssignedTo){t.next=6;break}return t.next=6,n.requestModifyThread(kn(kn({},r),{},{updateThread:n.updatePostedThread}));case 6:if(e.Text){t.next=10;break}n.setLoading(!1),t.next=12;break;case 10:return t.next=12,n.requestAddComment(r).finally((function(){n.setLoading(!1)}));case 12:n.formTmpKey=(new Date).getTime();case 13:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){Sn(o,r,i,a,s,"next",e)}function s(e){Sn(o,r,i,a,s,"throw",e)}a(void 0)}))})()},onHandleResolve:function(){var e=this;this.$refs.commentReplyItem&&this.$refs.commentReplyItem.forEach((function(e){return e.closeEdit()})),this.setLoading(!0),this.requestResolveThread({threadId:this.activeThreadId,resolve:!this.isResolved}).catch((function(){e.setLoading(!1)})).finally((function(){e.isResolved||e.close()}))},showToggleCommentTools:function(){this.isCommentTools=!0,Tn.bus.emit("CommentsDrawingEngine:startEdit")},hideToggleCommentTools:function(){this.isCommentTools=!1},onPostThread:function(){var e=this;this.$refs.commentReplyItem&&this.$refs.commentReplyItem[0].onConfirm(),this.$nextTick((function(){return e.setActiveThreadId(null)}))},onCloseThreadEdit:function(){this.setModeText(!0),Tn.bus.emit("CommentsDrawingEngine:stopEdit"),this.$refs.commentReplyItem&&this.$refs.commentReplyItem[0].closeEdit()},onTaskStatusChange:function(e){var t=this;Object(u.b)(this.packageId,this.taskId,e.id).then((function(){t.setActiveThreadTaskStatus(e.name)}))},onCommentAssigneeChange:function(e){this.setActiveThreadAssignee(e)},hasCommentText:function(){this.threadCommentTextChange=this.$refs.commentReplyItem[0].hasTextChange},setModeText:function(e){this.modeText=e,e||this.hasCommentText()},clickShowAllComments:function(){this.showAllComments=!0},moveModal:function(e){this.moveModalPosition=e,this.isMovePosition=!0},setStartMenuHeight:function(){var e=this;this.$nextTick((function(){e.menuStartHeight=e.$refs.modalEditComment.$el.offsetHeight}))}})},Rn=(n(497),Object(P.a)(In,Te,[],!1,null,null,null));Rn.options.__file="src/plugins/CommentPanel/view/components/ModalEditComments.vue";var Ln=Rn.exports,Bn=n(289),Nn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AfsModal",{ref:"modalNotifications",attrs:{id:"modal-notifications",size:"sm"},on:{"after-close":e.onCancel}},[n("div",[n("div",{staticClass:"app-modal-notifications"},[n("div",{staticClass:"app-modal-notifications__header"},[n("AfsText",{attrs:{type:"title"}},[e._v(" Notification Settings ")])],1),e._v(" "),n("div",{staticClass:"app-modal-notifications__body"},[n("div",{staticClass:"app-modal-notifications__section"},[n("AfsText",[e._v("\n            Select which comments in this project you will receive email\n            notifications for.\n          ")])],1),e._v(" "),n("ul",{staticClass:"app-modal-notifications__section"},e._l(e.settings,(function(t){return n("li",{key:t.id,staticClass:"app-modal-notifications__checkbox"},[n("AfsRadio",{attrs:{"model-value":e.selectedSetting.text,value:t.text,name:"notifications"},on:{change:function(n){return e.onSettingsChange(n,t)}}},[n("AfsText",{attrs:{type:"paragraph",inline:""}},[e._v("\n                "+e._s(t.text)+"\n                "),t.description?n("AfsText",{staticClass:"app-modal-notifications__item-description",attrs:{type:"text",inline:""}},[e._v("\n                  "+e._s(t.description)+"\n                ")]):e._e()],1)],1)],1)})),0)]),e._v(" "),n("div",{staticClass:"app-modal-notifications__footer"},[n("AfsButton",{staticClass:"app-modal-notifications__footer-btn",attrs:{type:"button",primary:!0,disabled:!e.hasChanges,"is-busy":e.isUpdating},on:{click:function(t){return t.preventDefault(),e.onUpdate(t)}}},[e._v("\n          Update\n        ")]),e._v(" "),n("AfsButton",{staticClass:"app-modal-notifications__footer-btn",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.onCancel(t)}}},[e._v("\n          Cancel\n        ")])],1)])])])};Nn._withStripped=!0;var Un=n(88),Fn=n(199);function $n(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){Gn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hn=0,Wn=1,Yn=2,qn={0:"All",1:"My",2:"None"},Xn={name:"AppModaCommentsNotifications",components:{AfsModal:Un.a,AfsText:_.a,AfsRadio:Fn.a,AfsButton:a.a},props:{userSettings:{type:Object,required:!0,default:function(){return{}}},isUpdating:{type:Boolean,default:!1}},data:function(){return{isOpened:!1,hasChanges:!1,settings:[{id:Hn,isSelected:!1,text:"All"},{id:Wn,isSelected:!0,text:"My",description:"(you are involved in)"},{id:Yn,isSelected:!1,text:"None"}],tempSettings:""}},computed:{selectedSetting:function(){return this.settings.find((function(e){return e.isSelected}))}},watch:{userSettings:{immediate:!0,handler:function(e){var t=e.NotificationType;t&&qn[+t.Value]&&this.setSelectedSetting(+t.Value)}}},methods:{open:function(){this.tempSettings=JSON.stringify(this.settings),this.$refs.modalNotifications&&this.$refs.modalNotifications.open()},close:function(){this.hasChanges&&(this.settings=this.tempSettings&&JSON.parse(this.tempSettings)),this.setIsChanges(!1),this.tempSettings="",this.$refs.modalNotifications&&this.$refs.modalNotifications.close()},onSettingsChange:function(e,t){this.setIsChanges(!0),this.setSelectedSetting(t.id)},setSelectedSetting:function(e){this.settings=this.settings.map((function(t){return zn(zn({},t),{},{isSelected:t.id===e})}))},onUpdate:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$emit("update",[zn(zn({},t.selectedSetting),{},{name:"NotificationType"})]);case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){$n(o,r,i,a,s,"next",e)}function s(e){$n(o,r,i,a,s,"throw",e)}a(void 0)}))})()},onCancel:function(){this.close()},setIsChanges:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.hasChanges=e}}},Zn=(n(498),Object(P.a)(Xn,Nn,[],!1,null,null,null));Zn.options.__file="src/lib/commentPanel/components/ModalNotifications.vue";var Kn=Zn.exports,Jn=n(285),Qn=n(290),er=n(291),tr=n(292);function nr(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function rr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){nr(o,r,i,a,s,"next",e)}function s(e){nr(o,r,i,a,s,"throw",e)}a(void 0)}))}}function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){ar(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sr=window.__APP__.library.Vuex,ur=sr.mapActions,cr=sr.mapGetters,lr=sr.mapState,fr=sr.mapMutations,dr=window.__CORE__,hr={name:"CommentPanel",components:{AfsLink:o.a,ThreadList:Ee,AfsButton:a.a,AppHeader:Qn.a,ModalAddComments:Bn.a,ModalEditComments:Ln,ModalNotifications:Kn,AddCommentToast:er.a,RegisterA365:Cn,AppFilters:Jn.a,UserInfo:s.a,CommentForm:$t},data:function(){return{sessionId:c.z,isAnonymous:c.m,saveTo:c.y,isUpdatingNotifications:!1,isActiveAddComment:!1,commentsSurveyUrl:"https://surveys.hotjar.com/42c5e526-f34a-4dc1-80ad-ffb4bb4e0dd2",registerUrl:c.x,pluginName:"comments",threadOptions:null,threadCommentHasText:null}},computed:or(or(or({},lr(["activeViewTabs","userSettings","activeCommentPosition","isDrawing","updatePostedThread","isLoading"])),cr(["filters","threads"])),{},{hasThreads:function(){return this.threads.length},isAnonym:function(){return this.isAnonymous||!this.sessionId},currentUser:function(){return{name:c.D,localId:c.u,avatarUrl:c.B}},editModes:function(){return this.threadOptions&&this.threadOptions.disableCustomDraw?["area"]:["area","draw"]}}),mounted:function(){var e=this;this.$root.$on("open-modal-edit",this.openModalEdit),this.$root.$on("close-modal-edit",this.closeModalEdit),this.$root.$on("close-modal-add",this.onClosePlaceComment),dr.bus.on("CommentsDrawingEngine:cancelEdit",this.onCloseModalAddComment),dr.bus.on("CommentPanel:placeAComment",(function(){return e.onAddPlaceComment()})),dr.bus.on("CommentPanel:cancelAComment",this.onClosePlaceComment)},beforeDestroy:function(){this.$root.$off("open-modal-edit",this.openModalEdit),this.$root.$off("close-modal-edit",this.closeModalEdit),this.$root.$off("close-modal-add",this.onClosePlaceComment)},created:function(){!c.m&&c.z&&(this.requestGetAccessListUser(),c.q&&this.requestProjectDetails())},methods:or(or(or({},fr(["setActiveCommentPosition","setIsDrawing","setLoading","setOpenModal","removeOpenModal","closeAllModal"])),ur(["setActiveCommentControl","updateFilters","setCreateNewThread","requestGetUserSettings","requestGetAccessListUser","requestProjectDetails","requestAddThread"])),{},{onAddPlaceComment:function(){var e=this;if(!this.isActiveAddComment){this.setActiveCommentControl({}),this.$refs.addCommentToast&&this.$refs.addCommentToast.open(),this.isActiveAddComment=!0,dr.bus.on("CommentsDrawingEngine:didCreate",(function t(n){var r=n.data;dr.bus.off("CommentsDrawingEngine:didCreate",t),e.$refs.addCommentToast&&e.$refs.addCommentToast.close(),r?(r.on("WAIT_FOR_POST",(function(t){e.setCreateNewThread(!0),e.setActiveCommentPosition(t),e.$refs.modalAddComment&&(e.threadOptions=t.threadEditOptions,e.$refs.modalAddComment.open())})),r.on("REMOVE",(function(t){e.isActiveAddComment=!1,e.onCloseModalAddComment()})),r.on("UPDATE_ICON_POSITION",(function(t){setTimeout((function(){return e.setActiveCommentPosition(t)}),0)})),r.on("UPDATE_DRAWINGS",(function(t){e.setIsDrawing(!!t.count)}))):e.isActiveAddComment=!1}))}},onClosePlaceComment:function(){this.isActiveAddComment=!1,this.onCloseModalAddComment(),this.$refs.addCommentToast&&this.$refs.addCommentToast.close(),this.setActiveCommentControl(null),this.setCreateNewThread(!1)},onVisibilityChange:function(e){dr.bus.emit("CommentPanel:visibilityChange",e)},onChangeFilters:function(e){var t=this;return rr(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.updateFilters(e);try{Object(u.h)([e.forSave]),dr.bus.emit("CommentPanel:filterChange")}catch(e){console.error(e)}case 2:case"end":return n.stop()}}),n)})))()},openModalEdit:function(e){this.threadOptions=e,this.$refs.modalEditComments.open()},closeModalEdit:function(){this.$refs.modalEditComments.close(),this.threadOptions=null},onOpenNotificationsSettings:function(){this.$refs.modalNotificationsSettings&&this.$refs.modalNotificationsSettings.open()},onCloseModalAddComment:function(){this.$refs.modalAddComment&&this.$refs.modalAddComment.close(),this.setIsDrawing(!1),this.threadOptions=null},onUpdateNotificationsSettings:function(e){var t=this;return rr(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t.isUpdatingNotifications=!0,n.next=4,Promise.all([Object(u.h)(Object(l.e)(e)),t.resolveWithTimeout()]);case 4:if(t.$refs.modalNotificationsSettings){n.next=6;break}return n.abrupt("return");case 6:t.$refs.modalNotificationsSettings.setIsChanges(),t.$refs.modalNotificationsSettings.close(),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.error(n.t0);case 13:return n.prev=13,t.isUpdatingNotifications=!1,n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[0,10,13,16]])})))()},resolveWithTimeout:function(){return new Promise((function(e){return setTimeout(e,1500)}))},onConfirmCreateThread:function(){this.$refs.commentForm&&this.$refs.commentForm.onConfirm()},onCreateNewThread:function(e){var t=this;return rr(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.setLoading(!0),n.next=3,Object(tr.a)(t.threadOptions);case 3:r=n.sent,e.Text=Vt(e.Text),t.requestAddThread(or(or({},e),{},{screen:r})).finally((function(){t.setLoading(!1),t.onCloseModalAddComment()}));case 6:case"end":return n.stop()}}),n)})))()},hasCommentText:function(){this.threadCommentHasText=this.$refs.commentForm&&this.$refs.commentForm.hasCommentText}})},pr=(n(499),Object(P.a)(hr,i,[],!1,null,null,null));pr.options.__file="src/plugins/CommentPanel/view/App.vue";var mr=pr.exports,vr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContextMenu",{ref:"tooltip",attrs:{type:"hint",modifiers:{y:"bottom",x:"start"}},scopedSlots:e._u([{key:"default",fn:function(){return[n("AfsText",{staticClass:"comment-tooltip",attrs:{type:"tooltip"}},[e.computedTooltip.task?n("span",[e._v("\n        Task "+e._s(e.computedTooltip.task)+",\n        "),e.computedTooltip.assignedTo?n("span",[e._v("\n          assigned to "+e._s(e.computedTooltip.assignedTo)+"\n        ")]):e._e()]):n("span",[e._v("\n        Comment #"+e._s(e.computedTooltip.number)+", by "+e._s(e.computedTooltip.author)+"\n      ")])])]},proxy:!0}])})};function yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(n),!0).forEach((function(t){br(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function br(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}vr._withStripped=!0;var wr=window.__APP__.library.Vuex.mapGetters,_r={name:"AppTooltip",components:{AfsText:_.a,ContextMenu:x.a},computed:gr(gr({},wr(["tooltip"])),{},{computedTooltip:function(){return this.tooltip?this.tooltip:{value:""}}}),watch:{tooltip:{immediate:!0,handler:function(e){this.$refs.tooltip&&(e&&e.id?this.$refs.tooltip.showByCoordinates({x:e.x,y:e.y}):this.$refs.tooltip.close())}}}},Or=(n(500),Object(P.a)(_r,vr,[],!1,null,"315cb24a",null));Or.options.__file="src/plugins/CommentPanel/view/AppTooltip.vue";var Cr=Or.exports,Sr=window.__APP__,xr=n(167),kr=n(168);function Er(e){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tr(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function Pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ar(e,t){return(Ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dr(e);if(t){var i=Dr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return jr(this,n)}}function jr(e,t){if(t&&("object"===Er(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Dr(e){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ir=function(){return me.a.getLicenseDetails(me.a.names.lightWeightTasks).isEnabled},Rr=c.m||!c.z;function Lr(e,t,n){return new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ar(e,t)}(f,e);var i,o,a,s,u,l=Mr(f);function f(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=l.call(this,{name:"CommentPanel",displayIcon:"comment-bubble-text",comment:"CommentPanel",description:"CommentPanel",dependencies:["comment.engine"],hint:Ir()?"Comments and Tasks":"Comments",order:1,owner:t,localType:"primary",view:{type:"modal",title:Ir()?"Comments and Tasks":"Comments",config:{type:"aside-right",hasCloseOnOutsideClick:!1,hasCustomHeader:!0}}})).engineCreator=n,e.viewTabs={SCHView:"",PCBDWFView:"",PCBView:"",PCBView3D:"",GerberView:"",LsmView:"",FBOM:""},e.isHidden=!1,e}return i=f,(o=[{key:"events",get:function(){return["CommentPanel:requestAddThread","CommentPanel:didViewChange","CommentPanel:didDocumentChanged","CommentPanel:didCommentEditCompleted","CommentPanel:filterChange","CommentPanel:visibilityChange","CommentPanel:initView","CommentPanel:placeAComment","CommentPanel:cancelAComment","CommentPanel:showPanelWhenNoComments"]}},{key:"hidden",get:function(){return this.isHidden}},{key:"setupDrawingEngine",value:(s=regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.bus.on("CommentsDrawingEngine:cancelEdit",(function(e){Object(r.n)(!1)})),t.bus.on("CommentsDrawingEngine:changeActiveState",(function(e){Object(r.n)(!1),e&&!n.hasView&&n.initView(),Object(r.l)(e),t.bus.emit("CommentsDrawingEngine:activate",{id:e,zoomToFit:!1})})),t.bus.on("CommentsDrawingEngine:didCreate",(function(e){var t=e.data;t?Object(r.k)(t):Object(r.i)(null)})),t.bus.on("CommentsDrawingEngine:documentClick",(function(e){Object(r.a)()})),i=void 0,i=document.createElement("div"),document.body.appendChild(i),new Sr.library.Vue({store:r.b,data:{afsConfig:{assets:"assets/"}},render:function(e){return e(Cr)}}).$mount(i),t.bus.on("CommentsDrawingEngine:showTooltip",(function(e){Object(r.u)(e)})),t.bus.on("CommentsDrawingEngine:hideTooltip",(function(e){Object(r.d)()})),t.bus.on("CommentsDrawingEngine:didAdd",(function(e){var t=e.data;t&&(t.on("PROGRESS_ACTIVE",(function(e){e.iconRect&&Object(r.j)(e)})),t.on("RESOLVE_ACTIVE",(function(e){e.iconRect&&Object(r.j)(e)})),t.on("UPDATE_ICON_POSITION",(function(e){setTimeout((function(){return Object(r.j)(e)}),0)})),t.on("UPDATE_DRAWINGS",(function(e){Object(r.q)(!!e.count)})),t.on("UPDATE_THREAD",(function(e){Object(r.s)(e)})))})),e.next=10,t.engines.CommentsDrawingEngine.setupComment(this.engineCreator?this.engineCreator(r.b):null,{store:r.b,colorPickerData:xr.a,lineThicknessData:kr.a,getActiveThreads:v});case 10:if(!Rr){e.next=15;break}return e.next=13,Object(r.g)();case 13:e.next=17;break;case 15:return e.next=17,Object(r.f)();case 17:if(c.a&&setTimeout((function(){t.bus.emit("CommentsDrawingEngine:activate",{id:c.a,zoomToFit:!0,callback:function(e){e&&(Object(r.l)(c.a),t.bus.emit("CommentPanel:enable"))}})}),0),Rr){e.next=21;break}return e.next=21,Object(r.h)();case 21:case"end":return e.stop()}var i}),e,this)})),u=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=s.apply(e,t);function o(e){Tr(i,n,r,o,a,"next",e)}function a(e){Tr(i,n,r,o,a,"throw",e)}o(void 0)}))},function(e){return u.apply(this,arguments)})},{key:"setup",value:function(e){var n=this;return c.p?(this.setPluginHidden(!0,e),Promise.resolve()):(Object(r.p)(),e.bus.on("CommentPanel:filterChange",(function(t){return e.bus.emit("CommentsDrawingEngine:filterChange")})),e.bus.on("CommentPanel:visibilityChange",(function(t){return e.bus.emit("CommentsDrawingEngine:visibilityChange",t)})),e.bus.on("CommentPanel:didCommentEditCompleted",(function(){return Object(r.i)(null)})),e.bus.on("CommentPanel:initView",(function(e){n.activate()})),e.bus.on("SCHView:documentChanged",(function(e){Object(r.o)(e),n.viewTabs.SCHView=e})),e.bus.on("PCBView:documentChanged",(function(e){Object(r.o)(e),n.viewTabs.PCBView=e,n.viewTabs.PCBView3D=e})),e.bus.on("PCBDWFView:documentChanged",(function(e){Object(r.o)(e.documentId)})),e.bus.on("LSMView:documentChanged",(function(e){Object(r.o)("Lsm"),n.viewTabs.LsmView="Lsm"})),e.bus.on("ParentConnection:documentChange",(function(){Object(r.a)()})),e.bus.on("ParentConnection:variantsChange",(function(){Object(r.a)()})),e.bus.on("View:activate",(function(i){var o=i.name;n.activeView=o,t.toLowerCase().includes(o.toLowerCase())?n.isOpened&&n.setViewsPadding():e.bus.emit("CommentPanel:disable"),Object(r.m)(o);var a=n.viewTabs[o]||!1;a&&Object(r.o)(a)})),e.bus.on("Views:update",(function(e){Object(r.t)(e.map((function(e){return e.text})))})),e.bus.on("CommentPanel:disable",(function(){Object(r.a)()})),e.bus.on("CommentPanel:showPanelWhenNoComments",(function(){Object(r.c)()||e.bus.emit("CommentPanel:enable")})),e.bus.on("Modal:panelWidth",(function(e){var t=e.id,r=e.width;"CommentPanel"===t&&n.setViewsPadding(r)})),K.a.on("View:setViewerDocuments",(function(e){e.data&&Object(r.r)(e.data)})),K.a.on("CommentPanel:updateAllThreads",(function(){Rr?Object(r.g)():Object(r.f)()})),K.a.on("CommentPanel:setActiveThread",(function(t){t.data&&e.bus.emit("CommentsDrawingEngine:activate",{id:t.data,zoomToFit:!0,callback:function(n){n&&(Object(r.l)(t.data),e.bus.emit("CommentPanel:enable"))}})})),K.a.on("CommentPanel:sendActiveThread"),K.a.on("CommentPanel:triggerUpdateAllThreads"),Object(r.e)(),function(e){var t=!1,n=!1,r=function(){var r=e.views.LSMView;r&&(t&&n?r.lockPlugin("CommentPanel"):r.lockPlugin(""))};e.bus.on("CommentPanel:activate",(function(i){t=!0,r(),n&&e.bus.emit("Views:updatePadding",{top:32,right:240})})),e.bus.on("CommentPanel:deactivate",(function(i){t=!1,r(),n&&e.bus.emit("Views:updatePadding",{top:0,right:0})})),e.bus.on("CommentPanel:disable",(function(i){t=!1,r(),n&&e.bus.emit("Views:updatePadding",{top:0,right:0})})),e.bus.on("View:activate",(function(i){"LSMView"===i.name&&(n=!0,r(),t&&e.bus.emit("Views:updatePadding",{top:32,right:240}))})),e.bus.on("View:deactivate",(function(e){"LSMView"===e.name&&(n=!1,r())}))}(e),this.setupDrawingEngine(e),Promise.resolve())}},{key:"initView",value:function(){var e;this.hasView=!0,this.view=(e=this.metaInfo.name,new Sr.library.Vue({store:r.b,data:{afsConfig:window.__APP__.afsConfig},render:function(e){return e(mr)}}).$mount("#".concat(e)))}},{key:"activate",value:function(){this.hasView||this.initView(),this.isOpened=!0,this.setViewsPadding()}},{key:"setPluginHidden",value:function(e,t){this.isHidden=e,t.bus.emit("CommentPanel:updateInterface",{hidden:e})}},{key:"getOffsetWidth",value:function(e){var t=document.querySelector('[data-modal-id="'.concat(e,'"]'));return(null==t?void 0:t.offsetWidth)||0}},{key:"setViewsPadding",value:function(e){if("FBOM"===this.activeView){var t=this.isOpened&&!this.isHidden?e||this.getOffsetWidth(this.metaInfo.name)||this.getOffsetWidth("DetailsPanel"):0;window.__CORE__.bus.emit("Views:updatePadding",{right:t})}}},{key:"deactivate",value:function(){this.isOpened=!1,this.setViewsPadding()}}])&&Pr(i.prototype,o),a&&Pr(i,a),Object.defineProperty(i,"prototype",{writable:!1}),f}(e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return mt}));var r,i,o=0,a=1,s=2,u=3,c={10:"all",12:"demand"},l=10,f=12,d={Error:0,Progress:1,Complete:2},h="Pdf_Sch",p="Step",m="Bom",v="AssemblyDoc",y="Gerber",g="Ansys",b=n(8),w=n.n(b),_=n(74),O=n.n(_),C=n(26),S=window.__CORE__,x=function(e){var t=[],n=ae();return n&&t.push(k(n)),t.push(T(e)),(null==n?void 0:n.releases)&&t.push(M(n.releases,n.baseMfgUrl)),t},k=function(e){return{id:w()(),title:{text:"Project Source Files"},isSource:!0,items:[A({name:null==e?void 0:e.projectName,icon:"project-pcb-16",status:u,isSource:!0,url:null==e?void 0:e.exportUrl,analyticsEvent:"Design",hint:E(e),fileName:"".concat(null==e?void 0:e.projectName,".zip")})]}},E=function(e){var t="";(null!=e&&e.lastModified||null!=e&&e.modifiedDisplayName)&&(t="last modified "+[(null==e?void 0:e.modifiedDisplayName)&&"by ".concat(e.modifiedDisplayName)||"",(null==e?void 0:e.lastModified)&&O()(null==e?void 0:e.lastModified,{timeZoneOffset:0})||""].filter(Boolean).join(", "));return[null==e?void 0:e.projectName,t].filter(Boolean).join(" ")},T=function(e){var t,n=(null==e||null===(t=e.currentVariant)||void 0===t?void 0:t.name)||"No variants";return{id:w()(),title:{text:"Derived Files"},isSource:!1,items:P(e,n)}},P=function(e,t){var n,r,i,o,a,s,u,c,l,f,b,w,_,O,x,k,E,T,P,M,j,D,I,R,L,B,N,U,F,$,V,z,G=[],H=!(null===(n=S.response)||void 0===n||null===(r=n.metadata)||void 0===r||!r.pcbDocument),W=!(null===(i=S.response)||void 0===i||null===(o=i.metadata)||void 0===o||null===(a=o.schDocuments)||void 0===a||!a.length),Y=!(null===(s=S.response)||void 0===s||null===(u=s.metadata)||void 0===u||!u.draftsman),q=null===(c=C.a.getLicenseDetails(C.a.names.killSwitch_Simulation_Download_Edb))||void 0===c?void 0:c.isEnabled;return H&&G.push(A({name:"Gerber",icon:"gerber-16",status:null==d?void 0:d[null==e||null===(l=e.files)||void 0===l||null===(f=l[y])||void 0===f?void 0:f.status],type:y,url:(null==e||null===(b=e.files)||void 0===b||null===(w=b[y])||void 0===w?void 0:w.url)||null,analyticsEvent:"Gerber",hint:"Gerber",noVariant:!0,fileName:"Gerber.zip"})),H&&q&&G.push(A({name:"Ansys EDB",icon:"ansys-edb-16",status:null==d?void 0:d[null==e||null===(_=e.files)||void 0===_||null===(O=_[g])||void 0===O?void 0:O.status],type:g,url:(null==e||null===(x=e.files)||void 0===x||null===(k=x[g])||void 0===k?void 0:k.url)||null,analyticsEvent:"EDB",hint:"Ansys EDB",noVariant:!0,fileName:"AnsysEDB"})),H&&G.push(A({name:"Assembly Docs",shortName:"Assembly",icon:Y?"draftsman-document-template":"assembly-16",status:null==d?void 0:d[null==e||null===(E=e.files)||void 0===E||null===(T=E[v])||void 0===T?void 0:T.status],type:v,url:(null==e||null===(P=e.files)||void 0===P||null===(M=P[v])||void 0===M?void 0:M.url)||null,analyticsEvent:"Assembly",hint:Y?"Full documentation generated from project Draftsman document":"Assembly Drawings generated only. Full documentation requires a Draftsman document.",noVariant:Y,fileName:Y?"Draftsman.pdf":"Assembly Drawings_".concat(t,".pdf")})),W&&G.push(A({name:"PDF Schematic",shortName:"PDF",icon:"schematic-16",status:null==d?void 0:d[null==e||null===(j=e.files)||void 0===j||null===(D=j[h])||void 0===D?void 0:D.status],type:h,url:(null==e||null===(I=e.files)||void 0===I||null===(R=I[h])||void 0===R?void 0:R.url)||null,analyticsEvent:"SCH.PDF",hint:"Download PDF Schematic_".concat(t),fileName:"Schematic PDF_".concat(t,".pdf")})),H&&G.push(A({name:"STEP",icon:"mcad-16",status:null==d?void 0:d[null==e||null===(L=e.files)||void 0===L||null===(B=L[p])||void 0===B?void 0:B.status],type:p,url:(null==e||null===(N=e.files)||void 0===N||null===(U=N[p])||void 0===U?void 0:U.url)||null,hint:"Download STEP_".concat(t),analyticsEvent:"STEP",fileName:"STEP_".concat(t,".step")})),G.push(A({name:"BOM",icon:"bom-16",status:null==d?void 0:d[null==e||null===(F=e.files)||void 0===F||null===($=F[m])||void 0===$?void 0:$.status],type:m,url:(null==e||null===(V=e.files)||void 0===V||null===(z=V[m])||void 0===z?void 0:z.url)||null,hint:"Download BOM_".concat(t),analyticsEvent:"BOM",fileName:"BOM_".concat(t,".csv")})),G},A=function(e){var t=e.name,n=e.icon,r=e.iconFilled,i=void 0===r||r,o=e.status,a=void 0===o?0:o,s=e.type,u=e.url,c=e.isSource,l=void 0!==c&&c,f=e.hint,d=void 0===f?"":f,h=e.analyticsEvent,p=e.link,m=void 0===p?null:p,v=e.fileName,y=void 0===v?"":v,g=e.noVariant,b=void 0!==g&&g,_=e.shortName,O=void 0===_?"":_;return{id:w()(),name:t,icon:n,iconFilled:i,status:a,type:s,url:u,isSource:l,hint:d,analyticsEvent:h,link:m,fileName:y,noVariant:b,shortName:O}},M=function(e,t){return{id:w()(),title:{isPrimary:!0,text:"Releases"},isSource:!1,items:j(e,t),hasLimitedItems:!0}},j=function(e,t){var n=[];for(var r in e){var i=D(e[r]);n.push({id:w()(),name:r,link:t+i.srcGUID,hint:i.hintText,description:O()(i.date,{timeZoneOffset:0}),color:i.assemblyColor})}return n},D=function(e){return e.reduce((function(e,t){var n,r,i;return e.hintText+="".concat(e.hintText?", ":"").concat(t.pcbAssemblyHRID||t.srcHRID),e.date||(e.date=t.date),e.assemblyColor||(e.assemblyColor=(null===(n=t.releaseItems.find((function(e){return"Assembly"===e.type})))||void 0===n?void 0:n.color)||(null===(r=t.releaseItems.find((function(e){return"Fabrication"===e.type})))||void 0===r?void 0:r.color)||(null===(i=t.releaseItems.find((function(e){return"Source"===e.type})))||void 0===i?void 0:i.color)),e.srcGUID||(e.srcGUID=t.srcGUID),e}),{hintText:"",date:null,assemblyColor:"",srcGUID:""})},I=function(e){return e.reduce((function(e,t){return e[t.kind]||(e[t.kind]=t),t.statusId=d[t.status],e}),{})},R=window.__CORE__,L=function(){var e,t,n,r,i,o,a,s={noVariation:[],variation:[]},u=!(null===(e=R.response)||void 0===e||null===(t=e.metadata)||void 0===t||!t.pcbDocument),c=!(null===(n=R.response)||void 0===n||null===(r=n.metadata)||void 0===r||null===(i=r.schDocuments)||void 0===i||!i.length),l=!(null===(o=R.response)||void 0===o||null===(a=o.metadata)||void 0===a||!a.draftsman);return c&&s.variation.push(h),u&&(l?s.noVariation.push(v):s.variation.push(v))&&s.variation.push(p)&&s.noVariation.push(y)&&s.noVariation.push(g),s.variation.push(m),s},B=function(e,t){var n=L();return n.noVariation.length&&n.noVariation.includes(e)?"No_Variant_Unique_Id":t},N=n(9),U=window.__CORE__,F=Object(N.c)("data-subject-guid","")||(null===(r=U.response)||void 0===r||null===(i=r.designId)||void 0===i?void 0:i.toUpperCase())||"",$=Object(N.c)("data-session-id",""),V=Object(N.c)("data-parent-url",""),z=Object(N.c)("data-local-user-id",""),G=n(204),H=function(){return Object(G.a)({baseURL:"https://viewer.altium.com/api/outputter/",type:"json",withCredentials:!1,headers:W()})};function W(){var e={"X-Auth":"".concat($)};return V||(e.projectid=F),e}var Y=function(e,t){return H().get("list/".concat(F),{params:{type:e,variant:t,urlScheme:window.currentHttpScheme}})};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}var J={requestExportData:function(e,t){return(n=regeneratorRuntime.mark((function n(){var r,i,o,a,s,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=t.data,i=t.forceUpdate,o=L(),r.files={},a=[],o.noVariation.length&&(s=o.noVariation.join(","),a.push(Y(s,"No_Variant_Unique_Id"))),u=o.variation.join(","),a.push(Y(u,e.state.currentVariantId)),Promise.all(a).then((function(t){t.forEach((function(e){r.files=X(X({},r.files),I(e.data))}));var n=x(r);if(!e.state.sections.length||i)e.commit("setExportData",n);else{var o=e.state.sections.map((function(e){return X(X({},e),{},{items:e.items.map((function(e){var t,n,i,o,a,s;return X(X({},e),{},{status:e.type&&(null===(t=r.files)||void 0===t||null===(n=t[e.type])||void 0===n?void 0:n.kind)===e.type&&(null===(i=r.files)||void 0===i||null===(o=i[e.type])||void 0===o?void 0:o.statusId)!==e.status?r.files[e.type].statusId:e.status,url:(null===(a=r.files)||void 0===a||null===(s=a[e.type])||void 0===s?void 0:s.url)||e.url})}))})}));e.commit("setExportData",o)}e.commit("setStatusData",Z({},e.state.currentVariantId,n.reduce((function(e,t){return t.items.forEach((function(t){return e.push(X(X({},t),{},{autoDownload:!i}))})),e}),[])))})).catch((function(e){return console.error(e)}));case 8:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(e){K(o,r,i,a,s,"next",e)}function s(e){K(o,r,i,a,s,"throw",e)}a(void 0)}))})();var n},requestDownload:function(e,t){var n,r,i,o=t.data,a=t.id,s=B(o.type,e.state.currentVariantId);try{!function(e,t,n){H().get("export/".concat(F),{params:{url:n.exportUrl,type:e,variant:t,email:n.userEmail,userId:z,projectHrid:n.projectHrid,projectName:n.projectName,urlScheme:window.currentHttpScheme}})}(o.type,s,e.state.data)}catch(e){console.error(e)}!(null===(n=e.state)||void 0===n||null===(r=n.statusData)||void 0===r||null===(i=r[s])||void 0===i?void 0:i.some((function(e){return 1===e.status})))&&e.commit("setFirstProcessing",o);var u=e.state.sections.map((function(e){return X(X({},e),{},{items:e.id===a?e.items.map((function(e){return X(X({},e),{},{status:e.id===o.id?1:e.status})})):e.items})}));e.commit("setExportData",u),e.commit("setStatusData",Z({},e.state.currentVariantId,u.reduce((function(e,t){return t.items.forEach((function(t){return e.push(t)})),e}),[])))}};function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=new(0,window.__APP__.library.Vuex.Store)({state:{sections:[],currentVariantId:"",data:{},statusData:{},firstProcessing:{},footerLinks:[{id:"vote",text:"Vote for New Format",icon:"checkmark-square-16",link:"https://surveys.hotjar.com/92644e3f-4265-436e-81e6-652049871a8b"},{id:"help",text:"How It Works",icon:"question-16",link:"https://www.altium.com/documentation/altium-designer/altium-365-workspace-web-viewer#!downloading"}],enabledFooterLinks:[],disabledKind:null},mutations:{setExportData:function(e,t){e.sections=t},setVariantId:function(e,t){e.currentVariantId=t},setData:function(e,t){e.data=t},setStatusData:function(e,t){e.statusData=ee(ee({},e.statusData),t)},setFirstProcessing:function(e,t){e.firstProcessing=t},setEnabledFooterLinks:function(e,t){e.enabledFooterLinks=t},setDisabledKind:function(e,t){e.disabledKind=t}},actions:J,getters:{getFooterLinks:function(e){return e.footerLinks.filter((function(t){return e.enabledFooterLinks.includes(t.id)}))}}}),re=function(e,t){return ne.dispatch("requestExportData",{data:e,forceUpdate:t})},ie=function(e){return ne.commit("setVariantId",e)},oe=function(e){return ne.commit("setData",e)},ae=function(){return ne.state.data},se=ne,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"export",staticClass:"app-export"},[n("BaseHeader"),e._v(" "),e.sections.length&&e.data.canDownload?n("div",{staticClass:"app-export__content"},[n("div",{staticClass:"app-export__sections"},e._l(e.visibleSections,(function(t){return n("ExportSection",{key:t.id,attrs:{section:t},on:{"click-btn":e.onClickBtn}})})),1),e._v(" "),e.hasFooter?n("BaseFooter"):e._e()],1):e._e(),e._v(" "),e.data.canDownload?e._e():n("div",{staticClass:"forbidden"},[n("div",{staticClass:"forbidden__icon"},[n("AfsIcon",{attrs:{size:"lg",name:"download-v2-16"}})],1),e._v(" "),n("div",{staticClass:"forbidden__text"},[e._v("\n      You don't have permissions to download project files\n    ")])]),e._v(" "),n("AfsSnackbar",{ref:"exportSnackbar",staticClass:"app-export__snackbar",attrs:{autoclose:"","autoclose-delay":"5000"},scopedSlots:e._u([{key:"icon",fn:function(){return[n("AfsIcon",{attrs:{name:e.snackbarIcon,filled:""}})]},proxy:!0},{key:"default",fn:function(){return[e._v("\n      "+e._s(e.snackbarText)+"\n    ")]},proxy:!0}])})],1)};ue._withStripped=!0;var ce=n(105),le=n(5),fe=n(223),de=n.n(fe),he=n(201),pe=function(){var e=this.$createElement;return(this._self._c||e)("AfsSubHeader",{staticClass:"app-export-header",attrs:{center:!1}},[this._v("\n  Download\n")])};pe._withStripped=!0;var me={name:"AppBaseHeader",components:{AfsSubHeader:n(65).a}},ve=(n(501),n(0)),ye=Object(ve.a)(me,pe,[],!1,null,null,null);ye.options.__file="src/plugins/Export/view/components/BaseHeader.vue";var ge=ye.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-export-section",attrs:{id:"app-export-section"}},[n("div",{staticClass:"app-export-section__title-container"},[e.section.title.text?n("AfsText",{staticClass:"app-export-section__title",attrs:{tag:"span",ellipsis:"",type:"title"}},[e._v("\n      "+e._s(e.section.title.text)+"\n    ")]):e._e()],1),e._v(" "),e.section.items.length?n("div",{staticClass:"app-export-section__item-list"},[e._l(e.computedItems,(function(t){return n("DownloadItem",{key:t.id,attrs:{item:t,"section-id":e.section.id,"disabled-kind":e.disabledKind,"has-loading-label":e.hasProcessingLabel(t)},on:{"click-btn":e.onClickBtn}})})),e._v(" "),e.hasShowMore?n("div",{staticClass:"app-export-section__show-more"},[n("AfsLink",{on:{click:e.toggleShowMore}},[e._v("\n        "+e._s(e.showMore?"Show More":"Show Less")+"\n      ")])],1):e._e()],2):e._e()])};be._withStripped=!0;var we=n(3),_e=n(25),Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-export-item-container"},[n("button",{staticClass:"app-export-item",attrs:{disabled:e.isDisabled},on:{click:e.onClickBtn}},[e.item.icon?n("AfsIcon",{staticClass:"app-export-item__icon",attrs:{name:e.item.icon,filled:e.item.iconFilled}}):e._e(),e._v(" "),e.item.color?n("span",{staticClass:"app-export-item__color",style:{background:e.item.color}}):e._e(),e._v(" "),e.item.name&&!e.item.link?n("AfsText",{directives:[{name:"trim",rawName:"v-trim",value:!e.item.hint&&{id:e.hintId,hint:e.item.name,delay:50},expression:"!item.hint && { id: hintId, hint: item.name, delay: 50 }"},{name:"hint",rawName:"v-hint",value:e.item.hint&&{id:e.hintId,delay:100,onOpen:e.onHintOpen(e.item),onClose:e.onHintClose()},expression:"\n        item.hint && {\n          id: hintId,\n          delay: 100,\n          onOpen: onHintOpen(item),\n          onClose: onHintClose()\n        }\n      "}],staticClass:"app-export-item__name",attrs:{tag:"span"}},[e._v(e._s(e.item.name))]):e._e(),e._v(" "),e.item.link?n("AfsLink",{directives:[{name:"hint",rawName:"v-hint",value:e.item.hint&&{id:e.hintId,delay:100,onOpen:e.onHintOpen(e.item),onClose:e.onHintClose()},expression:"\n        item.hint && {\n          id: hintId,\n          delay: 100,\n          onOpen: onHintOpen(item),\n          onClose: onHintClose()\n        }\n      "}],staticClass:"app-export-item__link",attrs:{href:e.item.link,target:"_blank"}},[e._v(e._s(e.item.name))]):e._e(),e._v(" "),e.item.description?n("AfsText",{staticClass:"app-export-item__description",attrs:{tag:"span"}},[e._v(e._s(e.item.description))]):e._e(),e._v(" "),"number"==typeof e.item.status&&1!==e.item.status?n("button",{staticClass:"app-export-item__btn",class:{"is-visible":e.isChecked},attrs:{disabled:e.isDisabled},on:{click:function(t){return t.stopPropagation(),e.onClickBtn()}}},[n("AfsIcon",{attrs:{name:e.statusIcon}})],1):e._e(),e._v(" "),1===e.item.status?n("AfsLoader",{directives:[{name:"hint",rawName:"v-hint",value:{id:e.hintId,delay:100,onOpen:e.onHintOpen(),onClose:e.onHintClose()},expression:"{\n        id: hintId,\n        delay: 100,\n        onOpen: onHintOpen(),\n        onClose: onHintClose()\n      }"}],staticClass:"app-export-item__loader"}):e._e()],1),e._v(" "),e.hasLoadingLabel?n("div",{staticClass:"app-export-item__desc"},[e._v("\n    "+e._s(e.loadingText)+"\n  ")]):e._e(),e._v(" "),n("AfsContextMenu",e._b({ref:e.menuId},"AfsContextMenu",e.hintConfig,!1),[e.hintText?n("div",{staticClass:"app-export-item__hint"},[e._v("\n      "+e._s(e.hintText)+"\n    ")]):e._e()])],1)};Oe._withStripped=!0;var Ce=n(10),Se=n(43),xe=n(21),ke=n.n(xe),Ee=n(91),Te=n.n(Ee),Pe={name:"DownloadItem",components:{AfsText:we.a,AfsIcon:le.a,AfsLink:_e.a,AfsContextMenu:Ce.a,AfsLoader:Se.a},directives:{hint:ke.a,trim:Te.a},props:{item:{type:Object,default:function(){return{}}},hasLoadingLabel:{type:Boolean,default:!0},sectionId:{type:String,default:""},disabledKind:{type:String,default:""}},data:function(){return{hintId:w()(),hintText:null,menuId:w()(),isChecked:!1,isLongWait:!1}},computed:{hintConfig:function(){return{type:"hint",id:this.hintId,modifiers:{y:"bottom",x:"start"},offset:8,parentContainerId:"app-export-section",viewboxOffset:0}},statusIcon:function(){return this.isChecked?"checkmark-circle":"download-v2-16"},status:function(){return this.item.status},loadingText:function(){var e=this.item.shortName||this.item.name;return this.isLongWait&&this.hasLoadingLabel?"You can wait or close the panel. We will email you the ".concat(e," file download link..."):"The download will start after the ".concat(e," file generation. It will take a few moments...")},isDisabled:function(){var e;return this.disabledKind&&(this.isRequiredDisabled||this.isAllDisabled)&&!(null!==(e=this.item)&&void 0!==e&&e.link)},isRequiredDisabled:function(){return this.disabledKind===(null==c?void 0:c[f])&&this.status!==u},isAllDisabled:function(){return this.disabledKind===(null==c?void 0:c[l])&&this.status!==u}},watch:{status:function(e,t){var n=this;t===a&&e===s&&this.setIsChecked(),t===o&&e===a&&setTimeout((function(){n.isLongWait=!0}),4e3)}},mounted:function(){this.status===a&&(this.isLongWait=!0)},methods:{onHintOpen:function(e){var t=this;return function(){t.hintText=t.isRequiredDisabled&&t.status!==u&&!e.link?"New visualization is generating now...":t.isAllDisabled&&t.status!==u&&!e.link?"New visualization is available. Please, refresh page and try again":(null==e?void 0:e.hint)||t.loadingText}},onHintClose:function(){var e=this;return function(){e.hintText=null}},onClickBtn:function(){this.$emit("click-btn",this.item,this.sectionId),this.item.status!==s&&this.item.status!==u||this.setIsChecked(),this.$refs[this.menuId].close()},setIsChecked:function(){var e=this;this.isChecked=!0,setTimeout((function(){e.isChecked=!1}),4e3)}}},Ae=(n(502),Object(ve.a)(Pe,Oe,[],!1,null,null,null));Ae.options.__file="src/plugins/Export/view/components/DownloadItem.vue";var Me=Ae.exports;function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Re=window.__APP__.library.Vuex.mapState,Le={name:"AppExportSection",components:{AfsText:we.a,AfsLink:_e.a,DownloadItem:Me},props:{section:{type:Object,default:function(){}}},data:function(){return{showMore:!0,maxItems:4}},computed:De(De({},Re(["firstProcessing","disabledKind"])),{},{showEmailNotification:function(){return he.a.showEmailNotification},computedItems:function(){return this.section.hasLimitedItems&&this.showMore&&this.section.items.length>this.maxItems?this.section.items.slice(0,this.maxItems):this.section.items},hasShowMore:function(){return this.section.hasLimitedItems&&this.section.items.length>this.maxItems}}),methods:{toggleShowMore:function(){this.showMore=!this.showMore},hasProcessingLabel:function(e){return 1===e.status&&this.showEmailNotification&&this.firstProcessing.name===e.name},onClickBtn:function(e,t){this.$emit("click-btn",e,t)}}},Be=(n(503),Object(ve.a)(Le,be,[],!1,null,null,null));Be.options.__file="src/plugins/Export/view/components/ExportSection.vue";var Ne=Be.exports,Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-export-footer"},e._l(e.getFooterLinks,(function(t){return n("AfsLink",{key:t.id,staticClass:"app-export-footer__item",attrs:{target:"_blank",href:t.link}},[n("AfsIcon",{staticClass:"app-export-footer__item-icon",attrs:{name:t.icon}}),e._v(" "),n("AfsText",{staticClass:"app-export-footer__item-text"},[e._v(" "+e._s(t.text)+" ")]),e._v(" "),n("AfsIcon",{staticClass:"app-export-footer__item-icon_right",attrs:{name:"external-link-rounded-16"}})],1)})),1)};function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ue._withStripped=!0;var Ve=window.__APP__.library.Vuex.mapGetters,ze={name:"ExportFooter",components:{AfsIcon:le.a,AfsText:we.a,AfsLink:_e.a},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){$e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Ve(["getFooterLinks"]))},Ge=(n(504),Object(ve.a)(ze,Ue,[],!1,null,null,null));Ge.options.__file="src/plugins/Export/view/components/BaseFooter.vue";var He=Ge.exports;function We(e){return function(e){if(Array.isArray(e))return Ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ye(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){Ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ke=window.__CORE__,Je=window.__APP__,Qe=Je.analytics,et=Je.library.Vuex,tt=et.mapState,nt=et.mapActions,rt={name:"Export",components:{BaseHeader:ge,BaseFooter:He,ExportSection:Ne,AfsSnackbar:ce.a,AfsIcon:le.a},data:function(){return{snackbarText:null,snackbarIcon:"warning",hasTimeout:!1}},computed:Xe(Xe({},tt(["sections","statusData","currentVariantId","data"])),{},{visibleSections:function(){var e=this;return this.sections.filter((function(t){return!e.data.hideDownloadSource||!t.isSource}))},outputterItems:function(){return this.visibleSections.reduce((function(e,t){return[].concat(We(e),We(t.items))}),[])},hasFooter:function(){return he.a.showVote}}),watch:{outputterItems:function(e){var t=this;e.some((function(e){return e.status===a}))&&!this.hasTimeout&&(this.hasTimeout=!0,setTimeout((function(){Ke.bus.emit("Export:updateOutputters"),t.hasTimeout=!1}),7e3))},statusData:function(e,t){this.checkStatuses(null==t?void 0:t[this.currentVariantId],null==e?void 0:e[this.currentVariantId])}},methods:Xe(Xe({},nt(["requestDownload"])),{},{onClickBtn:function(e,t){var n=[];Ke.bus.emit("Export:downloadItemRequest",{handlers:n,item:e}),n.length>0?n.forEach((function(t){return t(e)})):(e.status===o&&this.requestDownload({data:e,id:t}),e.status!==s&&e.status!==u||this.downloadItem(e),e.analyticsEvent&&Qe.dispatchPanelsEvent("Download",{action:e.analyticsEvent}))},downloadItem:function(e){var t,n,r=this;if(e.isSource)Ke.bus.emit("Export:downloadSource");else{var i=B(e.type,this.currentVariantId);(t=e.type,n=i,H().get("directDownloadUrl/".concat(F),{params:{type:t,variant:n,urlScheme:window.currentHttpScheme}})).then((function(t){var n;null!==(n=t.data)&&void 0!==n&&n.url?r.downloadItemViaDirectUrl(t.data.url,e.fileName):r.setError()}))}},downloadItemViaDirectUrl:function(e,t){var n=this;fetch(e).then((function(e){if(!e.ok){var r=403===e.status?"Download link has expired. Please, try again later":"Something went wrong during export";return n.setError(r)}e.blob().then((function(e){de()(e,t)})).catch((function(){return n.setError()}))})).catch((function(){return n.setError()}))},checkStatuses:function(e,t){var n=this;e&&t&&t.forEach((function(t,r){t.status===o&&(null==e?void 0:e[r].status)===a?n.setError():t.status===s&&(null==e?void 0:e[r].status)===a&&t.autoDownload&&n.downloadItem(t)}))},setError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong during export";this.snackbarText=e,this.$refs.exportSnackbar.open()}})},it=(n(505),Object(ve.a)(rt,ue,[],!1,null,null,null));it.options.__file="src/plugins/Export/view/App.vue";var ot=it.exports,at=window.__APP__;function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ht(e);if(t){var i=ht(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ft(this,n)}}function ft(e,t){if(t&&("object"===st(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dt(e)}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pt=window.__CORE__;function mt(e){return new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ct(e,t)}(o,e);var t,n,r,i=lt(o);function o(){var e,t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=i.call(this,{name:"Export",displayIcon:"download-v2-16",comment:"Export plugin with on demand requests",description:"Download",order:4,hint:"Downloads",view:{type:"modal",config:{type:"aside-right",hasCustomHeader:!0}}}),t=dt(e),r=function(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ie(null===(t=e.variantData.currentVariant)||void 0===t?void 0:t.uniqueId),re(e.variantData,n)},(n="updateOutputters")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,pt.bus.on("Variants:changed",(function(t){null==t||!t.projectVariant||null!=t&&t.forceUpdate||(e.variantData.currentVariant=t.projectVariant,e.updateOutputters(!0))})),pt.bus.on("Export:updateOutputters",e.updateOutputters),pt.bus.on("Export:setParentExportData",oe),pt.bus.on("Export:setEnabled",(function(t){var n=e.shouldBeVisible(t);e.setPluginHidden(!n)})),pt.bus.on("ParentConnection:projectStatusChange",(function(e){return t=c[e]||null,ne.commit("setDisabledKind",t);var t})),e.isHidden=!0,e.variantData={},e}return t=o,(n=[{key:"hidden",get:function(){return this.isHidden}},{key:"events",get:function(){return["Export:updateOutputters","Export:requestParentExportData","Export:setParentExportData","Export:downloadItemRequest","Export:setParentExportData","Export:downloadSource","Export:setEnabled"]}},{key:"setup",value:function(){var e=this.isEnabledByAttribute();this.setPluginHidden(!this.shouldBeVisible(e));var t,n=["help"];return t=n,ne.commit("setEnabledFooterLinks",t),Promise.resolve()}},{key:"activate",value:function(){var e,t;this.inited||this.initView(),pt.bus.emit("Variants:getCurrent",this.variantData),pt.bus.emit("Export:requestParentExportData"),this.updateOutputters(!0),(null===(e=pt.views)||void 0===e||null===(t=e.LSMView)||void 0===t?void 0:t.active)&&pt.bus.emit("Views:updatePadding",{top:32,right:240})}},{key:"deactivate",value:function(){var e,t;(null===(e=pt.views)||void 0===e||null===(t=e.LSMView)||void 0===t?void 0:t.active)&&pt.bus.emit("Views:updatePadding",{top:0,right:0})}},{key:"initView",value:function(){var e;this.inited=!0,this.view=(e=this.metaInfo.name,new at.library.Vue({store:se,data:{afsConfig:window.__APP__.afsConfig},render:function(e){return e(ot)}}).$mount("#".concat(e)))}},{key:"shouldBeVisible",value:function(e){return e&&$}},{key:"setPluginHidden",value:function(e){this.isHidden=e,pt.bus.emit("Export:updateInterface",{hidden:e})}},{key:"isEnabledByAttribute",value:function(){var e=Object(N.c)("data-export-enabled",!0);return e&&"false"!==e}}])&&ut(t.prototype,n),r&&ut(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(e))}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return Ee}));var u=window.__APP__.library.Vuex.Store,c={name:function(e,t,n){var r=e.name.toLowerCase().localeCompare(t.name.toLowerCase());return n?r:-r},price:function(e,t,n){return n?null===e.price?-1:e.price-t.price:null===t.price?-1:t.price-e.price},quantity:function(e,t,n){return n?e.quantity-t.quantity:t.quantity-e.quantity}},l=function(e){return Math.round(100*+e)/100},f=[{id:"number",text:"№",width:44},{id:"name",text:"Name",width:"18%",sorted:!0},{id:"price",text:"Price",width:60,sorted:!0,align:"right"},{id:"description",text:"Description",width:"62%"},{id:"designator",text:"Designator",width:"20%"},{id:"quantity",text:"Quantity",width:82,sorted:!0,align:"right"}],d=new u({state:{search:"",sortBy:null,items:[],columns:f},getters:{search:function(e){return e.search.trim()},sortedItems:function(e){return e.items.sort((function(t,n){var r;return c[null===(r=e.sortBy)||void 0===r?void 0:r.col]?c[e.sortBy.col](t,n,e.sortBy.state):0}))},body:function(e,t){return t.sortedItems.reduce((function(e,n,r){return[n.name,n.description].concat(a(n.designator)).some((function(e){var n;return!(null!==(n=t.search)&&void 0!==n&&n.length)&&!(null!=e&&e.length)||(null==e?void 0:e.length)&&e.toLowerCase().includes(t.search.toLowerCase())}))?(e.rows.push(n),e.totalNames++,e.totalQuantity+=+n.quantity,e.totalPrice+=n.price*+n.quantity,e):e}),{rows:[],totalNames:0,totalQuantity:0,totalPrice:0})},items:function(e,t){var n;return null==t||null===(n=t.body)||void 0===n?void 0:n.rows},totalNames:function(e,t){var n;return null==t||null===(n=t.body)||void 0===n?void 0:n.totalNames},totalPrice:function(e,t){var n;return l(null==t||null===(n=t.body)||void 0===n?void 0:n.totalPrice)},totalQuantity:function(e,t){var n;return Math.ceil(null==t||null===(n=t.body)||void 0===n?void 0:n.totalQuantity)}},mutations:{setItems:function(e,t){e.items=Array.isArray(t)?t.map((function(e,t){return i(i({},e),{},{number:t+1,price:"number"==typeof e.price?l(e.price):null})})):[],e.columns=e.items.some((function(e){return"number"==typeof e.price}))?f:f.filter((function(e){return"price"!==e.id}))},setSort:function(e,t){var n,r;e.sortBy={col:t.id,state:t.id===(null===(n=e.sortBy)||void 0===n?void 0:n.col)&&!(null!==(r=e.sortBy)&&void 0!==r&&r.state)}},setSearch:function(e,t){e.search=t}}}),h=d,p=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bom"},[this.items.length?[t("BaseSearch",{staticClass:"bom__search"}),this._v(" "),t("BaseContent",{staticClass:"bom__content"})]:t("div",{staticClass:"bom__empty"},[this._v("BOM data is empty")])],2)};p._withStripped=!0;var m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search"},[n("AfsSearch",{ref:"input",attrs:{"has-remove-btn":""},on:{input:e.onInput,keyup:function(e){e.stopPropagation()},keydown:function(e){e.stopPropagation()}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)};m._withStripped=!0;var v=n(66);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=window.__APP__,_=w.analytics,O=w.library.Vuex,C=O.mapState,S=O.mapMutations,x=w.utils.debounce,k=window.__CORE__,E={name:"BaseSearch",components:{AfsSearch:v.a},computed:g(g({},C(["search"])),{},{value:{get:function(){return this.search},set:function(e){var t=this;x("search",(function(){return t.setSearch(e)}),150)}}}),created:function(){k.bus.on("BOM:focusSearch",this.onFocus)},destroyed:function(){k.bus.off("BOM:focusSearch",this.onFocus)},methods:g(g({},S(["setSearch"])),{},{onFocus:function(){var e=this.$refs.input;e&&e.focus()},onInput:function(){_.dispatchViewNavigationEvent("Bom",{event:"input",action:"Search"})}})},T=(n(481),n(0)),P=Object(T.a)(E,m,[],!1,null,"3fb6fd0c",null);P.options.__file="src/plugins/BOMView/view/components/BaseSearch.vue";var A=P.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[e.items.length?n("LibTable",{ref:"table",staticClass:"content__table",attrs:{columns:e.columns,items:e.computedItems,"sort-by":e.sortBy,"has-hover":""},on:{sort:e.onSort,"body:click":e.onTableBodyClick},scopedSlots:e._u([{key:"body__number",fn:function(t){var r=t.data;return[n("div",{staticClass:"content__number"},[e._v(e._s(r.number))])]}},{key:"body__name",fn:function(t){var r=t.data;return[r.url?n("AfsLink",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:e.search,value:r.name},expression:"{\n          query: search,\n          value: data.name\n        }"}],staticClass:"content__ellipsis prevent-blur",attrs:{href:r.url,target:"_blank"},nativeOn:{click:function(t){return e.onNameClick(t)}}}):n("div",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:e.search,value:r.name},expression:"{\n          query: search,\n          value: data.name\n        }"}],staticClass:"content__ellipsis"})]}},{key:"body__price",fn:function(t){var n=t.data;return[e._v("\n      "+e._s(e.getConvertedPrice(n.price))+"\n    ")]}},{key:"body__description",fn:function(t){var r=t.data;return[n("div",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:e.search,value:r.description},expression:"{\n          query: search,\n          value: data.description\n        }"}],staticClass:"content__ellipsis"})]}},{key:"body__designator",fn:function(t){var r=t.data,i=t.index;return e._l(r.designator,(function(t){return n("AfsLink",{directives:[{name:"highlight",rawName:"v-highlight",value:{query:e.search,value:t},expression:"{\n          query: search,\n          value: item\n        }"}],key:t,ref:i+t,refInFor:!0,staticClass:"content__link prevent-blur",attrs:{"is-focused":e.isFocusedDesignator(i+t),tabindex:"-1"},on:{click:function(n){return n.preventDefault(),e.onDesignatorClick(t,r)},keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")&&e._k(n.keyCode,"space",32,n.key,[" ","Spacebar"])?null:(n.preventDefault(),e.onDesignatorClick(t,r))}}})}))}},{key:"footer__number",fn:function(){return[n("strong",[e._v("Total")])]},proxy:!0},{key:"footer__name",fn:function(){return[e._v(" "+e._s(e.totalNames)+" Names ")]},proxy:!0},e.totalPrice?{key:"footer__price",fn:function(){return[e._v("\n      "+e._s(e.getConvertedPrice(e.totalPrice))+"\n    ")]},proxy:!0}:null,{key:"footer__quantity",fn:function(){return[e._v(" "+e._s(e.totalQuantity)+" ")]},proxy:!0}],null,!0)}):e.search.length&&!e.items.length?n("div",{staticClass:"content__not-found"},[n("div",{staticClass:"content__not-found-container"},[e._v(e._s(e.notFound))])]):e._e()],1)};M._withStripped=!0;var j=n(25);function D(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){D(o,r,i,a,s,"next",e)}function s(e){D(o,r,i,a,s,"throw",e)}a(void 0)}))}}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=window.__APP__,U=N.analytics,F=N.library.Vuex,$=F.mapState,V=F.mapGetters,z=F.mapMutations,G=N.utils,H=G.directives.highlight,W=G.debounce,Y=window.__CORE__,q={name:"BaseContent",components:{AfsLink:j.a},directives:{highlight:H},data:function(){return{focusedRow:null,focusedDesignator:null}},computed:L(L(L({},$(["columns","sortBy"])),V(["search","items","totalPrice","totalQuantity","totalNames"])),{},{computedItems:function(){var e=this;return this.items.map((function(t){return L(L({},t),{},{isFocused:t.id===e.focusedRow})}))},notFound:function(){return'"'.concat(this.search,'" not found')},hasFocus:function(){return null!==this.focusedRow&&null!==this.focusedDesignator}}),created:function(){Y.bus.on("BOMView:selectDesignator",this.selectDesignator)},beforeDestroy:function(){Y.bus.off("BOMView:selectDesignator",this.selectDesignator)},methods:L(L({},z(["setSort"])),{},{isFocusedDesignator:function(e){return e===this.focusedDesignator},getConvertedPrice:function(e){return e?"$".concat(e.toFixed(2)):"N/A"},selectDesignator:function(){var e=arguments,t=this;return I(regeneratorRuntime.mark((function n(){var r,i,o,a,s,u,c,l,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.length>0&&void 0!==e[0]?e[0]:{},a=o.id,s=void 0===a?null:a,u=o.designator,c=void 0===u?null:u,null!==s&&null!==c){n.next=5;break}return t.focusedRow=null,t.focusedDesignator=null,n.abrupt("return");case 5:return n.next=7,t.$nextTick();case 7:l=t.items.findIndex((function(e){return e.id===s})),f=null===(r=t.$refs[l+c])||void 0===r||null===(i=r[0])||void 0===i?void 0:i.$el,t.focusedRow=s,t.focusedDesignator=l+c,f&&f.focus();case 12:case"end":return n.stop()}}),n)})))()},onTableBodyClick:function(e){!e.target.closest(".prevent-blur")&&this.hasFocus&&(Y.bus.emit("BOMView:designatorBlur"),this.focusedRow=null,this.focusedDesignator=null)},onNameClick:function(){U.dispatchViewNavigationEvent("Bom",{action:"OctopartClick"})},onSort:function(e){var t=this;W("sort",(function(){return t.setSort(e)}),20)},onDesignatorClick:function(e,t){this.focusedRow=t.id,this.focusedDesignator=e,Y.bus.emit("BOMView:designator",{name:e,item:t}),U.dispatchViewNavigationEvent("Bom",{action:"CrossProbe"})}})},X=(n(482),Object(T.a)(q,M,[],!1,null,"2ffe2c97",null));function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}X.options.__file="src/plugins/BOMView/view/components/BaseContent.vue";var J={name:"BOM",components:{BaseSearch:A,BaseContent:X.exports},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,window.__APP__.library.Vuex.mapState)(["items"]))},Q=(n(483),n(484),Object(T.a)(J,p,[],!1,null,"1e78a12e",null));Q.options.__file="src/plugins/BOMView/view/App.vue";var ee=Q.exports,te=window.__APP__,ne=n(15);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ce(e);if(t){var i=ce(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return se(this,n)}}function se(e,t){if(t&&("object"===re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ue(e)}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe=window.__CORE__,de={where:function(e){return["Activate"===e.type]},to:"ACTIVE"},he={where:function(e){return["Load"===e.type]},to:"LOAD"},pe={where:function(e){return["Select"===e.type]},to:"SELECTED"},me={where:function(e){return["Deactivate"===e.type]},to:"NONACTIVE"},ve={HIDDEN:[{where:function(e){return["Ready"===e.type]},to:"READY"}],READY:[{where:function(e){return["Init"===e.type]},to:"INIT"}],INIT:[de,he],LOAD:[he,de,{where:function(e){return["Error"===e.type]},to:"CRASHED",error:!0}],ACTIVE:[de,me,pe],SELECTED:[me,de,pe],NONACTIVE:[de,he],CRASHED:[me]},ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(o,e);var t,n,r,i=ae(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),le(ue(t=i.call(this,"HIDDEN",ve)),"logger",void 0),le(ue(t),"creator",void 0),le(ue(t),"engine",void 0),le(ue(t),"bus",void 0),le(ue(t),"items",null),le(ue(t),"bomData",void 0),le(ue(t),"selectedData",null),le(ue(t),"selectedVariant",void 0),t.logger=fe.createLogger("BomViewManager"),t.creator=e,t.events.forEach((function(e){return fe.bus.registerEvent(e)})),fe.bus.on("BOMEngine:setup",(function(e){return t.setup(e)})),fe.bus.on("BOMEngine:activate",(function(e){return t.activate(e)})),fe.bus.on("BOMEngine:deactivate",(function(e){return t.deactivate()})),fe.bus.on("BOMEngine:select",(function(e){return t.select(e)})),fe.bus.on("BOMEngine:checkSelection",(function(e){return t.canBeSelect(e)})),fe.bus.on("BOMEngine:setVariant",(function(e){return t.setVariant(e)})),t.on(ne.a.TRANSITION_EVENT,(function(e){return t.emitDidStateChange(t.state,e)})),t.on(ne.a.ERROR_EVENT,(function(e){return t.emitDidStateChange(t.state,e)})),t}return t=o,(n=[{key:"events",get:function(){return["BOMEngine:setup","BOMEngine:activate","BOMEngine:deactivate","BOMEngine:select","BOMEngine:checkSelection","BOMEngine:didStateChange","BOMEngine:setVariant"]}},{key:"emitDidStateChange",value:function(e,t){fe.bus.emit("BOMEngine:didStateChange",{state:e,message:t})}},{key:"setup",value:function(e){var t=this;return new Promise((function(n){t.logger.LogDebug("Setup"),t.bus=e.bus,t.bus.on("select",(function(e){return t.onSelect(e)})),t.setupEngine(e),n()}))}},{key:"activate",value:function(e){var t=this;this.toInit(e).then((function(e){return"RUN"===t.engine.getState()?t.toActive():t.toLoad()})).then((function(e){return t.toSelected()})).catch((function(e){return t.dispatch({type:"Error",error:e})}))}},{key:"deactivate",value:function(){this.dispatch({type:"Deactivate"})}},{key:"select",value:function(e){var t=this;if(e&&e.name){var n=this.engine.getSelectData(e.name);this.bus.emit("select",n)}else if(Array.isArray(e)){var r=e.map((function(e){return t.engine.getSelectData(e.name)}));this.bus.emit("select",r)}else this.bus.emit("select",null)}},{key:"canBeSelect",value:function(e){if(!e)return{item:null,can:!1};e.item&&Object.getOwnPropertyDescriptor(e.item,"designator")&&this.items?e.can=this.findItemByName(e.item.designator):e.can=!1}},{key:"toInit",value:function(e){var t=this;return new Promise((function(n){t.dispatch({type:"Init",div:e}),n()}))}},{key:"toActive",value:function(){var e=this;return new Promise((function(t){e.dispatch({type:"Activate",items:e.items}),t()}))}},{key:"toLoad",value:function(){var e=this;return new Promise((function(t,n){e.dispatch({type:"Load"})?e.engine.load().then((function(t){return e.toActive()})).then((function(e){return t()})).catch((function(e){return n(e)})):n(new Error("Can not go to [LOAD] state from [".concat(e.state,"]. ")))}))}},{key:"toSelected",value:function(){var e=this;return new Promise((function(t){if(e.selectedData){var n=e.selectedData;if(n&&n.item&&n.item.designator&&e.items){var r=e.findItemByName(n.item.designator);if(r){var i={item:r,designator:n.item.designator};return e.dispatch({type:"Select",data:i}),void t()}}}e.dispatch({type:"Activate",items:null}),t()}))}},{key:"setupEngine",value:function(e){var t=this;this.engine=new this.creator,this.engine.on("READY",(function(e){return t.onEngineReady()})),this.engine.on("RUN",(function(e){return t.onEngineRun(e)})),this.engine.setup(e)}},{key:"onEngineReady",value:function(){var e=this;setTimeout((function(){e.dispatch({type:"Ready"}),e.engine.load()}),1)}},{key:"onEngineRun",value:function(e){this.bomData=e.data.variants,this.selectedVariant=e.data.defaultId,this.items=this.bomData.get(this.selectedVariant)}},{key:"onSelect",value:function(e){this.selectedData=e,this.toSelected()}},{key:"findItemByName",value:function(e){return this.items.find((function(t){return t.designator.find((function(t){return t===e}))}))}},{key:"setVariant",value:function(e){if(e){var t;if(this.selectedVariant=e.projectVariant.uniqueId,!this.bomData)return;this.items=null!==(t=this.bomData.get(this.selectedVariant))&&void 0!==t?t:[],this.dispatch({type:"Activate",items:this.items})}}}])&&ie(t.prototype,n),r&&ie(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(ne.a),ge=n(32);function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xe(e);if(t){var i=xe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ce(this,n)}}function Ce(e,t){if(t&&("object"===be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Se(e)}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ke=window.__CORE__;function Ee(e,t){return new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(a,e);var n,r,i,o=Oe(a);function a(){var e,n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),e=o.call(this,{name:"BOMView",displayName:"BOM",comment:"BOM View",order:14,description:"BOM View"}),n=Se(e),i=function(e){var t={item:e,can:!1};return ke.bus.emit("BOMEngine:checkSelection",t),t.can},(r="canBeSelect")in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,e.logger=window.__CORE__.createLogger("BOMView"),e.isHidden=!0,e.viewManager=new ye(t),e.prevView=null,e.currentVariant=null,e.isActive=!1,ke.bus.on("View:activate",(function(t){t.name!==e.metaInfo.name&&(e.prevView=t.name)})),ke.bus.on("BOMEngine:didStateChange",(function(t){return e.onEngineStateChanged(t)})),ke.bus.on("BOMView:designator",(function(t){ke.bus.emit("BOMEngine:select",t),e.prevView&&ke.bus.emit("View:set",e.prevView)})),ke.bus.on("BOMView:designatorBlur",(function(e){return ke.bus.emit("BOMEngine:select",null)})),ke.bus.on("Search:display",(function(t){e.isActive&&(t.can=!1,ke.bus.emit("BOM:focusSearch"))})),ke.bus.on("Variants:changed",(function(t){e.currentVariant=t,ke.bus.emit("BOMEngine:setVariant",t)})),e}return n=a,(r=[{key:"events",get:function(){return["BOMView:designator","BOMView:designatorBlur","BOMView:selectDesignator","BOM:focusSearch"]}},{key:"hidden",get:function(){return this.isHidden}},{key:"hasControls",value:function(e){e.push({type:"select"})}},{key:"setup",value:function(e){var t=this;return new Promise((function(n,r){try{ke.bus.emit("BOMEngine:setup",e),n()}catch(e){t.logger.LogError("Setup error. "+e.message),r(new Error("BOM view setup error."))}}))}},{key:"activate",value:function(e){try{this.isActive=!0,ke.bus.emit("BOMEngine:activate",e),ke.bus.emit("Logo:hide")}catch(e){this.logger.LogError("Activate error. "+e.message),e.innerError&&e.innerError.code===ge.a.StoreExpired?this.updateLoader("error",e.message,"info-16","small"):this.updateLoader("error","Something went wrong. Please try again later.")}}},{key:"deactivate",value:function(){try{this.isActive=!1,ke.bus.emit("BOMEngine:deactivate"),ke.bus.emit("Logo:show")}catch(e){this.logger.LogError("Deactivate error. "+e.message)}}},{key:"onEngineStateChanged",value:function(e){switch(e.state){case"HIDDEN":this.isHidden=!0,ke.bus.emit("BOMView:updateInterface",{hidden:!0});break;case"READY":ke.bus.emit("BOMView:updateInterface",{hidden:!1}),this.isHidden=!1;break;case"INIT":this.div=e.message.div,this.view=(n=e.message.div,r=document.createElement("div"),n.appendChild(r),new te.library.Vue({store:h,data:{afsConfig:window.__APP__.afsConfig},render:function(e){return e(ee)}}).$mount(r)),this.currentVariant&&ke.bus.emit("BOMEngine:setVariant",this.currentVariant);break;case"ACTIVE":e.message.items&&(t=e.message.items,d.commit("setItems",t),this.updateLoader()),ke.bus.emit("BOMView:selectDesignator");break;case"LOAD":this.updateLoader("large","Loading BOM data");break;case"CRASHED":this.updateLoader("error","Something went wrong. Please try again later.");break;case"NONACTIVE":ke.bus.emit("BOMView:selectDesignator"),this.updateLoader();break;case"SELECTED":ke.bus.emit("BOMView:selectDesignator",{id:e.message.data.item.id,designator:e.message.data.designator})}var t,n,r}},{key:"updateLoader",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"large";this.loader&&(this.loader.destroy(),this.loader=null),this.isActive&&e&&t&&(this.logger.LogDebug("Logger "+e+" "+t),this.loader=window.__APP__.loader(this.div,{message:t,type:e,icon:n,size:r}))}}])&&we(n.prototype,r),i&&we(n,i),Object.defineProperty(n,"prototype",{writable:!1}),a}(e))}},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"afs-kv-list",class:e.classes,attrs:{"data-locator":e.dataLocator}},e._l(e.items,(function(t){return n("li",{key:t.id,staticClass:"afs-kv-list__item"},[n("div",{staticClass:"afs-kv-list__key"},[e._t("key",[e._v(e._s(t.key))],{listItem:t,getBEMClass:e.getBEMClass})],2),e._v(" "),n("div",{staticClass:"afs-kv-list__value"},[e._t("value",[e._v(e._s(t.value))],{listItem:t,getBEMClass:e.getBEMClass})],2)])})),0)};r._withStripped=!0;var i=n(2),o=n(4),a={name:"AfsKeyValueList",props:{dataLocator:{type:String,default:"kv-list"},items:{type:Array,default:function(){return[]}},align:{type:String,default:"center",validator:function(e){return["center","left","right","inherit"].includes(e)}},width:{type:String,default:"half",validator:function(e){return["half","auto"].includes(e)}}},computed:{classes:function(){return["afs-kv-list_".concat(this.align),"afs-kv-list_".concat(this.width),this.themeClass]},themeClass:function(){var e=Object(o.a)(this.$root);return Object(i.c)(e.theme)}},methods:{getBEMClass:function(e){return Object(i.a)("afs-kv-list",e)}}},s=(n(506),n(0)),u=Object(s.a)(a,r,[],!1,null,null,null);u.options.__file="WebUI/VueJsComponentLibrary/src/components/KeyValueList/App.vue";var c=u.exports;t.a=c},function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a}));var r=n(306)},function(e,t,n){e.exports=!n(81)&&!n(54)((function(){return 7!=Object.defineProperty(n(369)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(53),i=n(77),o=n(211),a=n(370),s=n(82).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(127),i=n(129),o=n(311)(!1),a=n(371)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(82),i=n(55),o=n(212);e.exports=n(81)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(129),i=n(215).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},function(e,t,n){"use strict";var r=n(81),i=n(212),o=n(312),a=n(247),s=n(104),u=n(246),c=Object.assign;e.exports=!c||n(54)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r}))?function(e,t){for(var n=s(e),c=arguments.length,l=1,f=o.f,d=a.f;c>l;)for(var h,p=u(arguments[l++]),m=f?i(p).concat(f(p)):i(p),v=m.length,y=0;v>y;)h=m[y++],r&&!d.call(p,h)||(n[h]=p[h]);return n}:c},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(146),i=n(56),o=n(448),a=[].slice,s={},u=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?u(t,r.length,r):o(t,r,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(53).parseInt,i=n(235).trim,o=n(375),a=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(53).parseFloat,i=n(235).trim;e.exports=1/r(n(375)+"-0")!=-1/0?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(160);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(56),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){"use strict";var r=n(214),i=n(209),o=n(234),a={};n(128)(a,n(64)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(55);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(611);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(146),i=n(104),o=n(246),a=n(67);e.exports=function(e,t,n,s,u){r(t);var c=i(e),l=o(c),f=a(c.length),d=u?f-1:0,h=u?-1:1;if(n<2)for(;;){if(d in l){s=l[d],d+=h;break}if(d+=h,u?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;u?d>=0:f>d;d+=h)d in l&&(s=t(s,l[d],d,c));return s}},function(e,t,n){"use strict";var r=n(104),i=n(213),o=n(67);e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),s=i(e,a),u=i(t,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:i(c,a))-u,a-s),f=1;for(u<s&&s<u+l&&(f=-1,u+=l-1,s+=l-1);l-- >0;)u in n?n[s]=n[u]:delete n[s],s+=f,u+=f;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(390);n(11)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){n(81)&&"g"!=/./g.flags&&n(82).f(RegExp.prototype,"flags",{configurable:!0,get:n(315)})},function(e,t,n){"use strict";var r,i,o,a,s=n(211),u=n(53),c=n(145),l=n(248),f=n(11),d=n(56),h=n(146),p=n(238),m=n(318),v=n(249),y=n(392).set,g=n(631)(),b=n(463),w=n(632),_=n(319),O=n(464),C=u.TypeError,S=u.process,x=S&&S.versions,k=x&&x.v8||"",E=u.Promise,T="process"==l(S),P=function(){},A=i=b.f,M=!!function(){try{var e=E.resolve(1),t=(e.constructor={})[n(64)("species")]=function(e){e(P,P)};return(T||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t&&0!==k.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(e){}}(),j=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var n=e._c;g((function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{s?(i||(2==e._h&&L(e),e._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===t.promise?c(C("Promise-chain cycle")):(o=j(n))?o.call(n,u,c):u(n)):c(r)}catch(e){l&&!a&&l.exit(),c(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&I(e)}))}},I=function(e){y.call(u,(function(){var t,n,r,i=e._v,o=R(e);if(o&&(t=w((function(){T?S.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=T||R(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},R=function(e){return 1!==e._h&&0===(e._a||e._c).length},L=function(e){y.call(u,(function(){var t;T?S.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},B=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},N=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw C("Promise can't be resolved itself");(t=j(e))?g((function(){var r={_w:n,_d:!1};try{t.call(e,c(N,r,1),c(B,r,1))}catch(e){B.call(r,e)}})):(n._v=e,n._s=1,D(n,!1))}catch(e){B.call({_w:n,_d:!1},e)}}};M||(E=function(e){p(this,E,"Promise","_h"),h(e),r.call(this);try{e(c(N,this,1),c(B,this,1))}catch(e){B.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(239)(E.prototype,{then:function(e,t){var n=A(v(this,E));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=T?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(N,e,1),this.reject=c(B,e,1)},b.f=A=function(e){return e===E||e===a?new o(e):i(e)}),f(f.G+f.W+f.F*!M,{Promise:E}),n(234)(E,"Promise"),n(237)("Promise"),a=n(77).Promise,f(f.S+f.F*!M,"Promise",{reject:function(e){var t=A(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!M),"Promise",{resolve:function(e){return O(s&&this===a?E:this,e)}}),f(f.S+f.F*!(M&&n(314)((function(e){E.all(e).catch(P)}))),"Promise",{all:function(e){var t=this,n=A(t),r=n.resolve,i=n.reject,o=w((function(){var n=[],o=0,a=1;m(e,!1,(function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then((function(e){u||(u=!0,n[s]=e,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=A(t),r=n.reject,i=w((function(){m(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t,n){"use strict";var r=n(146);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t,n){var r=n(55),i=n(56),o=n(463);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(82).f,i=n(214),o=n(239),a=n(145),s=n(238),u=n(318),c=n(381),l=n(459),f=n(237),d=n(81),h=n(177).fastKey,p=n(218),m=d?"_s":"size",v=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e((function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,null!=r&&u(r,n,e[c],e)}));return o(l.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=p(this,t),r=v(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[m]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(p(this,t),e)}}),d&&r(l.prototype,"size",{get:function(){return p(this,t)[m]}}),l},def:function(e,t,n){var r,i,o=v(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:v,setStrong:function(e,t,n){c(e,t,(function(e,n){this._t=p(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?l(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,l(1))}),n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){"use strict";var r=n(239),i=n(177).getWeak,o=n(55),a=n(56),s=n(238),u=n(318),c=n(150),l=n(127),f=n(218),d=c(5),h=c(6),p=0,m=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},y=function(e,t){return d(e.a,(function(e){return e[0]===t}))};v.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var n=y(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var c=e((function(e,r){s(e,c,t,"_i"),e._t=t,e._i=p++,e._l=void 0,null!=r&&u(r,n,e[o],e)}));return r(c.prototype,{delete:function(e){if(!a(e))return!1;var n=i(e);return!0===n?m(f(this,t)).delete(e):n&&l(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=i(e);return!0===n?m(f(this,t)).has(e):n&&l(n,this._i)}}),c},def:function(e,t,n){var r=i(o(t),!0);return!0===r?m(e).set(t,n):r[e._i]=n,e},ufstore:m}},function(e,t,n){var r=n(147),i=n(67);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(215),i=n(312),o=n(55),a=n(53).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(67),i=n(377),o=n(161);e.exports=function(e,t,n,a){var s=String(o(e)),u=s.length,c=void 0===n?" ":String(n),l=r(t);if(l<=u||""==c)return s;var f=l-u,d=i.call(c,Math.ceil(f/c.length));return d.length>f&&(d=d.slice(0,f)),a?d+s:s+d}},function(e,t,n){var r=n(81),i=n(212),o=n(129),a=n(247).f;e.exports=function(e){return function(t){for(var n,s=o(t),u=i(s),c=u.length,l=0,f=[];c>l;)n=u[l++],r&&!a.call(s,n)||f.push(e?[n,s[n]]:s[n]);return f}}},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";n(328)},function(e,t,n){"use strict";n(329)},function(e,t,n){"use strict";n(330)},function(e,t,n){"use strict";n(331)},function(e,t,n){"use strict";n(332)},function(e,t,n){"use strict";n(333)},function(e,t,n){"use strict";n(334)},function(e,t,n){"use strict";n(335)},function(e,t,n){"use strict";n(336)},function(e,t,n){"use strict";n(337)},function(e,t,n){"use strict";n(338)},function(e,t,n){"use strict";n(339)},function(e,t,n){"use strict";n(340)},function(e,t,n){"use strict";n(341)},function(e,t,n){"use strict";n(342)},function(e,t,n){"use strict";n(343)},function(e,t,n){"use strict";n(344)},function(e,t,n){"use strict";n(345)},function(e,t,n){"use strict";n(346)},function(e,t,n){"use strict";n(347)},function(e,t,n){"use strict";n(348)},function(e,t,n){"use strict";n(349)},function(e,t,n){"use strict";n(350)},function(e,t,n){"use strict";n(351)},function(e,t,n){"use strict";n(352)},function(e,t,n){"use strict";n(353)},function(e,t,n){"use strict";n(354)},function(e,t,n){"use strict";n(355)},function(e,t,n){"use strict";n(356)},function(e,t,n){"use strict";n(357)},function(e,t,n){"use strict";n(358)},function(e,t,n){"use strict";n(359)},function(e,t,n){"use strict";n(360)},function(e,t,n){"use strict";n(361)},function(e,t,n){(function(t,n,r){e.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){return i(t[a][1][e]||e)}),c,c.exports,e,t,n,r)}return n[a].exports}for(var o=!1,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,a,s,u,c,l=[],f=0,d=e.length,h=d,p="string"!==r.getTypeOf(e);f<e.length;)h=d-f,i=p?(t=e[f++],n=f<d?e[f++]:0,f<d?e[f++]:0):(t=e.charCodeAt(f++),n=f<d?e.charCodeAt(f++):0,f<d?e.charCodeAt(f++):0),a=t>>2,s=(3&t)<<4|n>>4,u=1<h?(15&n)<<2|i>>6:64,c=2<h?63&i:64,l.push(o.charAt(a)+o.charAt(s)+o.charAt(u)+o.charAt(c));return l.join("")},n.decode=function(e){var t,n,r,a,s,u,c=0,l=0,f="data:";if(e.substr(0,f.length)===f)throw new Error("Invalid base64 input, it looks like a data url.");var d,h=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&h--,e.charAt(e.length-2)===o.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=i.uint8array?new Uint8Array(0|h):new Array(0|h);c<e.length;)t=o.indexOf(e.charAt(c++))<<2|(a=o.indexOf(e.charAt(c++)))>>4,n=(15&a)<<4|(s=o.indexOf(e.charAt(c++)))>>2,r=(3&s)<<6|(u=o.indexOf(e.charAt(c++))),d[l++]=t,64!==s&&(d[l++]=n),64!==u&&(d[l++]=r);return d}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function s(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}s.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new o).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(e){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var o=i,a=0+n;e^=-1;for(var s=0;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}(0|t,e,e.length):function(e,t,n,r){var o=i,a=0+n;e^=-1;for(var s=0;s<a;s++)e=e>>>8^o[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),o=e("./utils"),a=e("./stream/GenericWorker"),s=r?"uint8array":"array";function u(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",o.inherits(u,a),u.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,e.data),!1)},u.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new u("Deflate",e)},n.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,a,l){var f,d,h=e.file,p=e.compression,m=l!==s.utf8encode,v=o.transformTo("string",l(h.name)),y=o.transformTo("string",s.utf8encode(h.name)),g=h.comment,b=o.transformTo("string",l(g)),w=o.transformTo("string",s.utf8encode(g)),_=y.length!==h.name.length,O=w.length!==g.length,C="",S="",x="",k=h.dir,E=h.date,T={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(T.crc32=e.crc32,T.compressedSize=e.compressedSize,T.uncompressedSize=e.uncompressedSize);var P=0;t&&(P|=8),m||!_&&!O||(P|=2048);var A=0,M=0;k&&(A|=16),"UNIX"===a?(M=798,A|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(h.unixPermissions,k)):(M=20,A|=function(e){return 63&(e||0)}(h.dosPermissions)),f=E.getUTCHours(),f<<=6,f|=E.getUTCMinutes(),f<<=5,f|=E.getUTCSeconds()/2,d=E.getUTCFullYear()-1980,d<<=4,d|=E.getUTCMonth()+1,d<<=5,d|=E.getUTCDate(),_&&(S=r(1,1)+r(u(v),4)+y,C+="up"+r(S.length,2)+S),O&&(x=r(1,1)+r(u(b),4)+w,C+="uc"+r(x.length,2)+x);var j="";return j+="\n\0",j+=r(P,2),j+=p.magic,j+=r(f,2),j+=r(d,2),j+=r(T.crc32,4),j+=r(T.compressedSize,4),j+=r(T.uncompressedSize,4),j+=r(v.length,2),j+=r(C.length,2),{fileRecord:c.LOCAL_FILE_HEADER+j+v+C,dirRecord:c.CENTRAL_FILE_HEADER+r(M,2)+j+r(b.length,2)+"\0\0\0\0"+r(A,4)+r(i,4)+v+C+b}}var o=e("../utils"),a=e("../stream/GenericWorker"),s=e("../utf8"),u=e("../crc32"),c=e("../signature");function l(e,t,n,r){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(l,a),l.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},l.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return c.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,i=function(e,t,n,i,a){var s=o.transformTo("string",a(i));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(s.length,2)+s}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},l.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var o=new i(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,n){a++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},u=n.dir,c=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:e,dir:u,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.7.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),o=e("./utf8"),a=e("./zipEntries"),s=e("./stream/Crc32Probe"),u=e("./nodejsUtils");function c(e){return new i.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new a(t);return n.load(e),n})).then((function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var o=0;o<r.length;o++)n.push(c(r[o]));return i.Promise.all(n)})).then((function(e){for(var r=e.shift(),i=r.files,o=0;o<i.length;o++){var a=i[o];n.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function o(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(o,i),o.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,n,r){"use strict";n.exports={isNode:void 0!==t,newBufferFrom:function(e,n){if(t.from&&t.from!==Uint8Array.from)return t.from(e,n);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new t(e,n)},allocBuffer:function(e){if(t.alloc)return t.alloc(e);var n=new t(e);return n.fill(0),n},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,i=o.getTypeOf(t),s=o.extend(n||{},u);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=m(e)),s.createFolders&&(r=p(e))&&v.call(this,r,!0);var f,y="string"===i&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!y),(t instanceof c&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",i="string"),f=t instanceof c||t instanceof a?t:d.isNode&&d.isStream(t)?new h(e,t):o.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var g=new l(e,f,s);this.files[e]=g}var i=e("./utf8"),o=e("./utils"),a=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),u=e("./defaults"),c=e("./compressedObject"),l=e("./zipObject"),f=e("./generate"),d=e("./nodejsUtils"),h=e("./nodejs/NodejsStreamInputAdapter"),p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},v=function(e,t){return t=void 0!==t?t:u.createFolders,e=m(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function y(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var g={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(y(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var o=this.files[this.root+e];return o&&!o.dir?o:null},folder:function(e){if(!e)return this;if(y(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=v.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=f.generateWorker(this,n,r)}catch(e){(t=new a("error")).error(e)}return new s(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=g},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),o=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),u=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new u(r.transformTo("uint8array",e)):new o(r.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function o(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(o,r),o.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,r),o.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(o,i),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,n,r){"use strict";var i=e("../utils"),o=e("./ConvertWorker"),a=e("./GenericWorker"),s=e("../base64"),u=e("../support"),c=e("../external"),l=null;if(u.nodestream)try{l=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function f(e,t,n){var r=t;switch(t){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=t,this._mimeType=n,i.checkSupport(r),this._worker=e.pipe(new o(r)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}f.prototype={accumulate:function(e){return function(e,n){return new c.Promise((function(r,o){var a=[],u=e._internalType,c=e._outputType,l=e._mimeType;e.on("data",(function(e,t){a.push(e),n&&n(t)})).on("error",(function(e){a=[],o(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return i.newBlob(i.transformTo("arraybuffer",t),n);case"base64":return s.encode(t);default:return i.transformTo(e,t)}}(c,function(e,n){var r,i=0,o=null,a=0;for(r=0;r<n.length;r++)a+=n[r].length;switch(e){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(o=new Uint8Array(a),r=0;r<n.length;r++)o.set(n[r],i),i+=n[r].length;return o;case"nodebuffer":return t.concat(n);default:throw new Error("concat : unsupported type '"+e+"'")}}(u,a),l);r(e)}catch(e){o(e)}a=[]})).resume()}))}(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){i.delay(t,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},e)}},n.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=void 0!==t,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var i=new ArrayBuffer(0);try{r.blob=0===new Blob([i],{type:"application/zip"}).size}catch(e){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),r.blob=0===o.getBlob("application/zip").size}catch(e){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(e){r.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),o=e("./nodejsUtils"),a=e("./stream/GenericWorker"),s=new Array(256),u=0;u<256;u++)s[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(){a.call(this,"utf-8 decode"),this.leftOver=null}function l(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(e){return i.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var t,n,r,o,a,s=e.length,u=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(u):new Array(u),o=a=0;a<u;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,o,a=e.length,u=new Array(2*a);for(t=n=0;t<a;)if((i=e[t++])<128)u[n++]=i;else if(4<(o=s[i]))u[n++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&t<a;)i=i<<6|63&e[t++],o--;1<o?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return u.length!==n&&(u.subarray?u=u.subarray(0,n):u.length=n),r.applyFromCharCode(u)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(c,a),c.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=t;(t=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),t.set(o,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}(t),u=t;a!==t.length&&(i.uint8array?(u=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(u=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:n.utf8decode(u),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(l,a),l.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),i=e("./base64"),o=e("./nodejsUtils"),a=e("set-immediate-shim"),s=e("./external");function u(e){return e}function c(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(e,t,n){var r=[],i=0,o=e.length;if(o<=n)return String.fromCharCode.apply(null,e);for(;i<o;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function f(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=l.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=l.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return l.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return l.stringifyByChar(e)}function d(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=f;var h={};h.string={string:u,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return h.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,o.allocBuffer(e.length))}},h.array={string:f,array:u,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},h.arraybuffer={string:function(e){return f(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:u,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},h.uint8array={string:f,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:u,nodebuffer:function(e){return o.newBufferFrom(e)}},h.nodebuffer={string:f,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return h.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:u},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return h[r][e](t)},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&o.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){a((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,o,a,u){return s.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var l=n.getTypeOf(t);return l?("arraybuffer"===l?t=n.transformTo("uint8array",t):"string"===l&&(u?t=i.decode(t):o&&!0!==a&&(t=function(e){return c(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./signature"),a=e("./zipEntry"),s=(e("./utf8"),e("./support"));function u(e){this.files=[],this.loadOptions=e}u.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./compressedObject"),a=e("./crc32"),s=e("./utf8"),u=e("./compressions"),c=e("./support");function l(e,t){this.options=e,this.loadOptions=t}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in u)if(u.hasOwnProperty(t)&&u[t].magic===e)return u[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var o=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),a=e("./utf8"),s=e("./compressedObject"),u=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var o=!this._dataBinary;o&&!r&&(t=t.pipe(new a.Utf8EncodeWorker)),!o&&r&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new u("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<c.length;f++)r.prototype[c[f]]=l;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(l),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var u=new e.MessageChannel;u.port1.onmessage=l,n=function(){u.port2.postMessage(0)}}var c=[];function l(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==i&&h(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return o.reject(e,r)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var a=p((function(){t(i,r)}));"error"===a.status&&r(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(i);return this.state!==u?f(n,this.state===s?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){o.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=p(d,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return o.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,u=-1,c=new this(i);++u<n;)l(e[u],u);return c;function l(e,i){t.resolve(e).then((function(e){a[i]=e,++s!==n||r||(r=!0,o.resolve(c,a))}),(function(e){r||(r=!0,o.reject(c,e))}))}},c.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r,a=-1,s=new this(i);++a<t;)r=e[a],this.resolve(r).then((function(e){n||(n=!0,o.resolve(s,e))}),(function(e){n||(n=!0,o.reject(s,e))}));return s}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),u=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(a[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var l;if(l="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=r.deflateSetDictionary(this.strm,l)))throw new Error(a[n]);this._dict_set=!0}}function l(e,t){var n=new c(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}c.prototype.push=function(e,t){var n,a,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===u.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(c),s.next_out=0,s.avail_out=c),1!==(n=r.deflate(s,a))&&0!==n)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==a||(this.onEnd(0),!(s.avail_out=0))},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=c,n.deflate=l,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,l(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,l(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),u=e("./zlib/zstream"),c=e("./zlib/gzheader"),l=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function d(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}f.prototype.push=function(e,t){var n,s,u,c,f,d,h=this.strm,p=this.options.chunkSize,m=this.options.dictionary,v=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?h.input=o.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(p),h.next_out=0,h.avail_out=p),(n=r.inflate(h,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(d="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===l.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,d)),n===a.Z_BUF_ERROR&&!0===v&&(n=a.Z_OK,v=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&n!==a.Z_STREAM_END&&(0!==h.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(h.output,h.next_out),c=h.next_out-u,f=o.buf2string(h.output,u),h.next_out=c,h.avail_out=p-c,c&&i.arraySet(h.output,h.output,u,c,0),this.onData(f)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(v=!0)}while((0<h.avail_in||0===h.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(h.avail_out=0))},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=f,n.inflate=d,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},n.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function u(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,n.string2buf=function(e){var t,n,i,o,a,s=e.length,u=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(u),o=a=0;a<u;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t},n.buf2binstring=function(e){return u(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,o,s=t||e.length,c=new Array(2*s);for(n=r=0;n<s;)if((i=e[n++])<128)c[r++]=i;else if(4<(o=a[i]))c[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<s;)i=i<<6|63&e[n++],o--;1<o?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return u(c,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(i=i+t[r++]|0)|0,--a;);i%=65521,o%=65521}return i|o<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),o=e("./trees"),a=e("./adler32"),s=e("./crc32"),u=e("./messages"),c=-2,l=258,f=262,d=113;function h(e,t){return e.msg=u[t],t}function p(e){return(e<<1)-(4<e?9:0)}function m(e){for(var t=e.length;0<=--t;)e[t]=0}function v(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function y(e,t){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,v(e.strm)}function g(e,t){e.pending_buf[e.pending++]=t}function b(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function w(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-f?e.strstart-(e.w_size-f):0,c=e.window,d=e.w_mask,h=e.prev,p=e.strstart+l,m=c[o+a-1],v=c[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(n=t)+a]===v&&c[n+a-1]===m&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<p);if(r=l-(p-o),o=p-l,a<r){if(e.match_start=t,s<=(a=r))break;m=c[o+a-1],v=c[o+a]}}}while((t=h[t&d])>u&&0!=--i);return a<=e.lookahead?a:e.lookahead}function _(e){var t,n,r,o,u,c,l,d,h,p,m=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-f)){for(i.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;r=e.head[--t],e.head[t]=m<=r?r-m:0,--n;);for(t=n=m;r=e.prev[--t],e.prev[t]=m<=r?r-m:0,--n;);o+=m}if(0===e.strm.avail_in)break;if(c=e.strm,l=e.window,d=e.strstart+e.lookahead,p=void 0,(h=o)<(p=c.avail_in)&&(p=h),n=0===p?0:(c.avail_in-=p,i.arraySet(l,c.input,c.next_in,p,d),1===c.state.wrap?c.adler=a(c.adler,l,p,d):2===c.state.wrap&&(c.adler=s(c.adler,l,p,d)),c.next_in+=p,c.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=3)for(u=e.strstart-e.insert,e.ins_h=e.window[u],e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+3-1])&e.hash_mask,e.prev[u&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=u,u++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<f&&0!==e.strm.avail_in)}function O(e,t){for(var n,r;;){if(e.lookahead<f){if(_(e),e.lookahead<f&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-f&&(e.match_length=w(e,n)),e.match_length>=3)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}function C(e,t){for(var n,r,i;;){if(e.lookahead<f){if(_(e),e.lookahead<f&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-f&&(e.match_length=w(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-3,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(y(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&y(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}function S(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function k(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:d,e.adler=2===t.wrap?0:1,t.last_flush=0,o._tr_init(t),0):h(e,c)}function E(e){var t=k(e);return 0===t&&function(e){e.window_size=2*e.w_size,m(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function T(e,t,n,r,o,a){if(!e)return c;var s=1;if(-1===t&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),o<1||9<o||8!==n||r<8||15<r||t<0||9<t||a<0||4<a)return h(e,c);8===r&&(r=9);var u=new x;return(e.state=u).strm=e,u.wrap=s,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=a,u.method=n,E(e)}r=[new S(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(_(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,y(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-f&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(y(e,!1),e.strm.avail_out),1)})),new S(4,4,8,4,O),new S(4,5,16,8,O),new S(4,6,32,32,O),new S(4,4,16,16,C),new S(8,16,32,32,C),new S(8,16,128,128,C),new S(8,32,128,256,C),new S(32,128,258,1024,C),new S(32,258,258,4096,C)],n.deflateInit=function(e,t){return T(e,t,8,15,8,0)},n.deflateInit2=T,n.deflateReset=E,n.deflateResetKeep=k,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?c:(e.state.gzhead=t,0):c},n.deflate=function(e,t){var n,i,a,u;if(!e||!e.state||5<t||t<0)return e?h(e,c):c;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return h(e,0===e.avail_out?-5:c);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,g(i,31),g(i,139),g(i,8),i.gzhead?(g(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),g(i,255&i.gzhead.time),g(i,i.gzhead.time>>8&255),g(i,i.gzhead.time>>16&255),g(i,i.gzhead.time>>24&255),g(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),g(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(g(i,255&i.gzhead.extra.length),g(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(g(i,0),g(i,0),g(i,0),g(i,0),g(i,0),g(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),g(i,3),i.status=d);else{var f=8+(i.w_bits-8<<4)<<8;f|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(f|=32),f+=31-f%31,i.status=d,b(i,f),0!==i.strstart&&(b(i,e.adler>>>16),b(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),v(e),a=i.pending,i.pending!==i.pending_buf_size));)g(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),v(e),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,g(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),v(e),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,g(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&v(e),i.pending+2<=i.pending_buf_size&&(g(i,255&e.adler),g(i,e.adler>>8&255),e.adler=0,i.status=d)):i.status=d),0!==i.pending){if(v(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&p(t)<=p(n)&&4!==t)return h(e,-5);if(666===i.status&&0!==e.avail_in)return h(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var w=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(_(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,r,i,a,s=e.window;;){if(e.lookahead<=l){if(_(e),e.lookahead<=l&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=e.strstart+l;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);e.match_length=l-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=o._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}(i,t):r[i.level].func(i,t);if(3!==w&&4!==w||(i.status=666),1===w||3===w)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===w&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(m(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),v(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(g(i,255&e.adler),g(i,e.adler>>8&255),g(i,e.adler>>16&255),g(i,e.adler>>24&255),g(i,255&e.total_in),g(i,e.total_in>>8&255),g(i,e.total_in>>16&255),g(i,e.total_in>>24&255)):(b(i,e.adler>>>16),b(i,65535&e.adler)),v(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},n.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==d&&666!==t?h(e,c):(e.state=null,t===d?h(e,-3):0):c},n.deflateSetDictionary=function(e,t){var n,r,o,s,u,l,f,d,h=t.length;if(!e||!e.state)return c;if(2===(s=(n=e.state).wrap)||1===s&&42!==n.status||n.lookahead)return c;for(1===s&&(e.adler=a(e.adler,t,h,0)),n.wrap=0,h>=n.w_size&&(0===s&&(m(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new i.Buf8(n.w_size),i.arraySet(d,t,h-n.w_size,n.w_size,0),t=d,h=n.w_size),u=e.avail_in,l=e.next_in,f=e.input,e.avail_in=h,e.next_in=0,e.input=t,_(n);n.lookahead>=3;){for(r=n.strstart,o=n.lookahead-2;n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--o;);n.strstart=r,n.lookahead=2,_(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=l,e.input=f,e.avail_in=u,n.wrap=s,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,o,a,s,u,c,l,f,d,h,p,m,v,y,g,b,w,_,O,C,S,x,k;n=e.state,r=e.next_in,x=e.input,i=r+(e.avail_in-5),o=e.next_out,k=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),u=n.dmax,c=n.wsize,l=n.whave,f=n.wnext,d=n.window,h=n.hold,p=n.bits,m=n.lencode,v=n.distcode,y=(1<<n.lenbits)-1,g=(1<<n.distbits)-1;e:do{p<15&&(h+=x[r++]<<p,p+=8,h+=x[r++]<<p,p+=8),b=m[h&y];t:for(;;){if(h>>>=w=b>>>24,p-=w,0==(w=b>>>16&255))k[o++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=m[(65535&b)+(h&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}_=65535&b,(w&=15)&&(p<w&&(h+=x[r++]<<p,p+=8),_+=h&(1<<w)-1,h>>>=w,p-=w),p<15&&(h+=x[r++]<<p,p+=8,h+=x[r++]<<p,p+=8),b=v[h&g];n:for(;;){if(h>>>=w=b>>>24,p-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=v[(65535&b)+(h&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(O=65535&b,p<(w&=15)&&(h+=x[r++]<<p,(p+=8)<w&&(h+=x[r++]<<p,p+=8)),u<(O+=h&(1<<w)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=w,p-=w,(w=o-a)<O){if(l<(w=O-w)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(S=d,(C=0)===f){if(C+=c-w,w<_){for(_-=w;k[o++]=d[C++],--w;);C=o-O,S=k}}else if(f<w){if(C+=c+f-w,(w-=f)<_){for(_-=w;k[o++]=d[C++],--w;);if(C=0,f<_){for(_-=w=f;k[o++]=d[C++],--w;);C=o-O,S=k}}}else if(C+=f-w,w<_){for(_-=w;k[o++]=d[C++],--w;);C=o-O,S=k}for(;2<_;)k[o++]=S[C++],k[o++]=S[C++],k[o++]=S[C++],_-=3;_&&(k[o++]=S[C++],1<_&&(k[o++]=S[C++]))}else{for(C=o-O;k[o++]=k[C++],k[o++]=k[C++],k[o++]=k[C++],2<(_-=3););_&&(k[o++]=k[C++],1<_&&(k[o++]=k[C++]))}break}}break}}while(r<i&&o<s);r-=_=p>>3,h&=(1<<(p-=_<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=h,n.bits=p}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),a=e("./inffast"),s=e("./inftrees"),u=-2;function c(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):u}function d(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,f(e)):u}function h(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?u:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,d(e))):u}function p(e,t){var n,r;return e?(r=new l,(e.state=r).window=null,0!==(n=h(e,t))&&(e.state=null),n):u}var m,v,y=!0;function g(e){if(y){var t;for(m=new r.Buf32(512),v=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,v,0,e.work,{bits:5}),y=!1}e.lencode=m,e.lenbits=9,e.distcode=v,e.distbits=5}function b(e,t,n,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i<(o=a.wsize-a.wnext)&&(o=i),r.arraySet(a.window,t,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}n.inflateReset=d,n.inflateReset2=h,n.inflateResetKeep=f,n.inflateInit=function(e){return p(e,15)},n.inflateInit2=p,n.inflate=function(e,t){var n,l,f,d,h,p,m,v,y,w,_,O,C,S,x,k,E,T,P,A,M,j,D,I,R=0,L=new r.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return u;12===(n=e.state).mode&&(n.mode=13),h=e.next_out,f=e.output,m=e.avail_out,d=e.next_in,l=e.input,p=e.avail_in,v=n.hold,y=n.bits,w=p,_=m,j=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;y<16;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}if(2&n.wrap&&35615===v){L[n.check=0]=255&v,L[1]=v>>>8&255,n.check=o(n.check,L,2,0),y=v=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&v)<<8)+(v>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&v)){e.msg="unknown compression method",n.mode=30;break}if(y-=4,M=8+(15&(v>>>=4)),0===n.wbits)n.wbits=M;else if(M>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<M,e.adler=n.check=1,n.mode=512&v?10:12,y=v=0;break;case 2:for(;y<16;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}if(n.flags=v,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=v>>8&1),512&n.flags&&(L[0]=255&v,L[1]=v>>>8&255,n.check=o(n.check,L,2,0)),y=v=0,n.mode=3;case 3:for(;y<32;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}n.head&&(n.head.time=v),512&n.flags&&(L[0]=255&v,L[1]=v>>>8&255,L[2]=v>>>16&255,L[3]=v>>>24&255,n.check=o(n.check,L,4,0)),y=v=0,n.mode=4;case 4:for(;y<16;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}n.head&&(n.head.xflags=255&v,n.head.os=v>>8),512&n.flags&&(L[0]=255&v,L[1]=v>>>8&255,n.check=o(n.check,L,2,0)),y=v=0,n.mode=5;case 5:if(1024&n.flags){for(;y<16;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}n.length=v,n.head&&(n.head.extra_len=v),512&n.flags&&(L[0]=255&v,L[1]=v>>>8&255,n.check=o(n.check,L,2,0)),y=v=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(p<(O=n.length)&&(O=p),O&&(n.head&&(M=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,l,d,O,M)),512&n.flags&&(n.check=o(n.check,l,O,d)),p-=O,d+=O,n.length-=O),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===p)break e;for(O=0;M=l[d+O++],n.head&&M&&n.length<65536&&(n.head.name+=String.fromCharCode(M)),M&&O<p;);if(512&n.flags&&(n.check=o(n.check,l,O,d)),p-=O,d+=O,M)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===p)break e;for(O=0;M=l[d+O++],n.head&&M&&n.length<65536&&(n.head.comment+=String.fromCharCode(M)),M&&O<p;);if(512&n.flags&&(n.check=o(n.check,l,O,d)),p-=O,d+=O,M)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;y<16;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}if(v!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}y=v=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;y<32;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}e.adler=n.check=c(v),y=v=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=h,e.avail_out=m,e.next_in=d,e.avail_in=p,n.hold=v,n.bits=y,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){v>>>=7&y,y-=7&y,n.mode=27;break}for(;y<3;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}switch(n.last=1&v,y-=1,3&(v>>>=1)){case 0:n.mode=14;break;case 1:if(g(n),n.mode=20,6!==t)break;v>>>=2,y-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}v>>>=2,y-=2;break;case 14:for(v>>>=7&y,y-=7&y;y<32;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}if((65535&v)!=(v>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&v,y=v=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(O=n.length){if(p<O&&(O=p),m<O&&(O=m),0===O)break e;r.arraySet(f,l,d,O,h),p-=O,d+=O,m-=O,h+=O,n.length-=O;break}n.mode=12;break;case 17:for(;y<14;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}if(n.nlen=257+(31&v),v>>>=5,y-=5,n.ndist=1+(31&v),v>>>=5,y-=5,n.ncode=4+(15&v),v>>>=4,y-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;y<3;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}n.lens[B[n.have++]]=7&v,v>>>=3,y-=3}for(;n.have<19;)n.lens[B[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,D={bits:n.lenbits},j=s(0,n.lens,0,19,n.lencode,0,n.work,D),n.lenbits=D.bits,j){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;k=(R=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,E=65535&R,!((x=R>>>24)<=y);){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}if(E<16)v>>>=x,y-=x,n.lens[n.have++]=E;else{if(16===E){for(I=x+2;y<I;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}if(v>>>=x,y-=x,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}M=n.lens[n.have-1],O=3+(3&v),v>>>=2,y-=2}else if(17===E){for(I=x+3;y<I;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}y-=x,M=0,O=3+(7&(v>>>=x)),v>>>=3,y-=3}else{for(I=x+7;y<I;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}y-=x,M=0,O=11+(127&(v>>>=x)),v>>>=7,y-=7}if(n.have+O>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;O--;)n.lens[n.have++]=M}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,D={bits:n.lenbits},j=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,D),n.lenbits=D.bits,j){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,D={bits:n.distbits},j=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,D),n.distbits=D.bits,j){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=p&&258<=m){e.next_out=h,e.avail_out=m,e.next_in=d,e.avail_in=p,n.hold=v,n.bits=y,a(e,_),h=e.next_out,f=e.output,m=e.avail_out,d=e.next_in,l=e.input,p=e.avail_in,v=n.hold,y=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;k=(R=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,E=65535&R,!((x=R>>>24)<=y);){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}if(k&&0==(240&k)){for(T=x,P=k,A=E;k=(R=n.lencode[A+((v&(1<<T+P)-1)>>T)])>>>16&255,E=65535&R,!(T+(x=R>>>24)<=y);){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}v>>>=T,y-=T,n.back+=T}if(v>>>=x,y-=x,n.back+=x,n.length=E,0===k){n.mode=26;break}if(32&k){n.back=-1,n.mode=12;break}if(64&k){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&k,n.mode=22;case 22:if(n.extra){for(I=n.extra;y<I;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}n.length+=v&(1<<n.extra)-1,v>>>=n.extra,y-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;k=(R=n.distcode[v&(1<<n.distbits)-1])>>>16&255,E=65535&R,!((x=R>>>24)<=y);){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}if(0==(240&k)){for(T=x,P=k,A=E;k=(R=n.distcode[A+((v&(1<<T+P)-1)>>T)])>>>16&255,E=65535&R,!(T+(x=R>>>24)<=y);){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}v>>>=T,y-=T,n.back+=T}if(v>>>=x,y-=x,n.back+=x,64&k){e.msg="invalid distance code",n.mode=30;break}n.offset=E,n.extra=15&k,n.mode=24;case 24:if(n.extra){for(I=n.extra;y<I;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}n.offset+=v&(1<<n.extra)-1,v>>>=n.extra,y-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===m)break e;if(O=_-m,n.offset>O){if((O=n.offset-O)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}C=O>n.wnext?(O-=n.wnext,n.wsize-O):n.wnext-O,O>n.length&&(O=n.length),S=n.window}else S=f,C=h-n.offset,O=n.length;for(m<O&&(O=m),m-=O,n.length-=O;f[h++]=S[C++],--O;);0===n.length&&(n.mode=21);break;case 26:if(0===m)break e;f[h++]=n.length,m--,n.mode=21;break;case 27:if(n.wrap){for(;y<32;){if(0===p)break e;p--,v|=l[d++]<<y,y+=8}if(_-=m,e.total_out+=_,n.total+=_,_&&(e.adler=n.check=n.flags?o(n.check,f,_,h-_):i(n.check,f,_,h-_)),_=m,(n.flags?v:c(v))!==n.check){e.msg="incorrect data check",n.mode=30;break}y=v=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;y<32;){if(0===p)break e;p--,v+=l[d++]<<y,y+=8}if(v!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}y=v=0}n.mode=29;case 29:j=1;break e;case 30:j=-3;break e;case 31:return-4;case 32:default:return u}return e.next_out=h,e.avail_out=m,e.next_in=d,e.avail_in=p,n.hold=v,n.bits=y,(n.wsize||_!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&b(e,e.output,e.next_out,_-e.avail_out)?(n.mode=31,-4):(w-=e.avail_in,_-=e.avail_out,e.total_in+=w,e.total_out+=_,n.total+=_,n.wrap&&_&&(e.adler=n.check=n.flags?o(n.check,f,_,e.next_out-_):i(n.check,f,_,e.next_out-_)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==w&&0===_||4===t)&&0===j&&(j=-5),j)},n.inflateEnd=function(e){if(!e||!e.state)return u;var t=e.state;return t.window&&(t.window=null),e.state=null,0},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?u:((n.head=t).done=!1,0):u},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?u:11===n.mode&&i(1,t,r,0)!==n.check?-3:b(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):u},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,u,c,l,f,d){var h,p,m,v,y,g,b,w,_,O=d.bits,C=0,S=0,x=0,k=0,E=0,T=0,P=0,A=0,M=0,j=0,D=null,I=0,R=new r.Buf16(16),L=new r.Buf16(16),B=null,N=0;for(C=0;C<=15;C++)R[C]=0;for(S=0;S<u;S++)R[t[n+S]]++;for(E=O,k=15;1<=k&&0===R[k];k--);if(k<E&&(E=k),0===k)return c[l++]=20971520,c[l++]=20971520,d.bits=1,0;for(x=1;x<k&&0===R[x];x++);for(E<x&&(E=x),C=A=1;C<=15;C++)if(A<<=1,(A-=R[C])<0)return-1;if(0<A&&(0===e||1!==k))return-1;for(L[1]=0,C=1;C<15;C++)L[C+1]=L[C]+R[C];for(S=0;S<u;S++)0!==t[n+S]&&(f[L[t[n+S]]++]=S);if(g=0===e?(D=B=f,19):1===e?(D=i,I-=257,B=o,N-=257,256):(D=a,B=s,-1),C=x,y=l,P=S=j=0,m=-1,v=(M=1<<(T=E))-1,1===e&&852<M||2===e&&592<M)return 1;for(;;){for(b=C-P,_=f[S]<g?(w=0,f[S]):f[S]>g?(w=B[N+f[S]],D[I+f[S]]):(w=96,0),h=1<<C-P,x=p=1<<T;c[y+(j>>P)+(p-=h)]=b<<24|w<<16|_|0,0!==p;);for(h=1<<C-1;j&h;)h>>=1;if(0!==h?(j&=h-1,j+=h):j=0,S++,0==--R[C]){if(C===k)break;C=t[n+f[S]]}if(E<C&&(j&v)!==m){for(0===P&&(P=E),y+=x,A=1<<(T=C-P);T+P<k&&!((A-=R[T+P])<=0);)T++,A<<=1;if(M+=1<<T,1===e&&852<M||2===e&&592<M)return 1;c[m=j&v]=E<<24|T<<16|y-l|0}}return 0!==j&&(c[y+j]=C-P<<24|64<<16|0),d.bits=E,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common");function i(e){for(var t=e.length;0<=--t;)e[t]=0}var o=256,a=286,s=30,u=15,c=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],l=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=new Array(576);i(h);var p=new Array(60);i(p);var m=new Array(512);i(m);var v=new Array(256);i(v);var y=new Array(29);i(y);var g,b,w,_=new Array(s);function O(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function C(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function S(e){return e<256?m[e]:m[256+(e>>>7)]}function x(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function k(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,x(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function E(e,t,n){k(e,n[2*t],n[2*t+1])}function T(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function P(e,t,n){var r,i,o=new Array(16),a=0;for(r=1;r<=u;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=T(o[s]++,s))}}function A(e){var t;for(t=0;t<a;t++)e.dyn_ltree[2*t]=0;for(t=0;t<s;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function M(e){8<e.bi_valid?x(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function j(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function D(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&j(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!j(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function I(e,t,n){var r,i,a,s,u=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],i=e.pending_buf[e.l_buf+u],u++,0===r?E(e,i,t):(E(e,(a=v[i])+o+1,t),0!==(s=c[a])&&k(e,i-=y[a],s),E(e,a=S(--r),n),0!==(s=l[a])&&k(e,r-=_[a],s)),u<e.last_lit;);E(e,256,t)}function R(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==o[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=l,n=e.heap_len>>1;1<=n;n--)D(e,o,n);for(i=c;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],D(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,D(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,s,c=t.dyn_tree,l=t.max_code,f=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,m=t.stat_desc.max_length,v=0;for(o=0;o<=u;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)m<(o=c[2*c[2*(r=e.heap[n])+1]+1]+1)&&(o=m,v++),c[2*r+1]=o,l<r||(e.bl_count[o]++,a=0,p<=r&&(a=h[r-p]),s=c[2*r],e.opt_len+=s*(o+a),d&&(e.static_len+=s*(f[2*r+1]+a)));if(0!==v){do{for(o=m-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[m]--,v-=2}while(0<v);for(o=m;0!==o;o--)for(r=e.bl_count[o];0!==r;)l<(i=e.heap[--n])||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}(e,t),P(o,l,e.bl_count)}function L(e,t,n){var r,i,o=-1,a=t[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<u&&i===a||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=i,c=(s=0)===a?(u=138,3):i===a?(u=6,3):(u=7,4))}function B(e,t,n){var r,i,o=-1,a=t[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<u&&i===a)){if(s<c)for(;E(e,i,e.bl_tree),0!=--s;);else 0!==i?(i!==o&&(E(e,i,e.bl_tree),s--),E(e,16,e.bl_tree),k(e,s-3,2)):s<=10?(E(e,17,e.bl_tree),k(e,s-3,3)):(E(e,18,e.bl_tree),k(e,s-11,7));o=i,c=(s=0)===a?(u=138,3):i===a?(u=6,3):(u=7,4)}}i(_);var N=!1;function U(e,t,n,i){k(e,0+(i?1:0),3),function(e,t,n,i){M(e),x(e,n),x(e,~n),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}n._tr_init=function(e){N||(function(){var e,t,n,r,i,o=new Array(16);for(r=n=0;r<28;r++)for(y[r]=n,e=0;e<1<<c[r];e++)v[n++]=r;for(v[n-1]=r,r=i=0;r<16;r++)for(_[r]=i,e=0;e<1<<l[r];e++)m[i++]=r;for(i>>=7;r<s;r++)for(_[r]=i<<7,e=0;e<1<<l[r]-7;e++)m[256+i++]=r;for(t=0;t<=u;t++)o[t]=0;for(e=0;e<=143;)h[2*e+1]=8,e++,o[8]++;for(;e<=255;)h[2*e+1]=9,e++,o[9]++;for(;e<=279;)h[2*e+1]=7,e++,o[7]++;for(;e<=287;)h[2*e+1]=8,e++,o[8]++;for(P(h,287,o),e=0;e<s;e++)p[2*e+1]=5,p[2*e]=T(e,5);g=new O(h,c,257,a,u),b=new O(p,l,0,s,u),w=new O(new Array(0),f,0,19,7)}(),N=!0),e.l_desc=new C(e.dyn_ltree,g),e.d_desc=new C(e.dyn_dtree,b),e.bl_desc=new C(e.bl_tree,w),e.bi_buf=0,e.bi_valid=0,A(e)},n._tr_stored_block=U,n._tr_flush_block=function(e,t,n,r){var i,a,s=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<o;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),R(e,e.l_desc),R(e,e.d_desc),s=function(e){var t;for(L(e,e.dyn_ltree,e.l_desc.max_code),L(e,e.dyn_dtree,e.d_desc.max_code),R(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*d[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?U(e,t,n,r):4===e.strategy||a===i?(k(e,2+(r?1:0),3),I(e,h,p)):(k(e,4+(r?1:0),3),function(e,t,n,r){var i;for(k(e,t-257,5),k(e,n-1,5),k(e,r-4,4),i=0;i<r;i++)k(e,e.bl_tree[2*d[i]+1],3);B(e,e.dyn_ltree,t-1),B(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),I(e,e.dyn_ltree,e.dyn_dtree)),A(e),r&&M(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(v[n]+o+1)]++,e.dyn_dtree[2*S(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){k(e,2,3),E(e,256,h),function(e){16===e.bi_valid?(x(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){"use strict";t.exports="function"==typeof r?r:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}},{}]},{},[10])(10)}).call(this,n(703).Buffer,n(68),n(226).setImmediate)},function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n(32);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,n,i,u=s(c);function c(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),u.call(this,"Value cannot be null. (Parameter name: '".concat(e,"')"),r.a.ArgumentNull,!1,t)}return t=c,n&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(r.c);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,n,i,o=p(a);function a(e,t,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(i=o.call(this,e,r.a.FileDataDocumentLoad,!1,n)).fileData=t,i}return t=a,n&&d(t.prototype,n),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(r.c),g=n(94);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){w(o,r,i,a,s,"next",e)}function s(e){w(o,r,i,a,s,"throw",e)}a(void 0)}))}}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){var t="function"==typeof Map?new Map:void 0;return(E=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return T(e,arguments,M(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),A(r,e)})(e)}function T(e,t,n){return(T=P()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&A(i,n.prototype),i}).apply(null,arguments)}function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(i,e);var t,n,r=(t=i,n=P(),function(){var e,r=M(t);if(n){var i=M(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return k(this,e)});function i(e,t){var n;return x(this,i),(n=r.call(this,"[".concat(e,"] ").concat(t))).status=e,n.statusText=t,n}return S(i)}(E(Error)),D=function(){function e(t,n,r,i,o){var a=this;x(this,e),this.storage=t,this.storageResolver=n,this.apiHost=r,this.apiHeaders=i,this.sourceId=o,O(this,"runningJobs",new Map),O(this,"expirationReason",void 0),n.on("COMPLETED",(function(e){return a.setStorageData(e.payload)})),n.on("PENDING",(function(e){"refresh"===e.reason&&(a.expirationReason="timeout",a.isStorageExpired=!0)}))}var t,n,i,o,a,s;return S(e,[{key:"isStorageExpired",get:function(){return this.storage.isExpired},set:function(e){this.storage.isExpired=e}},{key:"loadDocument",value:(s=_(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getFileData(t,n),e.next=3,this.loadDocumentByFileData(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"loadDocumentsByType",value:(a=_(regeneratorRuntime.mark((function e(t){var n,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new l("fileType");case 2:return n=this.storage.files.filter((function(e){return e.fileType===t})),e.next=5,Promise.allSettled(n.map((function(e){return i.loadDocumentByFileData(e)})));case 5:return r=e.sent,e.abrupt("return",r.map((function(e){return"fulfilled"===e.status?e.value:e.reason})));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"loadDocumentByFileData",value:(o=_(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new l("fileData");case 2:return e.prev=2,e.next=5,null!==(n=this.getRunningJob(t))&&void 0!==n?n:this.runFetchWithRetries(t);case 5:return r=e.sent,e.abrupt("return",r);case 9:throw e.prev=9,e.t0=e.catch(2),this.clearRunningJob(t),new y("File data loading unexpected error.",t,e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e){return o.apply(this,arguments)})},{key:"setStorageData",value:function(e){var t=this.storage;e.hasOwnProperty("expirationTime")&&(t.expirationTime=e.expirationTime),e.hasOwnProperty("files")?t.files?e.files.forEach((function(e){var n=t.files.find((function(t){return r=e,!(n=t)&&!r||!(!n||!r)&&n.fileType===r.fileType&&n.originalName===r.originalName;var n,r}));n?n.dataFileUrl=e.dataFileUrl:t.files.push(e)})):t.files=e.files:t.files||(t.files=[]),e.hasOwnProperty("hasAlternatePath")&&(t.hasAlternatePath=e.hasAlternatePath),this.isStorageExpired=!1}},{key:"getFileData",value:function(e,t){if(!e)throw new l("originalName");if(!t)throw new l("fileType");var n=this.storage.files.find((function(n){return n.fileType===t&&n.originalName===e}));if(!n)throw new y("Data is undefined.",{originalName:e,fileType:t,dataFileUrl:""});if(!n.dataFileUrl)throw new y("Url is undefined.",n);return n}},{key:"runFetchWithRetries",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=this.runJob(e,t);return this.setRunningJob(e,n),n}},{key:"runJob",value:(i=_(regeneratorRuntime.mark((function e(t,n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refreshStorage();case 2:return i=!1,e.prev=3,e.prev=4,e.next=7,this.fetchWithRetries(t,n,i);case 7:return e.abrupt("return",e.sent);case 10:if(e.prev=10,e.t0=e.catch(4),!this.storage.hasAlternatePath){e.next=17;break}return i=!0,e.next=16,this.fetchWithRetries(t,n,i);case 16:return e.abrupt("return",e.sent);case 17:throw e.t0;case 18:e.next=39;break;case 20:if(e.prev=20,e.t1=e.catch(3),!(e.t1 instanceof j)){e.next=38;break}e.t2=e.t1.status,e.next=401===e.t2?26:403===e.t2?28:404===e.t2?34:38;break;case 26:return window.__CORE__.bus.emit("unAuthorized"),e.abrupt("break",38);case 28:if(!n||i){e.next=33;break}return this.storageResolver.refresh(),e.next=32,this.runJob(t,n-1);case 32:return e.abrupt("return",e.sent);case 33:return e.abrupt("break",38);case 34:throw this.storage.isExpired=!0,this.expirationReason="new",window.__CORE__.bus.emit("newDesignVersionReady"),new r.d;case 38:throw e.t1;case 39:case"end":return e.stop()}}),e,this,[[3,20],[4,10]])}))),function(e,t){return i.apply(this,arguments)})},{key:"fetchWithRetries",value:(n=_(regeneratorRuntime.mark((function e(t,n,r){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(--n,i=1e3*Math.pow(4,3-n),e.prev=2,!r){e.next=9;break}return e.next=6,fetch("".concat(this.apiHost,"/api/widget/downloadData/").concat(this.sourceId),{method:"POST",headers:Object.assign({},this.apiHeaders,{"Content-Type":"application/json"}),body:JSON.stringify({url:t.dataFileUrl})});case 6:o=e.sent,e.next=12;break;case 9:return e.next=11,fetch(t.dataFileUrl,{method:"GET"});case 11:o=e.sent;case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(2),e.t0;case 17:if(!o){e.next=26;break}if(!o.ok){e.next=20;break}return e.abrupt("return",o);case 20:e.t1=o.status,e.next=401===e.t1||403===e.t1||404===e.t1?23:24;break;case 23:throw new j(o.status,o.statusText);case 24:if(n){e.next=26;break}throw new j(o.status,o.statusText);case 26:return e.next=28,Object(g.a)(i);case 28:return e.next=30,this.runFetchWithRetries(t,n);case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}}),e,this,[[2,14]])}))),function(e,t,r){return n.apply(this,arguments)})},{key:"getRunningJob",value:function(e){var t=this.runningJobs.get(e.originalName);if(t)return t.get(e.fileType)}},{key:"setRunningJob",value:function(e,t){var n=this.runningJobs.get(e.originalName);n||(n=new Map,this.runningJobs.set(e.originalName,n)),n.set(e.fileType,t)}},{key:"clearRunningJob",value:function(e){var t=this.runningJobs.get(e.originalName);t&&t.delete(e.fileType)}},{key:"refreshStorage",value:(t=_(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.storage.isExpired){e.next=2;break}return e.abrupt("return");case 2:if("new"!==this.expirationReason){e.next=4;break}throw new r.d;case 4:if("timeout"!==this.expirationReason){e.next=7;break}return e.next=7,new Promise((function(e,n){var r=function r(){t.storageResolver.off("COMPLETED",r),t.storageResolver.off("CRASHED",r),"COMPLETED"===t.storageResolver.getState()?e():n()};t.storageResolver.on("COMPLETED",r),t.storageResolver.on("CRASHED",r),t.storageResolver.refresh()}));case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function I(e,t,n,r){var i={};return i.documentLoader=new D(i,e,t,n,r),i}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(15);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=s(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(l,e);var t,n,i,s=c(l);function l(e,t,n){var r,i,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),r=s.call(this,e,t),i=f(r),a=void 0,(o="branches")in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,r.branches=n,r}return t=l,(n=[{key:"HEAD",get:function(){var e=this.branches[this.state];return e instanceof r.a||null!=e&&e.isFsm?e:this}},{key:"addBranch",value:function(e,t){return this.branches[e]=t,this.branches}},{key:"deleteBranch",value:function(e){return this.branches.hasOwnProperty(e)&&delete this.branches[e],this.branches}},{key:"dispatch",value:function(e){return this.HEAD!==this&&this.HEAD.dispatch(e)&&a(d(l.prototype),"dispatch",this).call(this,e)||a(d(l.prototype),"dispatch",this).call(this,e)}}])&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(r.a)},,,,,,,function(e,t,n){"use strict";n(519),n(662),n(664),n(667),n(669),n(671),n(673),n(675),n(677),n(679),n(681),n(683),n(685),n(689)},function(e,t,n){n(520),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547),n(548),n(549),n(550),n(551),n(552),n(553),n(554),n(555),n(556),n(557),n(558),n(559),n(560),n(561),n(562),n(563),n(564),n(566),n(567),n(568),n(569),n(570),n(571),n(572),n(573),n(574),n(575),n(576),n(577),n(578),n(579),n(580),n(581),n(582),n(583),n(584),n(585),n(586),n(587),n(588),n(589),n(590),n(591),n(592),n(593),n(594),n(595),n(596),n(597),n(598),n(599),n(601),n(602),n(604),n(605),n(606),n(607),n(608),n(609),n(610),n(612),n(613),n(614),n(615),n(616),n(617),n(618),n(619),n(620),n(621),n(622),n(623),n(624),n(389),n(625),n(460),n(626),n(461),n(627),n(628),n(629),n(630),n(462),n(633),n(634),n(635),n(636),n(637),n(638),n(639),n(640),n(641),n(642),n(643),n(644),n(645),n(646),n(647),n(648),n(649),n(650),n(651),n(652),n(653),n(654),n(655),n(656),n(657),n(658),n(659),n(660),n(661),e.exports=n(77)},function(e,t,n){"use strict";var r=n(53),i=n(127),o=n(81),a=n(11),s=n(109),u=n(177).KEY,c=n(54),l=n(310),f=n(234),d=n(210),h=n(64),p=n(370),m=n(441),v=n(522),y=n(313),g=n(55),b=n(56),w=n(104),_=n(129),O=n(176),C=n(209),S=n(214),x=n(444),k=n(148),E=n(312),T=n(82),P=n(212),A=k.f,M=T.f,j=x.f,D=r.Symbol,I=r.JSON,R=I&&I.stringify,L=h("_hidden"),B=h("toPrimitive"),N={}.propertyIsEnumerable,U=l("symbol-registry"),F=l("symbols"),$=l("op-symbols"),V=Object.prototype,z="function"==typeof D&&!!E.f,G=r.QObject,H=!G||!G.prototype||!G.prototype.findChild,W=o&&c((function(){return 7!=S(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=A(V,t);r&&delete V[t],M(e,t,n),r&&e!==V&&M(V,t,r)}:M,Y=function(e){var t=F[e]=S(D.prototype);return t._k=e,t},q=z&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},X=function(e,t,n){return e===V&&X($,t,n),g(e),t=O(t,!0),g(n),i(F,t)?(n.enumerable?(i(e,L)&&e[L][t]&&(e[L][t]=!1),n=S(n,{enumerable:C(0,!1)})):(i(e,L)||M(e,L,C(1,{})),e[L][t]=!0),W(e,t,n)):M(e,t,n)},Z=function(e,t){g(e);for(var n,r=v(t=_(t)),i=0,o=r.length;o>i;)X(e,n=r[i++],t[n]);return e},K=function(e){var t=N.call(this,e=O(e,!0));return!(this===V&&i(F,e)&&!i($,e))&&(!(t||!i(this,e)||!i(F,e)||i(this,L)&&this[L][e])||t)},J=function(e,t){if(e=_(e),t=O(t,!0),e!==V||!i(F,t)||i($,t)){var n=A(e,t);return!n||!i(F,t)||i(e,L)&&e[L][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=j(_(e)),r=[],o=0;n.length>o;)i(F,t=n[o++])||t==L||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===V,r=j(n?$:_(e)),o=[],a=0;r.length>a;)!i(F,t=r[a++])||n&&!i(V,t)||o.push(F[t]);return o};z||(s((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===V&&t.call($,n),i(this,L)&&i(this[L],e)&&(this[L][e]=!1),W(this,e,C(1,n))};return o&&H&&W(V,e,{configurable:!0,set:t}),Y(e)}).prototype,"toString",(function(){return this._k})),k.f=J,T.f=X,n(215).f=x.f=Q,n(247).f=K,E.f=ee,o&&!n(211)&&s(V,"propertyIsEnumerable",K,!0),p.f=function(e){return Y(h(e))}),a(a.G+a.W+a.F*!z,{Symbol:D});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)h(te[ne++]);for(var re=P(h.store),ie=0;re.length>ie;)m(re[ie++]);a(a.S+a.F*!z,"Symbol",{for:function(e){return i(U,e+="")?U[e]:U[e]=D(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!z,"Object",{create:function(e,t){return void 0===t?S(e):Z(S(e),t)},defineProperty:X,defineProperties:Z,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:ee});var oe=c((function(){E.f(1)}));a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return E.f(w(e))}}),I&&a(a.S+a.F*(!z||c((function(){var e=D();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!q(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!q(t))return t}),r[1]=t,R.apply(I,r)}}),D.prototype[B]||n(128)(D.prototype,B,D.prototype.valueOf),f(D,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){e.exports=n(310)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(212),i=n(312),o=n(247);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(11);r(r.S,"Object",{create:n(214)})},function(e,t,n){var r=n(11);r(r.S+r.F*!n(81),"Object",{defineProperty:n(82).f})},function(e,t,n){var r=n(11);r(r.S+r.F*!n(81),"Object",{defineProperties:n(443)})},function(e,t,n){var r=n(129),i=n(148).f;n(149)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},function(e,t,n){var r=n(104),i=n(216);n(149)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},function(e,t,n){var r=n(104),i=n(212);n(149)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){n(149)("getOwnPropertyNames",(function(){return n(444).f}))},function(e,t,n){var r=n(56),i=n(177).onFreeze;n(149)("freeze",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(56),i=n(177).onFreeze;n(149)("seal",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(56),i=n(177).onFreeze;n(149)("preventExtensions",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(56);n(149)("isFrozen",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(56);n(149)("isSealed",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(56);n(149)("isExtensible",(function(e){return function(t){return!!r(t)&&(!e||e(t))}}))},function(e,t,n){var r=n(11);r(r.S+r.F,"Object",{assign:n(445)})},function(e,t,n){var r=n(11);r(r.S,"Object",{is:n(446)})},function(e,t,n){var r=n(11);r(r.S,"Object",{setPrototypeOf:n(374).set})},function(e,t,n){"use strict";var r=n(248),i={};i[n(64)("toStringTag")]="z",i+""!="[object z]"&&n(109)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(e,t,n){var r=n(11);r(r.P,"Function",{bind:n(447)})},function(e,t,n){var r=n(82).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(81)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(56),i=n(216),o=n(64)("hasInstance"),a=Function.prototype;o in a||n(82).f(a,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(11),i=n(449);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(e,t,n){var r=n(11),i=n(450);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){"use strict";var r=n(53),i=n(127),o=n(160),a=n(376),s=n(176),u=n(54),c=n(215).f,l=n(148).f,f=n(82).f,d=n(235).trim,h=r.Number,p=h,m=h.prototype,v="Number"==o(n(214)(m)),y="trim"in String.prototype,g=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,r,i,o=(t=y?t.trim():d(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,u=t.slice(2),c=0,l=u.length;c<l;c++)if((a=u.charCodeAt(c))<48||a>i)return NaN;return parseInt(u,r)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(v?u((function(){m.valueOf.call(n)})):"Number"!=o(n))?a(new p(g(t)),n,h):g(t)};for(var b,w=n(81)?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;w.length>_;_++)i(p,b=w[_])&&!i(h,b)&&f(h,b,l(p,b));h.prototype=m,m.constructor=h,n(109)(r,"Number",h)}},function(e,t,n){"use strict";var r=n(11),i=n(147),o=n(451),a=n(377),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*c[n],c[n]=r%1e7,r=u(r/1e7)},d=function(e){for(var t=6,n=0;--t>=0;)n+=c[t],c[t]=u(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var n=String(c[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},p=function(e,t,n){return 0===t?n:t%2==1?p(e,t-1,n*e):p(e*e,t/2,n)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(54)((function(){s.call({})}))),"Number",{toFixed:function(e){var t,n,r,s,u=o(this,l),c=i(e),m="",v="0";if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(m="-",u=-u),u>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(u*p(2,69,1))-69)<0?u*p(2,-t,1):u/p(2,t,1),n*=4503599627370496,(t=52-t)>0){for(f(0,n),r=c;r>=7;)f(1e7,0),r-=7;for(f(p(10,r,1),0),r=t-1;r>=23;)d(1<<23),r-=23;d(1<<r),f(1,1),d(2),v=h()}else f(0,n),f(1<<-t,0),v=h()+a.call("0",c);return v=c>0?m+((s=v.length)<=c?"0."+a.call("0",c-s)+v:v.slice(0,s-c)+"."+v.slice(s-c)):m+v}})},function(e,t,n){"use strict";var r=n(11),i=n(54),o=n(451),a=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(11);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(11),i=n(53).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=n(11);r(r.S,"Number",{isInteger:n(452)})},function(e,t,n){var r=n(11);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(11),i=n(452),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){var r=n(11);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(11);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(11),i=n(450);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var r=n(11),i=n(449);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var r=n(11),i=n(453),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t,n){var r=n(11),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){var r=n(11),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(11),i=n(378);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(11);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(11),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){var r=n(11),i=n(379);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,n){var r=n(11);r(r.S,"Math",{fround:n(565)})},function(e,t,n){var r=n(378),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),u=i(2,-126);e.exports=Math.fround||function(e){var t,n,i=Math.abs(e),c=r(e);return i<u?c*(i/u/a+1/o-1/o)*u*a:(n=(t=(1+a/o)*i)-(t-i))>s||n!=n?c*(1/0):c*n}},function(e,t,n){var r=n(11),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)u<(n=i(arguments[a++]))?(o=o*(r=u/n)*r+1,u=n):o+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(e,t,n){var r=n(11),i=Math.imul;r(r.S+r.F*n(54)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(11);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(11);r(r.S,"Math",{log1p:n(453)})},function(e,t,n){var r=n(11);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(11);r(r.S,"Math",{sign:n(378)})},function(e,t,n){var r=n(11),i=n(379),o=Math.exp;r(r.S+r.F*n(54)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(11),i=n(379),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var r=n(11);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(11),i=n(213),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(11),i=n(129),o=n(67);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(235)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,n){"use strict";var r=n(380)(!0);n(381)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(11),i=n(380)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(11),i=n(67),o=n(382),a="".endsWith;r(r.P+r.F*n(384)("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(t.length),s=void 0===n?r:Math.min(i(n),r),u=String(e);return a?a.call(t,u,s):t.slice(s-u.length,s)===u}})},function(e,t,n){"use strict";var r=n(11),i=n(382);r(r.P+r.F*n(384)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(11);r(r.P,"String",{repeat:n(377)})},function(e,t,n){"use strict";var r=n(11),i=n(67),o=n(382),a="".startsWith;r(r.P+r.F*n(384)("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(110)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,n){"use strict";n(110)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,n){"use strict";n(110)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,n){"use strict";n(110)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,n){"use strict";n(110)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,n){"use strict";n(110)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,n){"use strict";n(110)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,n){"use strict";n(110)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,n){"use strict";n(110)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,n){"use strict";n(110)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,n){"use strict";n(110)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,n){"use strict";n(110)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,n){"use strict";n(110)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,n){var r=n(11);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(11),i=n(104),o=n(176);r(r.P+r.F*n(54)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(11),i=n(600);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,n){"use strict";var r=n(54),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!r((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(e,t,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(109)(r,"toString",(function(){var e=o.call(this);return e==e?i.call(this):"Invalid Date"}))},function(e,t,n){var r=n(64)("toPrimitive"),i=Date.prototype;r in i||n(128)(i,r,n(603))},function(e,t,n){"use strict";var r=n(55),i=n(176);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!=e)}},function(e,t,n){var r=n(11);r(r.S,"Array",{isArray:n(313)})},function(e,t,n){"use strict";var r=n(145),i=n(11),o=n(104),a=n(455),s=n(385),u=n(67),c=n(386),l=n(387);i(i.S+i.F*!n(314)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,f,d=o(e),h="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,y=0,g=l(d);if(v&&(m=r(m,p>2?arguments[2]:void 0,2)),null==g||h==Array&&s(g))for(n=new h(t=u(d.length));t>y;y++)c(n,y,v?m(d[y],y):d[y]);else for(f=g.call(d),n=new h;!(i=f.next()).done;y++)c(n,y,v?a(f,m,[i.value,y],!0):i.value);return n.length=y,n}})},function(e,t,n){"use strict";var r=n(11),i=n(386);r(r.S+r.F*n(54)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(11),i=n(129),o=[].join;r(r.P+r.F*(n(246)!=Object||!n(133)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(11),i=n(373),o=n(160),a=n(213),s=n(67),u=[].slice;r(r.P+r.F*n(54)((function(){i&&u.call(i)})),"Array",{slice:function(e,t){var n=s(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return u.call(this,e,t);for(var i=a(e,n),c=a(t,n),l=s(c-i),f=new Array(l),d=0;d<l;d++)f[d]="String"==r?this.charAt(i+d):this[i+d];return f}})},function(e,t,n){"use strict";var r=n(11),i=n(146),o=n(104),a=n(54),s=[].sort,u=[1,2,3];r(r.P+r.F*(a((function(){u.sort(void 0)}))||!a((function(){u.sort(null)}))||!n(133)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},function(e,t,n){"use strict";var r=n(11),i=n(150)(0),o=n(133)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(56),i=n(313),o=n(64)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(11),i=n(150)(1);r(r.P+r.F*!n(133)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(11),i=n(150)(2);r(r.P+r.F*!n(133)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(11),i=n(150)(3);r(r.P+r.F*!n(133)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(11),i=n(150)(4);r(r.P+r.F*!n(133)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(11),i=n(457);r(r.P+r.F*!n(133)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(11),i=n(457);r(r.P+r.F*!n(133)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(11),i=n(311)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(133)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(11),i=n(129),o=n(147),a=n(67),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(133)(s)),"Array",{lastIndexOf:function(e){if(u)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(11);r(r.P,"Array",{copyWithin:n(458)}),n(217)("copyWithin")},function(e,t,n){var r=n(11);r(r.P,"Array",{fill:n(388)}),n(217)("fill")},function(e,t,n){"use strict";var r=n(11),i=n(150)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(217)("find")},function(e,t,n){"use strict";var r=n(11),i=n(150)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(217)(o)},function(e,t,n){n(237)("Array")},function(e,t,n){var r=n(53),i=n(376),o=n(82).f,a=n(215).f,s=n(383),u=n(315),c=r.RegExp,l=c,f=c.prototype,d=/a/g,h=/a/g,p=new c(d)!==d;if(n(81)&&(!p||n(54)((function(){return h[n(64)("match")]=!1,c(d)!=d||c(h)==h||"/a/i"!=c(d,"i")})))){c=function(e,t){var n=this instanceof c,r=s(e),o=void 0===t;return!n&&r&&e.constructor===c&&o?e:i(p?new l(r&&!o?e.source:e,t):l((r=e instanceof c)?e.source:e,r&&o?u.call(e):t),n?this:f,c)};for(var m=function(e){e in c||o(c,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})},v=a(l),y=0;v.length>y;)m(v[y++]);f.constructor=c,c.prototype=f,n(109)(r,"RegExp",c)}n(237)("RegExp")},function(e,t,n){"use strict";n(461);var r=n(55),i=n(315),o=n(81),a=/./.toString,s=function(e){n(109)(RegExp.prototype,"toString",e,!0)};n(54)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(e,t,n){"use strict";var r=n(55),i=n(67),o=n(391),a=n(316);n(317)("match",1,(function(e,t,n,s){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var u=r(e),c=String(this);if(!u.global)return a(u,c);var l=u.unicode;u.lastIndex=0;for(var f,d=[],h=0;null!==(f=a(u,c));){var p=String(f[0]);d[h]=p,""===p&&(u.lastIndex=o(c,i(u.lastIndex),l)),h++}return 0===h?null:d}]}))},function(e,t,n){"use strict";var r=n(55),i=n(104),o=n(67),a=n(147),s=n(391),u=n(316),c=Math.max,l=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g;n(317)("replace",2,(function(e,t,n,p){return[function(r,i){var o=e(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(e,t){var i=p(n,e,this,t);if(i.done)return i.value;var f=r(e),d=String(this),h="function"==typeof t;h||(t=String(t));var v=f.global;if(v){var y=f.unicode;f.lastIndex=0}for(var g=[];;){var b=u(f,d);if(null===b)break;if(g.push(b),!v)break;""===String(b[0])&&(f.lastIndex=s(d,o(f.lastIndex),y))}for(var w,_="",O=0,C=0;C<g.length;C++){b=g[C];for(var S=String(b[0]),x=c(l(a(b.index),d.length),0),k=[],E=1;E<b.length;E++)k.push(void 0===(w=b[E])?w:String(w));var T=b.groups;if(h){var P=[S].concat(k,x,d);void 0!==T&&P.push(T);var A=String(t.apply(void 0,P))}else A=m(S,d,x,k,T,t);x>=O&&(_+=d.slice(O,x)+A,O=x+S.length)}return _+d.slice(O)}];function m(e,t,r,o,a,s){var u=r+e.length,c=o.length,l=h;return void 0!==a&&(a=i(a),l=d),n.call(s,l,(function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(u);case"<":s=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return n;if(l>c){var d=f(l/10);return 0===d?n:d<=c?void 0===o[d-1]?i.charAt(1):o[d-1]+i.charAt(1):n}s=o[l-1]}return void 0===s?"":s}))}}))},function(e,t,n){"use strict";var r=n(55),i=n(446),o=n(316);n(317)("search",1,(function(e,t,n,a){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=r(e),u=String(this),c=s.lastIndex;i(c,0)||(s.lastIndex=0);var l=o(s,u);return i(s.lastIndex,c)||(s.lastIndex=c),null===l?-1:l.index}]}))},function(e,t,n){"use strict";var r=n(383),i=n(55),o=n(249),a=n(391),s=n(67),u=n(316),c=n(390),l=n(54),f=Math.min,d=[].push,h="length",p=!l((function(){RegExp(4294967295,"y")}));n(317)("split",2,(function(e,t,n,l){var m;return m="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[h]||2!="ab".split(/(?:ab)*/)[h]||4!=".".split(/(.?)(.?)/)[h]||".".split(/()()/)[h]>1||"".split(/.?/)[h]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);for(var o,a,s,u=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,p=void 0===t?4294967295:t>>>0,m=new RegExp(e.source,l+"g");(o=c.call(m,i))&&!((a=m.lastIndex)>f&&(u.push(i.slice(f,o.index)),o[h]>1&&o.index<i[h]&&d.apply(u,o.slice(1)),s=o[0][h],f=a,u[h]>=p));)m.lastIndex===o.index&&m.lastIndex++;return f===i[h]?!s&&m.test("")||u.push(""):u.push(i.slice(f)),u[h]>p?u.slice(0,p):u}:"0".split(void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var i=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):m.call(String(i),n,r)},function(e,t){var r=l(m,e,this,t,m!==n);if(r.done)return r.value;var c=i(e),d=String(this),h=o(c,RegExp),v=c.unicode,y=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(p?"y":"g"),g=new h(p?c:"^(?:"+c.source+")",y),b=void 0===t?4294967295:t>>>0;if(0===b)return[];if(0===d.length)return null===u(g,d)?[d]:[];for(var w=0,_=0,O=[];_<d.length;){g.lastIndex=p?_:0;var C,S=u(g,p?d:d.slice(_));if(null===S||(C=f(s(g.lastIndex+(p?0:_)),d.length))===w)_=a(d,_,v);else{if(O.push(d.slice(w,_)),O.length===b)return O;for(var x=1;x<=S.length-1;x++)if(O.push(S[x]),O.length===b)return O;_=w=C}}return O.push(d.slice(w)),O}]}))},function(e,t,n){var r=n(53),i=n(392).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(160)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var f=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){"use strict";var r=n(465),i=n(218);e.exports=n(320)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(465),i=n(218);e.exports=n(320)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,i=n(53),o=n(150)(0),a=n(109),s=n(177),u=n(445),c=n(466),l=n(56),f=n(218),d=n(218),h=!i.ActiveXObject&&"ActiveXObject"in i,p=s.getWeak,m=Object.isExtensible,v=c.ufstore,y=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(e){if(l(e)){var t=p(e);return!0===t?v(f(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(f(this,"WeakMap"),e,t)}},b=e.exports=n(320)("WeakMap",y,g,c,!0,!0);d&&h&&(u((r=c.getConstructor(y,"WeakMap")).prototype,g),s.NEED=!0,o(["delete","has","get","set"],(function(e){var t=b.prototype,n=t[e];a(t,e,(function(t,i){if(l(t)&&!m(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)}))})))},function(e,t,n){"use strict";var r=n(466),i=n(218);n(320)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(11),i=n(321),o=n(393),a=n(55),s=n(213),u=n(67),c=n(56),l=n(53).ArrayBuffer,f=n(249),d=o.ArrayBuffer,h=o.DataView,p=i.ABV&&l.isView,m=d.prototype.slice,v=i.VIEW;r(r.G+r.W+r.F*(l!==d),{ArrayBuffer:d}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return p&&p(e)||c(e)&&v in e}}),r(r.P+r.U+r.F*n(54)((function(){return!new d(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(e,t){if(void 0!==m&&void 0===t)return m.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(f(this,d))(u(i-r)),c=new h(this),l=new h(o),p=0;r<i;)l.setUint8(p++,c.getUint8(r++));return o}}),n(237)("ArrayBuffer")},function(e,t,n){var r=n(11);r(r.G+r.W+r.F*!n(321).ABV,{DataView:n(393).DataView})},function(e,t,n){n(162)("Int8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(162)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(162)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},function(e,t,n){n(162)("Int16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(162)("Uint16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(162)("Int32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(162)("Uint32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(162)("Float32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(162)("Float64",8,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){var r=n(11),i=n(146),o=n(55),a=(n(53).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(54)((function(){a((function(){}))})),"Reflect",{apply:function(e,t,n){var r=i(e),u=o(n);return a?a(r,t,u):s.call(r,t,u)}})},function(e,t,n){var r=n(11),i=n(214),o=n(146),a=n(55),s=n(56),u=n(54),c=n(447),l=(n(53).Reflect||{}).construct,f=u((function(){function e(){}return!(l((function(){}),[],e)instanceof e)})),d=!u((function(){l((function(){}))}));r(r.S+r.F*(f||d),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(d&&!f)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var u=n.prototype,h=i(s(u)?u:Object.prototype),p=Function.apply.call(e,h,t);return s(p)?p:h}})},function(e,t,n){var r=n(82),i=n(11),o=n(55),a=n(176);i(i.S+i.F*n(54)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(11),i=n(148).f,o=n(55);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(11),i=n(55),o=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(454)(o,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){var r=n(148),i=n(216),o=n(127),a=n(11),s=n(56),u=n(55);a(a.S,"Reflect",{get:function e(t,n){var a,c,l=arguments.length<3?t:arguments[2];return u(t)===l?t[n]:(a=r.f(t,n))?o(a,"value")?a.value:void 0!==a.get?a.get.call(l):void 0:s(c=i(t))?e(c,n,l):void 0}})},function(e,t,n){var r=n(148),i=n(11),o=n(55);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},function(e,t,n){var r=n(11),i=n(216),o=n(55);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){var r=n(11);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(11),i=n(55),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){var r=n(11);r(r.S,"Reflect",{ownKeys:n(468)})},function(e,t,n){var r=n(11),i=n(55),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){var r=n(82),i=n(148),o=n(216),a=n(127),s=n(11),u=n(209),c=n(55),l=n(56);s(s.S,"Reflect",{set:function e(t,n,s){var f,d,h=arguments.length<4?t:arguments[3],p=i.f(c(t),n);if(!p){if(l(d=o(t)))return e(d,n,s,h);p=u(0)}if(a(p,"value")){if(!1===p.writable||!l(h))return!1;if(f=i.f(h,n)){if(f.get||f.set||!1===f.writable)return!1;f.value=s,r.f(h,n,f)}else r.f(h,n,u(0,s));return!0}return void 0!==p.set&&(p.set.call(h,s),!0)}})},function(e,t,n){var r=n(11),i=n(374);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){n(663),e.exports=n(77).Array.includes},function(e,t,n){"use strict";var r=n(11),i=n(311)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(217)("includes")},function(e,t,n){n(665),e.exports=n(77).Array.flatMap},function(e,t,n){"use strict";var r=n(11),i=n(666),o=n(104),a=n(67),s=n(146),u=n(456);r(r.P,"Array",{flatMap:function(e){var t,n,r=o(this);return s(e),t=a(r.length),n=u(r,0),i(n,r,r,t,0,1,e,arguments[1]),n}}),n(217)("flatMap")},function(e,t,n){"use strict";var r=n(313),i=n(56),o=n(67),a=n(145),s=n(64)("isConcatSpreadable");e.exports=function e(t,n,u,c,l,f,d,h){for(var p,m,v=l,y=0,g=!!d&&a(d,h,3);y<c;){if(y in u){if(p=g?g(u[y],y,n):u[y],m=!1,i(p)&&(m=void 0!==(m=p[s])?!!m:r(p)),m&&f>0)v=e(t,n,p,o(p.length),v,f-1)-1;else{if(v>=9007199254740991)throw TypeError();t[v]=p}v++}y++}return v}},function(e,t,n){n(668),e.exports=n(77).String.padStart},function(e,t,n){"use strict";var r=n(11),i=n(469),o=n(319),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){n(670),e.exports=n(77).String.padEnd},function(e,t,n){"use strict";var r=n(11),i=n(469),o=n(319),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){n(672),e.exports=n(77).String.trimLeft},function(e,t,n){"use strict";n(235)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},function(e,t,n){n(674),e.exports=n(77).String.trimRight},function(e,t,n){"use strict";n(235)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},function(e,t,n){n(676),e.exports=n(370).f("asyncIterator")},function(e,t,n){n(441)("asyncIterator")},function(e,t,n){n(678),e.exports=n(77).Object.getOwnPropertyDescriptors},function(e,t,n){var r=n(11),i=n(468),o=n(129),a=n(148),s=n(386);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),u=a.f,c=i(r),l={},f=0;c.length>f;)void 0!==(n=u(r,t=c[f++]))&&s(l,t,n);return l}})},function(e,t,n){n(680),e.exports=n(77).Object.values},function(e,t,n){var r=n(11),i=n(470)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){n(682),e.exports=n(77).Object.entries},function(e,t,n){var r=n(11),i=n(470)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";n(462),n(684),e.exports=n(77).Promise.finally},function(e,t,n){"use strict";var r=n(11),i=n(77),o=n(53),a=n(249),s=n(464);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){n(686),n(687),n(688),e.exports=n(77)},function(e,t,n){var r=n(53),i=n(11),o=n(319),a=[].slice,s=/MSIE .\./.test(o),u=function(e){return function(t,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(e,t,n){var r=n(11),i=n(392);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){for(var r=n(389),i=n(212),o=n(109),a=n(53),s=n(128),u=n(236),c=n(64),l=c("iterator"),f=c("toStringTag"),d=u.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(h),m=0;m<p.length;m++){var v,y=p[m],g=h[y],b=a[y],w=b&&b.prototype;if(w&&(w[l]||s(w,l,d),w[f]||s(w,f,y),u[y]=d,g))for(v in r)w[v]||o(w,v,r[v],!0)}},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return x()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function f(){}function d(){}function h(){}var p={};p[i]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==t&&n.call(v,i)&&(p=v);var y=h.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var r;this._invoke=function(i,o){function a(){return new t((function(r,a){!function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function S(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=y.constructor=h,h.constructor=d,d.displayName=s(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(b.prototype),b.prototype[o]=function(){return this},e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(y),s(y,a,"Generator"),y[i]=function(){return this},y.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){n(691),e.exports=n(471).global},function(e,t,n){var r=n(692);r(r.G,{global:n(394)})},function(e,t,n){var r=n(394),i=n(471),o=n(693),a=n(695),s=n(702),u=function(e,t,n){var c,l,f,d=e&u.F,h=e&u.G,p=e&u.S,m=e&u.P,v=e&u.B,y=e&u.W,g=h?i:i[t]||(i[t]={}),b=g.prototype,w=h?r:p?r[t]:(r[t]||{}).prototype;for(c in h&&(n=t),n)(l=!d&&w&&void 0!==w[c])&&s(g,c)||(f=l?w[c]:n[c],g[c]=h&&"function"!=typeof w[c]?n[c]:v&&l?o(f,r):y&&w[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):m&&"function"==typeof f?o(Function.call,f):f,m&&((g.virtual||(g.virtual={}))[c]=f,e&u.R&&b&&!b[c]&&a(b,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(694);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(696),i=n(701);e.exports=n(396)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(697),i=n(698),o=n(700),a=Object.defineProperty;t.f=n(396)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(395);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(396)&&!n(472)((function(){return 7!=Object.defineProperty(n(699)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(395),i=n(394).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(395);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(704),i=n(705),o=n(706);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=d(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|h(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=s(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return E(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,d=0;d<u;d++)if(c(e,o+d)!==c(t,d)){f=!1;break}if(f)return o}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function w(e,t,n,r){return V(F(t,e.length-n),e,n,r)}function _(e,t,n,r){return V(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function O(e,t,n,r){return _(e,t,n,r)}function C(e,t,n,r){return V($(t),e,n,r)}function S(e,t,n,r){return V(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):m.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(r,i),l=e.slice(t,n),f=0;f<s;++f)if(c[f]!==l[f]){o=c[f],a=l[f];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return O(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function P(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=U(e[o]);return i}function A(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function I(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function R(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,o){return o||R(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,o){return o||R(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||j(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||j(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):I(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):I(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=u.isBuffer(e)?e:F(new u(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(68))},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),a=r[0],s=r[1],u=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(l(e,a,a+16383>s?s:a+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+h]=255&a,h+=p,a/=256,c-=8);e[n+h-p]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";n(518);var r,i=(r=n(690))&&r.__esModule?r:{default:r};i.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),i.default._babelPolyfill=!0}]]);